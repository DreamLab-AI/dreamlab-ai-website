import{s as Ne,d as i,l as r,b as t,i as G,m as ze,c as d,g as M,e as g,f as U,o as S,h as u,j as T,t as B,k as Pe,p as je,n as ee,r as He,a as X,q as se,u as De,v as Me}from"../chunks/0ZVSoAEn.js";import{S as Ae,i as Ue,t as me,a as ve,c as Be,d as Se,m as Re,b as Oe,e as qe,g as Fe}from"../chunks/DKVmOqaf.js";import{g as he}from"../chunks/CTVLmyHZ.js";import{b as re}from"../chunks/xKPZ-4ZK.js";import{p as We}from"../chunks/BdMR7A5I.js";import{g as Ye,j as Te,n as Ge,h as Je,w as Ke,R as Qe}from"../chunks/DxD0Wn3l.js";import{profileCache as Ve}from"../chunks/D7m-JnSU.js";import{g as Xe}from"../chunks/9tEgXtNp.js";import{A as Ze}from"../chunks/CxHM64pP.js";import"../chunks/B4OHgsDO.js";function et(){return Math.floor(Date.now()/1e3)}function $e(o){const e=et()-o;if(e<0)return"in the future";if(e<60)return"just now";if(e<3600){const a=Math.floor(e/60);return`${a} min${a>1?"s":""} ago`}if(e<86400){const a=Math.floor(e/3600);return`${a} hour${a>1?"s":""} ago`}if(e<604800){const a=Math.floor(e/86400);return`${a} day${a>1?"s":""} ago`}if(e<2592e3){const a=Math.floor(e/604800);return`${a} week${a>1?"s":""} ago`}if(e<31536e3){const a=Math.floor(e/2592e3);return`${a} month${a>1?"s":""} ago`}const n=Math.floor(e/31536e3);return`${n} year${n>1?"s":""} ago`}const tt=!1,nt=async({params:o})=>({noteId:o.noteId}),gt=Object.freeze(Object.defineProperty({__proto__:null,load:nt,prerender:tt},Symbol.toStringTag,{value:"Module"}));function ot(o){let s,e,n,a,v,f,b,m,E,C,I,w=$e(o[0].created_at||0)+"",h,_,V,c,$=o[0].content+"",L,P,p,x=new Date((o[0].created_at||0)*1e3).toLocaleString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"})+"",l,D,k,N,A,Z="Join the conversation",K,R,ae,pe=o[6].name+"",le,ie,ce,O,q,be=`<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path></svg>
							Create Account`,de,F,_e=`<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path></svg>
							Sign In`,ue,J,ge="Your identity is portable and you control your data.",W,fe,we;a=new Ze({props:{src:o[4],pubkey:o[0].pubkey,size:"md",alt:o[5]}});let H=o[1]?.nip05&&Le(o);return{c(){s=u("div"),e=u("div"),n=u("div"),qe(a.$$.fragment),v=T(),f=u("div"),b=u("p"),m=B(o[5]),E=T(),H&&H.c(),C=T(),I=u("div"),h=B(w),_=T(),V=u("div"),c=u("p"),L=B($),P=T(),p=u("div"),l=B(x),D=T(),k=u("div"),N=u("div"),A=u("h3"),A.textContent=Z,K=T(),R=u("p"),ae=B("Connect with the community on "),le=B(pe),ie=B(". Reply to posts, share your thoughts, and discover more content."),ce=T(),O=u("div"),q=u("button"),q.innerHTML=be,de=T(),F=u("button"),F.innerHTML=_e,ue=T(),J=u("p"),J.textContent=ge,this.h()},l(y){s=d(y,"DIV",{class:!0});var z=g(s);e=d(z,"DIV",{class:!0});var j=g(e);n=d(j,"DIV",{class:!0});var Q=g(n);Oe(a.$$.fragment,Q),v=M(Q),f=d(Q,"DIV",{class:!0});var te=g(f);b=d(te,"P",{class:!0});var ye=g(b);m=U(ye,o[5]),ye.forEach(i),E=M(te),H&&H.l(te),te.forEach(i),C=M(Q),I=d(Q,"DIV",{class:!0});var xe=g(I);h=U(xe,w),xe.forEach(i),Q.forEach(i),_=M(j),V=d(j,"DIV",{class:!0});var ke=g(V);c=d(ke,"P",{class:!0});var Ee=g(c);L=U(Ee,$),Ee.forEach(i),ke.forEach(i),P=M(j),p=d(j,"DIV",{class:!0});var Ce=g(p);l=U(Ce,x),Ce.forEach(i),j.forEach(i),z.forEach(i),D=M(y),k=d(y,"DIV",{class:!0});var Ie=g(k);N=d(Ie,"DIV",{class:!0});var Y=g(N);A=d(Y,"H3",{class:!0,"data-svelte-h":!0}),S(A)!=="svelte-ls6vd8"&&(A.textContent=Z),K=M(Y),R=d(Y,"P",{class:!0});var ne=g(R);ae=U(ne,"Connect with the community on "),le=U(ne,pe),ie=U(ne,". Reply to posts, share your thoughts, and discover more content."),ne.forEach(i),ce=M(Y),O=d(Y,"DIV",{class:!0});var oe=g(O);q=d(oe,"BUTTON",{class:!0,"data-svelte-h":!0}),S(q)!=="svelte-arwge6"&&(q.innerHTML=be),de=M(oe),F=d(oe,"BUTTON",{class:!0,"data-svelte-h":!0}),S(F)!=="svelte-tq6s8u"&&(F.innerHTML=_e),oe.forEach(i),ue=M(Y),J=d(Y,"P",{class:!0,"data-svelte-h":!0}),S(J)!=="svelte-zokczg"&&(J.textContent=ge),Y.forEach(i),Ie.forEach(i),this.h()},h(){r(b,"class","font-semibold truncate"),r(f,"class","flex-1 min-w-0"),r(I,"class","text-sm text-base-content/60"),r(n,"class","flex items-center gap-3 mb-4"),r(c,"class","whitespace-pre-wrap text-base leading-relaxed"),r(V,"class","prose prose-sm max-w-none"),r(p,"class","mt-4 pt-4 border-t border-base-200 text-sm text-base-content/60"),r(e,"class","card-body"),r(s,"class","card bg-base-100 shadow-xl mb-6"),r(A,"class","text-xl font-bold mb-2"),r(R,"class","text-base-content/70 mb-6"),r(q,"class","btn btn-primary btn-lg"),r(F,"class","btn btn-outline btn-lg"),r(O,"class","flex flex-col sm:flex-row gap-3 justify-center"),r(J,"class","text-xs text-base-content/50 mt-4"),r(N,"class","card-body text-center"),r(k,"class","card bg-gradient-to-br from-primary/10 to-secondary/10 border border-primary/20")},m(y,z){G(y,s,z),t(s,e),t(e,n),Re(a,n,null),t(n,v),t(n,f),t(f,b),t(b,m),t(f,E),H&&H.m(f,null),t(n,C),t(n,I),t(I,h),t(e,_),t(e,V),t(V,c),t(c,L),t(e,P),t(e,p),t(p,l),G(y,D,z),G(y,k,z),t(k,N),t(N,A),t(N,K),t(N,R),t(R,ae),t(R,le),t(R,ie),t(N,ce),t(N,O),t(O,q),t(O,de),t(O,F),t(N,ue),t(N,J),W=!0,fe||(we=[se(q,"click",o[8]),se(F,"click",o[7])],fe=!0)},p(y,z){const j={};z&16&&(j.src=y[4]),z&1&&(j.pubkey=y[0].pubkey),z&32&&(j.alt=y[5]),a.$set(j),(!W||z&32)&&X(m,y[5]),y[1]?.nip05?H?H.p(y,z):(H=Le(y),H.c(),H.m(f,null)):H&&(H.d(1),H=null),(!W||z&1)&&w!==(w=$e(y[0].created_at||0)+"")&&X(h,w),(!W||z&1)&&$!==($=y[0].content+"")&&X(L,$),(!W||z&1)&&x!==(x=new Date((y[0].created_at||0)*1e3).toLocaleString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"})+"")&&X(l,x)},i(y){W||(ve(a.$$.fragment,y),W=!0)},o(y){me(a.$$.fragment,y),W=!1},d(y){y&&(i(s),i(D),i(k)),Se(a),H&&H.d(),fe=!1,He(we)}}}function rt(o){let s,e,n,a='<svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>',v,f,b="Unable to load note",m,E,C,I,w,h,_="Sign Up",V,c,$="Go Home",L,P;return{c(){s=u("div"),e=u("div"),n=u("div"),n.innerHTML=a,v=T(),f=u("h2"),f.textContent=b,m=T(),E=u("p"),C=B(o[3]),I=T(),w=u("div"),h=u("button"),h.textContent=_,V=T(),c=u("button"),c.textContent=$,this.h()},l(p){s=d(p,"DIV",{class:!0});var x=g(s);e=d(x,"DIV",{class:!0});var l=g(e);n=d(l,"DIV",{class:!0,"data-svelte-h":!0}),S(n)!=="svelte-1ophlby"&&(n.innerHTML=a),v=M(l),f=d(l,"H2",{class:!0,"data-svelte-h":!0}),S(f)!=="svelte-oc9ihw"&&(f.textContent=b),m=M(l),E=d(l,"P",{class:!0});var D=g(E);C=U(D,o[3]),D.forEach(i),I=M(l),w=d(l,"DIV",{class:!0});var k=g(w);h=d(k,"BUTTON",{class:!0,"data-svelte-h":!0}),S(h)!=="svelte-plzhka"&&(h.textContent=_),V=M(k),c=d(k,"BUTTON",{class:!0,"data-svelte-h":!0}),S(c)!=="svelte-tkfdy3"&&(c.textContent=$),k.forEach(i),l.forEach(i),x.forEach(i),this.h()},h(){r(n,"class","text-error mb-4"),r(f,"class","text-xl font-bold mb-2"),r(E,"class","text-base-content/70 mb-6"),r(h,"class","btn btn-primary"),r(c,"class","btn btn-ghost"),r(w,"class","flex flex-col sm:flex-row gap-3 justify-center"),r(e,"class","card-body text-center"),r(s,"class","card bg-base-100 shadow-xl")},m(p,x){G(p,s,x),t(s,e),t(e,n),t(e,v),t(e,f),t(e,m),t(e,E),t(E,C),t(e,I),t(e,w),t(w,h),t(w,V),t(w,c),L||(P=[se(h,"click",o[8]),se(c,"click",o[10])],L=!0)},p(p,x){x&8&&X(C,p[3])},i:ee,o:ee,d(p){p&&i(s),L=!1,He(P)}}}function st(o){let s,e='<div class="loading loading-spinner loading-lg text-primary"></div>';return{c(){s=u("div"),s.innerHTML=e,this.h()},l(n){s=d(n,"DIV",{class:!0,"data-svelte-h":!0}),S(s)!=="svelte-ngm5e1"&&(s.innerHTML=e),this.h()},h(){r(s,"class","flex justify-center items-center py-20")},m(n,a){G(n,s,a)},p:ee,i:ee,o:ee,d(n){n&&i(s)}}}function Le(o){let s,e,n,a,v=o[1].nip05+"",f;return{c(){s=u("p"),e=Me("svg"),n=Me("path"),a=T(),f=B(v),this.h()},l(b){s=d(b,"P",{class:!0});var m=g(s);e=De(m,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var E=g(e);n=De(E,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),g(n).forEach(i),E.forEach(i),a=M(m),f=U(m,v),m.forEach(i),this.h()},h(){r(n,"fill-rule","evenodd"),r(n,"d","M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"),r(n,"clip-rule","evenodd"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"class","h-4 w-4 text-success"),r(e,"viewBox","0 0 20 20"),r(e,"fill","currentColor"),r(s,"class","text-sm text-base-content/60 flex items-center gap-1")},m(b,m){G(b,s,m),t(s,e),t(e,n),t(s,a),t(s,f)},p(b,m){m&2&&v!==(v=b[1].nip05+"")&&X(f,v)},d(b){b&&i(s)}}}function at(o){let s,e,n,a,v,f,b,m,E=o[6].name+"",C,I,w,h,_,V,c,$='<div class="container mx-auto px-4 max-w-2xl text-center text-sm text-base-content/60"><p>Powered by Nostr - Decentralized social networking</p></div>',L;document.title=s=(o[0]?`Note by ${o[5]}`:"View Note")+" - "+o[6].name;const P=[st,rt,ot],p=[];function x(l,D){return l[2]?0:l[3]?1:l[0]?2:-1}return~(h=x(o))&&(_=p[h]=P[h](o)),{c(){e=u("meta"),a=T(),v=u("div"),f=u("header"),b=u("div"),m=u("a"),C=B(E),I=T(),w=u("main"),_&&_.c(),V=T(),c=u("footer"),c.innerHTML=$,this.h()},l(l){const D=ze("svelte-1dks0nz",document.head);e=d(D,"META",{name:!0,content:!0}),D.forEach(i),a=M(l),v=d(l,"DIV",{class:!0});var k=g(v);f=d(k,"HEADER",{class:!0});var N=g(f);b=d(N,"DIV",{class:!0});var A=g(b);m=d(A,"A",{href:!0,class:!0});var Z=g(m);C=U(Z,E),Z.forEach(i),A.forEach(i),N.forEach(i),I=M(k),w=d(k,"MAIN",{class:!0});var K=g(w);_&&_.l(K),K.forEach(i),V=M(k),c=d(k,"FOOTER",{class:!0,"data-svelte-h":!0}),S(c)!=="svelte-1whurfg"&&(c.innerHTML=$),k.forEach(i),this.h()},h(){r(e,"name","description"),r(e,"content",n=o[0]?.content?.slice(0,160)||`View this post on ${o[6].name}`),r(m,"href",re+"/"),r(m,"class","text-xl font-bold text-primary hover:opacity-80 transition-opacity"),r(b,"class","container mx-auto px-4 max-w-2xl"),r(f,"class","bg-base-100 border-b border-base-300 py-4"),r(w,"class","flex-1 container mx-auto px-4 py-8 max-w-2xl"),r(c,"class","bg-base-100 border-t border-base-300 py-4"),r(v,"class","min-h-screen bg-base-200 gradient-mesh flex flex-col")},m(l,D){t(document.head,e),G(l,a,D),G(l,v,D),t(v,f),t(f,b),t(b,m),t(m,C),t(v,I),t(v,w),~h&&p[h].m(w,null),t(v,V),t(v,c),L=!0},p(l,[D]){(!L||D&97)&&s!==(s=(l[0]?`Note by ${l[5]}`:"View Note")+" - "+l[6].name)&&(document.title=s),(!L||D&1&&n!==(n=l[0]?.content?.slice(0,160)||`View this post on ${l[6].name}`))&&r(e,"content",n);let k=h;h=x(l),h===k?~h&&p[h].p(l,D):(_&&(Fe(),me(p[k],1,1,()=>{p[k]=null}),Be()),~h?(_=p[h],_?_.p(l,D):(_=p[h]=P[h](l),_.c()),ve(_,1),_.m(w,null)):_=null)},i(l){L||(ve(_),L=!0)},o(l){me(_),L=!1},d(l){l&&(i(a),i(v)),i(e),~h&&p[h].d()}}}function lt(o){return o.length<=16?o:`${o.slice(0,8)}...${o.slice(-4)}`}function it(o,s,e){let n,a,v,f;Pe(o,We,c=>e(9,f=c));const b=Ye();let m=!0,E=null,C=null,I=null;je(async()=>{await w()});async function w(){e(2,m=!0),e(3,E=null);try{let c;if(n.startsWith("note1"))try{const x=Te.decode(n);if(x.type!=="note")throw new Error("Invalid note format");c=x.data}catch{throw new Error("Invalid note ID format")}else if(n.startsWith("nevent1"))try{const x=Te.decode(n);if(x.type!=="nevent")throw new Error("Invalid nevent format");c=x.data.id}catch{throw new Error("Invalid nevent format")}else if(/^[0-9a-f]{64}$/i.test(n))c=n.toLowerCase();else throw new Error("Invalid note ID format. Expected note1..., nevent1..., or hex event ID");let $=Ge();(!$||!Je())&&($=new Ke({explicitRelayUrls:[Qe]}),await $.connect());const P=await $.fetchEvents({ids:[c]}),p=Array.from(P)[0];if(!p)throw new Error("Note not found");e(0,C=p),Ve.getProfile(p.pubkey),Ve.subscribe(x=>{const l=x.profiles.get(p.pubkey);l&&e(1,I=l)})}catch(c){console.error("Error loading note:",c),e(3,E=c instanceof Error?c.message:"Failed to load note")}finally{e(2,m=!1)}}function h(){he(`${re}/login`)}function _(){he(`${re}/signup`)}const V=()=>he(`${re}/`);return o.$$.update=()=>{o.$$.dirty&512&&(n=f.params.noteId),o.$$.dirty&3&&e(5,a=I?.displayName||(C?.pubkey?lt(C.pubkey):"Unknown")),o.$$.dirty&3&&e(4,v=I?.avatar||(C?.pubkey?Xe(C.pubkey,80):""))},[C,I,m,E,v,a,b,h,_,f,V]}class wt extends Ae{constructor(s){super(),Ue(this,s,it,at,Ne,{})}}export{wt as component,gt as universal};
