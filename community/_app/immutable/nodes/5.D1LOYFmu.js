import{s as be,n as V,d,a as K,i as E,b as h,l as f,c as v,e as y,f as T,g as M,h as g,t as q,j as H,u as $,v as ee,o as F,q as we,m as Ce,k as x,p as Ee,x as de}from"../chunks/0ZVSoAEn.js";import{S as ke,i as ye,t as L,a as N,c as ae,d as te,g as le,m as se,b as re,e as ne}from"../chunks/DKVmOqaf.js";import{e as he,u as Se,o as Ie}from"../chunks/m0NROLOn.js";import{g as Ae}from"../chunks/CTVLmyHZ.js";import{b as R}from"../chunks/xKPZ-4ZK.js";import{p as Ve}from"../chunks/BdMR7A5I.js";import{g as De,a as me,l as Me,c as He}from"../chunks/DxD0Wn3l.js";import{w as Pe,p as je,u as Be}from"../chunks/Cufo8aq4.js";import{b as Te,a as qe}from"../chunks/D31DSQKd.js";import{B as Le}from"../chunks/eGtfPii9.js";import{Z as Ne}from"../chunks/DE_mfnh5.js";function ze(i){let e,t="Member";return{c(){e=g("span"),e.textContent=t,this.h()},l(s){e=v(s,"SPAN",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-1v9d0gj"&&(e.textContent=t),this.h()},h(){f(e,"class","badge badge-success badge-sm")},m(s,r){E(s,e,r)},d(s){s&&d(e)}}}function Re(i){let e,t="Pending";return{c(){e=g("span"),e.textContent=t,this.h()},l(s){e=v(s,"SPAN",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-t21kyt"&&(e.textContent=t),this.h()},h(){f(e,"class","badge badge-warning badge-sm")},m(s,r){E(s,e,r)},d(s){s&&d(e)}}}function _e(i){let e,t,s,r,n,o,a,l;return{c(){e=g("div"),t=g("span"),s=q(i[2]),r=q(" forums"),n=H(),o=g("span"),a=q(i[3]),l=q(" members"),this.h()},l(c){e=v(c,"DIV",{class:!0});var u=y(e);t=v(u,"SPAN",{});var _=y(t);s=T(_,i[2]),r=T(_," forums"),_.forEach(d),n=M(u),o=v(u,"SPAN",{});var p=y(o);a=T(p,i[3]),l=T(p," members"),p.forEach(d),u.forEach(d),this.h()},h(){f(e,"class","flex gap-4 mt-3 text-sm text-base-content/60")},m(c,u){E(c,e,u),h(e,t),h(t,s),h(t,r),h(e,n),h(e,o),h(o,a),h(o,l)},p(c,u){u&4&&K(s,c[2]),u&8&&K(a,c[3])},d(c){c&&d(e)}}}function pe(i){let e,t,s,r,n;return{c(){e=g("a"),t=ee("svg"),s=ee("path"),r=q(`
          Calendar`),this.h()},l(o){e=v(o,"A",{href:!0,class:!0});var a=y(e);t=$(a,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var l=y(t);s=$(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(s).forEach(d),l.forEach(d),r=T(a,`
          Calendar`),a.forEach(d),this.h()},h(){f(s,"stroke-linecap","round"),f(s,"stroke-linejoin","round"),f(s,"stroke-width","2"),f(s,"d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"class","h-4 w-4"),f(t,"fill","none"),f(t,"viewBox","0 0 24 24"),f(t,"stroke","currentColor"),f(e,"href",n=R+"/"+i[1]+"/"+i[0].id+"/calendar"),f(e,"class","btn btn-sm btn-outline btn-secondary")},m(o,a){E(o,e,a),h(e,t),h(t,s),h(e,r)},p(o,a){a&3&&n!==(n=R+"/"+o[1]+"/"+o[0].id+"/calendar")&&f(e,"href",n)},d(o){o&&d(e)}}}function Fe(i){let e,t,s,r,n;return{c(){e=g("a"),t=ee("svg"),s=ee("path"),r=q(`
          Enter Section`),this.h()},l(o){e=v(o,"A",{href:!0,class:!0});var a=y(e);t=$(a,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var l=y(t);s=$(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(s).forEach(d),l.forEach(d),r=T(a,`
          Enter Section`),a.forEach(d),this.h()},h(){f(s,"stroke-linecap","round"),f(s,"stroke-linejoin","round"),f(s,"stroke-width","2"),f(s,"d","M13 7l5 5m0 0l-5 5m5-5H6"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"class","h-4 w-4"),f(t,"fill","none"),f(t,"viewBox","0 0 24 24"),f(t,"stroke","currentColor"),f(e,"href",n=R+"/"+i[1]+"/"+i[0].id),f(e,"class","btn btn-sm btn-primary")},m(o,a){E(o,e,a),h(e,t),h(t,s),h(e,r)},p(o,a){a&3&&n!==(n=R+"/"+o[1]+"/"+o[0].id)&&f(e,"href",n)},d(o){o&&d(e)}}}function Ze(i){let e,t=`<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
          Request Access`,s,r;return{c(){e=g("button"),e.innerHTML=t,this.h()},l(n){e=v(n,"BUTTON",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-7cuwrw"&&(e.innerHTML=t),this.h()},h(){f(e,"class","btn btn-sm btn-primary")},m(n,o){E(n,e,o),s||(r=we(e,"click",i[8]),s=!0)},p:V,d(n){n&&d(e),s=!1,r()}}}function Ge(i){let e,t,s,r,n=i[0].icon+"",o,a,l,c,u,_=i[0].name+"",p,w,m,b,j=i[0].description+"",C,z,O,B,U;function ie(k,D){if(k[5])return Re;if(k[4])return ze}let Z=ie(i),A=Z&&Z(i),S=i[0].showStats&&_e(i),I=i[6]&&pe(i);function oe(k,D){return k[7]?Ze:Fe}let Y=oe(i),P=Y(i);return{c(){e=g("div"),t=g("div"),s=g("div"),r=g("div"),o=q(n),a=H(),l=g("div"),c=g("div"),u=g("h3"),p=q(_),w=H(),A&&A.c(),m=H(),b=g("p"),C=q(j),z=H(),S&&S.c(),O=H(),B=g("div"),I&&I.c(),U=H(),P.c(),this.h()},l(k){e=v(k,"DIV",{class:!0});var D=y(e);t=v(D,"DIV",{class:!0});var G=y(t);s=v(G,"DIV",{class:!0});var J=y(s);r=v(J,"DIV",{class:!0});var ce=y(r);o=T(ce,n),ce.forEach(d),a=M(J),l=v(J,"DIV",{class:!0});var Q=y(l);c=v(Q,"DIV",{class:!0});var W=y(c);u=v(W,"H3",{class:!0});var ue=y(u);p=T(ue,_),ue.forEach(d),w=M(W),A&&A.l(W),W.forEach(d),m=M(Q),b=v(Q,"P",{class:!0});var fe=y(b);C=T(fe,j),fe.forEach(d),Q.forEach(d),J.forEach(d),z=M(G),S&&S.l(G),O=M(G),B=v(G,"DIV",{class:!0});var X=y(B);I&&I.l(X),U=M(X),P.l(X),X.forEach(d),G.forEach(d),D.forEach(d),this.h()},h(){f(r,"class","text-3xl"),f(u,"class","font-bold text-lg"),f(c,"class","flex items-center gap-2"),f(b,"class","text-sm text-base-content/70 mt-1"),f(l,"class","flex-1"),f(s,"class","flex items-start gap-3"),f(B,"class","card-actions justify-end mt-3 gap-2"),f(t,"class","card-body p-4"),f(e,"class","card bg-base-100 shadow-md hover:shadow-lg transition-shadow")},m(k,D){E(k,e,D),h(e,t),h(t,s),h(s,r),h(r,o),h(s,a),h(s,l),h(l,c),h(c,u),h(u,p),h(c,w),A&&A.m(c,null),h(l,m),h(l,b),h(b,C),h(t,z),S&&S.m(t,null),h(t,O),h(t,B),I&&I.m(B,null),h(B,U),P.m(B,null)},p(k,[D]){D&1&&n!==(n=k[0].icon+"")&&K(o,n),D&1&&_!==(_=k[0].name+"")&&K(p,_),Z!==(Z=ie(k))&&(A&&A.d(1),A=Z&&Z(k),A&&(A.c(),A.m(c,null))),D&1&&j!==(j=k[0].description+"")&&K(C,j),k[0].showStats?S?S.p(k,D):(S=_e(k),S.c(),S.m(t,O)):S&&(S.d(1),S=null),k[6]?I?I.p(k,D):(I=pe(k),I.c(),I.m(B,U)):I&&(I.d(1),I=null),Y===(Y=oe(k))&&P?P.p(k,D):(P.d(1),P=Y(k),P&&(P.c(),P.m(B,null)))},i:V,o:V,d(k){k&&d(e),A&&A.d(),S&&S.d(),I&&I.d(),P.d()}}}function Ke(i,e,t){let s,r,n,o,{section:a}=e,{categoryId:l}=e,{channelCount:c=0}=e,{memberCount:u=0}=e,{accessStatus:_="none"}=e;function p(w){w.preventDefault(),w.stopPropagation();const m=new CustomEvent("request-access",{detail:{sectionId:a.id,categoryId:l},bubbles:!0});window.dispatchEvent(m)}return i.$$set=w=>{"section"in w&&t(0,a=w.section),"categoryId"in w&&t(1,l=w.categoryId),"channelCount"in w&&t(2,c=w.channelCount),"memberCount"in w&&t(3,u=w.memberCount),"accessStatus"in w&&t(9,_=w.accessStatus)},i.$$.update=()=>{i.$$.dirty&512&&t(4,s=_==="approved"),i.$$.dirty&512&&t(5,r=_==="pending"),i.$$.dirty&49&&t(7,n=a.access?.requiresApproval&&!s&&!r),i.$$.dirty&17&&t(6,o=!a.access?.requiresApproval||s&&a.calendar?.access!=="none")},[a,l,c,u,s,r,o,n,p,_]}class Oe extends ke{constructor(e){super(),ye(this,e,Ke,Ge,be,{section:0,categoryId:1,channelCount:2,memberCount:3,accessStatus:9})}}function ve(i,e,t){const s=i.slice();return s[14]=e[t],s}function Ue(i){let e,t,s,r,n,o,a,l,c,u;e=new Le({props:{items:i[6]}}),r=new Ne({props:{category:i[1]}});const _=[Xe,We],p=[];function w(m,b){return m[5].length===0?0:1}return l=w(i),c=p[l]=_[l](i),{c(){ne(e.$$.fragment),t=H(),s=g("div"),ne(r.$$.fragment),n=H(),o=g("div"),a=H(),c.c(),this.h()},l(m){re(e.$$.fragment,m),t=M(m),s=v(m,"DIV",{class:!0});var b=y(s);re(r.$$.fragment,b),n=M(b),o=v(b,"DIV",{class:!0}),y(o).forEach(d),a=M(b),c.l(b),b.forEach(d),this.h()},h(){f(o,"class","divider"),f(s,"class","mt-6")},m(m,b){se(e,m,b),E(m,t,b),E(m,s,b),se(r,s,null),h(s,n),h(s,o),h(s,a),p[l].m(s,null),u=!0},p(m,b){const j={};b&64&&(j.items=m[6]),e.$set(j);const C={};b&2&&(C.category=m[1]),r.$set(C);let z=l;l=w(m),l===z?p[l].p(m,b):(le(),L(p[z],1,1,()=>{p[z]=null}),ae(),c=p[l],c?c.p(m,b):(c=p[l]=_[l](m),c.c()),N(c,1),c.m(s,null))},i(m){u||(N(e.$$.fragment,m),N(r.$$.fragment,m),N(c),u=!0)},o(m){L(e.$$.fragment,m),L(r.$$.fragment,m),L(c),u=!1},d(m){m&&(d(t),d(s)),te(e,m),te(r),p[l].d()}}}function Ye(i){let e,t=`<span>You do not have access to this category.</span> <a href="${R}/forums" class="btn btn-sm btn-ghost">Back to Forums</a>`;return{c(){e=g("div"),e.innerHTML=t,this.h()},l(s){e=v(s,"DIV",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-1dyao8g"&&(e.innerHTML=t),this.h()},h(){f(e,"class","alert alert-warning")},m(s,r){E(s,e,r)},p:V,i:V,o:V,d(s){s&&d(e)}}}function Je(i){let e,t,s,r,n,o="Go to Channels";return{c(){e=g("div"),t=g("span"),s=q(i[3]),r=H(),n=g("a"),n.textContent=o,this.h()},l(a){e=v(a,"DIV",{class:!0});var l=y(e);t=v(l,"SPAN",{});var c=y(t);s=T(c,i[3]),c.forEach(d),r=M(l),n=v(l,"A",{href:!0,class:!0,"data-svelte-h":!0}),F(n)!=="svelte-1l2l2pt"&&(n.textContent=o),l.forEach(d),this.h()},h(){f(n,"href",R+"/chat"),f(n,"class","btn btn-sm btn-ghost"),f(e,"class","alert alert-error")},m(a,l){E(a,e,l),h(e,t),h(t,s),h(e,r),h(e,n)},p(a,l){l&8&&K(s,a[3])},i:V,o:V,d(a){a&&d(e)}}}function Qe(i){let e,t='<span class="loading loading-spinner loading-lg text-primary"></span>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(s){e=v(s,"DIV",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-f5e84o"&&(e.innerHTML=t),this.h()},h(){f(e,"class","flex justify-center items-center min-h-[400px]")},m(s,r){E(s,e,r)},p:V,i:V,o:V,d(s){s&&d(e)}}}function We(i){let e,t=[],s=new Map,r,n=he(i[5]);const o=a=>a[14].id;for(let a=0;a<n.length;a+=1){let l=ve(i,n,a),c=o(l);s.set(c,t[a]=ge(c,l))}return{c(){e=g("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=v(a,"DIV",{class:!0});var l=y(e);for(let c=0;c<t.length;c+=1)t[c].l(l);l.forEach(d),this.h()},h(){f(e,"class","grid grid-cols-1 md:grid-cols-2 gap-4")},m(a,l){E(a,e,l);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(a,l){l&289&&(n=he(a[5]),le(),t=Se(t,l,o,1,a,n,s,e,Ie,ge,null,ve),ae())},i(a){if(!r){for(let l=0;l<n.length;l+=1)N(t[l]);r=!0}},o(a){for(let l=0;l<t.length;l+=1)L(t[l]);r=!1},d(a){a&&d(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function Xe(i){let e,t='<div class="card-body text-center"><p class="text-base-content/70">No sections in this category yet.</p></div>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(s){e=v(s,"DIV",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-1rd54sq"&&(e.innerHTML=t),this.h()},h(){f(e,"class","card bg-base-200")},m(s,r){E(s,e,r)},p:V,i:V,o:V,d(s){s&&d(e)}}}function ge(i,e){let t,s,r;return s=new Oe({props:{section:e[14],categoryId:e[0],accessStatus:e[8](e[14])}}),{key:i,first:null,c(){t=de(),ne(s.$$.fragment),this.h()},l(n){t=de(),re(s.$$.fragment,n),this.h()},h(){this.first=t},m(n,o){E(n,t,o),se(s,n,o),r=!0},p(n,o){e=n;const a={};o&32&&(a.section=e[14]),o&1&&(a.categoryId=e[0]),o&32&&(a.accessStatus=e[8](e[14])),s.$set(a)},i(n){r||(N(s.$$.fragment,n),r=!0)},o(n){L(s.$$.fragment,n),r=!1},d(n){n&&d(t),te(s,n)}}}function xe(i){let e,t,s,r,n,o;document.title=e=(i[1]?.name??"Category")+" - "+i[7].name;const a=[Qe,Je,Ye,Ue],l=[];function c(u,_){return u[2]?0:u[3]?1:u[4]?u[1]?3:-1:2}return~(r=c(i))&&(n=l[r]=a[r](i)),{c(){t=H(),s=g("div"),n&&n.c(),this.h()},l(u){Ce("svelte-1a7jvag",document.head).forEach(d),t=M(u),s=v(u,"DIV",{class:!0});var p=y(s);n&&n.l(p),p.forEach(d),this.h()},h(){f(s,"class","container mx-auto p-4 max-w-6xl")},m(u,_){E(u,t,_),E(u,s,_),~r&&l[r].m(s,null),o=!0},p(u,[_]){(!o||_&130)&&e!==(e=(u[1]?.name??"Category")+" - "+u[7].name)&&(document.title=e);let p=r;r=c(u),r===p?~r&&l[r].p(u,_):(n&&(le(),L(l[p],1,1,()=>{l[p]=null}),ae()),~r?(n=l[r],n?n.p(u,_):(n=l[r]=a[r](u),n.c()),N(n,1),n.m(s,null)):n=null)},i(u){o||(N(n),o=!0)},o(u){L(n),o=!1},d(u){u&&(d(t),d(s)),~r&&l[r].d()}}}function $e(i,e,t){let s,r,n,o,a,l,c,u,_,p;x(i,me,C=>t(13,c=C)),x(i,je,C=>t(10,u=C)),x(i,Be,C=>t(11,_=C)),x(i,Ve,C=>t(12,p=C));const w=De();let m=!0,b=null;function j(C){return!u||!a||qe(a,C.id)||!C.access?.requiresApproval?"approved":"none"}return Ee(async()=>{if(await me.waitForReady(),!c.isAuthenticated||!c.publicKey){Ae(`${R}/`);return}r||t(3,b=`Category "${s}" not found`),await Pe(),t(2,m=!1)}),i.$$.update=()=>{i.$$.dirty&4096&&t(0,s=p.params.category),i.$$.dirty&1&&t(1,r=Me(s)),i.$$.dirty&3&&t(6,n=r?He(s):[]),i.$$.dirty&2&&t(5,o=r?.sections??[]),i.$$.dirty&2048&&t(9,a=_),i.$$.dirty&1537&&t(4,l=u&&a?Te(a,s):!0)},[s,r,m,b,l,o,n,w,j,a,u,_,p]}class ft extends ke{constructor(e){super(),ye(this,e,$e,xe,be,{})}}export{ft as component};
