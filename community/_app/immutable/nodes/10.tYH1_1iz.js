const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/DUe_N5ek.js","../chunks/DxD0Wn3l.js","../chunks/CmsKOCeN.js","../chunks/xKPZ-4ZK.js","../chunks/0ZVSoAEn.js","../chunks/BToyndCo.js","../chunks/aZ5XzadJ.js","../chunks/CF3XGpNG.js","../chunks/BPZifr_e.js","../chunks/D7m-JnSU.js","../chunks/Bk9P-LIi.js"])))=>i.map(i=>d[i]);
import{_ as Ys}from"../chunks/CmsKOCeN.js";import{s as et,n as ye,d as i,a as be,l as r,i as X,b as l,c as d,e as g,o as oe,g as A,f as Y,h as f,j as I,t as G,z as ot,r as We,q as pe,C as gt,u as Ie,v as Ne,P as Oe,Q as rt,R as wt,M as Et,A as qe,af as Gs,x as yt,k as At,p as xs,y as Ks,a0 as Ws,m as Xs,E as $s,K as el,L as tl}from"../chunks/0ZVSoAEn.js";import{S as tt,i as st,t as Ve,a as je,g as at,c as it,d as Ke,m as Je,b as Qe,e as Ye,f as sl}from"../chunks/DKVmOqaf.js";import{g as Ht}from"../chunks/CTVLmyHZ.js";import{b as Ct}from"../chunks/xKPZ-4ZK.js";import{H as ll,S as Ze,a as ft,g as nl,h as rl,I as Ot,R as kt,J as qt,n as $e,K as ol,N as vt}from"../chunks/DxD0Wn3l.js";import{whitelistStatusStore as al}from"../chunks/CF3XGpNG.js";import{fetchWhitelistUsers as Js,updateUserCohorts as Dt,verifyWhitelistStatus as il,approveUserRegistration as cl}from"../chunks/BPZifr_e.js";import{f as ul,c as dl}from"../chunks/BqFahvin.js";import{U as Nt,s as zt,c as fl}from"../chunks/DaQoddso.js";import{s as hl}from"../chunks/aZ5XzadJ.js";import{subscribeAccessRequests as pl,approveSectionAccess as vl}from"../chunks/DUe_N5ek.js";import{KIND_JOIN_REQUEST as Ft,KIND_ADD_USER as Zt,KIND_DELETION as ht,KIND_USER_REGISTRATION as xt}from"../chunks/Bk9P-LIi.js";import{e as Be,u as _t,d as Qs,o as Lt}from"../chunks/m0NROLOn.js";import{S as gl}from"../chunks/B4zVO3xS.js";/* empty css                *//* empty css                *//* empty css                */import"../chunks/C5DPgcI1.js";const _l=!1,bl=async()=>({stats:null}),qn=Object.freeze(Object.defineProperty({__proto__:null,load:bl,prerender:_l},Symbol.toStringTag,{value:"Module"}));function ml(n){let e,t,s,o,a='<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>',u,c,p=n[0].totalUsers+"",b,_,w,v="Total Users",h,m,k,S,T='<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path></svg>',N,M,z=n[0].totalChannels+"",E,j,C,O="Total Channels",U,K,Q,W,q='<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>',F,Z,V=n[0].totalMessages+"",P,D,y,L="Total Messages",x,R,$,se,ce='<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',Me,ge,ne=n[0].pendingApprovals+"",_e,fe,Le,Se="Pending Approvals",He;return{c(){e=f("div"),t=f("div"),s=f("div"),o=f("div"),o.innerHTML=a,u=I(),c=f("div"),b=G(p),_=I(),w=f("div"),w.textContent=v,h=I(),m=f("div"),k=f("div"),S=f("div"),S.innerHTML=T,N=I(),M=f("div"),E=G(z),j=I(),C=f("div"),C.textContent=O,U=I(),K=f("div"),Q=f("div"),W=f("div"),W.innerHTML=q,F=I(),Z=f("div"),P=G(V),D=I(),y=f("div"),y.textContent=L,x=I(),R=f("div"),$=f("div"),se=f("div"),se.innerHTML=ce,Me=I(),ge=f("div"),_e=G(ne),fe=I(),Le=f("div"),Le.textContent=Se,this.h()},l(te){e=d(te,"DIV",{class:!0});var ie=g(e);t=d(ie,"DIV",{class:!0});var J=g(t);s=d(J,"DIV",{class:!0});var ue=g(s);o=d(ue,"DIV",{class:!0,"data-svelte-h":!0}),oe(o)!=="svelte-8bsd17"&&(o.innerHTML=a),u=A(ue),c=d(ue,"DIV",{class:!0});var ve=g(c);b=Y(ve,p),ve.forEach(i),_=A(ue),w=d(ue,"DIV",{class:!0,"data-svelte-h":!0}),oe(w)!=="svelte-mko655"&&(w.textContent=v),ue.forEach(i),J.forEach(i),h=A(ie),m=d(ie,"DIV",{class:!0});var B=g(m);k=d(B,"DIV",{class:!0});var H=g(k);S=d(H,"DIV",{class:!0,"data-svelte-h":!0}),oe(S)!=="svelte-1xq6f4m"&&(S.innerHTML=T),N=A(H),M=d(H,"DIV",{class:!0});var ee=g(M);E=Y(ee,z),ee.forEach(i),j=A(H),C=d(H,"DIV",{class:!0,"data-svelte-h":!0}),oe(C)!=="svelte-1vop7r"&&(C.textContent=O),H.forEach(i),B.forEach(i),U=A(ie),K=d(ie,"DIV",{class:!0});var le=g(K);Q=d(le,"DIV",{class:!0});var me=g(Q);W=d(me,"DIV",{class:!0,"data-svelte-h":!0}),oe(W)!=="svelte-wrnvw"&&(W.innerHTML=q),F=A(me),Z=d(me,"DIV",{class:!0});var Ce=g(Z);P=Y(Ce,V),Ce.forEach(i),D=A(me),y=d(me,"DIV",{class:!0,"data-svelte-h":!0}),oe(y)!=="svelte-16fgwgv"&&(y.textContent=L),me.forEach(i),le.forEach(i),x=A(ie),R=d(ie,"DIV",{class:!0});var ke=g(R);$=d(ke,"DIV",{class:!0});var Ae=g($);se=d(Ae,"DIV",{class:!0,"data-svelte-h":!0}),oe(se)!=="svelte-n3imwb"&&(se.innerHTML=ce),Me=A(Ae),ge=d(Ae,"DIV",{class:!0});var we=g(ge);_e=Y(we,ne),we.forEach(i),fe=A(Ae),Le=d(Ae,"DIV",{class:!0,"data-svelte-h":!0}),oe(Le)!=="svelte-14ec3qe"&&(Le.textContent=Se),Ae.forEach(i),ke.forEach(i),ie.forEach(i),this.h()},h(){r(o,"class","text-primary"),r(c,"class","stat-value text-primary"),r(w,"class","text-sm text-base-content/70 uppercase tracking-wide"),r(s,"class","card-body items-center text-center gap-3"),r(t,"class","card bg-primary/10"),r(S,"class","text-secondary"),r(M,"class","stat-value text-secondary"),r(C,"class","text-sm text-base-content/70 uppercase tracking-wide"),r(k,"class","card-body items-center text-center gap-3"),r(m,"class","card bg-secondary/10"),r(W,"class","text-accent"),r(Z,"class","stat-value text-accent"),r(y,"class","text-sm text-base-content/70 uppercase tracking-wide"),r(Q,"class","card-body items-center text-center gap-3"),r(K,"class","card bg-accent/10"),r(se,"class","text-warning"),r(ge,"class","stat-value text-warning"),r(Le,"class","text-sm text-base-content/70 uppercase tracking-wide"),r($,"class","card-body items-center text-center gap-3"),r(R,"class",He="card bg-warning/10 "+(n[0].pendingApprovals>0?"border-2 border-warning":"")),r(e,"class","grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 mb-8")},m(te,ie){X(te,e,ie),l(e,t),l(t,s),l(s,o),l(s,u),l(s,c),l(c,b),l(s,_),l(s,w),l(e,h),l(e,m),l(m,k),l(k,S),l(k,N),l(k,M),l(M,E),l(k,j),l(k,C),l(e,U),l(e,K),l(K,Q),l(Q,W),l(Q,F),l(Q,Z),l(Z,P),l(Q,D),l(Q,y),l(e,x),l(e,R),l(R,$),l($,se),l($,Me),l($,ge),l(ge,_e),l($,fe),l($,Le)},p(te,[ie]){ie&1&&p!==(p=te[0].totalUsers+"")&&be(b,p),ie&1&&z!==(z=te[0].totalChannels+"")&&be(E,z),ie&1&&V!==(V=te[0].totalMessages+"")&&be(P,V),ie&1&&ne!==(ne=te[0].pendingApprovals+"")&&be(_e,ne),ie&1&&He!==(He="card bg-warning/10 "+(te[0].pendingApprovals>0?"border-2 border-warning":""))&&r(R,"class",He)},i:ye,o:ye,d(te){te&&i(e)}}}function kl(n,e,t){let{stats:s}=e;return n.$$set=o=>{"stats"in o&&t(0,s=o.stats)},[s]}class wl extends tt{constructor(e){super(),st(this,e,kl,ml,et,{stats:0})}}function El(n,e,t){const s=n.slice();return s[5]=e[t],s}function yl(n){let e;return{c(){e=G("Connected to public Nostr relays. Messages are federated.")},l(t){e=Y(t,"Connected to public Nostr relays. Messages are federated.")},m(t,s){X(t,e,s)},d(t){t&&i(e)}}}function Cl(n){let e;return{c(){e=G("Only connected to local relay. Messages stay private.")},l(t){e=Y(t,"Only connected to local relay. Messages stay private.")},m(t,s){X(t,e,s)},d(t){t&&i(e)}}}function Kt(n){let e;return{c(){e=f("span"),this.h()},l(t){e=d(t,"SPAN",{class:!0}),g(e).forEach(i),this.h()},h(){r(e,"class","loading loading-spinner loading-sm ml-2")},m(t,s){X(t,e,s)},d(t){t&&i(e)}}}function Tl(n){let e,t;return{c(){e=f("span"),t=G(n[5]),this.h()},l(s){e=d(s,"SPAN",{class:!0});var o=g(e);t=Y(o,n[5]),o.forEach(i),this.h()},h(){r(e,"class","badge badge-outline")},m(s,o){X(s,e,o),l(e,t)},p:ye,d(s){s&&i(e)}}}function Jt(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <span>Federated mode connects to public relays. Messages will be visible on other community servers.</span>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(s){e=d(s,"DIV",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-1u2z7xd"&&(e.innerHTML=t),this.h()},h(){r(e,"class","alert alert-warning mt-4")},m(s,o){X(s,e,o)},d(s){s&&i(e)}}}function Ml(n){let e,t,s,o="Relay Settings",a,u,c="Control whether the app connects only to your private relay or connects to other community servers.",p,b,_,w,v,h,m,k=n[0]?"Private Mode":"Federated Mode",S,T,N,M,z,E,j,C="Active Relays:",O,U,K,Q,W;function q(L,x){return L[0]?Cl:yl}let F=q(n),Z=F(n),V=n[1]&&Kt(),P=Be(ll()),D=[];for(let L=0;L<P.length;L+=1)D[L]=Tl(El(n,P,L));let y=!n[0]&&Jt();return{c(){e=f("div"),t=f("div"),s=f("h2"),s.textContent=o,a=I(),u=f("p"),u.textContent=c,p=I(),b=f("div"),_=f("label"),w=f("input"),v=I(),h=f("div"),m=f("span"),S=G(k),T=I(),N=f("p"),Z.c(),M=I(),V&&V.c(),z=I(),E=f("div"),j=f("div"),j.textContent=C,O=I(),U=f("div");for(let L=0;L<D.length;L+=1)D[L].c();K=I(),y&&y.c(),this.h()},l(L){e=d(L,"DIV",{class:!0});var x=g(e);t=d(x,"DIV",{class:!0});var R=g(t);s=d(R,"H2",{class:!0,"data-svelte-h":!0}),oe(s)!=="svelte-n4dr3s"&&(s.textContent=o),a=A(R),u=d(R,"P",{class:!0,"data-svelte-h":!0}),oe(u)!=="svelte-1ywzh95"&&(u.textContent=c),p=A(R),b=d(R,"DIV",{class:!0});var $=g(b);_=d($,"LABEL",{class:!0});var se=g(_);w=d(se,"INPUT",{type:!0,class:!0}),v=A(se),h=d(se,"DIV",{});var ce=g(h);m=d(ce,"SPAN",{class:!0});var Me=g(m);S=Y(Me,k),Me.forEach(i),T=A(ce),N=d(ce,"P",{class:!0});var ge=g(N);Z.l(ge),ge.forEach(i),ce.forEach(i),M=A(se),V&&V.l(se),se.forEach(i),$.forEach(i),z=A(R),E=d(R,"DIV",{class:!0});var ne=g(E);j=d(ne,"DIV",{class:!0,"data-svelte-h":!0}),oe(j)!=="svelte-11eaj9u"&&(j.textContent=C),O=A(ne),U=d(ne,"DIV",{class:!0});var _e=g(U);for(let fe=0;fe<D.length;fe+=1)D[fe].l(_e);_e.forEach(i),ne.forEach(i),K=A(R),y&&y.l(R),R.forEach(i),x.forEach(i),this.h()},h(){r(s,"class","card-title"),r(u,"class","text-sm text-base-content/70 mb-4"),r(w,"type","checkbox"),r(w,"class","toggle toggle-primary toggle-lg"),w.disabled=n[1],r(m,"class","label-text font-semibold text-lg"),r(N,"class","text-sm text-base-content/60"),r(_,"class","label cursor-pointer justify-start gap-4"),r(b,"class","form-control"),r(j,"class","text-sm font-medium mb-2"),r(U,"class","flex flex-wrap gap-2"),r(E,"class","mt-4 p-3 bg-base-300 rounded-lg"),r(t,"class","card-body"),r(e,"class","card bg-base-200 mb-6")},m(L,x){X(L,e,x),l(e,t),l(t,s),l(t,a),l(t,u),l(t,p),l(t,b),l(b,_),l(_,w),w.checked=n[0],l(_,v),l(_,h),l(h,m),l(m,S),l(h,T),l(h,N),Z.m(N,null),l(_,M),V&&V.m(_,null),l(t,z),l(t,E),l(E,j),l(E,O),l(E,U);for(let R=0;R<D.length;R+=1)D[R]&&D[R].m(U,null);l(t,K),y&&y.m(t,null),Q||(W=[pe(w,"change",n[3]),pe(w,"change",n[2])],Q=!0)},p(L,[x]){x&2&&(w.disabled=L[1]),x&1&&(w.checked=L[0]),x&1&&k!==(k=L[0]?"Private Mode":"Federated Mode")&&be(S,k),F!==(F=q(L))&&(Z.d(1),Z=F(L),Z&&(Z.c(),Z.m(N,null))),L[1]?V||(V=Kt(),V.c(),V.m(_,null)):V&&(V.d(1),V=null),L[0]?y&&(y.d(1),y=null):y||(y=Jt(),y.c(),y.m(t,null))},i:ye,o:ye,d(L){L&&i(e),Z.d(),V&&V.d(),ot(D,L),y&&y.d(),Q=!1,We(W)}}}function Dl(n,e,t){let{isPrivateMode:s}=e,{isSwitchingMode:o}=e;const a=gt();function u(){a("modeChange")}function c(){s=this.checked,t(0,s)}return n.$$set=p=>{"isPrivateMode"in p&&t(0,s=p.isPrivateMode),"isSwitchingMode"in p&&t(1,o=p.isSwitchingMode)},[s,o,u,c]}class Al extends tt{constructor(e){super(),st(this,e,Dl,Ml,et,{isPrivateMode:0,isSwitchingMode:1})}}function Qt(n,e,t){const s=n.slice();return s[20]=e[t],s}function Yt(n,e,t){const s=n.slice();return s[23]=e[t],s}function Gt(n,e,t){const s=n.slice();return s[26]=e[t][0],s[27]=e[t][1],s}function Wt(n){let e,t,s="New Channel",o,a,u,c='<span class="label-text">Channel Name *</span>',p,b,_,w,v,h='<span class="label-text">Description</span>',m,k,S,T,N,M='<span class="label-text">Section (Area)</span>',z,E,j,C,O=(Ze[n[9]]?.description||"")+"",U,K,Q,W,q,F='<span class="label-text">Visibility</span>',Z,V,P,D="Public",y,L="Cohort Only",x,R="Private",$,se,ce,Me='<span class="label-text">Cohorts (comma-separated)</span>',ge,ne,_e,fe,Le,Se,He,te,ie="Encrypted Messages",J,ue,ve,B="Cancel",H,ee,le,me,Ce,ke,Ae=Be(Object.entries(Ze)),we=[];for(let ae=0;ae<Ae.length;ae+=1)we[ae]=Xt(Gt(n,Ae,ae));let Ee=n[2]&&$t();return{c(){e=f("div"),t=f("h3"),t.textContent=s,o=I(),a=f("div"),u=f("label"),u.innerHTML=c,p=I(),b=f("input"),_=I(),w=f("div"),v=f("label"),v.innerHTML=h,m=I(),k=f("textarea"),S=I(),T=f("div"),N=f("label"),N.innerHTML=M,z=I(),E=f("select");for(let ae=0;ae<we.length;ae+=1)we[ae].c();j=I(),C=f("span"),U=G(O),K=I(),Q=f("div"),W=f("div"),q=f("label"),q.innerHTML=F,Z=I(),V=f("select"),P=f("option"),P.textContent=D,y=f("option"),y.textContent=L,x=f("option"),x.textContent=R,$=I(),se=f("div"),ce=f("label"),ce.innerHTML=Me,ge=I(),ne=f("input"),_e=I(),fe=f("div"),Le=f("label"),Se=f("input"),He=I(),te=f("span"),te.textContent=ie,J=I(),ue=f("div"),ve=f("button"),ve.textContent=B,H=I(),ee=f("button"),Ee&&Ee.c(),le=G(`
            Create Channel`),this.h()},l(ae){e=d(ae,"DIV",{class:!0});var de=g(e);t=d(de,"H3",{class:!0,"data-svelte-h":!0}),oe(t)!=="svelte-1429g2p"&&(t.textContent=s),o=A(de),a=d(de,"DIV",{class:!0});var he=g(a);u=d(he,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),oe(u)!=="svelte-1ty5we0"&&(u.innerHTML=c),p=A(he),b=d(he,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),he.forEach(i),_=A(de),w=d(de,"DIV",{class:!0});var De=g(w);v=d(De,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),oe(v)!=="svelte-bmf767"&&(v.innerHTML=h),m=A(De),k=d(De,"TEXTAREA",{id:!0,class:!0,placeholder:!0,rows:!0}),g(k).forEach(i),De.forEach(i),S=A(de),T=d(de,"DIV",{class:!0});var Fe=g(T);N=d(Fe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),oe(N)!=="svelte-qoxf07"&&(N.innerHTML=M),z=A(Fe),E=d(Fe,"SELECT",{id:!0,class:!0});var ct=g(E);for(let ut=0;ut<we.length;ut+=1)we[ut].l(ct);ct.forEach(i),j=A(Fe),C=d(Fe,"SPAN",{class:!0});var ze=g(C);U=Y(ze,O),ze.forEach(i),Fe.forEach(i),K=A(de),Q=d(de,"DIV",{class:!0});var Re=g(Q);W=d(Re,"DIV",{class:!0});var Ue=g(W);q=d(Ue,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),oe(q)!=="svelte-zq4cp"&&(q.innerHTML=F),Z=A(Ue),V=d(Ue,"SELECT",{id:!0,class:!0});var re=g(V);P=d(re,"OPTION",{"data-svelte-h":!0}),oe(P)!=="svelte-56kvny"&&(P.textContent=D),y=d(re,"OPTION",{"data-svelte-h":!0}),oe(y)!=="svelte-11ea9qe"&&(y.textContent=L),x=d(re,"OPTION",{"data-svelte-h":!0}),oe(x)!=="svelte-1biwgrw"&&(x.textContent=R),re.forEach(i),Ue.forEach(i),$=A(Re),se=d(Re,"DIV",{class:!0});var Pe=g(se);ce=d(Pe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),oe(ce)!=="svelte-1pvacrn"&&(ce.innerHTML=Me),ge=A(Pe),ne=d(Pe,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Pe.forEach(i),Re.forEach(i),_e=A(de),fe=d(de,"DIV",{class:!0});var Te=g(fe);Le=d(Te,"LABEL",{class:!0});var xe=g(Le);Se=d(xe,"INPUT",{type:!0,class:!0}),He=A(xe),te=d(xe,"SPAN",{class:!0,"data-svelte-h":!0}),oe(te)!=="svelte-19w2onf"&&(te.textContent=ie),xe.forEach(i),Te.forEach(i),J=A(de),ue=d(de,"DIV",{class:!0});var Xe=g(ue);ve=d(Xe,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(ve)!=="svelte-2wjeji"&&(ve.textContent=B),H=A(Xe),ee=d(Xe,"BUTTON",{class:!0});var lt=g(ee);Ee&&Ee.l(lt),le=Y(lt,`
            Create Channel`),lt.forEach(i),Xe.forEach(i),de.forEach(i),this.h()},h(){r(t,"class","font-semibold mb-4"),r(u,"class","label"),r(u,"for","mgmt-channel-name"),r(b,"id","mgmt-channel-name"),r(b,"type","text"),r(b,"placeholder","Enter channel name"),r(b,"class","input input-bordered"),r(a,"class","form-control mb-3"),r(v,"class","label"),r(v,"for","mgmt-channel-description"),r(k,"id","mgmt-channel-description"),r(k,"class","textarea textarea-bordered"),r(k,"placeholder","Channel description (optional)"),r(k,"rows","2"),r(w,"class","form-control mb-3"),r(N,"class","label"),r(N,"for","mgmt-channel-section"),r(E,"id","mgmt-channel-section"),r(E,"class","select select-bordered"),n[9]===void 0&&wt(()=>n[14].call(E)),r(C,"class","label-text-alt text-base-content/60 mt-1"),r(T,"class","form-control mb-3"),r(q,"class","label"),r(q,"for","mgmt-channel-visibility"),P.__value="public",Oe(P,P.__value),y.__value="cohort",Oe(y,y.__value),x.__value="private",Oe(x,x.__value),r(V,"id","mgmt-channel-visibility"),r(V,"class","select select-bordered"),n[6]===void 0&&wt(()=>n[15].call(V)),r(W,"class","form-control"),r(ce,"class","label"),r(ce,"for","mgmt-channel-cohorts"),r(ne,"id","mgmt-channel-cohorts"),r(ne,"type","text"),r(ne,"placeholder","e.g., 2024, 2025"),r(ne,"class","input input-bordered"),r(se,"class","form-control"),r(Q,"class","grid grid-cols-1 md:grid-cols-2 gap-4 mb-3"),r(Se,"type","checkbox"),r(Se,"class","toggle toggle-primary"),r(te,"class","label-text"),r(Le,"class","label cursor-pointer justify-start gap-2"),r(fe,"class","form-control mb-4"),r(ve,"class","btn btn-ghost"),r(ee,"class","btn btn-primary"),ee.disabled=me=n[2]||!n[4].trim(),r(ue,"class","flex justify-end gap-2"),r(e,"class","mt-4 p-4 bg-base-300 rounded-lg")},m(ae,de){X(ae,e,de),l(e,t),l(e,o),l(e,a),l(a,u),l(a,p),l(a,b),Oe(b,n[4]),l(e,_),l(e,w),l(w,v),l(w,m),l(w,k),Oe(k,n[5]),l(e,S),l(e,T),l(T,N),l(T,z),l(T,E);for(let he=0;he<we.length;he+=1)we[he]&&we[he].m(E,null);rt(E,n[9],!0),l(T,j),l(T,C),l(C,U),l(e,K),l(e,Q),l(Q,W),l(W,q),l(W,Z),l(W,V),l(V,P),l(V,y),l(V,x),rt(V,n[6],!0),l(Q,$),l(Q,se),l(se,ce),l(se,ge),l(se,ne),Oe(ne,n[7]),l(e,_e),l(e,fe),l(fe,Le),l(Le,Se),Se.checked=n[8],l(Le,He),l(Le,te),l(e,J),l(e,ue),l(ue,ve),l(ue,H),l(ue,ee),Ee&&Ee.m(ee,null),l(ee,le),Ce||(ke=[pe(b,"input",n[12]),pe(k,"input",n[13]),pe(E,"change",n[14]),pe(V,"change",n[15]),pe(ne,"input",n[16]),pe(Se,"change",n[17]),pe(ve,"click",n[18]),pe(ee,"click",n[10])],Ce=!0)},p(ae,de){if(de&16&&b.value!==ae[4]&&Oe(b,ae[4]),de&32&&Oe(k,ae[5]),de&0){Ae=Be(Object.entries(Ze));let he;for(he=0;he<Ae.length;he+=1){const De=Gt(ae,Ae,he);we[he]?we[he].p(De,de):(we[he]=Xt(De),we[he].c(),we[he].m(E,null))}for(;he<we.length;he+=1)we[he].d(1);we.length=Ae.length}de&512&&rt(E,ae[9]),de&512&&O!==(O=(Ze[ae[9]]?.description||"")+"")&&be(U,O),de&64&&rt(V,ae[6]),de&128&&ne.value!==ae[7]&&Oe(ne,ae[7]),de&256&&(Se.checked=ae[8]),ae[2]?Ee||(Ee=$t(),Ee.c(),Ee.m(ee,le)):Ee&&(Ee.d(1),Ee=null),de&20&&me!==(me=ae[2]||!ae[4].trim())&&(ee.disabled=me)},d(ae){ae&&i(e),ot(we,ae),Ee&&Ee.d(),Ce=!1,We(ke)}}}function Xt(n){let e,t=n[27].icon+"",s,o,a=n[27].name+"",u;return{c(){e=f("option"),s=G(t),o=I(),u=G(a),this.h()},l(c){e=d(c,"OPTION",{});var p=g(e);s=Y(p,t),o=A(p),u=Y(p,a),p.forEach(i),this.h()},h(){e.__value=n[26],Oe(e,e.__value)},m(c,p){X(c,e,p),l(e,s),l(e,o),l(e,u)},p:ye,d(c){c&&i(e)}}}function $t(n){let e;return{c(){e=f("span"),this.h()},l(t){e=d(t,"SPAN",{class:!0}),g(e).forEach(i),this.h()},h(){r(e,"class","loading loading-spinner loading-sm")},m(t,s){X(t,e,s)},d(t){t&&i(e)}}}function Il(n){let e,t=[],s=new Map,o=Be(n[1]);const a=u=>u[20].id;for(let u=0;u<o.length;u+=1){let c=Qt(n,o,u),p=a(c);s.set(p,t[u]=ls(p,c))}return{c(){e=f("div");for(let u=0;u<t.length;u+=1)t[u].c();this.h()},l(u){e=d(u,"DIV",{class:!0});var c=g(e);for(let p=0;p<t.length;p+=1)t[p].l(c);c.forEach(i),this.h()},h(){r(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4")},m(u,c){X(u,e,c);for(let p=0;p<t.length;p+=1)t[p]&&t[p].m(e,null)},p(u,c){c&2&&(o=Be(u[1]),t=_t(t,c,a,1,u,o,s,e,Qs,ls,null,Qt))},i:ye,o:ye,d(u){u&&i(e);for(let c=0;c<t.length;c+=1)t[c].d()}}}function Nl(n){let e,t="<p>No channels yet. Create your first channel above.</p>";return{c(){e=f("div"),e.innerHTML=t,this.h()},l(s){e=d(s,"DIV",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-1t3kezq"&&(e.innerHTML=t),this.h()},h(){r(e,"class","text-center py-8 text-base-content/50")},m(s,o){X(s,e,o)},p:ye,i:ye,o:ye,d(s){s&&i(e)}}}function Ll(n){let e,t,s;return t=new gl({props:{variant:"channel",count:3}}),{c(){e=f("div"),Ye(t.$$.fragment),this.h()},l(o){e=d(o,"DIV",{class:!0});var a=g(e);Qe(t.$$.fragment,a),a.forEach(i),this.h()},h(){r(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4")},m(o,a){X(o,e,a),Je(t,e,null),s=!0},p:ye,i(o){s||(je(t.$$.fragment,o),s=!0)},o(o){Ve(t.$$.fragment,o),s=!1},d(o){o&&i(e),Ke(t)}}}function es(n){let e,t=n[20].description+"",s;return{c(){e=f("p"),s=G(t),this.h()},l(o){e=d(o,"P",{class:!0});var a=g(e);s=Y(a,t),a.forEach(i),this.h()},h(){r(e,"class","text-sm text-base-content/70 line-clamp-2")},m(o,a){X(o,e,a),l(e,s)},p(o,a){a&2&&t!==(t=o[20].description+"")&&be(s,t)},d(o){o&&i(e)}}}function ts(n){let e,t="Encrypted";return{c(){e=f("span"),e.textContent=t,this.h()},l(s){e=d(s,"SPAN",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-1g44nk6"&&(e.textContent=t),this.h()},h(){r(e,"class","badge badge-info badge-sm")},m(s,o){X(s,e,o)},d(s){s&&i(e)}}}function ss(n){let e,t=n[23]+"",s;return{c(){e=f("span"),s=G(t),this.h()},l(o){e=d(o,"SPAN",{class:!0});var a=g(e);s=Y(a,t),a.forEach(i),this.h()},h(){r(e,"class","badge badge-outline badge-sm")},m(o,a){X(o,e,a),l(e,s)},p(o,a){a&2&&t!==(t=o[23]+"")&&be(s,t)},d(o){o&&i(e)}}}function ls(n,e){let t,s,o,a=e[20].name+"",u,c,p,b,_,w=(Ze[e[20].section]?.icon||"ðŸ‘‹")+"",v,h,m=(Ze[e[20].section]?.name||"Guest Area")+"",k,S,T,N=e[20].visibility+"",M,z,E,j,C,O,U,K=ns(e[20].createdAt)+"",Q,W,q=e[20].description&&es(e),F=e[20].encrypted&&ts(),Z=Be(e[20].cohorts),V=[];for(let P=0;P<Z.length;P+=1)V[P]=ss(Yt(e,Z,P));return{key:n,first:null,c(){t=f("div"),s=f("div"),o=f("h3"),u=G(a),c=I(),q&&q.c(),p=I(),b=f("div"),_=f("span"),v=G(w),h=I(),k=G(m),S=I(),T=f("span"),M=G(N),E=I(),F&&F.c(),j=I();for(let P=0;P<V.length;P+=1)V[P].c();C=I(),O=f("div"),U=G("Created "),Q=G(K),W=I(),this.h()},l(P){t=d(P,"DIV",{class:!0});var D=g(t);s=d(D,"DIV",{class:!0});var y=g(s);o=d(y,"H3",{class:!0});var L=g(o);u=Y(L,a),L.forEach(i),c=A(y),q&&q.l(y),p=A(y),b=d(y,"DIV",{class:!0});var x=g(b);_=d(x,"SPAN",{class:!0,title:!0});var R=g(_);v=Y(R,w),h=A(R),k=Y(R,m),R.forEach(i),S=A(x),T=d(x,"SPAN",{class:!0});var $=g(T);M=Y($,N),$.forEach(i),E=A(x),F&&F.l(x),j=A(x);for(let ce=0;ce<V.length;ce+=1)V[ce].l(x);x.forEach(i),C=A(y),O=d(y,"DIV",{class:!0});var se=g(O);U=Y(se,"Created "),Q=Y(se,K),se.forEach(i),y.forEach(i),W=A(D),D.forEach(i),this.h()},h(){r(o,"class","font-semibold"),r(_,"class","badge badge-neutral badge-sm"),r(_,"title","Section"),r(T,"class",z="badge "+rs(e[20].visibility)+" badge-sm"),r(b,"class","flex flex-wrap gap-1 mt-2"),r(O,"class","text-xs text-base-content/50 mt-2"),r(s,"class","card-body p-4"),r(t,"class","card bg-base-300"),this.first=t},m(P,D){X(P,t,D),l(t,s),l(s,o),l(o,u),l(s,c),q&&q.m(s,null),l(s,p),l(s,b),l(b,_),l(_,v),l(_,h),l(_,k),l(b,S),l(b,T),l(T,M),l(b,E),F&&F.m(b,null),l(b,j);for(let y=0;y<V.length;y+=1)V[y]&&V[y].m(b,null);l(s,C),l(s,O),l(O,U),l(O,Q),l(t,W)},p(P,D){if(e=P,D&2&&a!==(a=e[20].name+"")&&be(u,a),e[20].description?q?q.p(e,D):(q=es(e),q.c(),q.m(s,p)):q&&(q.d(1),q=null),D&2&&w!==(w=(Ze[e[20].section]?.icon||"ðŸ‘‹")+"")&&be(v,w),D&2&&m!==(m=(Ze[e[20].section]?.name||"Guest Area")+"")&&be(k,m),D&2&&N!==(N=e[20].visibility+"")&&be(M,N),D&2&&z!==(z="badge "+rs(e[20].visibility)+" badge-sm")&&r(T,"class",z),e[20].encrypted?F||(F=ts(),F.c(),F.m(b,j)):F&&(F.d(1),F=null),D&2){Z=Be(e[20].cohorts);let y;for(y=0;y<Z.length;y+=1){const L=Yt(e,Z,y);V[y]?V[y].p(L,D):(V[y]=ss(L),V[y].c(),V[y].m(b,null))}for(;y<V.length;y+=1)V[y].d(1);V.length=Z.length}D&2&&K!==(K=ns(e[20].createdAt)+"")&&be(Q,K)},d(P){P&&i(t),q&&q.d(),F&&F.d(),ot(V,P)}}}function Sl(n){let e,t,s,o,a="Channel Management",u,c,p,b,_,w,v,h,m,k,S,T,N,M=n[0]&&Wt(n);const z=[Ll,Nl,Il],E=[];function j(C,O){return C[3]&&C[1].length===0?0:C[1].length===0?1:2}return m=j(n),k=E[m]=z[m](n),{c(){e=f("div"),t=f("div"),s=f("div"),o=f("h2"),o.textContent=a,u=I(),c=f("button"),p=Ne("svg"),b=Ne("path"),_=G(`
        Create Channel`),w=I(),M&&M.c(),v=I(),h=f("div"),k.c(),this.h()},l(C){e=d(C,"DIV",{class:!0});var O=g(e);t=d(O,"DIV",{class:!0});var U=g(t);s=d(U,"DIV",{class:!0});var K=g(s);o=d(K,"H2",{class:!0,"data-svelte-h":!0}),oe(o)!=="svelte-xef5nc"&&(o.textContent=a),u=A(K),c=d(K,"BUTTON",{class:!0});var Q=g(c);p=Ie(Q,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var W=g(p);b=Ie(W,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),g(b).forEach(i),W.forEach(i),_=Y(Q,`
        Create Channel`),Q.forEach(i),K.forEach(i),w=A(U),M&&M.l(U),v=A(U),h=d(U,"DIV",{class:!0});var q=g(h);k.l(q),q.forEach(i),U.forEach(i),O.forEach(i),this.h()},h(){r(o,"class","card-title"),r(b,"stroke-linecap","round"),r(b,"stroke-linejoin","round"),r(b,"stroke-width","2"),r(b,"d","M12 4v16m8-8H4"),r(p,"xmlns","http://www.w3.org/2000/svg"),r(p,"class","h-5 w-5"),r(p,"fill","none"),r(p,"viewBox","0 0 24 24"),r(p,"stroke","currentColor"),r(c,"class","btn btn-primary gap-2"),c.disabled=n[2],r(s,"class","flex items-center justify-between"),r(h,"class","mt-4"),r(t,"class","card-body"),r(e,"class","card bg-base-200 mb-6")},m(C,O){X(C,e,O),l(e,t),l(t,s),l(s,o),l(s,u),l(s,c),l(c,p),l(p,b),l(c,_),l(t,w),M&&M.m(t,null),l(t,v),l(t,h),E[m].m(h,null),S=!0,T||(N=pe(c,"click",n[11]),T=!0)},p(C,[O]){(!S||O&4)&&(c.disabled=C[2]),C[0]?M?M.p(C,O):(M=Wt(C),M.c(),M.m(t,v)):M&&(M.d(1),M=null);let U=m;m=j(C),m===U?E[m].p(C,O):(at(),Ve(E[U],1,1,()=>{E[U]=null}),it(),k=E[m],k?k.p(C,O):(k=E[m]=z[m](C),k.c()),je(k,1),k.m(h,null))},i(C){S||(je(k),S=!0)},o(C){Ve(k),S=!1},d(C){C&&i(e),M&&M.d(),E[m].d(),T=!1,N()}}}function ns(n){return new Date(n*1e3).toLocaleDateString()}function rs(n){return{public:"badge-success",cohort:"badge-warning",private:"badge-error"}[n]||"badge-ghost"}function Pl(n,e,t){let{channels:s}=e,{isLoading:o}=e,{isSectionLoading:a=!1}=e,{showCreateForm:u=!1}=e,c="",p="",b="public",_="",w=!1,v="Nostr-BBS-guests";const h=gt();function m(){const C=_.split(",").map(O=>O.trim()).filter(Boolean);h("create",{name:c.trim(),description:p.trim()||void 0,visibility:b,cohorts:C,encrypted:w,section:v}),t(4,c=""),t(5,p=""),t(6,b="public"),t(7,_=""),t(8,w=!1),t(9,v="Nostr-BBS-guests"),t(0,u=!1)}const k=()=>t(0,u=!u);function S(){c=this.value,t(4,c)}function T(){p=this.value,t(5,p)}function N(){v=Et(this),t(9,v)}function M(){b=Et(this),t(6,b)}function z(){_=this.value,t(7,_)}function E(){w=this.checked,t(8,w)}const j=()=>t(0,u=!1);return n.$$set=C=>{"channels"in C&&t(1,s=C.channels),"isLoading"in C&&t(2,o=C.isLoading),"isSectionLoading"in C&&t(3,a=C.isSectionLoading),"showCreateForm"in C&&t(0,u=C.showCreateForm)},[u,s,o,a,c,p,b,_,w,v,m,k,S,T,N,M,z,E,j]}class Vl extends tt{constructor(e){super(),st(this,e,Pl,Sl,et,{channels:1,isLoading:2,isSectionLoading:3,showCreateForm:0})}}function os(n,e,t){const s=n.slice();return s[7]=e[t],s}function as(n){let e,t=n[0].length+"",s;return{c(){e=f("span"),s=G(t),this.h()},l(o){e=d(o,"SPAN",{class:!0});var a=g(e);s=Y(a,t),a.forEach(i),this.h()},h(){r(e,"class","badge badge-error")},m(o,a){X(o,e,a),l(e,s)},p(o,a){a&1&&t!==(t=o[0].length+"")&&be(s,t)},d(o){o&&i(e)}}}function jl(n){let e,t,s,o='<tr><th>User</th> <th>Message</th> <th>Requested</th> <th class="text-right">Actions</th></tr>',a,u,c=[],p=new Map,b,_=Be(n[0]);const w=v=>v[7].id;for(let v=0;v<_.length;v+=1){let h=os(n,_,v),m=w(h);p.set(m,c[v]=is(m,h))}return{c(){e=f("div"),t=f("table"),s=f("thead"),s.innerHTML=o,a=I(),u=f("tbody");for(let v=0;v<c.length;v+=1)c[v].c();this.h()},l(v){e=d(v,"DIV",{class:!0});var h=g(e);t=d(h,"TABLE",{class:!0});var m=g(t);s=d(m,"THEAD",{"data-svelte-h":!0}),oe(s)!=="svelte-ud2ebl"&&(s.innerHTML=o),a=A(m),u=d(m,"TBODY",{});var k=g(u);for(let S=0;S<c.length;S+=1)c[S].l(k);k.forEach(i),m.forEach(i),h.forEach(i),this.h()},h(){r(t,"class","table table-zebra"),r(e,"class","overflow-x-auto mt-4")},m(v,h){X(v,e,h),l(e,t),l(t,s),l(t,a),l(t,u);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(u,null);b=!0},p(v,h){h&11&&(_=Be(v[0]),at(),c=_t(c,h,w,1,v,_,p,u,Lt,is,null,os),it())},i(v){if(!b){for(let h=0;h<_.length;h+=1)je(c[h]);b=!0}},o(v){for(let h=0;h<c.length;h+=1)Ve(c[h]);b=!1},d(v){v&&i(e);for(let h=0;h<c.length;h+=1)c[h].d()}}}function Bl(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto mb-2 opacity-50" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path></svg> <p>No pending user registrations</p> <p class="text-sm mt-1">New users signing up will appear here for approval</p>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(s){e=d(s,"DIV",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-11xswww"&&(e.innerHTML=t),this.h()},h(){r(e,"class","text-center py-8 text-base-content/50")},m(s,o){X(s,e,o)},p:ye,i:ye,o:ye,d(s){s&&i(e)}}}function Rl(n){let e,t='<span class="loading loading-spinner loading-lg"></span> <p class="mt-2 text-base-content/70">Loading user registrations...</p>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(s){e=d(s,"DIV",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-1qyhxzs"&&(e.innerHTML=t),this.h()},h(){r(e,"class","text-center py-8")},m(s,o){X(s,e,o)},p:ye,i:ye,o:ye,d(s){s&&i(e)}}}function Ul(n){let e,t="No message";return{c(){e=f("span"),e.textContent=t,this.h()},l(s){e=d(s,"SPAN",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-tay6cd"&&(e.textContent=t),this.h()},h(){r(e,"class","text-xs text-base-content/50")},m(s,o){X(s,e,o)},p:ye,d(s){s&&i(e)}}}function Hl(n){let e,t=n[7].message+"",s;return{c(){e=f("span"),s=G(t),this.h()},l(o){e=d(o,"SPAN",{class:!0});var a=g(e);s=Y(a,t),a.forEach(i),this.h()},h(){r(e,"class","text-sm text-base-content/70 line-clamp-2")},m(o,a){X(o,e,a),l(e,s)},p(o,a){a&1&&t!==(t=o[7].message+"")&&be(s,t)},d(o){o&&i(e)}}}function is(n,e){let t,s,o,a,u,c,p,b,_=cs(e[7].createdAt)+"",w,v,h,m,k,S,T,N,M,z,E,j,C;o=new Nt({props:{pubkey:e[7].pubkey,showAvatar:!0,showName:!0,showFullName:!0,avatarSize:"sm",clickable:!1}});function O(q,F){return q[7].message?Hl:Ul}let U=O(e),K=U(e);function Q(){return e[5](e[7])}function W(){return e[6](e[7])}return{key:n,first:null,c(){t=f("tr"),s=f("td"),Ye(o.$$.fragment),a=I(),u=f("td"),K.c(),c=I(),p=f("td"),b=f("span"),w=G(_),v=I(),h=f("td"),m=f("div"),k=f("button"),S=G("Approve"),T=I(),N=f("button"),M=G("Reject"),z=I(),this.h()},l(q){t=d(q,"TR",{});var F=g(t);s=d(F,"TD",{});var Z=g(s);Qe(o.$$.fragment,Z),Z.forEach(i),a=A(F),u=d(F,"TD",{});var V=g(u);K.l(V),V.forEach(i),c=A(F),p=d(F,"TD",{});var P=g(p);b=d(P,"SPAN",{class:!0});var D=g(b);w=Y(D,_),D.forEach(i),P.forEach(i),v=A(F),h=d(F,"TD",{});var y=g(h);m=d(y,"DIV",{class:!0});var L=g(m);k=d(L,"BUTTON",{class:!0});var x=g(k);S=Y(x,"Approve"),x.forEach(i),T=A(L),N=d(L,"BUTTON",{class:!0});var R=g(N);M=Y(R,"Reject"),R.forEach(i),L.forEach(i),y.forEach(i),z=A(F),F.forEach(i),this.h()},h(){r(b,"class","text-sm"),r(k,"class","btn btn-success btn-sm"),k.disabled=e[1],r(N,"class","btn btn-error btn-sm btn-outline"),N.disabled=e[1],r(m,"class","flex justify-end gap-2"),this.first=t},m(q,F){X(q,t,F),l(t,s),Je(o,s,null),l(t,a),l(t,u),K.m(u,null),l(t,c),l(t,p),l(p,b),l(b,w),l(t,v),l(t,h),l(h,m),l(m,k),l(k,S),l(m,T),l(m,N),l(N,M),l(t,z),E=!0,j||(C=[pe(k,"click",Q),pe(N,"click",W)],j=!0)},p(q,F){e=q;const Z={};F&1&&(Z.pubkey=e[7].pubkey),o.$set(Z),U===(U=O(e))&&K?K.p(e,F):(K.d(1),K=U(e),K&&(K.c(),K.m(u,null))),(!E||F&1)&&_!==(_=cs(e[7].createdAt)+"")&&be(w,_),(!E||F&2)&&(k.disabled=e[1]),(!E||F&2)&&(N.disabled=e[1])},i(q){E||(je(o.$$.fragment,q),E=!0)},o(q){Ve(o.$$.fragment,q),E=!1},d(q){q&&i(t),Ke(o),K.d(),j=!1,We(C)}}}function Ol(n){let e,t,s,o,a,u,c,p,b,_,w,v,h,m,k,S,T=n[0].length>0&&as(n);const N=[Rl,Bl,jl],M=[];function z(E,j){return E[2]&&E[0].length===0?0:E[0].length===0?1:2}return v=z(n),h=M[v]=N[v](n),{c(){e=f("div"),t=f("div"),s=f("div"),o=f("h2"),a=G(`Pending User Registrations
        `),T&&T.c(),u=I(),c=f("button"),p=Ne("svg"),b=Ne("path"),_=G(`
        Refresh`),w=I(),h.c(),this.h()},l(E){e=d(E,"DIV",{class:!0});var j=g(e);t=d(j,"DIV",{class:!0});var C=g(t);s=d(C,"DIV",{class:!0});var O=g(s);o=d(O,"H2",{class:!0});var U=g(o);a=Y(U,`Pending User Registrations
        `),T&&T.l(U),U.forEach(i),u=A(O),c=d(O,"BUTTON",{class:!0});var K=g(c);p=Ie(K,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var Q=g(p);b=Ie(Q,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),g(b).forEach(i),Q.forEach(i),_=Y(K,`
        Refresh`),K.forEach(i),O.forEach(i),w=A(C),h.l(C),C.forEach(i),j.forEach(i),this.h()},h(){r(o,"class","card-title"),r(b,"stroke-linecap","round"),r(b,"stroke-linejoin","round"),r(b,"stroke-width","2"),r(b,"d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"),r(p,"xmlns","http://www.w3.org/2000/svg"),r(p,"class","h-4 w-4"),r(p,"fill","none"),r(p,"viewBox","0 0 24 24"),r(p,"stroke","currentColor"),r(c,"class","btn btn-ghost btn-sm"),c.disabled=n[1],r(s,"class","flex items-center justify-between"),r(t,"class","card-body"),r(e,"class","card bg-base-200 mb-6")},m(E,j){X(E,e,j),l(e,t),l(t,s),l(s,o),l(o,a),T&&T.m(o,null),l(s,u),l(s,c),l(c,p),l(p,b),l(c,_),l(t,w),M[v].m(t,null),m=!0,k||(S=pe(c,"click",n[4]),k=!0)},p(E,[j]){E[0].length>0?T?T.p(E,j):(T=as(E),T.c(),T.m(o,null)):T&&(T.d(1),T=null),(!m||j&2)&&(c.disabled=E[1]);let C=v;v=z(E),v===C?M[v].p(E,j):(at(),Ve(M[C],1,1,()=>{M[C]=null}),it(),h=M[v],h?h.p(E,j):(h=M[v]=N[v](E),h.c()),je(h,1),h.m(t,null))},i(E){m||(je(h),m=!0)},o(E){Ve(h),m=!1},d(E){E&&i(e),T&&T.d(),M[v].d(),k=!1,S()}}}function cs(n){const t=Date.now()-n,s=Math.floor(t/1e3),o=Math.floor(s/60),a=Math.floor(o/60),u=Math.floor(a/24);return u>0?`${u}d ago`:a>0?`${a}h ago`:o>0?`${o}m ago`:"just now"}function ql(n,e,t){let{pendingUserRegistrations:s}=e,{isLoading:o}=e,{isSectionLoading:a=!1}=e;const u=gt(),c=()=>u("refresh"),p=_=>u("approve",_),b=_=>u("reject",_);return n.$$set=_=>{"pendingUserRegistrations"in _&&t(0,s=_.pendingUserRegistrations),"isLoading"in _&&t(1,o=_.isLoading),"isSectionLoading"in _&&t(2,a=_.isSectionLoading)},[s,o,a,u,c,p,b]}class zl extends tt{constructor(e){super(),st(this,e,ql,Ol,et,{pendingUserRegistrations:0,isLoading:1,isSectionLoading:2})}}function us(n,e,t){const s=n.slice();s[49]=e[t];const o=s[12].includes(s[49].id);return s[50]=o,s}function ds(n,e,t){const s=n.slice();s[53]=e[t];const o=s[20](s[53]);s[54]=o;const a=s[14].has(s[53].pubkey);s[55]=a;const u=s[2].has(s[53].pubkey);return s[56]=u,s}function fs(n,e,t){const s=n.slice();s[49]=e[t];const o=Ql(s[53],s[49].id);return s[56]=o,s}function hs(n,e,t){const s=n.slice();return s[61]=e[t],s}function ps(n,e,t){const s=n.slice();return s[49]=e[t],s}function vs(n,e,t){const s=n.slice();return s[49]=e[t],s}function gs(n){let e,t,s,o,a,u,c,p,b="Dismiss",_,w;return{c(){e=f("div"),t=Ne("svg"),s=Ne("path"),o=I(),a=f("span"),u=G(n[8]),c=I(),p=f("button"),p.textContent=b,this.h()},l(v){e=d(v,"DIV",{class:!0});var h=g(e);t=Ie(h,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var m=g(t);s=Ie(m,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),g(s).forEach(i),m.forEach(i),o=A(h),a=d(h,"SPAN",{});var k=g(a);u=Y(k,n[8]),k.forEach(i),c=A(h),p=d(h,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(p)!=="svelte-1oc0rew"&&(p.textContent=b),h.forEach(i),this.h()},h(){r(s,"stroke-linecap","round"),r(s,"stroke-linejoin","round"),r(s,"stroke-width","2"),r(s,"d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"),r(t,"xmlns","http://www.w3.org/2000/svg"),r(t,"class","stroke-current shrink-0 h-6 w-6"),r(t,"fill","none"),r(t,"viewBox","0 0 24 24"),r(p,"class","btn btn-ghost btn-sm"),r(e,"class","alert alert-error mb-4")},m(v,h){X(v,e,h),l(e,t),l(t,s),l(e,o),l(e,a),l(a,u),l(e,c),l(e,p),_||(w=pe(p,"click",n[32]),_=!0)},p(v,h){h[0]&256&&be(u,v[8])},d(v){v&&i(e),_=!1,w()}}}function _s(n){let e,t,s,o,a,u;return{c(){e=f("div"),t=Ne("svg"),s=Ne("path"),o=I(),a=f("span"),u=G(n[9]),this.h()},l(c){e=d(c,"DIV",{class:!0});var p=g(e);t=Ie(p,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var b=g(t);s=Ie(b,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),g(s).forEach(i),b.forEach(i),o=A(p),a=d(p,"SPAN",{});var _=g(a);u=Y(_,n[9]),_.forEach(i),p.forEach(i),this.h()},h(){r(s,"stroke-linecap","round"),r(s,"stroke-linejoin","round"),r(s,"stroke-width","2"),r(s,"d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"),r(t,"xmlns","http://www.w3.org/2000/svg"),r(t,"class","stroke-current shrink-0 h-6 w-6"),r(t,"fill","none"),r(t,"viewBox","0 0 24 24"),r(e,"class","alert alert-success mb-4")},m(c,p){X(c,e,p),l(e,t),l(t,s),l(e,o),l(e,a),l(a,u)},p(c,p){p[0]&512&&be(u,c[9])},d(c){c&&i(e)}}}function bs(n){let e,t=n[49].label+"",s;return{c(){e=f("option"),s=G(t),this.h()},l(o){e=d(o,"OPTION",{});var a=g(e);s=Y(a,t),a.forEach(i),this.h()},h(){e.__value=n[49].id,Oe(e,e.__value)},m(o,a){X(o,e,a),l(e,s)},p:ye,d(o){o&&i(e)}}}function ms(n){let e,t,s=n[2].size+"",o,a,u=n[2].size!==1?"s":"",c,p,b,_,w,v,h,m,k,S,T,N,M,z,E,j,C,O,U,K="Clear selection",Q,W,q,F=Be(n[18]),Z=[];for(let P=0;P<F.length;P+=1)Z[P]=ks(ps(n,F,P));let V=n[10]&&ws();return{c(){e=f("div"),t=f("span"),o=G(s),a=G(" user"),c=G(u),p=G(" selected"),b=I(),_=f("div"),w=I(),v=f("button"),h=Ne("svg"),m=Ne("path"),k=G(`
          Assign Zones`),S=I(),T=f("div"),N=f("button"),M=Ne("svg"),z=Ne("path"),E=G(`
            Remove Zone`),j=I(),C=f("ul");for(let P=0;P<Z.length;P+=1)Z[P].c();O=I(),U=f("button"),U.textContent=K,Q=I(),V&&V.c(),this.h()},l(P){e=d(P,"DIV",{class:!0});var D=g(e);t=d(D,"SPAN",{class:!0});var y=g(t);o=Y(y,s),a=Y(y," user"),c=Y(y,u),p=Y(y," selected"),y.forEach(i),b=A(D),_=d(D,"DIV",{class:!0}),g(_).forEach(i),w=A(D),v=d(D,"BUTTON",{class:!0});var L=g(v);h=Ie(L,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var x=g(h);m=Ie(x,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),g(m).forEach(i),x.forEach(i),k=Y(L,`
          Assign Zones`),L.forEach(i),S=A(D),T=d(D,"DIV",{class:!0});var R=g(T);N=d(R,"BUTTON",{tabindex:!0,class:!0});var $=g(N);M=Ie($,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var se=g(M);z=Ie(se,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),g(z).forEach(i),se.forEach(i),E=Y($,`
            Remove Zone`),$.forEach(i),j=A(R),C=d(R,"UL",{tabindex:!0,class:!0});var ce=g(C);for(let Me=0;Me<Z.length;Me+=1)Z[Me].l(ce);ce.forEach(i),R.forEach(i),O=A(D),U=d(D,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(U)!=="svelte-h4yim2"&&(U.textContent=K),Q=A(D),V&&V.l(D),D.forEach(i),this.h()},h(){r(t,"class","font-medium text-sm"),r(_,"class","divider divider-horizontal mx-1"),r(m,"stroke-linecap","round"),r(m,"stroke-linejoin","round"),r(m,"stroke-width","2"),r(m,"d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"),r(h,"xmlns","http://www.w3.org/2000/svg"),r(h,"class","h-4 w-4"),r(h,"fill","none"),r(h,"viewBox","0 0 24 24"),r(h,"stroke","currentColor"),r(v,"class","btn btn-sm btn-primary"),v.disabled=n[10],r(z,"stroke-linecap","round"),r(z,"stroke-linejoin","round"),r(z,"stroke-width","2"),r(z,"d","M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"),r(M,"xmlns","http://www.w3.org/2000/svg"),r(M,"class","h-4 w-4"),r(M,"fill","none"),r(M,"viewBox","0 0 24 24"),r(M,"stroke","currentColor"),r(N,"tabindex","0"),r(N,"class","btn btn-sm btn-outline btn-error"),N.disabled=n[10],r(C,"tabindex","0"),r(C,"class","dropdown-content z-10 menu p-2 shadow bg-base-100 rounded-box w-52"),r(T,"class","dropdown dropdown-bottom"),r(U,"class","btn btn-sm btn-ghost"),r(e,"class","flex flex-wrap items-center gap-2 p-3 bg-primary/10 rounded-lg mb-4 border border-primary/30")},m(P,D){X(P,e,D),l(e,t),l(t,o),l(t,a),l(t,c),l(t,p),l(e,b),l(e,_),l(e,w),l(e,v),l(v,h),l(h,m),l(v,k),l(e,S),l(e,T),l(T,N),l(N,M),l(M,z),l(N,E),l(T,j),l(T,C);for(let y=0;y<Z.length;y+=1)Z[y]&&Z[y].m(C,null);l(e,O),l(e,U),l(e,Q),V&&V.m(e,null),W||(q=[pe(v,"click",n[28]),pe(U,"click",n[27])],W=!0)},p(P,D){if(D[0]&4&&s!==(s=P[2].size+"")&&be(o,s),D[0]&4&&u!==(u=P[2].size!==1?"s":"")&&be(c,u),D[0]&1024&&(v.disabled=P[10]),D[0]&1024&&(N.disabled=P[10]),D[0]&262144|D[1]&1){F=Be(P[18]);let y;for(y=0;y<F.length;y+=1){const L=ps(P,F,y);Z[y]?Z[y].p(L,D):(Z[y]=ks(L),Z[y].c(),Z[y].m(C,null))}for(;y<Z.length;y+=1)Z[y].d(1);Z.length=F.length}P[10]?V||(V=ws(),V.c(),V.m(e,null)):V&&(V.d(1),V=null)},d(P){P&&i(e),ot(Z,P),V&&V.d(),W=!1,We(q)}}}function ks(n){let e,t,s,o,a=n[49].label+"",u,c,p,b;function _(){return n[35](n[49])}return{c(){e=f("li"),t=f("button"),s=f("span"),o=I(),u=G(a),c=I(),this.h()},l(w){e=d(w,"LI",{});var v=g(e);t=d(v,"BUTTON",{class:!0});var h=g(t);s=d(h,"SPAN",{class:!0,style:!0}),g(s).forEach(i),o=A(h),u=Y(h,a),h.forEach(i),c=A(v),v.forEach(i),this.h()},h(){r(s,"class","w-3 h-3 rounded-full"),Ks(s,"background-color",n[49].color),r(t,"class","text-sm")},m(w,v){X(w,e,v),l(e,t),l(t,s),l(t,o),l(t,u),l(e,c),p||(b=pe(t,"click",_),p=!0)},p(w,v){n=w},d(w){w&&i(e),p=!1,b()}}}function ws(n){let e;return{c(){e=f("span"),this.h()},l(t){e=d(t,"SPAN",{class:!0}),g(e).forEach(i),this.h()},h(){r(e,"class","loading loading-spinner loading-sm ml-2")},m(t,s){X(t,e,s)},d(t){t&&i(e)}}}function Fl(n){let e=[],t=new Map,s,o=Be(n[6]);const a=u=>u[53].pubkey;for(let u=0;u<o.length;u+=1){let c=ds(n,o,u),p=a(c);t.set(p,e[u]=Ds(p,c))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();s=yt()},l(u){for(let c=0;c<e.length;c+=1)e[c].l(u);s=yt()},m(u,c){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(u,c);X(u,s,c)},p(u,c){c[0]&70533188&&(o=Be(u[6]),e=_t(e,c,a,1,u,o,t,s.parentNode,Qs,Ds,s,ds))},d(u){u&&i(s);for(let c=0;c<e.length;c+=1)e[c].d(u)}}}function Zl(n){let e,t='<td colspan="4" class="text-center py-8 text-base-content/50">No users found</td>';return{c(){e=f("tr"),e.innerHTML=t},l(s){e=d(s,"TR",{"data-svelte-h":!0}),oe(e)!=="svelte-r1ejgo"&&(e.innerHTML=t)},m(s,o){X(s,e,o)},p:ye,d(s){s&&i(e)}}}function xl(n){let e,t='<td colspan="4" class="text-center py-8"><span class="loading loading-spinner loading-md"></span></td>';return{c(){e=f("tr"),e.innerHTML=t},l(s){e=d(s,"TR",{"data-svelte-h":!0}),oe(e)!=="svelte-jceq40"&&(e.innerHTML=t)},m(s,o){X(s,e,o)},p:ye,d(s){s&&i(e)}}}function Es(n){let e,t=Be(n[53].cohorts.filter(n[37])),s=[];for(let o=0;o<t.length;o+=1)s[o]=ys(hs(n,t,o));return{c(){e=f("div");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){e=d(o,"DIV",{class:!0});var a=g(e);for(let u=0;u<s.length;u+=1)s[u].l(a);a.forEach(i),this.h()},h(){r(e,"class","flex flex-wrap gap-1 mt-1")},m(o,a){X(o,e,a);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null)},p(o,a){if(a[0]&262208){t=Be(o[53].cohorts.filter(o[37]));let u;for(u=0;u<t.length;u+=1){const c=hs(o,t,u);s[u]?s[u].p(c,a):(s[u]=ys(c),s[u].c(),s[u].m(e,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=t.length}},d(o){o&&i(e),ot(s,o)}}}function ys(n){let e,t=n[61]+"",s;return{c(){e=f("span"),s=G(t),this.h()},l(o){e=d(o,"SPAN",{class:!0});var a=g(e);s=Y(a,t),a.forEach(i),this.h()},h(){r(e,"class","badge badge-xs badge-ghost")},m(o,a){X(o,e,a),l(e,s)},p(o,a){a[0]&64&&t!==(t=o[61]+"")&&be(s,t)},d(o){o&&i(e)}}}function Cs(n){let e,t,s,o,a,u,c=n[49].label+"",p,b,_,w,v;function h(...m){return n[38](n[53],n[49],...m)}return{c(){e=f("label"),t=f("input"),a=I(),u=f("span"),p=G(c),this.h()},l(m){e=d(m,"LABEL",{class:!0,style:!0});var k=g(e);t=d(k,"INPUT",{type:!0,class:!0,style:!0}),a=A(k),u=d(k,"SPAN",{class:!0,style:!0});var S=g(u);p=Y(S,c),S.forEach(i),k.forEach(i),this.h()},h(){r(t,"type","checkbox"),r(t,"class","checkbox checkbox-sm"),r(t,"style",`--chkbg: ${n[49].color}; --bc: ${n[49].color};`),t.checked=s=n[56],t.disabled=o=n[55],r(u,"class","text-xs font-medium"),r(u,"style",b=n[56]?`color: ${n[49].color};`:""),r(e,"class","flex items-center gap-1 cursor-pointer px-2 py-1 rounded-lg border-2 transition-all"),r(e,"style",_=n[56]?`border-color: ${n[49].color}; background-color: ${n[49].color}20;`:""),qe(e,"border-transparent",!n[56]),qe(e,"bg-base-100",!n[56]),qe(e,"opacity-70",!n[56])},m(m,k){X(m,e,k),l(e,t),l(e,a),l(e,u),l(u,p),w||(v=pe(t,"change",h),w=!0)},p(m,k){n=m,k[0]&64&&s!==(s=n[56])&&(t.checked=s),k[0]&16448&&o!==(o=n[55])&&(t.disabled=o),k[0]&64&&b!==(b=n[56]?`color: ${n[49].color};`:"")&&r(u,"style",b),k[0]&64&&_!==(_=n[56]?`border-color: ${n[49].color}; background-color: ${n[49].color}20;`:"")&&r(e,"style",_),k[0]&262208&&qe(e,"border-transparent",!n[56]),k[0]&262208&&qe(e,"bg-base-100",!n[56]),k[0]&262208&&qe(e,"opacity-70",!n[56])},d(m){m&&i(e),w=!1,v()}}}function Ts(n){let e;return{c(){e=f("span"),this.h()},l(t){e=d(t,"SPAN",{class:!0}),g(e).forEach(i),this.h()},h(){r(e,"class","loading loading-spinner loading-xs")},m(t,s){X(t,e,s)},d(t){t&&i(e)}}}function Ms(n){let e,t="No zones assigned";return{c(){e=f("div"),e.textContent=t,this.h()},l(s){e=d(s,"DIV",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-hmjmvm"&&(e.textContent=t),this.h()},h(){r(e,"class","text-xs text-warning text-center mt-1")},m(s,o){X(s,e,o)},d(s){s&&i(e)}}}function Ds(n,e){let t,s,o,a,u,c,p,b,_=(e[53].displayName||"Anonymous")+"",w,v,h,m=It(e[53].pubkey)+"",k,S,T,N,M=Ss(e[53].addedAt)+"",z,E,j,C,O,U,K,Q,W,q;function F(){return e[36](e[53])}let Z=e[53].cohorts.length>0&&Es(e),V=Be(e[18]),P=[];for(let L=0;L<V.length;L+=1)P[L]=Cs(fs(e,V,L));let D=e[55]&&Ts(),y=e[54].length===0&&Ms();return{key:n,first:null,c(){t=f("tr"),s=f("td"),o=f("input"),u=I(),c=f("td"),p=f("div"),b=f("span"),w=G(_),v=I(),h=f("span"),k=G(m),S=I(),Z&&Z.c(),T=I(),N=f("td"),z=G(M),E=I(),j=f("td"),C=f("div");for(let L=0;L<P.length;L+=1)P[L].c();O=I(),D&&D.c(),U=I(),y&&y.c(),K=I(),this.h()},l(L){t=d(L,"TR",{class:!0});var x=g(t);s=d(x,"TD",{});var R=g(s);o=d(R,"INPUT",{type:!0,class:!0}),R.forEach(i),u=A(x),c=d(x,"TD",{});var $=g(c);p=d($,"DIV",{class:!0});var se=g(p);b=d(se,"SPAN",{class:!0});var ce=g(b);w=Y(ce,_),ce.forEach(i),v=A(se),h=d(se,"SPAN",{class:!0});var Me=g(h);k=Y(Me,m),Me.forEach(i),S=A(se),Z&&Z.l(se),se.forEach(i),$.forEach(i),T=A(x),N=d(x,"TD",{class:!0});var ge=g(N);z=Y(ge,M),ge.forEach(i),E=A(x),j=d(x,"TD",{});var ne=g(j);C=d(ne,"DIV",{class:!0});var _e=g(C);for(let fe=0;fe<P.length;fe+=1)P[fe].l(_e);O=A(_e),D&&D.l(_e),_e.forEach(i),U=A(ne),y&&y.l(ne),ne.forEach(i),K=A(x),x.forEach(i),this.h()},h(){r(o,"type","checkbox"),r(o,"class","checkbox checkbox-sm"),o.checked=a=e[56],r(b,"class","font-medium"),r(h,"class","text-xs text-base-content/50 font-mono"),r(p,"class","flex flex-col"),r(N,"class","text-sm text-base-content/70"),r(C,"class","flex flex-wrap justify-center gap-2"),r(t,"class",Q=(e[55]?"opacity-50":"")+" "+(e[56]?"bg-primary bg-opacity-5":"")),this.first=t},m(L,x){X(L,t,x),l(t,s),l(s,o),l(t,u),l(t,c),l(c,p),l(p,b),l(b,w),l(p,v),l(p,h),l(h,k),l(p,S),Z&&Z.m(p,null),l(t,T),l(t,N),l(N,z),l(t,E),l(t,j),l(j,C);for(let R=0;R<P.length;R+=1)P[R]&&P[R].m(C,null);l(C,O),D&&D.m(C,null),l(j,U),y&&y.m(j,null),l(t,K),W||(q=pe(o,"change",F),W=!0)},p(L,x){if(e=L,x[0]&68&&a!==(a=e[56])&&(o.checked=a),x[0]&64&&_!==(_=(e[53].displayName||"Anonymous")+"")&&be(w,_),x[0]&64&&m!==(m=It(e[53].pubkey)+"")&&be(k,m),e[53].cohorts.length>0?Z?Z.p(e,x):(Z=Es(e),Z.c(),Z.m(p,null)):Z&&(Z.d(1),Z=null),x[0]&64&&M!==(M=Ss(e[53].addedAt)+"")&&be(z,M),x[0]&2375744){V=Be(e[18]);let R;for(R=0;R<V.length;R+=1){const $=fs(e,V,R);P[R]?P[R].p($,x):(P[R]=Cs($),P[R].c(),P[R].m(C,O))}for(;R<P.length;R+=1)P[R].d(1);P.length=V.length}e[55]?D||(D=Ts(),D.c(),D.m(C,null)):D&&(D.d(1),D=null),e[54].length===0?y||(y=Ms(),y.c(),y.m(j,null)):y&&(y.d(1),y=null),x[0]&16452&&Q!==(Q=(e[55]?"opacity-50":"")+" "+(e[56]?"bg-primary bg-opacity-5":""))&&r(t,"class",Q)},d(L){L&&i(t),Z&&Z.d(),ot(P,L),D&&D.d(),y&&y.d(),W=!1,q()}}}function As(n){let e,t,s,o,a,u,c,p,b,_,w,v,h,m,k,S,T,N,M,z,E,j,C,O,U,K,Q,W;return{c(){e=f("div"),t=f("button"),s=Ne("svg"),o=Ne("path"),u=I(),c=f("button"),p=Ne("svg"),b=Ne("path"),w=I(),v=f("span"),h=G("Page "),m=G(n[3]),k=G(" of "),S=G(n[16]),T=I(),N=f("button"),M=Ne("svg"),z=Ne("path"),j=I(),C=f("button"),O=Ne("svg"),U=Ne("path"),this.h()},l(q){e=d(q,"DIV",{class:!0});var F=g(e);t=d(F,"BUTTON",{class:!0});var Z=g(t);s=Ie(Z,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var V=g(s);o=Ie(V,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),g(o).forEach(i),V.forEach(i),Z.forEach(i),u=A(F),c=d(F,"BUTTON",{class:!0});var P=g(c);p=Ie(P,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var D=g(p);b=Ie(D,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),g(b).forEach(i),D.forEach(i),P.forEach(i),w=A(F),v=d(F,"SPAN",{class:!0});var y=g(v);h=Y(y,"Page "),m=Y(y,n[3]),k=Y(y," of "),S=Y(y,n[16]),y.forEach(i),T=A(F),N=d(F,"BUTTON",{class:!0});var L=g(N);M=Ie(L,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var x=g(M);z=Ie(x,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),g(z).forEach(i),x.forEach(i),L.forEach(i),j=A(F),C=d(F,"BUTTON",{class:!0});var R=g(C);O=Ie(R,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var $=g(O);U=Ie($,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),g(U).forEach(i),$.forEach(i),R.forEach(i),F.forEach(i),this.h()},h(){r(o,"stroke-linecap","round"),r(o,"stroke-linejoin","round"),r(o,"stroke-width","2"),r(o,"d","M11 19l-7-7 7-7m8 14l-7-7 7-7"),r(s,"xmlns","http://www.w3.org/2000/svg"),r(s,"class","h-4 w-4"),r(s,"fill","none"),r(s,"viewBox","0 0 24 24"),r(s,"stroke","currentColor"),r(t,"class","btn btn-sm btn-ghost"),t.disabled=a=n[3]===1||n[7],r(b,"stroke-linecap","round"),r(b,"stroke-linejoin","round"),r(b,"stroke-width","2"),r(b,"d","M15 19l-7-7 7-7"),r(p,"xmlns","http://www.w3.org/2000/svg"),r(p,"class","h-4 w-4"),r(p,"fill","none"),r(p,"viewBox","0 0 24 24"),r(p,"stroke","currentColor"),r(c,"class","btn btn-sm btn-ghost"),c.disabled=_=n[3]===1||n[7],r(v,"class","text-sm text-base-content/70"),r(z,"stroke-linecap","round"),r(z,"stroke-linejoin","round"),r(z,"stroke-width","2"),r(z,"d","M9 5l7 7-7 7"),r(M,"xmlns","http://www.w3.org/2000/svg"),r(M,"class","h-4 w-4"),r(M,"fill","none"),r(M,"viewBox","0 0 24 24"),r(M,"stroke","currentColor"),r(N,"class","btn btn-sm btn-ghost"),N.disabled=E=n[3]===n[16]||n[7],r(U,"stroke-linecap","round"),r(U,"stroke-linejoin","round"),r(U,"stroke-width","2"),r(U,"d","M13 5l7 7-7 7M5 5l7 7-7 7"),r(O,"xmlns","http://www.w3.org/2000/svg"),r(O,"class","h-4 w-4"),r(O,"fill","none"),r(O,"viewBox","0 0 24 24"),r(O,"stroke","currentColor"),r(C,"class","btn btn-sm btn-ghost"),C.disabled=K=n[3]===n[16]||n[7],r(e,"class","flex justify-center items-center gap-2 mt-4")},m(q,F){X(q,e,F),l(e,t),l(t,s),l(s,o),l(e,u),l(e,c),l(c,p),l(p,b),l(e,w),l(e,v),l(v,h),l(v,m),l(v,k),l(v,S),l(e,T),l(e,N),l(N,M),l(M,z),l(e,j),l(e,C),l(C,O),l(O,U),Q||(W=[pe(t,"click",n[39]),pe(c,"click",n[40]),pe(N,"click",n[41]),pe(C,"click",n[42])],Q=!0)},p(q,F){F[0]&136&&a!==(a=q[3]===1||q[7])&&(t.disabled=a),F[0]&136&&_!==(_=q[3]===1||q[7])&&(c.disabled=_),F[0]&8&&be(m,q[3]),F[0]&65536&&be(S,q[16]),F[0]&65672&&E!==(E=q[3]===q[16]||q[7])&&(N.disabled=E),F[0]&65672&&K!==(K=q[3]===q[16]||q[7])&&(C.disabled=K)},d(q){q&&i(e),Q=!1,We(W)}}}function Is(n){let e,t,s,o,a=n[2].size+"",u,c,p=n[2].size!==1?"s":"",b,_,w,v="Select zones to assign. This will add the selected zones while preserving any existing non-zone cohorts.",h,m,k,S,T,N,M,z,E,j=n[2].size+"",C,O,U=n[2].size!==1?"s":"",K,Q,W,q,F,Z=Be(n[18]),V=[];for(let D=0;D<Z.length;D+=1)V[D]=Ns(us(n,Z,D));let P=n[10]&&Ls();return{c(){e=f("div"),t=f("div"),s=f("h3"),o=G("Assign Zones to "),u=G(a),c=G(" User"),b=G(p),_=I(),w=f("p"),w.textContent=v,h=I(),m=f("div");for(let D=0;D<V.length;D+=1)V[D].c();k=I(),S=f("div"),T=f("button"),N=G("Cancel"),M=I(),z=f("button"),P&&P.c(),E=G(`
          Apply to `),C=G(j),O=G(" User"),K=G(U),Q=I(),W=f("div"),this.h()},l(D){e=d(D,"DIV",{class:!0});var y=g(e);t=d(y,"DIV",{class:!0});var L=g(t);s=d(L,"H3",{class:!0});var x=g(s);o=Y(x,"Assign Zones to "),u=Y(x,a),c=Y(x," User"),b=Y(x,p),x.forEach(i),_=A(L),w=d(L,"P",{class:!0,"data-svelte-h":!0}),oe(w)!=="svelte-1tc2pn8"&&(w.textContent=v),h=A(L),m=d(L,"DIV",{class:!0});var R=g(m);for(let Me=0;Me<V.length;Me+=1)V[Me].l(R);R.forEach(i),k=A(L),S=d(L,"DIV",{class:!0});var $=g(S);T=d($,"BUTTON",{class:!0});var se=g(T);N=Y(se,"Cancel"),se.forEach(i),M=A($),z=d($,"BUTTON",{class:!0});var ce=g(z);P&&P.l(ce),E=Y(ce,`
          Apply to `),C=Y(ce,j),O=Y(ce," User"),K=Y(ce,U),ce.forEach(i),$.forEach(i),L.forEach(i),Q=A(y),W=d(y,"DIV",{class:!0,role:!0,tabindex:!0}),g(W).forEach(i),y.forEach(i),this.h()},h(){r(s,"class","font-bold text-lg mb-4"),r(w,"class","text-sm text-base-content/70 mb-4"),r(m,"class","space-y-3"),r(T,"class","btn btn-ghost"),T.disabled=n[10],r(z,"class","btn btn-primary"),z.disabled=n[10],r(S,"class","modal-action"),r(t,"class","modal-box"),r(W,"class","modal-backdrop"),r(W,"role","button"),r(W,"tabindex","0"),r(e,"class","modal modal-open")},m(D,y){X(D,e,y),l(e,t),l(t,s),l(s,o),l(s,u),l(s,c),l(s,b),l(t,_),l(t,w),l(t,h),l(t,m);for(let L=0;L<V.length;L+=1)V[L]&&V[L].m(m,null);l(t,k),l(t,S),l(S,T),l(T,N),l(S,M),l(S,z),P&&P.m(z,null),l(z,E),l(z,C),l(z,O),l(z,K),l(e,Q),l(e,W),q||(F=[pe(T,"click",n[29]),pe(z,"click",n[30]),pe(W,"click",n[29]),pe(W,"keydown",n[46])],q=!0)},p(D,y){if(y[0]&4&&a!==(a=D[2].size+"")&&be(u,a),y[0]&4&&p!==(p=D[2].size!==1?"s":"")&&be(b,p),y[0]&266240){Z=Be(D[18]);let L;for(L=0;L<Z.length;L+=1){const x=us(D,Z,L);V[L]?V[L].p(x,y):(V[L]=Ns(x),V[L].c(),V[L].m(m,null))}for(;L<V.length;L+=1)V[L].d(1);V.length=Z.length}y[0]&1024&&(T.disabled=D[10]),D[10]?P||(P=Ls(),P.c(),P.m(z,E)):P&&(P.d(1),P=null),y[0]&4&&j!==(j=D[2].size+"")&&be(C,j),y[0]&4&&U!==(U=D[2].size!==1?"s":"")&&be(K,U),y[0]&1024&&(z.disabled=D[10])},d(D){D&&i(e),ot(V,D),P&&P.d(),q=!1,We(F)}}}function Ns(n){let e,t,s,o,a,u,c,p=n[49].label+"",b,_,w,v,h;function m(...k){return n[45](n[49],...k)}return{c(){e=f("label"),t=f("input"),o=I(),a=f("span"),u=I(),c=f("span"),b=G(p),_=I(),this.h()},l(k){e=d(k,"LABEL",{class:!0});var S=g(e);t=d(S,"INPUT",{type:!0,class:!0,style:!0}),o=A(S),a=d(S,"SPAN",{class:!0,style:!0}),g(a).forEach(i),u=A(S),c=d(S,"SPAN",{class:!0});var T=g(c);b=Y(T,p),T.forEach(i),_=A(S),S.forEach(i),this.h()},h(){r(t,"type","checkbox"),r(t,"class","checkbox"),r(t,"style",`--chkbg: ${n[49].color}; --bc: ${n[49].color};`),t.checked=s=n[50],r(a,"class","w-4 h-4 rounded-full"),Ks(a,"background-color",n[49].color),r(c,"class","font-medium"),r(e,"class",w="flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all hover:bg-base-200 "+(n[50]?"border-primary bg-primary bg-opacity-10":""))},m(k,S){X(k,e,S),l(e,t),l(e,o),l(e,a),l(e,u),l(e,c),l(c,b),l(e,_),v||(h=pe(t,"change",m),v=!0)},p(k,S){n=k,S[0]&4096&&s!==(s=n[50])&&(t.checked=s),S[0]&4096&&w!==(w="flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all hover:bg-base-200 "+(n[50]?"border-primary bg-primary bg-opacity-10":""))&&r(e,"class",w)},d(k){k&&i(e),v=!1,h()}}}function Ls(n){let e;return{c(){e=f("span"),this.h()},l(t){e=d(t,"SPAN",{class:!0}),g(e).forEach(i),this.h()},h(){r(e,"class","loading loading-spinner loading-sm")},m(t,s){X(t,e,s)},d(t){t&&i(e)}}}function Kl(n){let e,t,s,o,a,u=`<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path></svg>
          User Management`,c,p,b,_,w=n[1]!==1?"s":"",v,h,m,k,S,T,N,M,z,E,j,C,O,U,K,Q="All Zones",W,q,F,Z,V,P,D,y,L,x,R,$="User",se,ce,Me="Added",ge,ne,_e="Zone Access (multi-select)",fe,Le,Se,He,te,ie,J,ue="10 per page",ve,B="20 per page",H,ee="50 per page",le,me="100 per page",Ce,ke,Ae,we,Ee=n[8]&&gs(n),ae=n[9]&&_s(n),de=Be(n[18]),he=[];for(let re=0;re<de.length;re+=1)he[re]=bs(vs(n,de,re));let De=n[17]&&ms(n);function Fe(re,Pe){return re[7]&&re[0].length===0?xl:re[6].length===0?Zl:Fl}let ct=Fe(n),ze=ct(n),Re=n[16]>1&&As(n),Ue=n[11]&&Is(n);return{c(){e=f("div"),t=f("div"),s=f("div"),o=f("div"),a=f("h2"),a.innerHTML=u,c=I(),p=f("p"),b=G(n[1]),_=G(" registered user"),v=G(w),h=I(),m=f("button"),k=Ne("svg"),S=Ne("path"),T=G(`
        Refresh`),N=I(),Ee&&Ee.c(),M=I(),ae&&ae.c(),z=I(),E=f("div"),j=f("div"),C=f("input"),O=I(),U=f("select"),K=f("option"),K.textContent=Q;for(let re=0;re<he.length;re+=1)he[re].c();W=I(),De&&De.c(),q=I(),F=f("div"),Z=f("table"),V=f("thead"),P=f("tr"),D=f("th"),y=f("input"),x=I(),R=f("th"),R.textContent=$,se=I(),ce=f("th"),ce.textContent=Me,ge=I(),ne=f("th"),ne.textContent=_e,fe=I(),Le=f("tbody"),ze.c(),Se=I(),Re&&Re.c(),He=I(),te=f("div"),ie=f("select"),J=f("option"),J.textContent=ue,ve=f("option"),ve.textContent=B,H=f("option"),H.textContent=ee,le=f("option"),le.textContent=me,Ce=I(),Ue&&Ue.c(),ke=yt(),this.h()},l(re){e=d(re,"DIV",{class:!0});var Pe=g(e);t=d(Pe,"DIV",{class:!0});var Te=g(t);s=d(Te,"DIV",{class:!0});var xe=g(s);o=d(xe,"DIV",{});var Xe=g(o);a=d(Xe,"H2",{class:!0,"data-svelte-h":!0}),oe(a)!=="svelte-13deh80"&&(a.innerHTML=u),c=A(Xe),p=d(Xe,"P",{class:!0});var lt=g(p);b=Y(lt,n[1]),_=Y(lt," registered user"),v=Y(lt,w),lt.forEach(i),Xe.forEach(i),h=A(xe),m=d(xe,"BUTTON",{class:!0});var ut=g(m);k=Ie(ut,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var St=g(k);S=Ie(St,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),g(S).forEach(i),St.forEach(i),T=Y(ut,`
        Refresh`),ut.forEach(i),xe.forEach(i),N=A(Te),Ee&&Ee.l(Te),M=A(Te),ae&&ae.l(Te),z=A(Te),E=d(Te,"DIV",{class:!0});var bt=g(E);j=d(bt,"DIV",{class:!0});var Pt=g(j);C=d(Pt,"INPUT",{type:!0,placeholder:!0,class:!0}),Pt.forEach(i),O=A(bt),U=d(bt,"SELECT",{class:!0});var Tt=g(U);K=d(Tt,"OPTION",{"data-svelte-h":!0}),oe(K)!=="svelte-vubagw"&&(K.textContent=Q);for(let Mt=0;Mt<he.length;Mt+=1)he[Mt].l(Tt);Tt.forEach(i),bt.forEach(i),W=A(Te),De&&De.l(Te),q=A(Te),F=d(Te,"DIV",{class:!0});var Vt=g(F);Z=d(Vt,"TABLE",{class:!0});var mt=g(Z);V=d(mt,"THEAD",{});var jt=g(V);P=d(jt,"TR",{});var nt=g(P);D=d(nt,"TH",{class:!0});var Bt=g(D);y=d(Bt,"INPUT",{type:!0,class:!0,title:!0}),Bt.forEach(i),x=A(nt),R=d(nt,"TH",{"data-svelte-h":!0}),oe(R)!=="svelte-fgzd59"&&(R.textContent=$),se=A(nt),ce=d(nt,"TH",{"data-svelte-h":!0}),oe(ce)!=="svelte-1a7fes8"&&(ce.textContent=Me),ge=A(nt),ne=d(nt,"TH",{class:!0,"data-svelte-h":!0}),oe(ne)!=="svelte-17h50gp"&&(ne.textContent=_e),nt.forEach(i),jt.forEach(i),fe=A(mt),Le=d(mt,"TBODY",{});var Rt=g(Le);ze.l(Rt),Rt.forEach(i),mt.forEach(i),Vt.forEach(i),Se=A(Te),Re&&Re.l(Te),He=A(Te),te=d(Te,"DIV",{class:!0});var Ut=g(te);ie=d(Ut,"SELECT",{class:!0});var pt=g(ie);J=d(pt,"OPTION",{"data-svelte-h":!0}),oe(J)!=="svelte-eqj90a"&&(J.textContent=ue),ve=d(pt,"OPTION",{"data-svelte-h":!0}),oe(ve)!=="svelte-16bdf7a"&&(ve.textContent=B),H=d(pt,"OPTION",{"data-svelte-h":!0}),oe(H)!=="svelte-zh0qgi"&&(H.textContent=ee),le=d(pt,"OPTION",{"data-svelte-h":!0}),oe(le)!=="svelte-ln5wdu"&&(le.textContent=me),pt.forEach(i),Ut.forEach(i),Te.forEach(i),Pe.forEach(i),Ce=A(re),Ue&&Ue.l(re),ke=yt(),this.h()},h(){r(a,"class","card-title flex items-center gap-2"),r(p,"class","text-base-content/60 text-sm mt-1"),r(S,"stroke-linecap","round"),r(S,"stroke-linejoin","round"),r(S,"stroke-width","2"),r(S,"d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"),r(k,"xmlns","http://www.w3.org/2000/svg"),r(k,"class","h-4 w-4"),r(k,"fill","none"),r(k,"viewBox","0 0 24 24"),r(k,"stroke","currentColor"),qe(k,"animate-spin",n[7]),r(m,"class","btn btn-ghost btn-sm"),m.disabled=n[7],r(s,"class","flex items-center justify-between mb-4"),r(C,"type","text"),r(C,"placeholder","Search by name or public ID..."),r(C,"class","input input-bordered w-full"),r(j,"class","flex-1"),K.__value="",Oe(K,K.__value),r(U,"class","select select-bordered"),n[13]===void 0&&wt(()=>n[34].call(U)),r(E,"class","flex flex-col md:flex-row gap-4 mb-4"),r(y,"type","checkbox"),r(y,"class","checkbox checkbox-sm"),y.checked=n[15],r(y,"title","Select all"),r(D,"class","w-10"),r(ne,"class","text-center"),r(Z,"class","table table-zebra w-full"),r(F,"class","overflow-x-auto"),J.__value=10,Oe(J,J.__value),ve.__value=20,Oe(ve,ve.__value),H.__value=50,Oe(H,H.__value),le.__value=100,Oe(le,le.__value),r(ie,"class","select select-bordered select-sm"),n[4]===void 0&&wt(()=>n[43].call(ie)),r(te,"class","flex justify-end mt-2"),r(t,"class","card-body"),r(e,"class","card bg-base-200 shadow-lg mb-6")},m(re,Pe){X(re,e,Pe),l(e,t),l(t,s),l(s,o),l(o,a),l(o,c),l(o,p),l(p,b),l(p,_),l(p,v),l(s,h),l(s,m),l(m,k),l(k,S),l(m,T),l(t,N),Ee&&Ee.m(t,null),l(t,M),ae&&ae.m(t,null),l(t,z),l(t,E),l(E,j),l(j,C),Oe(C,n[5]),l(E,O),l(E,U),l(U,K);for(let Te=0;Te<he.length;Te+=1)he[Te]&&he[Te].m(U,null);rt(U,n[13],!0),l(t,W),De&&De.m(t,null),l(t,q),l(t,F),l(F,Z),l(Z,V),l(V,P),l(P,D),l(D,y),l(P,x),l(P,R),l(P,se),l(P,ce),l(P,ge),l(P,ne),l(Z,fe),l(Z,Le),ze.m(Le,null),l(t,Se),Re&&Re.m(t,null),l(t,He),l(t,te),l(te,ie),l(ie,J),l(ie,ve),l(ie,H),l(ie,le),rt(ie,n[4],!0),X(re,Ce,Pe),Ue&&Ue.m(re,Pe),X(re,ke,Pe),Ae||(we=[pe(m,"click",n[19]),pe(C,"input",n[33]),pe(C,"input",n[23]),pe(U,"change",n[34]),pe(U,"change",n[24]),pe(y,"change",n[25]),Gs(L=Jl.call(null,y,n[17]&&!n[15])),pe(ie,"change",n[43]),pe(ie,"change",n[44])],Ae=!0)},p(re,Pe){if(Pe[0]&2&&be(b,re[1]),Pe[0]&2&&w!==(w=re[1]!==1?"s":"")&&be(v,w),Pe[0]&128&&qe(k,"animate-spin",re[7]),Pe[0]&128&&(m.disabled=re[7]),re[8]?Ee?Ee.p(re,Pe):(Ee=gs(re),Ee.c(),Ee.m(t,M)):Ee&&(Ee.d(1),Ee=null),re[9]?ae?ae.p(re,Pe):(ae=_s(re),ae.c(),ae.m(t,z)):ae&&(ae.d(1),ae=null),Pe[0]&32&&C.value!==re[5]&&Oe(C,re[5]),Pe[0]&262144){de=Be(re[18]);let Te;for(Te=0;Te<de.length;Te+=1){const xe=vs(re,de,Te);he[Te]?he[Te].p(xe,Pe):(he[Te]=bs(xe),he[Te].c(),he[Te].m(U,null))}for(;Te<he.length;Te+=1)he[Te].d(1);he.length=de.length}Pe[0]&270336&&rt(U,re[13]),re[17]?De?De.p(re,Pe):(De=ms(re),De.c(),De.m(t,q)):De&&(De.d(1),De=null),Pe[0]&32768&&(y.checked=re[15]),L&&Ws(L.update)&&Pe[0]&163840&&L.update.call(null,re[17]&&!re[15]),ct===(ct=Fe(re))&&ze?ze.p(re,Pe):(ze.d(1),ze=ct(re),ze&&(ze.c(),ze.m(Le,null))),re[16]>1?Re?Re.p(re,Pe):(Re=As(re),Re.c(),Re.m(t,He)):Re&&(Re.d(1),Re=null),Pe[0]&16&&rt(ie,re[4]),re[11]?Ue?Ue.p(re,Pe):(Ue=Is(re),Ue.c(),Ue.m(ke.parentNode,ke)):Ue&&(Ue.d(1),Ue=null)},i:ye,o:ye,d(re){re&&(i(e),i(Ce),i(ke)),Ee&&Ee.d(),ae&&ae.d(),ot(he,re),De&&De.d(),ze.d(),Re&&Re.d(),Ue&&Ue.d(re),Ae=!1,We(we)}}}function Jl(n,e){return n.indeterminate=e,{update(t){n.indeterminate=t}}}function Ql(n,e){return n.cohorts.includes(e)}function It(n){return n?n.slice(0,8)+"..."+n.slice(-4):""}function Ss(n){return new Date(n*1e3).toLocaleDateString()}function Yl(n,e,t){let s,o,a,u,c,p;At(n,ft,J=>t(48,p=J));const b=[{id:"family",label:"Family",color:"#4a7c59"},{id:"dreamlab",label:"DreamLab",color:"#ec4899"},{id:"minimoonoir",label:"Minimoonoir",color:"#8b5cf6"},{id:"admin",label:"Admin",color:"#ef4444"}];let _=[],w=0,v=!1,h=null,m=null,k=new Set,S=!1,T=!1,N=[],M=1,z=20,E="",j="",C=new Set;async function O(){t(7,v=!0),t(8,h=null);try{const J=await Js({limit:z,offset:o,cohort:j||void 0});t(0,_=J.users),t(1,w=J.total)}catch(J){const ue=J instanceof Error?J.message:"Failed to load users";console.error("[UserManagement] Error loading users:",ue),t(8,h=ue),t(0,_=[]),t(1,w=0)}finally{t(7,v=!1)}}function U(J){return b.filter(ue=>J.cohorts.includes(ue.id)).map(ue=>ue.id)}async function K(J,ue,ve){const B=p.publicKey;if(!B){t(8,h="Not authenticated");return}C.add(J.pubkey),t(14,C);const H=J.cohorts.filter(ke=>!b.some(Ae=>Ae.id===ke)),ee=U(J);let le;ve?le=[...ee,ue]:le=ee.filter(ke=>ke!==ue);const me=le.length>0?[...H,...le,"approved"]:[...H,"approved"],Ce=[...new Set(me)];try{const ke=ft.getPrivkey()??void 0,Ae=await Dt(J.pubkey,Ce,B,ke);if(Ae.success){const we=_.findIndex(de=>de.pubkey===J.pubkey);we>=0&&(t(0,_[we]={..._[we],cohorts:Ce},_),t(0,_));const Ee=b.find(de=>de.id===ue)?.label||ue,ae=ve?"added to":"removed from";t(9,m=`${J.displayName||It(J.pubkey)} ${ae} ${Ee}`),setTimeout(()=>{t(9,m=null)},3e3)}else t(8,h=Ae.error||"Failed to update zones")}catch(ke){t(8,h=ke instanceof Error?ke.message:"Failed to update zones")}finally{C.delete(J.pubkey),t(14,C)}}function Q(J){J>=1&&J<=s&&(t(3,M=J),O())}function W(){t(3,M=1),O()}function q(){t(3,M=1),O()}function F(){a?c.forEach(J=>k.delete(J.pubkey)):c.forEach(J=>k.add(J.pubkey)),t(2,k)}function Z(J){k.has(J)?k.delete(J):k.add(J),t(2,k)}function V(){k.clear(),t(2,k)}function P(){t(12,N=[]),t(11,T=!0)}function D(){t(11,T=!1),t(12,N=[])}async function y(){const J=p.publicKey;if(!J){t(8,h="Not authenticated");return}if(k.size===0){t(8,h="No users selected");return}t(10,S=!0),t(8,h=null);let ue=0,ve=0;for(const B of k){const H=_.find(me=>me.pubkey===B);if(!H)continue;const ee=H.cohorts.filter(me=>!b.some(Ce=>Ce.id===me)),le=N.length>0?[...new Set([...ee,...N,"approved"])]:[...new Set([...ee,"approved"])];try{const me=ft.getPrivkey()??void 0;if((await Dt(B,le,J,me)).success){ue++;const ke=_.findIndex(Ae=>Ae.pubkey===B);ke>=0&&t(0,_[ke]={..._[ke],cohorts:le},_)}else ve++}catch{ve++}}if(t(0,_),t(10,S=!1),D(),V(),ue>0){const B=N.length>0?N.map(H=>b.find(ee=>ee.id===H)?.label||H).join(", "):"approved status";t(9,m=`Updated ${ue} user${ue!==1?"s":""} with ${B}`),setTimeout(()=>{t(9,m=null)},4e3)}ve>0&&t(8,h=`Failed to update ${ve} user${ve!==1?"s":""}`)}async function L(J){const ue=p.publicKey;if(!ue){t(8,h="Not authenticated");return}t(10,S=!0);let ve=0,B=0;for(const ee of k){const le=_.find(Ce=>Ce.pubkey===ee);if(!le||!le.cohorts.includes(J))continue;const me=le.cohorts.filter(Ce=>Ce!==J);try{const Ce=ft.getPrivkey()??void 0;if((await Dt(ee,me,ue,Ce)).success){ve++;const Ae=_.findIndex(we=>we.pubkey===ee);Ae>=0&&t(0,_[Ae]={..._[Ae],cohorts:me},_)}else B++}catch{B++}}t(0,_),t(10,S=!1),V();const H=b.find(ee=>ee.id===J)?.label||J;ve>0&&(t(9,m=`Removed ${H} from ${ve} user${ve!==1?"s":""}`),setTimeout(()=>{t(9,m=null)},4e3)),B>0&&t(8,h=`Failed to update ${B} user${B!==1?"s":""}`)}xs(()=>{O()});const x=()=>t(8,h=null);function R(){E=this.value,t(5,E)}function $(){j=Et(this),t(13,j),t(18,b)}const se=J=>L(J.id),ce=J=>Z(J.pubkey),Me=J=>!b.some(ue=>ue.id===J),ge=(J,ue,ve)=>K(J,ue.id,ve.currentTarget.checked),ne=()=>Q(1),_e=()=>Q(M-1),fe=()=>Q(M+1),Le=()=>Q(s);function Se(){z=Et(this),t(4,z)}const He=()=>{t(3,M=1),O()},te=(J,ue)=>{ue.currentTarget.checked?t(12,N=[...N,J.id]):t(12,N=N.filter(ve=>ve!==J.id))},ie=J=>J.key==="Escape"&&D();return n.$$.update=()=>{n.$$.dirty[0]&18&&t(16,s=Math.ceil(w/z)),n.$$.dirty[0]&24&&(o=(M-1)*z),n.$$.dirty[0]&33&&t(6,c=E?_.filter(J=>{const ue=E.toLowerCase(),ve=(J.displayName||"").toLowerCase(),B=J.pubkey.toLowerCase();return ve.includes(ue)||B.includes(ue)}):_),n.$$.dirty[0]&68&&t(15,a=c.length>0&&c.every(J=>k.has(J.pubkey))),n.$$.dirty[0]&4&&t(17,u=k.size>0)},[_,w,k,M,z,E,c,v,h,m,S,T,N,j,C,a,s,u,b,O,U,K,Q,W,q,F,Z,V,P,D,y,L,x,R,$,se,ce,Me,ge,ne,_e,fe,Le,Se,He,te,ie]}class Gl extends tt{constructor(e){super(),st(this,e,Yl,Kl,et,{},null,[-1,-1,-1])}}function Ps(n,e,t){const s=n.slice();return s[7]=e[t],s}function Vs(n){let e,t=n[0].length+"",s;return{c(){e=f("span"),s=G(t),this.h()},l(o){e=d(o,"SPAN",{class:!0});var a=g(e);s=Y(a,t),a.forEach(i),this.h()},h(){r(e,"class","badge badge-warning")},m(o,a){X(o,e,a),l(e,s)},p(o,a){a&1&&t!==(t=o[0].length+"")&&be(s,t)},d(o){o&&i(e)}}}function Wl(n){let e,t,s,o='<tr><th>User</th> <th>Section</th> <th>Message</th> <th>Requested</th> <th class="text-right">Actions</th></tr>',a,u,c=[],p=new Map,b,_=Be(n[0]);const w=v=>v[7].id;for(let v=0;v<_.length;v+=1){let h=Ps(n,_,v),m=w(h);p.set(m,c[v]=js(m,h))}return{c(){e=f("div"),t=f("table"),s=f("thead"),s.innerHTML=o,a=I(),u=f("tbody");for(let v=0;v<c.length;v+=1)c[v].c();this.h()},l(v){e=d(v,"DIV",{class:!0});var h=g(e);t=d(h,"TABLE",{class:!0});var m=g(t);s=d(m,"THEAD",{"data-svelte-h":!0}),oe(s)!=="svelte-nl7lwv"&&(s.innerHTML=o),a=A(m),u=d(m,"TBODY",{});var k=g(u);for(let S=0;S<c.length;S+=1)c[S].l(k);k.forEach(i),m.forEach(i),h.forEach(i),this.h()},h(){r(t,"class","table table-zebra"),r(e,"class","overflow-x-auto mt-4")},m(v,h){X(v,e,h),l(e,t),l(t,s),l(t,a),l(t,u);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(u,null);b=!0},p(v,h){h&11&&(_=Be(v[0]),at(),c=_t(c,h,w,1,v,_,p,u,Lt,js,null,Ps),it())},i(v){if(!b){for(let h=0;h<_.length;h+=1)je(c[h]);b=!0}},o(v){for(let h=0;h<c.length;h+=1)Ve(c[h]);b=!1},d(v){v&&i(e);for(let h=0;h<c.length;h+=1)c[h].d()}}}function Xl(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto mb-2 opacity-50" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <p>No pending section access requests</p> <p class="text-sm mt-1">New users requesting section access will appear here</p>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(s){e=d(s,"DIV",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-1bgh5v3"&&(e.innerHTML=t),this.h()},h(){r(e,"class","text-center py-8 text-base-content/50")},m(s,o){X(s,e,o)},p:ye,i:ye,o:ye,d(s){s&&i(e)}}}function $l(n){let e,t='<span class="loading loading-spinner loading-lg"></span> <p class="mt-2 text-base-content/70">Loading pending requests...</p>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(s){e=d(s,"DIV",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-1gnd61m"&&(e.innerHTML=t),this.h()},h(){r(e,"class","text-center py-8")},m(s,o){X(s,e,o)},p:ye,i:ye,o:ye,d(s){s&&i(e)}}}function en(n){let e,t="No message";return{c(){e=f("span"),e.textContent=t,this.h()},l(s){e=d(s,"SPAN",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-tay6cd"&&(e.textContent=t),this.h()},h(){r(e,"class","text-xs text-base-content/50")},m(s,o){X(s,e,o)},p:ye,d(s){s&&i(e)}}}function tn(n){let e,t=n[7].message+"",s;return{c(){e=f("span"),s=G(t),this.h()},l(o){e=d(o,"SPAN",{class:!0});var a=g(e);s=Y(a,t),a.forEach(i),this.h()},h(){r(e,"class","text-sm text-base-content/70 line-clamp-2")},m(o,a){X(o,e,a),l(e,s)},p(o,a){a&1&&t!==(t=o[7].message+"")&&be(s,t)},d(o){o&&i(e)}}}function js(n,e){let t,s,o,a,u,c,p=(Ze[e[7].section]?.icon||"")+"",b,_,w=(Ze[e[7].section]?.name||e[7].section)+"",v,h,m,k,S,T,N=Bs(e[7].requestedAt)+"",M,z,E,j,C,O,U,K,Q,W,q,F,Z;o=new Nt({props:{pubkey:e[7].requesterPubkey,showAvatar:!0,showName:!0,avatarSize:"sm",clickable:!1}});function V(x,R){return x[7].message?tn:en}let P=V(e),D=P(e);function y(){return e[5](e[7])}function L(){return e[6](e[7])}return{key:n,first:null,c(){t=f("tr"),s=f("td"),Ye(o.$$.fragment),a=I(),u=f("td"),c=f("span"),b=G(p),_=I(),v=G(w),h=I(),m=f("td"),D.c(),k=I(),S=f("td"),T=f("span"),M=G(N),z=I(),E=f("td"),j=f("div"),C=f("button"),O=G("Approve"),U=I(),K=f("button"),Q=G("Deny"),W=I(),this.h()},l(x){t=d(x,"TR",{});var R=g(t);s=d(R,"TD",{});var $=g(s);Qe(o.$$.fragment,$),$.forEach(i),a=A(R),u=d(R,"TD",{});var se=g(u);c=d(se,"SPAN",{class:!0});var ce=g(c);b=Y(ce,p),_=A(ce),v=Y(ce,w),ce.forEach(i),se.forEach(i),h=A(R),m=d(R,"TD",{});var Me=g(m);D.l(Me),Me.forEach(i),k=A(R),S=d(R,"TD",{});var ge=g(S);T=d(ge,"SPAN",{class:!0});var ne=g(T);M=Y(ne,N),ne.forEach(i),ge.forEach(i),z=A(R),E=d(R,"TD",{});var _e=g(E);j=d(_e,"DIV",{class:!0});var fe=g(j);C=d(fe,"BUTTON",{class:!0});var Le=g(C);O=Y(Le,"Approve"),Le.forEach(i),U=A(fe),K=d(fe,"BUTTON",{class:!0});var Se=g(K);Q=Y(Se,"Deny"),Se.forEach(i),fe.forEach(i),_e.forEach(i),W=A(R),R.forEach(i),this.h()},h(){r(c,"class","badge badge-primary"),r(T,"class","text-sm"),r(C,"class","btn btn-success btn-sm"),C.disabled=e[1],r(K,"class","btn btn-error btn-sm btn-outline"),K.disabled=e[1],r(j,"class","flex justify-end gap-2"),this.first=t},m(x,R){X(x,t,R),l(t,s),Je(o,s,null),l(t,a),l(t,u),l(u,c),l(c,b),l(c,_),l(c,v),l(t,h),l(t,m),D.m(m,null),l(t,k),l(t,S),l(S,T),l(T,M),l(t,z),l(t,E),l(E,j),l(j,C),l(C,O),l(j,U),l(j,K),l(K,Q),l(t,W),q=!0,F||(Z=[pe(C,"click",y),pe(K,"click",L)],F=!0)},p(x,R){e=x;const $={};R&1&&($.pubkey=e[7].requesterPubkey),o.$set($),(!q||R&1)&&p!==(p=(Ze[e[7].section]?.icon||"")+"")&&be(b,p),(!q||R&1)&&w!==(w=(Ze[e[7].section]?.name||e[7].section)+"")&&be(v,w),P===(P=V(e))&&D?D.p(e,R):(D.d(1),D=P(e),D&&(D.c(),D.m(m,null))),(!q||R&1)&&N!==(N=Bs(e[7].requestedAt)+"")&&be(M,N),(!q||R&2)&&(C.disabled=e[1]),(!q||R&2)&&(K.disabled=e[1])},i(x){q||(je(o.$$.fragment,x),q=!0)},o(x){Ve(o.$$.fragment,x),q=!1},d(x){x&&i(t),Ke(o),D.d(),F=!1,We(Z)}}}function sn(n){let e,t,s,o,a,u,c,p,b,_,w,v,h,m,k,S,T=n[0].length>0&&Vs(n);const N=[$l,Xl,Wl],M=[];function z(E,j){return E[2]&&E[0].length===0?0:E[0].length===0?1:2}return v=z(n),h=M[v]=N[v](n),{c(){e=f("div"),t=f("div"),s=f("div"),o=f("h2"),a=G(`Pending Section Access Requests
        `),T&&T.c(),u=I(),c=f("button"),p=Ne("svg"),b=Ne("path"),_=G(`
        Refresh`),w=I(),h.c(),this.h()},l(E){e=d(E,"DIV",{class:!0});var j=g(e);t=d(j,"DIV",{class:!0});var C=g(t);s=d(C,"DIV",{class:!0});var O=g(s);o=d(O,"H2",{class:!0});var U=g(o);a=Y(U,`Pending Section Access Requests
        `),T&&T.l(U),U.forEach(i),u=A(O),c=d(O,"BUTTON",{class:!0});var K=g(c);p=Ie(K,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var Q=g(p);b=Ie(Q,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),g(b).forEach(i),Q.forEach(i),_=Y(K,`
        Refresh`),K.forEach(i),O.forEach(i),w=A(C),h.l(C),C.forEach(i),j.forEach(i),this.h()},h(){r(o,"class","card-title"),r(b,"stroke-linecap","round"),r(b,"stroke-linejoin","round"),r(b,"stroke-width","2"),r(b,"d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"),r(p,"xmlns","http://www.w3.org/2000/svg"),r(p,"class","h-4 w-4"),r(p,"fill","none"),r(p,"viewBox","0 0 24 24"),r(p,"stroke","currentColor"),r(c,"class","btn btn-ghost btn-sm"),c.disabled=n[1],r(s,"class","flex items-center justify-between"),r(t,"class","card-body"),r(e,"class","card bg-base-200 mb-6")},m(E,j){X(E,e,j),l(e,t),l(t,s),l(s,o),l(o,a),T&&T.m(o,null),l(s,u),l(s,c),l(c,p),l(p,b),l(c,_),l(t,w),M[v].m(t,null),m=!0,k||(S=pe(c,"click",n[4]),k=!0)},p(E,[j]){E[0].length>0?T?T.p(E,j):(T=Vs(E),T.c(),T.m(o,null)):T&&(T.d(1),T=null),(!m||j&2)&&(c.disabled=E[1]);let C=v;v=z(E),v===C?M[v].p(E,j):(at(),Ve(M[C],1,1,()=>{M[C]=null}),it(),h=M[v],h?h.p(E,j):(h=M[v]=N[v](E),h.c()),je(h,1),h.m(t,null))},i(E){m||(je(h),m=!0)},o(E){Ve(h),m=!1},d(E){E&&i(e),T&&T.d(),M[v].d(),k=!1,S()}}}function Bs(n){const t=Date.now()-n,s=Math.floor(t/1e3),o=Math.floor(s/60),a=Math.floor(o/60),u=Math.floor(a/24);return u>0?`${u}d ago`:a>0?`${a}h ago`:o>0?`${o}m ago`:"just now"}function ln(n,e,t){let{pendingRequests:s}=e,{isLoading:o}=e,{isSectionLoading:a=!1}=e;const u=gt(),c=()=>u("refresh"),p=_=>u("approve",_),b=_=>u("deny",_);return n.$$set=_=>{"pendingRequests"in _&&t(0,s=_.pendingRequests),"isLoading"in _&&t(1,o=_.isLoading),"isSectionLoading"in _&&t(2,a=_.isSectionLoading)},[s,o,a,u,c,p,b]}class nn extends tt{constructor(e){super(),st(this,e,ln,sn,et,{pendingRequests:0,isLoading:1,isSectionLoading:2})}}function Rs(n,e,t){const s=n.slice();return s[8]=e[t],s}function Us(n){let e,t=n[0].length+"",s;return{c(){e=f("span"),s=G(t),this.h()},l(o){e=d(o,"SPAN",{class:!0});var a=g(e);s=Y(a,t),a.forEach(i),this.h()},h(){r(e,"class","badge badge-info")},m(o,a){X(o,e,a),l(e,s)},p(o,a){a&1&&t!==(t=o[0].length+"")&&be(s,t)},d(o){o&&i(e)}}}function rn(n){let e,t,s,o='<tr><th>User</th> <th>Channel</th> <th>Message</th> <th>Requested</th> <th class="text-right">Actions</th></tr>',a,u,c=[],p=new Map,b,_=Be(n[0]);const w=v=>v[8].id;for(let v=0;v<_.length;v+=1){let h=Rs(n,_,v),m=w(h);p.set(m,c[v]=Hs(m,h))}return{c(){e=f("div"),t=f("table"),s=f("thead"),s.innerHTML=o,a=I(),u=f("tbody");for(let v=0;v<c.length;v+=1)c[v].c();this.h()},l(v){e=d(v,"DIV",{class:!0});var h=g(e);t=d(h,"TABLE",{class:!0});var m=g(t);s=d(m,"THEAD",{"data-svelte-h":!0}),oe(s)!=="svelte-7se8xz"&&(s.innerHTML=o),a=A(m),u=d(m,"TBODY",{});var k=g(u);for(let S=0;S<c.length;S+=1)c[S].l(k);k.forEach(i),m.forEach(i),h.forEach(i),this.h()},h(){r(t,"class","table table-zebra"),r(e,"class","overflow-x-auto mt-4")},m(v,h){X(v,e,h),l(e,t),l(t,s),l(t,a),l(t,u);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(u,null);b=!0},p(v,h){h&27&&(_=Be(v[0]),at(),c=_t(c,h,w,1,v,_,p,u,Lt,Hs,null,Rs),it())},i(v){if(!b){for(let h=0;h<_.length;h+=1)je(c[h]);b=!0}},o(v){for(let h=0;h<c.length;h+=1)Ve(c[h]);b=!1},d(v){v&&i(e);for(let h=0;h<c.length;h+=1)c[h].d()}}}function on(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto mb-2 opacity-50" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg> <p>No pending channel join requests</p> <p class="text-sm mt-1">Users requesting to join specific channels will appear here</p>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(s){e=d(s,"DIV",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-r348y1"&&(e.innerHTML=t),this.h()},h(){r(e,"class","text-center py-8 text-base-content/50")},m(s,o){X(s,e,o)},p:ye,i:ye,o:ye,d(s){s&&i(e)}}}function an(n){let e,t='<span class="loading loading-spinner loading-lg"></span> <p class="mt-2 text-base-content/70">Loading channel join requests...</p>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(s){e=d(s,"DIV",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-1otqaby"&&(e.innerHTML=t),this.h()},h(){r(e,"class","text-center py-8")},m(s,o){X(s,e,o)},p:ye,i:ye,o:ye,d(s){s&&i(e)}}}function cn(n){let e,t="No message";return{c(){e=f("span"),e.textContent=t,this.h()},l(s){e=d(s,"SPAN",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-tay6cd"&&(e.textContent=t),this.h()},h(){r(e,"class","text-xs text-base-content/50")},m(s,o){X(s,e,o)},p:ye,d(s){s&&i(e)}}}function un(n){let e,t=n[8].message+"",s;return{c(){e=f("span"),s=G(t),this.h()},l(o){e=d(o,"SPAN",{class:!0});var a=g(e);s=Y(a,t),a.forEach(i),this.h()},h(){r(e,"class","text-sm text-base-content/70 line-clamp-2")},m(o,a){X(o,e,a),l(e,s)},p(o,a){a&1&&t!==(t=o[8].message+"")&&be(s,t)},d(o){o&&i(e)}}}function Hs(n,e){let t,s,o,a,u,c,p,b=e[3](e[8].channelId)+"",_,w,v,h,m,k,S=Os(e[8].createdAt)+"",T,N,M,z,E,j,C,O,U,K,Q,W,q;o=new Nt({props:{pubkey:e[8].pubkey,showAvatar:!0,showName:!0,avatarSize:"sm",clickable:!1}});function F(y,L){return y[8].message?un:cn}let Z=F(e),V=Z(e);function P(){return e[6](e[8])}function D(){return e[7](e[8])}return{key:n,first:null,c(){t=f("tr"),s=f("td"),Ye(o.$$.fragment),a=I(),u=f("td"),c=f("span"),p=G("# "),_=G(b),w=I(),v=f("td"),V.c(),h=I(),m=f("td"),k=f("span"),T=G(S),N=I(),M=f("td"),z=f("div"),E=f("button"),j=G("Approve"),C=I(),O=f("button"),U=G("Deny"),K=I(),this.h()},l(y){t=d(y,"TR",{});var L=g(t);s=d(L,"TD",{});var x=g(s);Qe(o.$$.fragment,x),x.forEach(i),a=A(L),u=d(L,"TD",{});var R=g(u);c=d(R,"SPAN",{class:!0});var $=g(c);p=Y($,"# "),_=Y($,b),$.forEach(i),R.forEach(i),w=A(L),v=d(L,"TD",{});var se=g(v);V.l(se),se.forEach(i),h=A(L),m=d(L,"TD",{});var ce=g(m);k=d(ce,"SPAN",{class:!0});var Me=g(k);T=Y(Me,S),Me.forEach(i),ce.forEach(i),N=A(L),M=d(L,"TD",{});var ge=g(M);z=d(ge,"DIV",{class:!0});var ne=g(z);E=d(ne,"BUTTON",{class:!0});var _e=g(E);j=Y(_e,"Approve"),_e.forEach(i),C=A(ne),O=d(ne,"BUTTON",{class:!0});var fe=g(O);U=Y(fe,"Deny"),fe.forEach(i),ne.forEach(i),ge.forEach(i),K=A(L),L.forEach(i),this.h()},h(){r(c,"class","badge badge-secondary"),r(k,"class","text-sm"),r(E,"class","btn btn-success btn-sm"),E.disabled=e[1],r(O,"class","btn btn-error btn-sm btn-outline"),O.disabled=e[1],r(z,"class","flex justify-end gap-2"),this.first=t},m(y,L){X(y,t,L),l(t,s),Je(o,s,null),l(t,a),l(t,u),l(u,c),l(c,p),l(c,_),l(t,w),l(t,v),V.m(v,null),l(t,h),l(t,m),l(m,k),l(k,T),l(t,N),l(t,M),l(M,z),l(z,E),l(E,j),l(z,C),l(z,O),l(O,U),l(t,K),Q=!0,W||(q=[pe(E,"click",P),pe(O,"click",D)],W=!0)},p(y,L){e=y;const x={};L&1&&(x.pubkey=e[8].pubkey),o.$set(x),(!Q||L&9)&&b!==(b=e[3](e[8].channelId)+"")&&be(_,b),Z===(Z=F(e))&&V?V.p(e,L):(V.d(1),V=Z(e),V&&(V.c(),V.m(v,null))),(!Q||L&1)&&S!==(S=Os(e[8].createdAt)+"")&&be(T,S),(!Q||L&2)&&(E.disabled=e[1]),(!Q||L&2)&&(O.disabled=e[1])},i(y){Q||(je(o.$$.fragment,y),Q=!0)},o(y){Ve(o.$$.fragment,y),Q=!1},d(y){y&&i(t),Ke(o),V.d(),W=!1,We(q)}}}function dn(n){let e,t,s,o,a,u,c,p,b,_,w,v,h,m,k,S,T=n[0].length>0&&Us(n);const N=[an,on,rn],M=[];function z(E,j){return E[2]&&E[0].length===0?0:E[0].length===0?1:2}return v=z(n),h=M[v]=N[v](n),{c(){e=f("div"),t=f("div"),s=f("div"),o=f("h2"),a=G(`Pending Channel Join Requests
        `),T&&T.c(),u=I(),c=f("button"),p=Ne("svg"),b=Ne("path"),_=G(`
        Refresh`),w=I(),h.c(),this.h()},l(E){e=d(E,"DIV",{class:!0});var j=g(e);t=d(j,"DIV",{class:!0});var C=g(t);s=d(C,"DIV",{class:!0});var O=g(s);o=d(O,"H2",{class:!0});var U=g(o);a=Y(U,`Pending Channel Join Requests
        `),T&&T.l(U),U.forEach(i),u=A(O),c=d(O,"BUTTON",{class:!0});var K=g(c);p=Ie(K,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var Q=g(p);b=Ie(Q,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),g(b).forEach(i),Q.forEach(i),_=Y(K,`
        Refresh`),K.forEach(i),O.forEach(i),w=A(C),h.l(C),C.forEach(i),j.forEach(i),this.h()},h(){r(o,"class","card-title"),r(b,"stroke-linecap","round"),r(b,"stroke-linejoin","round"),r(b,"stroke-width","2"),r(b,"d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"),r(p,"xmlns","http://www.w3.org/2000/svg"),r(p,"class","h-4 w-4"),r(p,"fill","none"),r(p,"viewBox","0 0 24 24"),r(p,"stroke","currentColor"),r(c,"class","btn btn-ghost btn-sm"),c.disabled=n[1],r(s,"class","flex items-center justify-between"),r(t,"class","card-body"),r(e,"class","card bg-base-200 mb-6")},m(E,j){X(E,e,j),l(e,t),l(t,s),l(s,o),l(o,a),T&&T.m(o,null),l(s,u),l(s,c),l(c,p),l(p,b),l(c,_),l(t,w),M[v].m(t,null),m=!0,k||(S=pe(c,"click",n[5]),k=!0)},p(E,[j]){E[0].length>0?T?T.p(E,j):(T=Us(E),T.c(),T.m(o,null)):T&&(T.d(1),T=null),(!m||j&2)&&(c.disabled=E[1]);let C=v;v=z(E),v===C?M[v].p(E,j):(at(),Ve(M[C],1,1,()=>{M[C]=null}),it(),h=M[v],h?h.p(E,j):(h=M[v]=N[v](E),h.c()),je(h,1),h.m(t,null))},i(E){m||(je(h),m=!0)},o(E){Ve(h),m=!1},d(E){E&&i(e),T&&T.d(),M[v].d(),k=!1,S()}}}function Os(n){const t=Date.now()-n,s=Math.floor(t/1e3),o=Math.floor(s/60),a=Math.floor(o/60),u=Math.floor(a/24);return u>0?`${u}d ago`:a>0?`${a}h ago`:o>0?`${o}m ago`:"just now"}function fn(n,e,t){let{pendingChannelJoinRequests:s}=e,{isLoading:o}=e,{isSectionLoading:a=!1}=e,{getChannelName:u}=e;const c=gt(),p=()=>c("refresh"),b=w=>c("approve",w),_=w=>c("reject",w);return n.$$set=w=>{"pendingChannelJoinRequests"in w&&t(0,s=w.pendingChannelJoinRequests),"isLoading"in w&&t(1,o=w.isLoading),"isSectionLoading"in w&&t(2,a=w.isSectionLoading),"getChannelName"in w&&t(3,u=w.getChannelName)},[s,o,a,u,c,p,b,_]}class hn extends tt{constructor(e){super(),st(this,e,fn,dn,et,{pendingChannelJoinRequests:0,isLoading:1,isSectionLoading:2,getChannelName:3})}}function pn(n){let e,t=`<div class="card-body"><h2 class="card-title mb-4"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
      Quick Actions</h2> <div class="grid gap-4 grid-cols-1 md:grid-cols-2"><a href="${Ct}/admin/stats" class="card bg-base-300 hover:bg-base-100 transition-colors cursor-pointer border border-base-content/10 hover:border-primary/30"><div class="card-body flex-row items-center gap-4"><div class="rounded-lg bg-primary/10 p-3"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg></div> <div><h3 class="font-semibold">Stats Dashboard</h3> <p class="text-sm text-base-content/70">View detailed system analytics, user activity trends, and usage reports</p></div> <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-base-content/40 ml-auto shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div></a> <a href="${Ct}/admin/calendar" class="card bg-base-300 hover:bg-base-100 transition-colors cursor-pointer border border-base-content/10 hover:border-secondary/30"><div class="card-body flex-row items-center gap-4"><div class="rounded-lg bg-secondary/10 p-3"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-secondary" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div> <div><h3 class="font-semibold">Calendar Management</h3> <p class="text-sm text-base-content/70">Manage calendar events, scheduling, and community event coordination</p></div> <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-base-content/40 ml-auto shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div></a></div></div>`;return{c(){e=f("div"),e.innerHTML=t,this.h()},l(s){e=d(s,"DIV",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-1yaigmy"&&(e.innerHTML=t),this.h()},h(){r(e,"class","card bg-base-200 mb-6")},m(s,o){X(s,e,o)},p:ye,i:ye,o:ye,d(s){s&&i(e)}}}class vn extends tt{constructor(e){super(),st(this,e,null,pn,et,{})}}function qs(n){let e,t,s,o,a,u,c,p,b="Dismiss",_,w;return{c(){e=f("div"),t=Ne("svg"),s=Ne("path"),o=I(),a=f("span"),u=G(n[7]),c=I(),p=f("button"),p.textContent=b,this.h()},l(v){e=d(v,"DIV",{class:!0});var h=g(e);t=Ie(h,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var m=g(t);s=Ie(m,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),g(s).forEach(i),m.forEach(i),o=A(h),a=d(h,"SPAN",{});var k=g(a);u=Y(k,n[7]),k.forEach(i),c=A(h),p=d(h,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(p)!=="svelte-1oc0rew"&&(p.textContent=b),h.forEach(i),this.h()},h(){r(s,"stroke-linecap","round"),r(s,"stroke-linejoin","round"),r(s,"stroke-width","2"),r(s,"d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"),r(t,"xmlns","http://www.w3.org/2000/svg"),r(t,"class","stroke-current shrink-0 h-6 w-6"),r(t,"fill","none"),r(t,"viewBox","0 0 24 24"),r(p,"class","btn btn-ghost btn-sm"),r(e,"class","alert alert-error mb-4")},m(v,h){X(v,e,h),l(e,t),l(t,s),l(e,o),l(e,a),l(a,u),l(e,c),l(e,p),_||(w=pe(p,"click",n[31]),_=!0)},p(v,h){h[0]&128&&be(u,v[7])},d(v){v&&i(e),_=!1,w()}}}function zs(n){let e,t,s,o,a,u,c,p,b="Dismiss",_,w;return{c(){e=f("div"),t=Ne("svg"),s=Ne("path"),o=I(),a=f("span"),u=G(n[8]),c=I(),p=f("button"),p.textContent=b,this.h()},l(v){e=d(v,"DIV",{class:!0});var h=g(e);t=Ie(h,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var m=g(t);s=Ie(m,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),g(s).forEach(i),m.forEach(i),o=A(h),a=d(h,"SPAN",{});var k=g(a);u=Y(k,n[8]),k.forEach(i),c=A(h),p=d(h,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(p)!=="svelte-7k7et6"&&(p.textContent=b),h.forEach(i),this.h()},h(){r(s,"stroke-linecap","round"),r(s,"stroke-linejoin","round"),r(s,"stroke-width","2"),r(s,"d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"),r(t,"xmlns","http://www.w3.org/2000/svg"),r(t,"class","stroke-current shrink-0 h-6 w-6"),r(t,"fill","none"),r(t,"viewBox","0 0 24 24"),r(p,"class","btn btn-ghost btn-sm"),r(e,"class","alert alert-success mb-4")},m(v,h){X(v,e,h),l(e,t),l(t,s),l(e,o),l(e,a),l(a,u),l(e,c),l(e,p),_||(w=pe(p,"click",n[32]),_=!0)},p(v,h){h[0]&256&&be(u,v[8])},d(v){v&&i(e),_=!1,w()}}}function Fs(n){let e,t;return{c(){e=f("span"),t=G(n[17]),this.h()},l(s){e=d(s,"SPAN",{class:!0});var o=g(e);t=Y(o,n[17]),o.forEach(i),this.h()},h(){r(e,"class","badge badge-warning badge-sm")},m(s,o){X(s,e,o),l(e,t)},p(s,o){o[0]&131072&&be(t,s[17])},d(s){s&&i(e)}}}function Zs(n){let e,t;return{c(){e=f("span"),t=G(n[16]),this.h()},l(s){e=d(s,"SPAN",{class:!0});var o=g(e);t=Y(o,n[16]),o.forEach(i),this.h()},h(){r(e,"class","badge badge-warning badge-sm")},m(s,o){X(s,e,o),l(e,t)},p(s,o){o[0]&65536&&be(t,s[16])},d(s){s&&i(e)}}}function gn(n){let e,t,s,o;return e=new nn({props:{pendingRequests:n[0],isLoading:n[6],isSectionLoading:n[12]}}),e.$on("approve",n[40]),e.$on("deny",n[41]),e.$on("refresh",n[20]),s=new hn({props:{pendingChannelJoinRequests:n[1],isLoading:n[6],isSectionLoading:n[13],getChannelName:n[29]}}),s.$on("approve",n[42]),s.$on("reject",n[43]),s.$on("refresh",n[21]),{c(){Ye(e.$$.fragment),t=I(),Ye(s.$$.fragment)},l(a){Qe(e.$$.fragment,a),t=A(a),Qe(s.$$.fragment,a)},m(a,u){Je(e,a,u),X(a,t,u),Je(s,a,u),o=!0},p(a,u){const c={};u[0]&1&&(c.pendingRequests=a[0]),u[0]&64&&(c.isLoading=a[6]),u[0]&4096&&(c.isSectionLoading=a[12]),e.$set(c);const p={};u[0]&2&&(p.pendingChannelJoinRequests=a[1]),u[0]&64&&(p.isLoading=a[6]),u[0]&8192&&(p.isSectionLoading=a[13]),s.$set(p)},i(a){o||(je(e.$$.fragment,a),je(s.$$.fragment,a),o=!0)},o(a){Ve(e.$$.fragment,a),Ve(s.$$.fragment,a),o=!1},d(a){a&&i(t),Ke(e,a),Ke(s,a)}}}function _n(n){let e,t,s,o;return e=new zl({props:{pendingUserRegistrations:n[2],isLoading:n[6],isSectionLoading:n[11]}}),e.$on("approve",n[38]),e.$on("reject",n[39]),e.$on("refresh",n[22]),s=new Gl({}),{c(){Ye(e.$$.fragment),t=I(),Ye(s.$$.fragment)},l(a){Qe(e.$$.fragment,a),t=A(a),Qe(s.$$.fragment,a)},m(a,u){Je(e,a,u),X(a,t,u),Je(s,a,u),o=!0},p(a,u){const c={};u[0]&4&&(c.pendingUserRegistrations=a[2]),u[0]&64&&(c.isLoading=a[6]),u[0]&2048&&(c.isSectionLoading=a[11]),e.$set(c)},i(a){o||(je(e.$$.fragment,a),je(s.$$.fragment,a),o=!0)},o(a){Ve(e.$$.fragment,a),Ve(s.$$.fragment,a),o=!1},d(a){a&&i(t),Ke(e,a),Ke(s,a)}}}function bn(n){let e,t;return e=new Vl({props:{channels:n[5],isLoading:n[6],isSectionLoading:n[10]}}),e.$on("create",n[30]),{c(){Ye(e.$$.fragment)},l(s){Qe(e.$$.fragment,s)},m(s,o){Je(e,s,o),t=!0},p(s,o){const a={};o[0]&32&&(a.channels=s[5]),o[0]&64&&(a.isLoading=s[6]),o[0]&1024&&(a.isSectionLoading=s[10]),e.$set(a)},i(s){t||(je(e.$$.fragment,s),t=!0)},o(s){Ve(e.$$.fragment,s),t=!1},d(s){Ke(e,s)}}}function mn(n){let e,t,s,o,a,u,c;e=new wl({props:{stats:n[4]}});function p(_){n[37](_)}let b={isSwitchingMode:n[15]};return n[14]!==void 0&&(b.isPrivateMode=n[14]),s=new Al({props:b}),el.push(()=>sl(s,"isPrivateMode",p)),s.$on("modeChange",n[19]),u=new vn({}),{c(){Ye(e.$$.fragment),t=I(),Ye(s.$$.fragment),a=I(),Ye(u.$$.fragment)},l(_){Qe(e.$$.fragment,_),t=A(_),Qe(s.$$.fragment,_),a=A(_),Qe(u.$$.fragment,_)},m(_,w){Je(e,_,w),X(_,t,w),Je(s,_,w),X(_,a,w),Je(u,_,w),c=!0},p(_,w){const v={};w[0]&16&&(v.stats=_[4]),e.$set(v);const h={};w[0]&32768&&(h.isSwitchingMode=_[15]),!o&&w[0]&16384&&(o=!0,h.isPrivateMode=_[14],tl(()=>o=!1)),s.$set(h)},i(_){c||(je(e.$$.fragment,_),je(s.$$.fragment,_),je(u.$$.fragment,_),c=!0)},o(_){Ve(e.$$.fragment,_),Ve(s.$$.fragment,_),Ve(u.$$.fragment,_),c=!1},d(_){_&&(i(t),i(a)),Ke(e,_),Ke(s,_),Ke(u,_)}}}function kn(n){let e,t,s,o,a,u="Admin Dashboard",c,p,b="System overview and management",_,w,v,h,m,k,S,T="Relay Status",N,M,z,E,j,C=`<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zm10 0a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zm10 0a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg>
      Overview`,O,U,K=`<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path></svg>
      Channels`,Q,W,q,F,Z,V,P,D,y,L,x,R,$,se,ce,Me;document.title=e="Admin Dashboard - "+n[18].name;let ge=n[7]&&qs(n),ne=n[8]&&zs(n),_e=n[17]>0&&Fs(n),fe=n[16]>0&&Zs(n);const Le=[mn,bn,_n,gn],Se=[];function He(te,ie){return te[3]==="overview"?0:te[3]==="channels"?1:te[3]==="users"?2:te[3]==="access"?3:-1}return~(R=He(n))&&($=Se[R]=Le[R](n)),{c(){t=I(),s=f("div"),o=f("div"),a=f("h1"),a.textContent=u,c=I(),p=f("p"),p.textContent=b,_=I(),w=f("div"),v=f("span"),h=G(n[9]),k=I(),S=f("span"),S.textContent=T,N=I(),ge&&ge.c(),M=I(),ne&&ne.c(),z=I(),E=f("div"),j=f("button"),j.innerHTML=C,O=I(),U=f("button"),U.innerHTML=K,Q=I(),W=f("button"),q=Ne("svg"),F=Ne("path"),Z=G(`
      Users
      `),_e&&_e.c(),V=I(),P=f("button"),D=Ne("svg"),y=Ne("path"),L=G(`
      Access
      `),fe&&fe.c(),x=I(),$&&$.c(),this.h()},l(te){Xs("svelte-1ko2ro7",document.head).forEach(i),t=A(te),s=d(te,"DIV",{class:!0});var J=g(s);o=d(J,"DIV",{class:!0});var ue=g(o);a=d(ue,"H1",{class:!0,"data-svelte-h":!0}),oe(a)!=="svelte-48mamn"&&(a.textContent=u),c=A(ue),p=d(ue,"P",{class:!0,"data-svelte-h":!0}),oe(p)!=="svelte-g7e0f6"&&(p.textContent=b),_=A(ue),w=d(ue,"DIV",{class:!0});var ve=g(w);v=d(ve,"SPAN",{class:!0});var B=g(v);h=Y(B,n[9]),B.forEach(i),k=A(ve),S=d(ve,"SPAN",{class:!0,"data-svelte-h":!0}),oe(S)!=="svelte-1jtew3n"&&(S.textContent=T),ve.forEach(i),ue.forEach(i),N=A(J),ge&&ge.l(J),M=A(J),ne&&ne.l(J),z=A(J),E=d(J,"DIV",{class:!0});var H=g(E);j=d(H,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(j)!=="svelte-qti0lv"&&(j.innerHTML=C),O=A(H),U=d(H,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(U)!=="svelte-miwub6"&&(U.innerHTML=K),Q=A(H),W=d(H,"BUTTON",{class:!0});var ee=g(W);q=Ie(ee,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var le=g(q);F=Ie(le,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),g(F).forEach(i),le.forEach(i),Z=Y(ee,`
      Users
      `),_e&&_e.l(ee),ee.forEach(i),V=A(H),P=d(H,"BUTTON",{class:!0});var me=g(P);D=Ie(me,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var Ce=g(D);y=Ie(Ce,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),g(y).forEach(i),Ce.forEach(i),L=Y(me,`
      Access
      `),fe&&fe.l(me),me.forEach(i),H.forEach(i),x=A(J),$&&$.l(J),J.forEach(i),this.h()},h(){r(a,"class","text-4xl font-bold gradient-text mb-2"),r(p,"class","text-base-content/70"),r(v,"class",m="badge "+(n[9]==="connected"?"badge-success":n[9]==="error"?"badge-error":"badge-warning")),r(S,"class","text-sm text-base-content/50"),r(w,"class","mt-2 flex items-center gap-2"),r(o,"class","mb-6"),r(j,"class","tab tab-lg gap-2"),qe(j,"tab-active",n[3]==="overview"),r(U,"class","tab tab-lg gap-2"),qe(U,"tab-active",n[3]==="channels"),r(F,"stroke-linecap","round"),r(F,"stroke-linejoin","round"),r(F,"stroke-width","2"),r(F,"d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"),r(q,"xmlns","http://www.w3.org/2000/svg"),r(q,"class","h-4 w-4"),r(q,"fill","none"),r(q,"viewBox","0 0 24 24"),r(q,"stroke","currentColor"),r(W,"class","tab tab-lg gap-2"),qe(W,"tab-active",n[3]==="users"),r(y,"stroke-linecap","round"),r(y,"stroke-linejoin","round"),r(y,"stroke-width","2"),r(y,"d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"),r(D,"xmlns","http://www.w3.org/2000/svg"),r(D,"class","h-4 w-4"),r(D,"fill","none"),r(D,"viewBox","0 0 24 24"),r(D,"stroke","currentColor"),r(P,"class","tab tab-lg gap-2"),qe(P,"tab-active",n[3]==="access"),r(E,"class","tabs tabs-boxed bg-base-200 mb-6 p-1"),r(s,"class","container mx-auto p-4 max-w-6xl")},m(te,ie){X(te,t,ie),X(te,s,ie),l(s,o),l(o,a),l(o,c),l(o,p),l(o,_),l(o,w),l(w,v),l(v,h),l(w,k),l(w,S),l(s,N),ge&&ge.m(s,null),l(s,M),ne&&ne.m(s,null),l(s,z),l(s,E),l(E,j),l(E,O),l(E,U),l(E,Q),l(E,W),l(W,q),l(q,F),l(W,Z),_e&&_e.m(W,null),l(E,V),l(E,P),l(P,D),l(D,y),l(P,L),fe&&fe.m(P,null),l(s,x),~R&&Se[R].m(s,null),se=!0,ce||(Me=[pe(j,"click",n[33]),pe(U,"click",n[34]),pe(W,"click",n[35]),pe(P,"click",n[36])],ce=!0)},p(te,ie){(!se||ie[0]&262144)&&e!==(e="Admin Dashboard - "+te[18].name)&&(document.title=e),(!se||ie[0]&512)&&be(h,te[9]),(!se||ie[0]&512&&m!==(m="badge "+(te[9]==="connected"?"badge-success":te[9]==="error"?"badge-error":"badge-warning")))&&r(v,"class",m),te[7]?ge?ge.p(te,ie):(ge=qs(te),ge.c(),ge.m(s,M)):ge&&(ge.d(1),ge=null),te[8]?ne?ne.p(te,ie):(ne=zs(te),ne.c(),ne.m(s,z)):ne&&(ne.d(1),ne=null),(!se||ie[0]&8)&&qe(j,"tab-active",te[3]==="overview"),(!se||ie[0]&8)&&qe(U,"tab-active",te[3]==="channels"),te[17]>0?_e?_e.p(te,ie):(_e=Fs(te),_e.c(),_e.m(W,null)):_e&&(_e.d(1),_e=null),(!se||ie[0]&8)&&qe(W,"tab-active",te[3]==="users"),te[16]>0?fe?fe.p(te,ie):(fe=Zs(te),fe.c(),fe.m(P,null)):fe&&(fe.d(1),fe=null),(!se||ie[0]&8)&&qe(P,"tab-active",te[3]==="access");let J=R;R=He(te),R===J?~R&&Se[R].p(te,ie):($&&(at(),Ve(Se[J],1,1,()=>{Se[J]=null}),it()),~R?($=Se[R],$?$.p(te,ie):($=Se[R]=Le[R](te),$.c()),je($,1),$.m(s,null)):$=null)},i(te){se||(je($),se=!0)},o(te){Ve($),se=!1},d(te){te&&(i(t),i(s)),ge&&ge.d(),ne&&ne.d(),_e&&_e.d(),fe&&fe.d(),~R&&Se[R].d(),ce=!1,We(Me)}}}const Ge=5e3;function dt(n,e){return Promise.race([n,new Promise(t=>setTimeout(()=>t(void 0),e))])}function wn(n,e,t){let s,o,a,u;At(n,ft,B=>t(47,a=B)),At(n,zt,B=>t(48,u=B));const c=nl();let p="overview",b=[],_=[],w=[],v=null,h=null,m=null,k={totalUsers:0,totalChannels:0,totalMessages:0,pendingApprovals:0},S=[],T=!1,N=null,M=null,z="disconnected",E=!0,j=!0,C=!0,O=!0,U=u.relayMode==="private",K=!1;async function Q(){t(15,K=!0);const B=U?"private":"federated";zt.setRelayMode(B);try{await ol(),a.isNip07?await Ot(kt):a.privateKey&&await qt(kt,a.privateKey),t(9,z="connected")}catch(H){console.error("Failed to reconnect:",H),t(9,z="error")}finally{t(15,K=!1)}}async function W(){if(!a.isAuthenticated){t(7,N="Please login first to access admin features");return}try{if(t(6,T=!0),t(7,N=null),t(10,E=!0),t(11,j=!0),t(12,C=!0),t(13,O=!0),!rl())if(a.isNip07)await Ot(kt);else if(a.privateKey)await qt(kt,a.privateKey);else{t(7,N="No signing method available. Please login again.");return}t(9,z="connected"),await Promise.all([dt(ul({isAdmin:!0}),Ge).then(B=>{t(5,S=B||[]),t(4,k.totalChannels=S.length,k)}).catch(B=>console.error("Failed to load channels:",B)).finally(()=>{t(10,E=!1)}),dt(q(),Ge).catch(B=>console.error("Failed to load pending requests:",B)).finally(()=>{t(12,C=!1)}),dt(F(),Ge).catch(B=>console.error("Failed to load join requests:",B)).finally(()=>{t(13,O=!1)}),dt(V(),Ge).catch(B=>console.error("Failed to load registrations:",B)).finally(()=>{t(11,j=!1)}),dt(Js({limit:1,offset:0}),Ge).then(B=>{B&&t(4,k.totalUsers=B.total,k)}).catch(B=>console.error("Failed to load user count:",B)),dt((async()=>{const B=$e();return B?(await B.fetchEvents({kinds:[42,1],limit:5e3})).size:0})(),Ge).then(B=>{typeof B=="number"&&t(4,k.totalMessages=B,k)}).catch(B=>console.error("Failed to load message count:",B))]),v=pl(B=>{b.find(H=>H.id===B.id)||t(0,b=[B,...b])}),h=Z(),m=P()}catch(B){t(7,N=B instanceof Error?B.message:"Failed to initialize admin"),t(9,z="error")}finally{t(6,T=!1),t(10,E=!1),t(11,j=!1),t(12,C=!1),t(13,O=!1)}}async function q(){t(12,C=!0);const B=setTimeout(()=>{t(12,C=!1)},Ge);try{const{fetchPendingRequests:H}=await Ys(async()=>{const{fetchPendingRequests:le}=await import("../chunks/DUe_N5ek.js");return{fetchPendingRequests:le}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url),ee=await dt(H(),Ge);t(0,b=ee||[])}catch(H){console.error("Failed to load pending requests:",H)}finally{clearTimeout(B),t(12,C=!1)}}async function F(){t(13,O=!0);const B=setTimeout(()=>{t(13,O=!1)},Ge);try{const H=$e();if(!H)return;const ee={kinds:[Ft],limit:100},le=await H.fetchEvents(ee),me={kinds:[Zt],limit:500},Ce=await H.fetchEvents(me),ke=new Set;for(const de of Ce){const he=de.tags.find(Fe=>Fe[0]==="h")?.[1],De=de.tags.find(Fe=>Fe[0]==="p")?.[1];he&&De&&ke.add(`${he}:${De}`)}const Ae={kinds:[ht],limit:500},we=await H.fetchEvents(Ae),Ee=new Set;for(const de of we)de.tags.filter(De=>De[0]==="e").map(De=>De[1]).forEach(De=>Ee.add(De));const ae=[];for(const de of le){if(Ee.has(de.id))continue;const he=de.tags.find(De=>De[0]==="h")?.[1]||"";ke.has(`${he}:${de.pubkey}`)||ae.push({id:de.id,pubkey:de.pubkey,channelId:he,createdAt:(de.created_at||0)*1e3,status:"pending",message:de.content||void 0})}ae.sort((de,he)=>he.createdAt-de.createdAt),t(1,_=ae)}catch(H){console.error("Failed to load channel join requests:",H)}finally{clearTimeout(B),t(13,O=!1)}}function Z(){try{const B=$e();if(!B)return null;const H={kinds:[Ft],since:Math.floor(Date.now()/1e3)},ee=B.subscribe(H,{closeOnEose:!1});return ee.on("event",le=>{const me=le.tags.find(ke=>ke[0]==="h")?.[1]||"",Ce={id:le.id,pubkey:le.pubkey,channelId:me,createdAt:(le.created_at||0)*1e3,status:"pending",message:le.content||void 0};_.find(ke=>ke.id===Ce.id)||t(1,_=[Ce,..._])}),ee}catch(B){return console.error("Failed to subscribe to channel join requests:",B),null}}async function V(){t(11,j=!0);const B=setTimeout(()=>{t(11,j=!1)},Ge);try{const H=$e();if(!H)return;const ee={kinds:[xt],limit:100},le=await H.fetchEvents(ee),me={kinds:[ht],limit:500},Ce=await H.fetchEvents(me),ke=new Set;for(const we of Ce)we.tags.filter(ae=>ae[0]==="e").map(ae=>ae[1]).forEach(ae=>ke.add(ae));const Ae=[];for(const we of le){if(ke.has(we.id))continue;const Ee=we.tags.find(ae=>ae[0]==="name");Ae.push({id:we.id,pubkey:we.pubkey,createdAt:(we.created_at||0)*1e3,status:"pending",displayName:Ee?.[1]||void 0,message:we.content||void 0})}Ae.sort((we,Ee)=>Ee.createdAt-we.createdAt),t(2,w=Ae)}catch(H){console.error("Failed to load user registrations:",H)}finally{clearTimeout(B),t(11,j=!1)}}function P(){try{const B=$e();if(!B)return null;const H={kinds:[xt],since:Math.floor(Date.now()/1e3)},ee=B.subscribe(H,{closeOnEose:!1});return ee.on("event",le=>{const me=le.tags.find(ke=>ke[0]==="name"),Ce={id:le.id,pubkey:le.pubkey,createdAt:(le.created_at||0)*1e3,status:"pending",displayName:me?.[1]||void 0,message:le.content||void 0};w.find(ke=>ke.id===Ce.id)||t(2,w=[Ce,...w])}),ee}catch(B){return console.error("Failed to subscribe to user registrations:",B),null}}async function D(B){try{t(6,T=!0),t(7,N=null),t(8,M=null);const H=ft.getPrivkey()??void 0,ee=await cl(B.pubkey,a.publicKey||"",H);ee.success||console.warn("[Admin] Whitelist API failed:",ee.error);const le=$e();if(!le||!le.signer)throw new Error("No signer available");const me=new vt(le);me.kind=ht,me.tags=[["e",B.id]],me.content="Approved",await me.publish(),t(2,w=w.filter(Ce=>Ce.id!==B.id)),t(8,M="Approved user registration. User can now access the system."),setTimeout(()=>{t(8,M=null)},5e3)}catch(H){t(7,N=H instanceof Error?H.message:"Failed to approve registration")}finally{t(6,T=!1)}}async function y(B){try{t(6,T=!0),t(7,N=null);const H=$e();if(!H||!H.signer)throw new Error("No signer available");const ee=new vt(H);ee.kind=ht,ee.tags=[["e",B.id]],ee.content="Rejected by admin",await ee.publish(),t(2,w=w.filter(le=>le.id!==B.id))}catch(H){t(7,N=H instanceof Error?H.message:"Failed to reject registration")}finally{t(6,T=!1)}}async function L(B){try{t(6,T=!0),t(7,N=null),t(8,M=null);const H=await vl(B);if(H.success){t(0,b=b.filter(le=>le.id!==B.id));const ee=B.section&&Ze[B.section]?.name||B.section||"Unknown Section";t(8,M=`Approved access to ${ee}. User has been notified.`),setTimeout(()=>{t(8,M=null)},5e3)}else t(7,N=H.error||"Failed to approve request")}catch(H){t(7,N=H instanceof Error?H.message:"Failed to approve request")}finally{t(6,T=!1)}}async function x(B){try{t(6,T=!0),await hl.denyRequest(B,"Access denied by admin"),t(0,b=b.filter(H=>H.id!==B.id))}catch(H){t(7,N=H instanceof Error?H.message:"Failed to deny request")}finally{t(6,T=!1)}}async function R(B){try{t(6,T=!0),t(7,N=null),t(8,M=null);const H=$e();if(!H||!H.signer)throw new Error("No signer available");const ee=new vt(H);ee.kind=Zt,ee.tags=[["h",B.channelId],["p",B.pubkey]],ee.content="",await ee.publish();const le=new vt(H);le.kind=ht,le.tags=[["e",B.id]],le.content="Approved",await le.publish(),fl.approveMember(B.channelId,B.pubkey),t(1,_=_.filter(ke=>ke.id!==B.id));const Ce=S.find(ke=>ke.id===B.channelId)?.name||B.channelId.slice(0,8)+"...";t(8,M=`Approved join request for channel "${Ce}". User has been added.`),setTimeout(()=>{t(8,M=null)},5e3)}catch(H){t(7,N=H instanceof Error?H.message:"Failed to approve join request")}finally{t(6,T=!1)}}async function $(B){try{t(6,T=!0),t(7,N=null);const H=$e();if(!H||!H.signer)throw new Error("No signer available");const ee=new vt(H);ee.kind=ht,ee.tags=[["e",B.id]],ee.content="Rejected by admin",await ee.publish(),t(1,_=_.filter(le=>le.id!==B.id))}catch(H){t(7,N=H instanceof Error?H.message:"Failed to reject join request")}finally{t(6,T=!1)}}function se(B){return S.find(ee=>ee.id===B)?.name||B.slice(0,12)+"..."}async function ce(B){try{t(6,T=!0),t(7,N=null);const H=await dl(B.detail);t(5,S=[H,...S]),t(4,k.totalChannels=S.length,k)}catch(H){t(7,N=H instanceof Error?H.message:"Failed to create channel")}finally{t(6,T=!1)}}xs(async()=>{if(await ft.waitForReady(),!a.publicKey){Ht(`${Ct}/chat`);return}try{t(6,T=!0);const B=il(a.publicKey),H=await Promise.race([B,new Promise(ee=>setTimeout(()=>ee(void 0),8e3))]);if(!H){t(7,N="Could not verify admin status â€” relay may be unavailable. Please try again."),t(6,T=!1);return}if(al.set(H),!H.isAdmin){t(7,N="Access denied: Admin privileges required"),setTimeout(()=>Ht(`${Ct}/chat`),2e3);return}W()}catch{t(7,N="Failed to verify admin status. The relay may be temporarily unavailable."),t(6,T=!1)}}),$s(()=>{v&&(v.stop(),v=null),h&&(h.stop(),h=null),m&&(m.stop(),m=null)});const Me=()=>t(7,N=null),ge=()=>t(8,M=null),ne=()=>t(3,p="overview"),_e=()=>t(3,p="channels"),fe=()=>t(3,p="users"),Le=()=>t(3,p="access");function Se(B){U=B,t(14,U)}const He=B=>D(B.detail),te=B=>y(B.detail),ie=B=>L(B.detail),J=B=>x(B.detail),ue=B=>R(B.detail),ve=B=>$(B.detail);return n.$$.update=()=>{n.$$.dirty[0]&4&&t(17,s=w.length),n.$$.dirty[0]&3&&t(16,o=b.length+_.length),n.$$.dirty[0]&7&&t(4,k.pendingApprovals=b.length+_.length+w.length,k)},[b,_,w,p,k,S,T,N,M,z,E,j,C,O,U,K,o,s,c,Q,q,F,V,D,y,L,x,R,$,se,ce,Me,ge,ne,_e,fe,Le,Se,He,te,ie,J,ue,ve]}class zn extends tt{constructor(e){super(),st(this,e,wn,kn,et,{},null,[-1,-1])}}export{zn as component,qn as universal};
