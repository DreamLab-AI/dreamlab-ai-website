const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/BqbCnz4Q.js","../chunks/CmsKOCeN.js"])))=>i.map(i=>d[i]);
import{n as pe,Y as vn,B as ht,a0 as mt,s as Fe,d,i as D,l as i,c as b,e as y,h as k,k as Te,p as St,R as it,a as ie,b as f,g as x,u as Y,f as O,j as L,v as Z,t as R,y as ut,q,o as W,x as be,r as Ke,A as X,E as Zt,K as At,L as ul,P as ct,z as vt,w as Et,C as _n,D as gn,m as bn,G as kn,H as wn,I as yn,J as Cn}from"../chunks/0ZVSoAEn.js";import{n as En,l as Mn,j as In,k as Tn,S as qe,i as Ge,t as ce,a as $,g as ze,c as je,o as $e,p as $s,h as Wt,f as fl,d as He,m as Ue,b as Oe,e as Re}from"../chunks/DKVmOqaf.js";import{g as en}from"../chunks/D0QH3NT1.js";import{p as Jt}from"../chunks/BdMR7A5I.js";import{w as dl,d as tn,b as ne}from"../chunks/xKPZ-4ZK.js";import{g as al}from"../chunks/CTVLmyHZ.js";import{c as Sn,f as Kt,s as ol,a as at,g as An,b as ln,d as xn}from"../chunks/Cvz7PzGQ.js";import{O as Ln,P as sn,Q as Dn,T as Nn,U as Bn,V as nn,W as Pn,L as Ot,M as Nl,n as rn,N as an,a as pt,g as hl,X as on,Y as cn,d as un,Z as Vn,h as zn,I as jn,J as Hn,R as Bl,$ as Un,i as On,a0 as Rn}from"../chunks/DxD0Wn3l.js";import{c as Fn,a as Wn,C as Kn,s as qn}from"../chunks/mOcJ-7al.js";import{a as Gn,n as fn,s as Pl}from"../chunks/aZ5XzadJ.js";import{d as me}from"../chunks/6Pu-XtiL.js";import{currentPubkey as Yn,userStore as Zn,isAdminVerified as dn}from"../chunks/CF3XGpNG.js";import{t as dt}from"../chunks/C5DPgcI1.js";import{e as Ae,u as ml,f as Jn,d as hn}from"../chunks/m0NROLOn.js";/* empty css                */import{M as Qn}from"../chunks/DOw5f1QP.js";import{_ as Xn}from"../chunks/CmsKOCeN.js";import{profileCache as el}from"../chunks/D7m-JnSU.js";import{encodePubkey as $n,encodePrivkey as er}from"../chunks/DDGWR2uk.js";import{u as mn}from"../chunks/Cufo8aq4.js";function tr(n,e,t,l){if(!e)return pe;const s=n.getBoundingClientRect();if(e.left===s.left&&e.right===s.right&&e.top===s.top&&e.bottom===s.bottom)return pe;const{delay:r=0,duration:a=300,easing:o=vn,start:c=En()+r,end:u=c+a,tick:h=pe,css:p}=t(n,{from:e,to:s},l);let g=!0,_=!1,m;function v(){p&&(m=Tn(n,0,1,a,r,o,p)),r||(_=!0)}function w(){p&&In(n,m),g=!1}return Mn(C=>{if(!_&&C>=c&&(_=!0),_&&C>=u&&(h(1,0),w()),!g)return!1;if(_){const E=C-c,N=0+1*o(E/a);h(N,1-N)}return!0}),v(),h(0,1),w}function lr(n){const e=getComputedStyle(n);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:l}=e,s=n.getBoundingClientRect();n.style.position="absolute",n.style.width=t,n.style.height=l,pn(n,s)}}function pn(n,e){const t=n.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const l=getComputedStyle(n),s=l.transform==="none"?"":l.transform;n.style.transform=`${s} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}const sr=!0,nr=!1,Qa=Object.freeze(Object.defineProperty({__proto__:null,prerender:sr,ssr:nr},Symbol.toStringTag,{value:"Module"})),Ft=30*60*1e3,rr=2*60*1e3,ir=30*1e3,Vl="nostr_bbs_last_activity",zl={isActive:!0,showWarning:!1,remainingMs:Ft};function ar(){const{subscribe:n,set:e,update:t}=dl(zl);let l=null,s=null;function r(){localStorage.setItem(Vl,Date.now().toString()),t(g=>({...g,isActive:!0,showWarning:!1,remainingMs:Ft}))}function a(){const g=localStorage.getItem(Vl);return g?parseInt(g,10):Date.now()}function o(){const g=a(),_=Date.now()-g,m=Ft-_;m<=0?(t(v=>({...v,isActive:!1,showWarning:!1,remainingMs:0})),s&&s()):m<=rr?t(v=>({...v,isActive:!0,showWarning:!0,remainingMs:m})):t(v=>({...v,isActive:!0,showWarning:!1,remainingMs:m}))}function c(){return ht(sn)||Ln()||localStorage.getItem("nostr_bbs_pwa_mode")==="true"}function u(g){if(c())return console.log("[Session] PWA mode detected - session timeout disabled"),t(v=>({...v,isActive:!0,showWarning:!1,remainingMs:Ft})),()=>{};s=g,r(),l&&clearInterval(l),l=setInterval(o,ir);const _=["mousedown","keydown","touchstart","scroll"],m=or(r,1e4);return _.forEach(v=>{document.addEventListener(v,m,{passive:!0})}),()=>{l&&(clearInterval(l),l=null),_.forEach(v=>{document.removeEventListener(v,m)})}}function h(){l&&(clearInterval(l),l=null),s=null,e(zl)}function p(){r()}return{subscribe:n,start:u,stop:h,touch:r,extend:p,checkTimeout:o}}function or(n,e){let t=0;return(...l)=>{const s=Date.now();s-t>=e&&(t=s,n(...l))}}const qt=ar();function cr(n){const e=Math.floor(n/6e4),t=Math.floor(n%6e4/1e3);return e>0?`${e}m ${t}s`:`${t}s`}async function ur(){if(typeof window>"u")return;if(Dn(),await Nn()){console.log("[PWA] Service worker registered successfully");try{const e=await Bn();e.length>0&&(console.log(`[PWA] Found ${e.length} queued messages`),ht(nn)&&await Pn())}catch(e){console.error("[PWA] Failed to check message queue:",e)}}}async function fr(n){const e=performance.now();await me.clearSearchIndex();const t=await me.messages.toCollection().filter(a=>!a.deleted).toArray(),l=t.length,s=100;for(let a=0;a<t.length;a+=s){const o=t.slice(a,a+s);await me.bulkIndexMessages(o),n&&n(Math.min(a+s,l),l),await new Promise(c=>setTimeout(c,0))}const r=performance.now();console.log(`Search index built: ${l} messages in ${(r-e).toFixed(2)}ms`)}function dr(n){const e=n.trim().toLowerCase();return e.includes(" or ")?{terms:e.split(" or ").map(s=>s.trim()).filter(s=>s.length>0),operator:"OR"}:{terms:e.split(/\s+and\s+|\s+/).filter(l=>l.length>1),operator:"AND"}}function hr(n,e,t,l){let s=0;const r=t.toLowerCase();n.forEach(c=>{r.includes(c)&&(s+=10);const u=e.filter(h=>h.includes(c)||c.includes(h)).length;s+=u*5,r.startsWith(c)&&(s+=3)});const a=(Date.now()/1e3-l)/(24*60*60),o=Math.max(0,5-a/30);return s+=o,s}function mr(n,e,t=3){const l=[],s=n.toLowerCase();for(const r of e){const a=s.indexOf(r);if(a!==-1){const o=Math.max(0,a-40),c=Math.min(n.length,a+r.length+40);let u=n.substring(o,c);if(o>0&&(u="..."+u),c<n.length&&(u=u+"..."),l.push(u),l.length>=t)break}}return l}async function pr(n,e={}){const t=performance.now();if(!n||n.trim().length<2)return{results:[],stats:{totalResults:0,searchTime:0,hasMore:!1}};const{terms:l,operator:s}=dr(n),r=e.limit||50,a=e.offset||0;let o=me.searchIndex.toCollection();e.channelId&&(o=me.searchIndex.where("channelId").equals(e.channelId)),e.authorPubkey&&(o=o.and(v=>v.authorPubkey===e.authorPubkey)),e.dateRange&&(o=o.and(v=>v.timestamp>=e.dateRange.start&&v.timestamp<=e.dateRange.end));const c=await o.toArray(),u=[];for(const v of c){let w=!1;if(s==="AND"?w=l.every(C=>v.tokens.some(E=>E.includes(C)||C.includes(E))):w=l.some(C=>v.tokens.some(E=>E.includes(C)||C.includes(E))),w){const C=hr(l,v.tokens,v.content,v.timestamp),E=mr(v.content,l);u.push({messageId:v.messageId,channelId:v.channelId,content:v.content,authorPubkey:v.authorPubkey,timestamp:v.timestamp,score:C,highlights:E})}}u.sort((v,w)=>w.score-v.score);const h=u.length,p=u.slice(a,a+r),g=a+r<h,m=performance.now()-t;return await me.addSearchHistory(n,h),{results:p,stats:{totalResults:h,searchTime:m,hasMore:g}}}async function vr(n=5){return(await me.getSearchHistory(n)).filter(t=>t.resultCount>0).map(t=>t.query)}async function tl(n){await me.indexMessage(n)}async function jl(n){await me.removeFromIndex(n)}async function pl(){const n=await me.searchIndex.count();if(n===0)return{totalIndexed:0,oldestMessage:0,newestMessage:0};const e=await me.searchIndex.orderBy("timestamp").first(),t=await me.searchIndex.orderBy("timestamp").reverse().first();return{totalIndexed:n,oldestMessage:e?.timestamp||0,newestMessage:t?.timestamp||0}}const _r={REMOVE_DATE:"2025-12-01"},Hl={messages:[],loading:!1,error:null,currentChannelId:null,hasMore:!0,lastFetchTime:null};function gr(){const{subscribe:n,set:e,update:t}=dl(Hl),l=new Map;async function s(c){const u=await me.getUser(c.pubkey);return{id:c.id,channelId:c.channelId,pubkey:c.pubkey,content:c.content,created_at:c.created_at,encrypted:c.encrypted,deleted:c.deleted,author:{pubkey:c.pubkey,name:u?.name||u?.displayName||void 0,avatar:u?.avatar||void 0}}}function r(){return console.warn("[REMOVED] NIP-04 decryption removed as of",_r.REMOVE_DATE),"[Legacy NIP-04 encrypted message - encryption method no longer supported]"}function a(c,u,h){const p=rn();if(!p)throw new Error("NDK not initialized");const g=new an(p);return g.kind=u,g.content=c,g.tags=h,g.created_at=Math.floor(Date.now()/1e3),g}function o(c){return{id:c.id,pubkey:c.pubkey,created_at:c.created_at||Math.floor(Date.now()/1e3),kind:c.kind||0,tags:c.tags,content:c.content,sig:c.sig||""}}return{subscribe:n,async fetchMessages(c,u,h,p=50){t(g=>({...g,loading:!0,error:null,currentChannelId:u}));try{const g=await me.getChannelMessagesWithAuthors(u),_=await Promise.all(g.map(N=>s(N)));t(N=>({...N,messages:_,loading:!0}));const v=(await me.getChannel(u))?.isEncrypted||!1,w=g.length>0?Math.max(...g.map(N=>N.created_at)):0;Ot({kinds:[9],"#e":[u],since:w,limit:p},{closeOnEose:!1}).on("event",async N=>{try{const z=o(N);if(await me.isMessageDeleted(z.id))return;let M=z.content;v&&(M=r());const I={id:z.id,channelId:u,pubkey:z.pubkey,content:M,created_at:z.created_at,encrypted:v,deleted:!1,kind:z.kind,tags:z.tags,sig:z.sig};await me.messages.put(I),tl(I).catch(A=>console.error("Failed to index message for search:",A));const T=await s(I);t(A=>A.messages.some(j=>j.id===T.id)?A:{...A,messages:[...A.messages,T].sort((j,B)=>j.created_at-B.created_at)})}catch(z){console.error("[messages] Failed to process incoming event:",z)}}),t(N=>({...N,loading:!1,lastFetchTime:Date.now()}))}catch(g){const _=g instanceof Error?g.message:"Failed to fetch messages";console.error("fetchMessages error:",g),dt.error(`Connection error: ${_}`),t(m=>({...m,error:_,loading:!1}))}},async sendMessage(c,u,h,p,g=!1,_=[]){try{let m=c;if(g)throw new Error("NIP-04 encrypted messages are no longer supported. Use NIP-44 gift wrap (kind 1059) for encrypted direct messages.");const w=a(m,9,[["e",u,h,"root"]]);await Nl(w);const C=o(w),E={id:C.id,channelId:u,pubkey:C.pubkey,content:c,created_at:C.created_at,encrypted:g,deleted:!1,kind:C.kind,tags:C.tags,sig:C.sig};await me.messages.put(E),tl(E).catch(z=>console.error("Failed to index message for search:",z));const N=await s(E);t(z=>({...z,messages:[...z.messages,N].sort((S,M)=>S.created_at-M.created_at)}))}catch(m){const v=m instanceof Error?m.message:"Failed to send message";throw console.error("sendMessage error:",m),dt.error(`Failed to send: ${v}`),t(w=>({...w,error:v})),m}},async deleteMessage(c,u,h,p){try{const _=a("",5,[["e",c],["k","9"]]);await Nl(_);const m=o(_);await me.addDeletion({id:m.id,deletedEventId:c,channelId:u,deleterPubkey:m.pubkey,created_at:m.created_at,kind:5}),jl(c).catch(v=>console.error("Failed to remove deleted message from search:",v)),t(v=>({...v,messages:v.messages.map(w=>w.id===c?{...w,deleted:!0}:w)}))}catch(g){const _=g instanceof Error?g.message:"Failed to delete message";throw console.error("deleteMessage error:",g),dt.error(`Failed to delete: ${_}`),t(m=>({...m,error:_})),g}},async subscribeToChannel(c,u,h){try{const g=(await me.getChannel(c))?.isEncrypted||!1,_={kinds:[9],"#e":[c],since:Math.floor(Date.now()/1e3)},m={kinds:[5,9005],"#e":[c],since:Math.floor(Date.now()/1e3)},v=`msg_${c}_${Date.now()}`,w=Ot(_,{closeOnEose:!1,subId:v});w.on("event",async z=>{try{const S=o(z);let M=S.content;g&&(M=r());const I={id:S.id,channelId:c,pubkey:S.pubkey,content:M,created_at:S.created_at,encrypted:g,deleted:!1,kind:S.kind,tags:S.tags,sig:S.sig};await me.messages.put(I),tl(I).catch(A=>console.error("Failed to index message for search:",A));const T=await s(I);t(A=>!A.messages.some(j=>j.id===T.id)&&A.currentChannelId===c?{...A,messages:[...A.messages,T].sort((j,B)=>j.created_at-B.created_at)}:A)}catch(S){console.error("[messages] Failed to process channel event:",S)}});const C=`del_${c}_${Date.now()}`,E=Ot(m,{closeOnEose:!1,subId:C});E.on("event",async z=>{const S=o(z),M=S.tags.find(I=>I[0]==="e")?.[1];M&&(await me.addDeletion({id:S.id,deletedEventId:M,channelId:c,deleterPubkey:S.pubkey,created_at:S.created_at,kind:S.kind}),jl(M).catch(I=>console.error("Failed to remove deleted message from search:",I)),t(I=>({...I,messages:I.messages.map(T=>T.id===M?{...T,deleted:!0}:T)})))});const N=l.get(c)||[];l.set(c,[...N,{subId:v,subscription:w},{subId:C,subscription:E}])}catch(p){console.error("subscribeToChannel error:",p);const g=p instanceof Error?p.message:"Failed to subscribe to channel";dt.error(`Channel subscription failed: ${g}`),t(_=>({..._,error:g}))}},unsubscribeFromChannel(c,u){const h=l.get(c);h&&(h.forEach(({subscription:p})=>{p.stop()}),l.delete(c))},async fetchOlderMessages(c,u,h,p=50){const _=ht({subscribe:n}).messages.filter(m=>m.channelId===u).reduce((m,v)=>v.created_at<m.created_at?v:m,{created_at:1/0});if(_.created_at===1/0)return!1;t(m=>({...m,loading:!0,error:null}));try{const v=(await me.getChannel(u))?.isEncrypted||!1,w={kinds:[9],"#e":[u],until:_.created_at-1,limit:p};let C=0;return await new Promise((E,N)=>{const z=Ot(w,{closeOnEose:!0}),S=setTimeout(()=>{z.stop(),E()},5e3);z.on("event",async M=>{try{const I=o(M);if(await me.isMessageDeleted(I.id))return;let A=I.content;v&&(A=r());const V={id:I.id,channelId:u,pubkey:I.pubkey,content:A,created_at:I.created_at,encrypted:v,deleted:!1,kind:I.kind,tags:I.tags,sig:I.sig};await me.messages.put(V);const j=await s(V);t(B=>B.messages.some(P=>P.id===j.id)?B:(C++,{...B,messages:[...B.messages,j].sort((P,H)=>P.created_at-H.created_at)}))}catch(I){console.error("[messages] Failed to process older event:",I)}}),z.on("eose",()=>{clearTimeout(S),E()}),z.on("close",()=>{clearTimeout(S),E()})}),t(E=>({...E,loading:!1,hasMore:C>=p*.5})),C>0}catch(m){const v=m instanceof Error?m.message:"Failed to fetch older messages";return console.error("fetchOlderMessages error:",m),t(w=>({...w,error:v,loading:!1,hasMore:!1})),!1}},clearError(){t(c=>({...c,error:null}))},clear(){e(Hl)},disconnectAll(){l.forEach(c=>{c.forEach(({subscription:u})=>{u.stop()})}),l.clear()}}}const vl=gr(),br=tn(vl,n=>n.messages.filter(e=>!e.deleted));tn(br,n=>n.length);typeof window<"u"&&window.addEventListener("beforeunload",()=>{vl.disconnectAll()});let kr=null;const yt=new Set;function wr(){let n=0;vl.subscribe(async e=>{if(!(e.loading||e.messages.length===0)){if(e.messages.length>n){const t=e.messages.slice(n);for(const l of t)await yr(l,e.currentChannelId)}n=e.messages.length}})}async function yr(n,e){try{if(yt.has(n.id))return;if(yt.add(n.id),yt.size>1e3){const h=Array.from(yt).slice(-1e3);yt.clear(),h.forEach(p=>yt.add(p))}if(!Gn(n.pubkey,n.channelId,kr))return;const l=(await me.getChannel(n.channelId))?.name||"Unknown Channel",s=ht(Yn),r=Cr(n.content,s),a=r?"mention":"message",o=n.author.name||n.author.pubkey.slice(0,8),c=r?`${o} mentioned you in ${l}`:`${o}: ${n.content.slice(0,50)}${n.content.length>50?"...":""}`;fn.addNotification(a,c,{channelId:n.channelId,channelName:l,senderPubkey:n.pubkey,senderName:o,url:`/chat?channel=${n.channelId}`})}catch(t){console.error("Error processing message notification:",t)}}function Cr(n,e){return e?n.includes("@"):!1}async function Er(n){console.log("Starting search index rebuild...");const e=performance.now();try{await fr(n);const t=await pl(),s=(performance.now()-e)/1e3;console.log("Search index rebuild complete!"),console.log(`- Indexed: ${t.totalIndexed} messages`),console.log(`- Duration: ${s.toFixed(2)}s`),console.log(`- Average: ${(t.totalIndexed/s).toFixed(0)} messages/sec`);return}catch(t){throw console.error("Search index rebuild failed:",t),t}}async function Mr(){const n=await pl(),e=await me.messages.where("deleted").equals(0).count();if(n.totalIndexed===0&&e>0)return!0;const t=e-n.totalIndexed,l=t/e*100;return l>10?(console.log(`Search index out of sync: ${t} messages not indexed (${l.toFixed(1)}%)`),!0):!1}async function Ir(){if(await Mr())console.log("Search index is empty or out of date, rebuilding..."),await Er((e,t)=>{(e%100===0||e===t)&&console.log(`Indexing messages: ${e}/${t} (${(e/t*100).toFixed(1)}%)`)});else{const e=await pl();console.log(`Search index ready: ${e.totalIndexed} messages indexed`)}}let ll=!1;async function Tr(){if(!ll)try{ll=!0,await Ir()}catch(n){console.error("Failed to initialize search index:",n),ll=!1}}function Sr(n,{from:e,to:t},l={}){const s=getComputedStyle(n),r=s.transform==="none"?"":s.transform,[a,o]=s.transformOrigin.split(" ").map(parseFloat),c=e.left+e.width*a/t.width-(t.left+a),u=e.top+e.height*o/t.height-(t.top+o),{delay:h=0,duration:p=_=>Math.sqrt(_)*120,easing:g=Sn}=l;return{delay:h,duration:mt(p)?p(Math.sqrt(c*c+u*u)):p,easing:g,css:(_,m)=>{const v=m*c,w=m*u,C=_+m*e.width/t.width,E=_+m*e.height/t.height;return`transform: ${r} translate(${v}px, ${w}px) scale(${C}, ${E});`}}}function Ul(n,e,t){const l=n.slice();return l[10]=e[t],l}function sl(n){const e=n.slice(),t=e[10].action;return e[13]=t,e}function Ol(n){let e;return{c(){e=k("div"),this.h()},l(t){e=b(t,"DIV",{class:!0,style:!0}),y(e).forEach(d),this.h()},h(){i(e,"class","absolute bottom-0 left-0 h-1 bg-current opacity-30 progress-bar svelte-1bnehg0"),ut(e,"animation-duration",n[10].duration+"ms")},m(t,l){D(t,e,l)},p(t,l){l&1&&ut(e,"animation-duration",t[10].duration+"ms")},d(t){t&&d(e)}}}function Rl(n){let e,t=n[13].label+"",l,s,r;function a(){return n[6](n[10],n[13])}return{c(){e=k("button"),l=R(t),this.h()},l(o){e=b(o,"BUTTON",{class:!0});var c=y(e);l=O(c,t),c.forEach(d),this.h()},h(){i(e,"class","btn btn-xs btn-outline border-current text-current hover:bg-current hover:text-base-100 self-start")},m(o,c){D(o,e,c),f(e,l),s||(r=q(e,"click",a),s=!0)},p(o,c){n=o,c&1&&t!==(t=n[13].label+"")&&ie(l,t)},d(o){o&&d(e),s=!1,r()}}}function Fl(n){let e,t='<svg class="w-4 h-4 stroke-current" fill="none" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>',l,s;function r(){return n[7](n[10])}return{c(){e=k("button"),e.innerHTML=t,this.h()},l(a){e=b(a,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(e)!=="svelte-1ugddyn"&&(e.innerHTML=t),this.h()},h(){i(e,"class","btn btn-ghost btn-xs btn-circle flex-shrink-0 hover:bg-current/20"),i(e,"aria-label","Dismiss notification")},m(a,o){D(a,e,o),l||(s=q(e,"click",r),l=!0)},p(a,o){n=a},d(a){a&&d(e),l=!1,s()}}}function Wl(n,e){let t,l,s,r,a,o,c,u,h,p,g=e[10].message+"",_,m,v,w,C,E,N,z=pe,S,M=e[10].duration&&e[10].duration>0&&Ol(e),I=e[10].action&&Rl(sl(e)),T=e[10].dismissible&&Fl(e);return{key:n,first:null,c(){t=k("div"),M&&M.c(),l=L(),s=k("div"),r=k("div"),a=Z("svg"),o=Z("path"),u=L(),h=k("div"),p=k("span"),_=R(g),m=L(),I&&I.c(),v=L(),T&&T.c(),w=L(),this.h()},l(A){t=b(A,"DIV",{class:!0,role:!0,"aria-atomic":!0});var V=y(t);M&&M.l(V),l=x(V),s=b(V,"DIV",{class:!0});var j=y(s);r=b(j,"DIV",{class:!0});var B=y(r);a=Y(B,"svg",{class:!0,fill:!0,viewBox:!0,"stroke-width":!0});var U=y(a);o=Y(U,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(o).forEach(d),U.forEach(d),B.forEach(d),u=x(j),h=b(j,"DIV",{class:!0});var P=y(h);p=b(P,"SPAN",{class:!0});var H=y(p);_=O(H,g),H.forEach(d),m=x(P),I&&I.l(P),P.forEach(d),v=x(j),T&&T.l(j),j.forEach(d),w=x(V),V.forEach(d),this.h()},h(){i(o,"stroke-linecap","round"),i(o,"stroke-linejoin","round"),i(o,"d",c=e[2][e[10].variant]),i(a,"class","w-6 h-6 stroke-current"),i(a,"fill","none"),i(a,"viewBox","0 0 24 24"),i(a,"stroke-width","2"),i(r,"class","flex-shrink-0 mt-0.5"),i(p,"class","text-sm font-medium break-words leading-relaxed"),i(h,"class","flex-1 flex flex-col gap-2 min-w-0"),i(s,"class","flex items-start gap-3 w-full"),i(t,"class",C="alert border-2 shadow-2xl min-w-[300px] max-w-md relative overflow-hidden "+e[1][e[10].variant]+" svelte-1bnehg0"),i(t,"role","alert"),i(t,"aria-atomic","true"),this.first=t},m(A,V){D(A,t,V),M&&M.m(t,null),f(t,l),f(t,s),f(s,r),f(r,a),f(a,o),f(s,u),f(s,h),f(h,p),f(p,_),f(h,m),I&&I.m(h,null),f(s,v),T&&T.m(s,null),f(t,w),S=!0},p(A,V){e=A,e[10].duration&&e[10].duration>0?M?M.p(e,V):(M=Ol(e),M.c(),M.m(t,l)):M&&(M.d(1),M=null),(!S||V&1&&c!==(c=e[2][e[10].variant]))&&i(o,"d",c),(!S||V&1)&&g!==(g=e[10].message+"")&&ie(_,g),e[10].action?I?I.p(sl(e),V):(I=Rl(sl(e)),I.c(),I.m(h,null)):I&&(I.d(1),I=null),e[10].dismissible?T?T.p(e,V):(T=Fl(e),T.c(),T.m(s,null)):T&&(T.d(1),T=null),(!S||V&3&&C!==(C="alert border-2 shadow-2xl min-w-[300px] max-w-md relative overflow-hidden "+e[1][e[10].variant]+" svelte-1bnehg0"))&&i(t,"class",C)},r(){N=t.getBoundingClientRect()},f(){lr(t),z(),pn(t,N)},a(){z(),z=tr(t,N,Sr,{duration:200})},i(A){S||(A&&it(()=>{S&&(E||(E=$e(t,Kt,{x:300,duration:300,opacity:0},!0)),E.run(1))}),S=!0)},o(A){A&&(E||(E=$e(t,Kt,{x:300,duration:300,opacity:0},!1)),E.run(0)),S=!1},d(A){A&&d(t),M&&M.d(),I&&I.d(),T&&T.d(),A&&E&&E.end()}}}function Ar(n){let e,t=[],l=new Map,s,r=Ae(n[0].slice(-3));const a=o=>o[10].id;for(let o=0;o<r.length;o+=1){let c=Ul(n,r,o),u=a(c);l.set(u,t[o]=Wl(u,c))}return{c(){e=k("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=b(o,"DIV",{class:!0,role:!0,"aria-live":!0,"aria-label":!0});var c=y(e);for(let u=0;u<t.length;u+=1)t[u].l(c);c.forEach(d),this.h()},h(){i(e,"class","toast toast-top toast-end z-50 max-h-[90vh] overflow-y-auto svelte-1bnehg0"),i(e,"role","region"),i(e,"aria-live","polite"),i(e,"aria-label","Notifications")},m(o,c){D(o,e,c);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);s=!0},p(o,[c]){if(c&31){r=Ae(o[0].slice(-3)),ze();for(let u=0;u<t.length;u+=1)t[u].r();t=ml(t,c,a,1,o,r,l,e,Jn,Wl,null,Ul);for(let u=0;u<t.length;u+=1)t[u].a();je()}},i(o){if(!s){for(let c=0;c<r.length;c+=1)$(t[c]);s=!0}},o(o){for(let c=0;c<t.length;c+=1)ce(t[c]);s=!1},d(o){o&&d(e);for(let c=0;c<t.length;c+=1)t[c].d()}}}function Kl(){"vibrate"in navigator&&navigator.vibrate(50)}function xr(n,e,t){let l,s,r;Te(n,dt,_=>t(5,r=_));const a={success:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",error:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z",info:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",warning:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"};let o=!1;St(()=>{o=localStorage.getItem("toastSoundEnabled")==="true"});function c(_){if(o)try{const m=window.AudioContext||window.webkitAudioContext;if(!m)return;const v=new m,w=v.createOscillator(),C=v.createGain();w.connect(C),C.connect(v.destination);const E={success:523.25,error:329.63,warning:440,info:392};w.frequency.value=E[_]||440,w.type="sine",C.gain.setValueAtTime(.1,v.currentTime),C.gain.exponentialRampToValueAtTime(.01,v.currentTime+.1),w.start(v.currentTime),w.stop(v.currentTime+.1)}catch{}}function u(_){dt.remove(_)}async function h(_,m){dt.remove(_),await m()}const p=(_,m)=>{Kl(),h(_.id,m.callback)},g=_=>{Kl(),u(_.id)};return n.$$.update=()=>{if(n.$$.dirty&32&&t(0,l=r.toasts),n.$$.dirty&1&&l.length>0){const _=l[l.length-1];c(_.variant)}},t(1,s={success:"bg-success/10 border-success text-success backdrop-blur-md",error:"bg-error/10 border-error text-error backdrop-blur-md",info:"bg-info/10 border-info text-info backdrop-blur-md",warning:"bg-warning/10 border-warning text-warning backdrop-blur-md"}),[l,s,a,u,h,r,p,g]}class Lr extends qe{constructor(e){super(),Ge(this,e,xr,Ar,Fe,{})}}function Dr(){const{subscribe:n,set:e,update:t}=dl({open:!1,options:null,resolve:null});return{subscribe:n,confirm(l){return new Promise(s=>{e({open:!0,options:{confirmLabel:"Confirm",cancelLabel:"Cancel",variant:"danger",...l},resolve:s})})},handleConfirm(){const l=ht({subscribe:n});l.resolve&&l.resolve(!0),e({open:!1,options:null,resolve:null})},handleCancel(){const l=ht({subscribe:n});l.resolve&&l.resolve(!1),e({open:!1,options:null,resolve:null})},close(){const l=ht({subscribe:n});l.resolve&&l.resolve(!1),e({open:!1,options:null,resolve:null})}}}const Tt=Dr(),{window:Nr}=en;function ql(n){let e,t,l,s,r,a,o,c=n[2].icon+"",u,h,p,g,_,m=n[1].title+"",v,w,C,E=n[1].message+"",N,z,S,M,I=n[1].cancelLabel+"",T,A,V,j=n[1].confirmLabel+"",B,U,P,H,G,Q,se;return{c(){e=k("div"),t=k("div"),l=L(),s=k("div"),r=k("div"),a=k("div"),o=k("span"),u=R(c),g=L(),_=k("h3"),v=R(m),w=L(),C=k("p"),N=R(E),z=L(),S=k("div"),M=k("button"),T=R(I),A=L(),V=k("button"),B=R(j),this.h()},l(J){e=b(J,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0,"aria-describedby":!0});var ee=y(e);t=b(ee,"DIV",{class:!0,"aria-hidden":!0}),y(t).forEach(d),l=x(ee),s=b(ee,"DIV",{class:!0});var he=y(s);r=b(he,"DIV",{class:!0});var ae=y(r);a=b(ae,"DIV",{class:!0});var we=y(a);o=b(we,"SPAN",{class:!0});var F=y(o);u=O(F,c),F.forEach(d),we.forEach(d),g=x(ae),_=b(ae,"H3",{id:!0,class:!0});var K=y(_);v=O(K,m),K.forEach(d),w=x(ae),C=b(ae,"P",{id:!0,class:!0});var ue=y(C);N=O(ue,E),ue.forEach(d),z=x(ae),S=b(ae,"DIV",{class:!0});var te=y(S);M=b(te,"BUTTON",{class:!0});var fe=y(M);T=O(fe,I),fe.forEach(d),A=x(te),V=b(te,"BUTTON",{class:!0});var re=y(V);B=O(re,j),re.forEach(d),te.forEach(d),ae.forEach(d),he.forEach(d),ee.forEach(d),this.h()},h(){i(t,"class","fixed inset-0 bg-black/60 backdrop-blur-sm"),i(t,"aria-hidden","true"),i(o,"class",h="text-2xl font-bold "+n[2].iconColor),i(a,"class",p="w-14 h-14 rounded-full "+n[2].iconBg+" flex items-center justify-center mb-4"),i(_,"id","confirm-title"),i(_,"class","text-lg font-semibold mb-2"),i(C,"id","confirm-message"),i(C,"class","text-base-content/70 text-sm mb-6"),i(M,"class","btn btn-ghost flex-1"),i(V,"class",U="btn "+(n[1].confirmButtonClass||n[2].buttonClass)+" flex-1"),i(S,"class","flex gap-3 w-full"),i(r,"class","flex flex-col items-center text-center"),i(s,"class","relative bg-base-200 rounded-2xl shadow-2xl max-w-sm w-full p-6"),i(e,"class","fixed inset-0 z-[100] flex items-center justify-center p-4"),i(e,"role","dialog"),i(e,"aria-modal","true"),i(e,"aria-labelledby","confirm-title"),i(e,"aria-describedby","confirm-message")},m(J,ee){D(J,e,ee),f(e,t),f(e,l),f(e,s),f(s,r),f(r,a),f(a,o),f(o,u),f(r,g),f(r,_),f(_,v),f(r,w),f(r,C),f(C,N),f(r,z),f(r,S),f(S,M),f(M,T),f(S,A),f(S,V),f(V,B),G=!0,Q||(se=[q(M,"click",Tt.handleCancel),q(V,"click",Tt.handleConfirm),q(e,"click",n[4]),q(e,"keydown",n[3])],Q=!0)},p(J,ee){(!G||ee&4)&&c!==(c=J[2].icon+"")&&ie(u,c),(!G||ee&4&&h!==(h="text-2xl font-bold "+J[2].iconColor))&&i(o,"class",h),(!G||ee&4&&p!==(p="w-14 h-14 rounded-full "+J[2].iconBg+" flex items-center justify-center mb-4"))&&i(a,"class",p),(!G||ee&2)&&m!==(m=J[1].title+"")&&ie(v,m),(!G||ee&2)&&E!==(E=J[1].message+"")&&ie(N,E),(!G||ee&2)&&I!==(I=J[1].cancelLabel+"")&&ie(T,I),(!G||ee&2)&&j!==(j=J[1].confirmLabel+"")&&ie(B,j),(!G||ee&6&&U!==(U="btn "+(J[1].confirmButtonClass||J[2].buttonClass)+" flex-1"))&&i(V,"class",U)},i(J){G||(J&&it(()=>{G&&(P||(P=$e(s,ol,{duration:200,start:.95},!0)),P.run(1))}),J&&it(()=>{G&&(H||(H=$e(e,at,{duration:150},!0)),H.run(1))}),G=!0)},o(J){J&&(P||(P=$e(s,ol,{duration:200,start:.95},!1)),P.run(0)),J&&(H||(H=$e(e,at,{duration:150},!1)),H.run(0)),G=!1},d(J){J&&d(e),J&&P&&P.end(),J&&H&&H.end(),Q=!1,Ke(se)}}}function Br(n){let e,t,l,s=n[0].open&&n[1]&&ql(n);return{c(){s&&s.c(),e=be()},l(r){s&&s.l(r),e=be()},m(r,a){s&&s.m(r,a),D(r,e,a),t||(l=q(Nr,"keydown",n[3]),t=!0)},p(r,[a]){r[0].open&&r[1]?s?(s.p(r,a),a&3&&$(s,1)):(s=ql(r),s.c(),$(s,1),s.m(e.parentNode,e)):s&&(ze(),ce(s,1,1,()=>{s=null}),je())},i(r){$(s)},o(r){ce(s)},d(r){r&&d(e),s&&s.d(r),t=!1,l()}}}function Pr(n,e,t){let l,s,r,a,o,c;Te(n,Tt,p=>t(7,c=p));function u(p){p.key==="Escape"&&l.open&&(p.preventDefault(),Tt.handleCancel())}function h(p){p.target===p.currentTarget&&Tt.handleCancel()}return n.$$.update=()=>{n.$$.dirty&128&&t(0,l=c),n.$$.dirty&1&&t(1,s=l.options),n.$$.dirty&2&&t(5,a=s?.variant||"danger"),n.$$.dirty&96&&t(2,o=r[a]),n.$$.dirty&1&&typeof window<"u"&&(l.open?document.body.style.overflow="hidden":document.body.style.overflow="")},t(6,r={danger:{icon:"!",iconBg:"bg-error/20",iconColor:"text-error",buttonClass:"btn-error"},warning:{icon:"!",iconBg:"bg-warning/20",iconColor:"text-warning",buttonClass:"btn-warning"},info:{icon:"?",iconBg:"bg-info/20",iconColor:"text-info",buttonClass:"btn-info"}}),[l,s,o,u,h,a,r,c]}class Vr extends qe{constructor(e){super(),Ge(this,e,Pr,Br,Fe,{})}}function Gl(n){let e,t,l,s=`<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-warning" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
        Session Expiring Soon`,r,a,o,c="Your session will expire due to inactivity.",u,h,p,g,_,m,v,w,C,E,N=`Click "Stay Logged In" to continue your session, or you'll be automatically logged out.`,z,S,M,I="Logout Now",T,A,V="Stay Logged In",j,B,U,P;return{c(){e=k("div"),t=k("div"),l=k("h3"),l.innerHTML=s,r=L(),a=k("div"),o=k("p"),o.textContent=c,u=L(),h=k("div"),p=Z("svg"),g=Z("path"),_=L(),m=k("span"),v=R(n[0]),C=L(),E=k("p"),E.textContent=N,z=L(),S=k("div"),M=k("button"),M.textContent=I,T=L(),A=k("button"),A.textContent=V,j=L(),B=k("div"),this.h()},l(H){e=b(H,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0,"aria-describedby":!0});var G=y(e);t=b(G,"DIV",{class:!0,role:!0});var Q=y(t);l=b(Q,"H3",{id:!0,class:!0,"data-svelte-h":!0}),W(l)!=="svelte-vdj8xk"&&(l.innerHTML=s),r=x(Q),a=b(Q,"DIV",{id:!0,class:!0});var se=y(a);o=b(se,"P",{class:!0,"data-svelte-h":!0}),W(o)!=="svelte-1jwrg12"&&(o.textContent=c),u=x(se),h=b(se,"DIV",{class:!0,role:!0,"aria-live":!0,"aria-atomic":!0});var J=y(h);p=Y(J,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0});var ee=y(p);g=Y(ee,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(g).forEach(d),ee.forEach(d),_=x(J),m=b(J,"SPAN",{class:!0,"aria-label":!0});var he=y(m);v=O(he,n[0]),he.forEach(d),J.forEach(d),C=x(se),E=b(se,"P",{class:!0,"data-svelte-h":!0}),W(E)!=="svelte-11aakk9"&&(E.textContent=N),se.forEach(d),z=x(Q),S=b(Q,"DIV",{class:!0});var ae=y(S);M=b(ae,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(M)!=="svelte-1o34bwc"&&(M.textContent=I),T=x(ae),A=b(ae,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(A)!=="svelte-pos5vh"&&(A.textContent=V),ae.forEach(d),Q.forEach(d),j=x(G),B=b(G,"DIV",{class:!0,"aria-hidden":!0}),y(B).forEach(d),G.forEach(d),this.h()},h(){i(l,"id","session-timeout-title"),i(l,"class","font-bold text-lg flex items-center gap-2"),i(o,"class","text-base-content/80 mb-4"),i(g,"stroke-linecap","round"),i(g,"stroke-linejoin","round"),i(g,"stroke-width","2"),i(g,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),i(p,"xmlns","http://www.w3.org/2000/svg"),i(p,"class","stroke-current shrink-0 h-6 w-6"),i(p,"fill","none"),i(p,"viewBox","0 0 24 24"),i(p,"aria-hidden","true"),i(m,"class","font-mono text-lg"),i(m,"aria-label",w="Time remaining: "+n[0]),i(h,"class","alert alert-warning mb-4"),i(h,"role","alert"),i(h,"aria-live","assertive"),i(h,"aria-atomic","true"),i(E,"class","text-sm text-base-content/60"),i(a,"id","session-timeout-desc"),i(a,"class","py-4"),i(M,"class","btn btn-ghost"),i(M,"aria-label","Log out immediately"),i(A,"class","btn btn-primary"),i(A,"aria-label","Extend session and stay logged in"),A.autofocus=!0,i(S,"class","modal-action"),i(t,"class","modal-box"),i(t,"role","document"),i(B,"class","modal-backdrop bg-black/50"),i(B,"aria-hidden","true"),i(e,"class","modal modal-open"),i(e,"role","alertdialog"),i(e,"aria-modal","true"),i(e,"aria-labelledby","session-timeout-title"),i(e,"aria-describedby","session-timeout-desc")},m(H,G){D(H,e,G),f(e,t),f(t,l),f(t,r),f(t,a),f(a,o),f(a,u),f(a,h),f(h,p),f(p,g),f(h,_),f(h,m),f(m,v),f(a,C),f(a,E),f(t,z),f(t,S),f(S,M),f(S,T),f(S,A),f(e,j),f(e,B),A.focus(),U||(P=[q(M,"click",n[3]),q(A,"click",n[2])],U=!0)},p(H,G){G&1&&ie(v,H[0]),G&1&&w!==(w="Time remaining: "+H[0])&&i(m,"aria-label",w)},d(H){H&&d(e),U=!1,Ke(P)}}}function zr(n){let e,t=n[1]&&Gl(n);return{c(){t&&t.c(),e=be()},l(l){t&&t.l(l),e=be()},m(l,s){t&&t.m(l,s),D(l,e,s)},p(l,[s]){l[1]?t?t.p(l,s):(t=Gl(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:pe,o:pe,d(l){l&&d(e),t&&t.d(l)}}}function jr(n,e,t){let l,s,r;Te(n,qt,c=>t(4,r=c));function a(){qt.extend()}function o(){pt.logout()}return n.$$.update=()=>{n.$$.dirty&16&&t(1,l=r.showWarning),n.$$.dirty&16&&t(0,s=cr(r.remainingMs))},[s,l,a,o,r]}class Hr extends qe{constructor(e){super(),Ge(this,e,jr,zr,Fe,{})}}function Ur(n){let e,t,l;function s(h,p){return h[2]==="skeleton"?Wr:h[2]==="pulse"?Fr:Rr}let r=s(n),a=r(n);function o(h,p){return h[1]?qr:Kr}let c=o(n),u=c(n);return{c(){e=k("div"),a.c(),t=L(),u.c(),this.h()},l(h){e=b(h,"DIV",{class:!0,role:!0,"aria-live":!0});var p=y(e);a.l(p),t=x(p),u.l(p),p.forEach(d),this.h()},h(){i(e,"class","flex flex-col items-center justify-center gap-3"),i(e,"role","status"),i(e,"aria-live","polite"),X(e,"min-h-[200px]",n[0]==="lg"||n[0]==="xl")},m(h,p){D(h,e,p),a.m(e,null),f(e,t),u.m(e,null)},p(h,p){r===(r=s(h))&&a?a.p(h,p):(a.d(1),a=r(h),a&&(a.c(),a.m(e,t))),c===(c=o(h))&&u?u.p(h,p):(u.d(1),u=c(h),u&&(u.c(),u.m(e,null))),p&1&&X(e,"min-h-[200px]",h[0]==="lg"||h[0]==="xl")},i(h){h&&(l||it(()=>{l=Wt(e,at,{duration:200}),l.start()}))},o:pe,d(h){h&&d(e),a.d(),u.d()}}}function Or(n){let e,t,l,s,r,a,o,c,u;function h(w,C){return w[2]==="skeleton"?Zr:w[2]==="pulse"?Yr:Gr}let p=h(n),g=p(n);function _(w,C){return w[1]?Qr:Jr}let m=_(n),v=m(n);return{c(){e=k("div"),t=k("div"),g.c(),l=L(),v.c(),this.h()},l(w){e=b(w,"DIV",{class:!0,role:!0,"aria-live":!0,"aria-label":!0});var C=y(e);t=b(C,"DIV",{class:!0});var E=y(t);g.l(E),l=x(E),v.l(E),E.forEach(d),C.forEach(d),this.h()},h(){i(t,"class","flex flex-col items-center gap-4"),i(e,"class",r="fixed inset-0 flex items-center justify-center z-modal "+(n[4]?"bg-base-100/80 backdrop-blur-sm":"")),i(e,"role","status"),i(e,"aria-live","polite"),i(e,"aria-label",a=n[1]||"Loading"),X(e,"bg-base-100",n[3])},m(w,C){D(w,e,C),f(e,t),g.m(t,null),f(t,l),v.m(t,null),u=!0},p(w,C){p===(p=h(w))&&g?g.p(w,C):(g.d(1),g=p(w),g&&(g.c(),g.m(t,l))),m===(m=_(w))&&v?v.p(w,C):(v.d(1),v=m(w),v&&(v.c(),v.m(t,null))),(!u||C&16&&r!==(r="fixed inset-0 flex items-center justify-center z-modal "+(w[4]?"bg-base-100/80 backdrop-blur-sm":"")))&&i(e,"class",r),(!u||C&2&&a!==(a=w[1]||"Loading"))&&i(e,"aria-label",a),(!u||C&24)&&X(e,"bg-base-100",w[3])},i(w){u||(w&&(s||it(()=>{s=Wt(t,ol,{duration:300,start:.9,delay:50}),s.start()})),w&&it(()=>{u&&(c&&c.end(1),o=Wt(e,at,{duration:200}),o.start())}),u=!0)},o(w){o&&o.invalidate(),w&&(c=$s(e,at,{duration:150})),u=!1},d(w){w&&d(e),g.d(),v.d(),w&&c&&c.end()}}}function Rr(n){let e,t;return{c(){e=k("span"),this.h()},l(l){e=b(l,"SPAN",{class:!0,"aria-hidden":!0}),y(e).forEach(d),this.h()},h(){i(e,"class",t="loading "+n[6][n[2]]+" "+n[7][n[0]]+" text-primary svelte-105xrun"),i(e,"aria-hidden","true")},m(l,s){D(l,e,s)},p(l,s){s&197&&t!==(t="loading "+l[6][l[2]]+" "+l[7][l[0]]+" text-primary svelte-105xrun")&&i(e,"class",t)},d(l){l&&d(e)}}}function Fr(n){let e,t='<div class="w-8 h-8 rounded-full bg-primary/20 animate-ping absolute"></div> <div class="w-8 h-8 rounded-full bg-primary/40 relative"></div>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(l){e=b(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-6w1akv"&&(e.innerHTML=t),this.h()},h(){i(e,"class","relative inline-flex")},m(l,s){D(l,e,s)},p:pe,d(l){l&&d(e)}}}function Wr(n){let e,t,l,s,r,a,o;return{c(){e=k("div"),t=k("div"),s=L(),r=k("div"),a=L(),o=k("div"),this.h()},l(c){e=b(c,"DIV",{class:!0});var u=y(e);t=b(u,"DIV",{class:!0}),y(t).forEach(d),s=x(u),r=b(u,"DIV",{class:!0}),y(r).forEach(d),a=x(u),o=b(u,"DIV",{class:!0}),y(o).forEach(d),u.forEach(d),this.h()},h(){i(t,"class",l="skeleton-shimmer rounded "+n[5][n[0]]+" svelte-105xrun"),i(r,"class","skeleton-shimmer rounded h-3 w-3/4 svelte-105xrun"),i(o,"class","skeleton-shimmer rounded h-3 w-1/2 svelte-105xrun"),i(e,"class","flex flex-col gap-2 w-full")},m(c,u){D(c,e,u),f(e,t),f(e,s),f(e,r),f(e,a),f(e,o)},p(c,u){u&33&&l!==(l="skeleton-shimmer rounded "+c[5][c[0]]+" svelte-105xrun")&&i(t,"class",l)},d(c){c&&d(e)}}}function Kr(n){let e,t="Loading...";return{c(){e=k("span"),e.textContent=t,this.h()},l(l){e=b(l,"SPAN",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1wtojot"&&(e.textContent=t),this.h()},h(){i(e,"class","sr-only")},m(l,s){D(l,e,s)},p:pe,d(l){l&&d(e)}}}function qr(n){let e,t;return{c(){e=k("p"),t=R(n[1]),this.h()},l(l){e=b(l,"P",{class:!0});var s=y(e);t=O(s,n[1]),s.forEach(d),this.h()},h(){i(e,"class","text-sm text-base-content/70")},m(l,s){D(l,e,s),f(e,t)},p(l,s){s&2&&ie(t,l[1])},d(l){l&&d(e)}}}function Gr(n){let e,t;return{c(){e=k("span"),this.h()},l(l){e=b(l,"SPAN",{class:!0,"aria-hidden":!0}),y(e).forEach(d),this.h()},h(){i(e,"class",t="loading "+n[6][n[2]]+" "+n[7][n[0]]+" text-primary svelte-105xrun"),i(e,"aria-hidden","true")},m(l,s){D(l,e,s)},p(l,s){s&197&&t!==(t="loading "+l[6][l[2]]+" "+l[7][l[0]]+" text-primary svelte-105xrun")&&i(e,"class",t)},d(l){l&&d(e)}}}function Yr(n){let e,t='<div class="w-16 h-16 rounded-full bg-primary/20 animate-ping absolute"></div> <div class="w-16 h-16 rounded-full bg-primary/40 relative"></div>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(l){e=b(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1baywa4"&&(e.innerHTML=t),this.h()},h(){i(e,"class","relative")},m(l,s){D(l,e,s)},p:pe,d(l){l&&d(e)}}}function Zr(n){let e,t='<div class="skeleton-shimmer rounded-full w-16 h-16 svelte-105xrun"></div> <div class="skeleton-shimmer rounded h-4 w-32 svelte-105xrun"></div> <div class="skeleton-shimmer rounded h-3 w-24 svelte-105xrun"></div>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(l){e=b(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-126rni1"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex flex-col gap-3 items-center")},m(l,s){D(l,e,s)},p:pe,d(l){l&&d(e)}}}function Jr(n){let e,t="Loading...";return{c(){e=k("span"),e.textContent=t,this.h()},l(l){e=b(l,"SPAN",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1wtojot"&&(e.textContent=t),this.h()},h(){i(e,"class","sr-only")},m(l,s){D(l,e,s)},p:pe,d(l){l&&d(e)}}}function Qr(n){let e,t;return{c(){e=k("p"),t=R(n[1]),this.h()},l(l){e=b(l,"P",{class:!0});var s=y(e);t=O(s,n[1]),s.forEach(d),this.h()},h(){i(e,"class","text-base-content/70 text-sm font-medium animate-pulse")},m(l,s){D(l,e,s),f(e,t)},p(l,s){s&2&&ie(t,l[1])},d(l){l&&d(e)}}}function Xr(n){let e,t,l;const s=[Or,Ur],r=[];function a(o,c){return o[3]||o[4]?0:1}return e=a(n),t=r[e]=s[e](n),{c(){t.c(),l=be()},l(o){t.l(o),l=be()},m(o,c){r[e].m(o,c),D(o,l,c)},p(o,[c]){let u=e;e=a(o),e===u?r[e].p(o,c):(ze(),ce(r[u],1,1,()=>{r[u]=null}),je(),t=r[e],t?t.p(o,c):(t=r[e]=s[e](o),t.c()),$(t,1),t.m(l.parentNode,l))},i(o){$(t)},o(o){ce(t)},d(o){o&&d(l),r[e].d(o)}}}function $r(n,e,t){let l,s,r,{size:a="md"}=e,{text:o=""}=e,{variant:c="spinner"}=e,{fullscreen:u=!1}=e,{overlay:h=!1}=e;return n.$$set=p=>{"size"in p&&t(0,a=p.size),"text"in p&&t(1,o=p.text),"variant"in p&&t(2,c=p.variant),"fullscreen"in p&&t(3,u=p.fullscreen),"overlay"in p&&t(4,h=p.overlay)},t(7,l={xs:"loading-xs",sm:"loading-sm",md:"loading-md",lg:"loading-lg",xl:"w-16 h-16"}),t(6,s={spinner:"loading-spinner",dots:"loading-dots",ring:"loading-ring",skeleton:"",pulse:""}),t(5,r={xs:"h-4 w-20",sm:"h-6 w-32",md:"h-8 w-48",lg:"h-12 w-64",xl:"h-16 w-80"}),[a,o,c,u,h,r,s,l]}class ei extends qe{constructor(e){super(),Ge(this,e,$r,Xr,Fe,{size:0,text:1,variant:2,fullscreen:3,overlay:4})}}let Rt=null,Gt=null,Mt=null,Yt=384;async function ti(){if(Rt)return Rt;try{const n=await Xn(()=>import("../chunks/BqbCnz4Q.js"),__vite__mapDeps([0,1]),import.meta.url),{loadHnswlib:e}=n;return Rt=await e(),Rt}catch(n){throw console.error("Failed to load hnswlib-wasm:",n),new Error("HNSW search not available")}}async function cl(){try{const n=await me.table("embeddings").get("hnsw_index"),e=await me.table("embeddings").get("index_mapping");if(!n?.data||!e?.data)return console.log("No index data in IndexedDB"),!1;const t=await ti();Gt=new t.HierarchicalNSW("cosine",Yt);const l=new Blob([n.data]),s=URL.createObjectURL(l);try{const r=new Uint8Array(e.data);return Mt=li(r),Gt.setEf(50),console.log(`Index loaded with ${Mt.size} vectors`),!0}finally{URL.revokeObjectURL(s)}}catch(n){return console.error("Failed to load HNSW index:",n),!1}}function li(n){const e=new Map;try{const t=new TextDecoder().decode(n),l=JSON.parse(t);if(Array.isArray(l.labels)&&Array.isArray(l.ids)){const s=Math.min(l.labels.length,l.ids.length);for(let r=0;r<s;r++)e.set(l.labels[r],l.ids[r])}}catch{console.warn("Failed to parse mapping, using index as ID")}return e}const si="https://embedding-api-uc.a.run.app",It=new Map;async function ni(n){const e=It.get(n);if(e)return e;try{const t=await fetch(`${si}/embed`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:n})});if(!t.ok)throw new Error(`Embedding API error: ${t.status}`);const l=await t.json();if(!l.embeddings||l.embeddings.length===0)throw new Error("No embedding returned from API");const s=l.embeddings[0];if(It.size>100){const r=It.keys().next().value;r&&It.delete(r)}return It.set(n,s),s}catch(t){return console.error("Embedding API call failed:",t),ri(n)}}function ri(n){const e=new Array(Yt).fill(0);for(let l=0;l<n.length;l++){const s=n.charCodeAt(l),r=s*(l+1)%Yt;e[r]+=s/255}const t=Math.sqrt(e.reduce((l,s)=>l+s*s,0))||1;return e.map(l=>l/t)}async function ii(n,e=10,t=.5){if((!Gt||!Mt)&&!await cl())throw new Error("HNSW index not available");const l=await ni(n),{neighbors:s,distances:r}=Gt.searchKnn(l,e),a=[];for(let o=0;o<s.length;o++){const c=s[o],u=r[o],h=1-u;if(h>=t){const p=Mt.get(c)||String(c);a.push({noteId:p,score:h,distance:u})}}return a.sort((o,c)=>c.score-o.score),a}function Yl(){return Mt?{vectorCount:Mt.size,dimensions:Yt}:null}function Zl(n,e,t){const l=n.slice();return l[37]=e[t],l[39]=t,l}function Jl(n,e,t){const l=n.slice();return l[40]=e[t][0],l[41]=e[t][1],l}function Ql(n,e,t){const l=n.slice();l[37]=e[t],l[39]=t;const s=l[1].indexOf(l[37]);l[44]=s;const r=l[7].get(l[37].authorPubkey);return l[45]=r,l}function Xl(n,e,t){const l=n.slice();return l[47]=e[t],l}function $l(n,e,t){const l=n.slice();return l[50]=e[t],l}function es(n){let e,t,l;function s(a){n[30](a)}let r={title:"Search Messages",size:"lg",$$slots:{default:[wi]},$$scope:{ctx:n}};return n[0]!==void 0&&(r.open=n[0]),e=new Qn({props:r}),At.push(()=>fl(e,"open",s)),{c(){Re(e.$$.fragment)},l(a){Oe(e.$$.fragment,a)},m(a,o){Ue(e,a,o),l=!0},p(a,o){const c={};o[0]&32766|o[1]&4194304&&(c.$$scope={dirty:o,ctx:a}),!t&&o[0]&1&&(t=!0,c.open=a[0],ul(()=>t=!1)),e.$set(c)},i(a){l||($(e.$$.fragment,a),l=!0)},o(a){ce(e.$$.fragment,a),l=!1},d(a){He(e,a)}}}function ts(n){let e,t,l;return t=new ei({props:{size:"sm"}}),{c(){e=k("div"),Re(t.$$.fragment),this.h()},l(s){e=b(s,"DIV",{class:!0});var r=y(e);Oe(t.$$.fragment,r),r.forEach(d),this.h()},h(){i(e,"class","search-loading svelte-xewgme")},m(s,r){D(s,e,r),Ue(t,e,null),l=!0},i(s){l||($(t.$$.fragment,s),l=!0)},o(s){ce(t.$$.fragment,s),l=!1},d(s){s&&d(e),He(t)}}}function ls(n){let e,t,l=n[4].totalResults+"",s,r,a=n[4].totalResults===1?"":"s",o,c,u=n[4].searchTime.toFixed(0)+"",h,p;return{c(){e=k("div"),t=R("Found "),s=R(l),r=R(" result"),o=R(a),c=R(`
          in `),h=R(u),p=R("ms"),this.h()},l(g){e=b(g,"DIV",{class:!0});var _=y(e);t=O(_,"Found "),s=O(_,l),r=O(_," result"),o=O(_,a),c=O(_,`
          in `),h=O(_,u),p=O(_,"ms"),_.forEach(d),this.h()},h(){i(e,"class","search-stats svelte-xewgme")},m(g,_){D(g,e,_),f(e,t),f(e,s),f(e,r),f(e,o),f(e,c),f(e,h),f(e,p)},p(g,_){_[0]&16&&l!==(l=g[4].totalResults+"")&&ie(s,l),_[0]&16&&a!==(a=g[4].totalResults===1?"":"s")&&ie(o,a),_[0]&16&&u!==(u=g[4].searchTime.toFixed(0)+"")&&ie(h,u)},d(g){g&&d(e)}}}function ss(n){let e;function t(r,a){if(!r[10])return oi;if(r[11])return ai}let l=t(n),s=l&&l(n);return{c(){s&&s.c(),e=be()},l(r){s&&s.l(r),e=be()},m(r,a){s&&s.m(r,a),D(r,e,a)},p(r,a){l===(l=t(r))&&s?s.p(r,a):(s&&s.d(1),s=l&&l(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&d(e),s&&s.d(r)}}}function ai(n){let e,t,l=n[11].vectorCount.toLocaleString()+"",s,r,a,o,c,u,h,p,g,_=n[12]&&ns(n);return{c(){e=k("div"),t=k("span"),s=R(l),r=R(" messages indexed"),a=L(),_&&_.c(),o=L(),c=k("button"),u=Z("svg"),h=Z("path"),this.h()},l(m){e=b(m,"DIV",{class:!0});var v=y(e);t=b(v,"SPAN",{});var w=y(t);s=O(w,l),r=O(w," messages indexed"),w.forEach(d),a=x(v),_&&_.l(v),o=x(v),c=b(v,"BUTTON",{class:!0,title:!0});var C=y(c);u=Y(C,"svg",{viewBox:!0,class:!0});var E=y(u);h=Y(E,"path",{fill:!0,d:!0}),y(h).forEach(d),E.forEach(d),C.forEach(d),v.forEach(d),this.h()},h(){i(h,"fill","currentColor"),i(h,"d","M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"),i(u,"viewBox","0 0 24 24"),i(u,"class","refresh-icon svelte-xewgme"),X(u,"spinning",n[13]),i(c,"class","refresh-btn svelte-xewgme"),c.disabled=n[13],i(c,"title","Refresh index"),i(e,"class","search-stats semantic-stats svelte-xewgme")},m(m,v){D(m,e,v),f(e,t),f(t,s),f(t,r),f(e,a),_&&_.m(e,null),f(e,o),f(e,c),f(c,u),f(u,h),p||(g=q(c,"click",n[16]),p=!0)},p(m,v){v[0]&2048&&l!==(l=m[11].vectorCount.toLocaleString()+"")&&ie(s,l),m[12]?_?_.p(m,v):(_=ns(m),_.c(),_.m(e,o)):_&&(_.d(1),_=null),v[0]&8192&&X(u,"spinning",m[13]),v[0]&8192&&(c.disabled=m[13])},d(m){m&&d(e),_&&_.d(),p=!1,g()}}}function oi(n){let e,t,l='<svg viewBox="0 0 24 24" class="info-icon svelte-xewgme"><path fill="currentColor" d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"></path></svg> <div><p class="setup-title svelte-xewgme">Semantic Search Setup Required</p> <p class="setup-desc svelte-xewgme">Download the search index to enable AI-powered search by meaning.</p></div>',s;function r(c,u){return ln()?ui:ci}let o=r()(n);return{c(){e=k("div"),t=k("div"),t.innerHTML=l,s=L(),o.c(),this.h()},l(c){e=b(c,"DIV",{class:!0});var u=y(e);t=b(u,"DIV",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-v78ffq"&&(t.innerHTML=l),s=x(u),o.l(u),u.forEach(d),this.h()},h(){i(t,"class","setup-info svelte-xewgme"),i(e,"class","semantic-setup svelte-xewgme")},m(c,u){D(c,e,u),f(e,t),f(e,s),o.m(e,null)},p(c,u){o.p(c,u)},d(c){c&&d(e),o.d()}}}function ns(n){let e,t,l=n[12].version+"",s,r,a=hs(n[12].lastSynced)+"",o;return{c(){e=k("span"),t=R("v"),s=R(l),r=R(" | "),o=R(a)},l(c){e=b(c,"SPAN",{});var u=y(e);t=O(u,"v"),s=O(u,l),r=O(u," | "),o=O(u,a),u.forEach(d)},m(c,u){D(c,e,u),f(e,t),f(e,s),f(e,r),f(e,o)},p(c,u){u[0]&4096&&l!==(l=c[12].version+"")&&ie(s,l),u[0]&4096&&a!==(a=hs(c[12].lastSynced)+"")&&ie(o,a)},d(c){c&&d(e)}}}function ci(n){let e,t="Connect to WiFi to download.";return{c(){e=k("p"),e.textContent=t,this.h()},l(l){e=b(l,"P",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1vvgh80"&&(e.textContent=t),this.h()},h(){i(e,"class","wifi-notice svelte-xewgme")},m(l,s){D(l,e,s)},p:pe,d(l){l&&d(e)}}}function ui(n){let e,t,l;function s(o,c){return o[13]?di:fi}let r=s(n),a=r(n);return{c(){e=k("button"),a.c(),this.h()},l(o){e=b(o,"BUTTON",{class:!0});var c=y(e);a.l(c),c.forEach(d),this.h()},h(){i(e,"class","sync-btn svelte-xewgme"),e.disabled=n[13]},m(o,c){D(o,e,c),a.m(e,null),t||(l=q(e,"click",n[16]),t=!0)},p(o,c){r!==(r=s(o))&&(a.d(1),a=r(o),a&&(a.c(),a.m(e,null))),c[0]&8192&&(e.disabled=o[13])},d(o){o&&d(e),a.d(),t=!1,l()}}}function fi(n){let e;return{c(){e=R("Download Index")},l(t){e=O(t,"Download Index")},m(t,l){D(t,e,l)},d(t){t&&d(e)}}}function di(n){let e;return{c(){e=R("Downloading...")},l(t){e=O(t,"Downloading...")},m(t,l){D(t,e,l)},d(t){t&&d(e)}}}function rs(n){let e,t,l="Recent Searches",s,r,a=Ae(n[6]),o=[];for(let c=0;c<a.length;c+=1)o[c]=is($l(n,a,c));return{c(){e=k("div"),t=k("h4"),t.textContent=l,s=L(),r=k("div");for(let c=0;c<o.length;c+=1)o[c].c();this.h()},l(c){e=b(c,"DIV",{class:!0});var u=y(e);t=b(u,"H4",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-5klvdl"&&(t.textContent=l),s=x(u),r=b(u,"DIV",{class:!0});var h=y(r);for(let p=0;p<o.length;p+=1)o[p].l(h);h.forEach(d),u.forEach(d),this.h()},h(){i(t,"class","svelte-xewgme"),i(r,"class","suggestion-list svelte-xewgme"),i(e,"class","suggestions svelte-xewgme")},m(c,u){D(c,e,u),f(e,t),f(e,s),f(e,r);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(r,null)},p(c,u){if(u[0]&2097216){a=Ae(c[6]);let h;for(h=0;h<a.length;h+=1){const p=$l(c,a,h);o[h]?o[h].p(p,u):(o[h]=is(p),o[h].c(),o[h].m(r,null))}for(;h<o.length;h+=1)o[h].d(1);o.length=a.length}},d(c){c&&d(e),vt(o,c)}}}function is(n){let e,t,l,s,r=n[50]+"",a,o,c,u;function h(){return n[27](n[50])}return{c(){e=k("button"),t=Z("svg"),l=Z("path"),s=L(),a=R(r),o=L(),this.h()},l(p){e=b(p,"BUTTON",{class:!0});var g=y(e);t=Y(g,"svg",{class:!0,viewBox:!0});var _=y(t);l=Y(_,"path",{d:!0}),y(l).forEach(d),_.forEach(d),s=x(g),a=O(g,r),o=x(g),g.forEach(d),this.h()},h(){i(l,"d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"),i(t,"class","icon svelte-xewgme"),i(t,"viewBox","0 0 24 24"),i(e,"class","suggestion-item svelte-xewgme")},m(p,g){D(p,e,g),f(e,t),f(t,l),f(e,s),f(e,a),f(e,o),c||(u=q(e,"click",h),c=!0)},p(p,g){n=p,g[0]&64&&r!==(r=n[50]+"")&&ie(a,r)},d(p){p&&d(e),c=!1,u()}}}function as(n){let e;function t(r,a){if(r[1].length>0)return mi;if(r[3]&&!r[5])return hi}let l=t(n),s=l&&l(n);return{c(){s&&s.c(),e=be()},l(r){s&&s.l(r),e=be()},m(r,a){s&&s.m(r,a),D(r,e,a)},p(r,a){l===(l=t(r))&&s?s.p(r,a):(s&&s.d(1),s=l&&l(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&d(e),s&&s.d(r)}}}function hi(n){let e,t,l,s,r,a,o,c="Try using different keywords or operators (AND/OR)";return{c(){e=k("div"),t=k("p"),l=R('No messages found matching "'),s=R(n[3]),r=R('"'),a=L(),o=k("p"),o.textContent=c,this.h()},l(u){e=b(u,"DIV",{class:!0});var h=y(e);t=b(h,"P",{class:!0});var p=y(t);l=O(p,'No messages found matching "'),s=O(p,n[3]),r=O(p,'"'),p.forEach(d),a=x(h),o=b(h,"P",{class:!0,"data-svelte-h":!0}),W(o)!=="svelte-1i16feo"&&(o.textContent=c),h.forEach(d),this.h()},h(){i(t,"class","svelte-xewgme"),i(o,"class","help-text svelte-xewgme"),i(e,"class","no-results svelte-xewgme")},m(u,h){D(u,e,h),f(e,t),f(t,l),f(t,s),f(t,r),f(e,a),f(e,o)},p(u,h){h[0]&8&&ie(s,u[3])},d(u){u&&d(e)}}}function mi(n){let e,t=Ae(Object.entries(n[14])),l=[];for(let s=0;s<t.length;s+=1)l[s]=us(Jl(n,t,s));return{c(){e=k("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=b(s,"DIV",{class:!0});var r=y(e);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(d),this.h()},h(){i(e,"class","results svelte-xewgme")},m(s,r){D(s,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(s,r){if(r[0]&1065346){t=Ae(Object.entries(s[14]));let a;for(a=0;a<t.length;a+=1){const o=Jl(s,t,a);l[a]?l[a].p(o,r):(l[a]=us(o),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(s){s&&d(e),vt(l,s)}}}function pi(n){let e,t=(n[45]?.name||"A")[0].toUpperCase()+"",l;return{c(){e=k("div"),l=R(t),this.h()},l(s){e=b(s,"DIV",{class:!0});var r=y(e);l=O(r,t),r.forEach(d),this.h()},h(){i(e,"class","author-avatar-placeholder svelte-xewgme")},m(s,r){D(s,e,r),f(e,l)},p(s,r){r[0]&16512&&t!==(t=(s[45]?.name||"A")[0].toUpperCase()+"")&&ie(l,t)},d(s){s&&d(e)}}}function vi(n){let e,t,l;return{c(){e=k("img"),this.h()},l(s){e=b(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Et(e.src,t=n[45].avatar)||i(e,"src",t),i(e,"alt",l=n[45].name),i(e,"class","author-avatar svelte-xewgme")},m(s,r){D(s,e,r)},p(s,r){r[0]&16512&&!Et(e.src,t=s[45].avatar)&&i(e,"src",t),r[0]&16512&&l!==(l=s[45].name)&&i(e,"alt",l)},d(s){s&&d(e)}}}function _i(n){let e,t=n[37].content.substring(0,150)+"",l,s=n[37].content.length>150?"...":"",r;return{c(){e=k("div"),l=R(t),r=R(s),this.h()},l(a){e=b(a,"DIV",{class:!0});var o=y(e);l=O(o,t),r=O(o,s),o.forEach(d),this.h()},h(){i(e,"class","content-preview svelte-xewgme")},m(a,o){D(a,e,o),f(e,l),f(e,r)},p(a,o){o[0]&16384&&t!==(t=a[37].content.substring(0,150)+"")&&ie(l,t),o[0]&16384&&s!==(s=a[37].content.length>150?"...":"")&&ie(r,s)},d(a){a&&d(e)}}}function gi(n){let e,t=Ae(n[37].highlights),l=[];for(let s=0;s<t.length;s+=1)l[s]=os(Xl(n,t,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=be()},l(s){for(let r=0;r<l.length;r+=1)l[r].l(s);e=be()},m(s,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(s,r);D(s,e,r)},p(s,r){if(r[0]&16384){t=Ae(s[37].highlights);let a;for(a=0;a<t.length;a+=1){const o=Xl(s,t,a);l[a]?l[a].p(o,r):(l[a]=os(o),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(s){s&&d(e),vt(l,s)}}}function os(n){let e,t=n[47]+"",l;return{c(){e=k("div"),l=R(t),this.h()},l(s){e=b(s,"DIV",{class:!0});var r=y(e);l=O(r,t),r.forEach(d),this.h()},h(){i(e,"class","highlight svelte-xewgme")},m(s,r){D(s,e,r),f(e,l)},p(s,r){r[0]&16384&&t!==(t=s[47]+"")&&ie(l,t)},d(s){s&&d(e)}}}function cs(n){let e,t,l,s,r,a=(n[45]?.name||"Anonymous")+"",o,c,u,h=ms(n[37].timestamp)+"",p,g,_,m,v,w,C,E=n[37].score.toFixed(1)+"",N,z,S,M;function I(P,H){return P[45]?.avatar?vi:pi}let T=I(n),A=T(n);function V(P,H){return P[37].highlights.length>0?gi:_i}let j=V(n),B=j(n);function U(){return n[28](n[37])}return{c(){e=k("button"),t=k("div"),l=k("div"),A.c(),s=L(),r=k("span"),o=R(a),c=L(),u=k("span"),p=R(h),g=L(),_=k("div"),B.c(),m=L(),v=k("div"),w=k("span"),C=R("Relevance: "),N=R(E),z=L(),this.h()},l(P){e=b(P,"BUTTON",{class:!0});var H=y(e);t=b(H,"DIV",{class:!0});var G=y(t);l=b(G,"DIV",{class:!0});var Q=y(l);A.l(Q),s=x(Q),r=b(Q,"SPAN",{class:!0});var se=y(r);o=O(se,a),se.forEach(d),Q.forEach(d),c=x(G),u=b(G,"SPAN",{class:!0});var J=y(u);p=O(J,h),J.forEach(d),G.forEach(d),g=x(H),_=b(H,"DIV",{class:!0});var ee=y(_);B.l(ee),ee.forEach(d),m=x(H),v=b(H,"DIV",{class:!0});var he=y(v);w=b(he,"SPAN",{class:!0});var ae=y(w);C=O(ae,"Relevance: "),N=O(ae,E),ae.forEach(d),he.forEach(d),z=x(H),H.forEach(d),this.h()},h(){i(r,"class","author-name svelte-xewgme"),i(l,"class","author-info svelte-xewgme"),i(u,"class","timestamp svelte-xewgme"),i(t,"class","result-header svelte-xewgme"),i(_,"class","result-content svelte-xewgme"),i(w,"class","score svelte-xewgme"),i(v,"class","result-footer svelte-xewgme"),i(e,"class","result-item svelte-xewgme"),X(e,"selected",n[44]===n[8])},m(P,H){D(P,e,H),f(e,t),f(t,l),A.m(l,null),f(l,s),f(l,r),f(r,o),f(t,c),f(t,u),f(u,p),f(e,g),f(e,_),B.m(_,null),f(e,m),f(e,v),f(v,w),f(w,C),f(w,N),f(e,z),S||(M=q(e,"click",U),S=!0)},p(P,H){n=P,T===(T=I(n))&&A?A.p(n,H):(A.d(1),A=T(n),A&&(A.c(),A.m(l,s))),H[0]&16512&&a!==(a=(n[45]?.name||"Anonymous")+"")&&ie(o,a),H[0]&16384&&h!==(h=ms(n[37].timestamp)+"")&&ie(p,h),j===(j=V(n))&&B?B.p(n,H):(B.d(1),B=j(n),B&&(B.c(),B.m(_,null))),H[0]&16384&&E!==(E=n[37].score.toFixed(1)+"")&&ie(N,E),H[0]&16642&&X(e,"selected",n[44]===n[8])},d(P){P&&d(e),A.d(),B.d(),S=!1,M()}}}function us(n){let e,t,l=n[40]+"",s,r,a,o,c=Ae(n[41]),u=[];for(let h=0;h<c.length;h+=1)u[h]=cs(Ql(n,c,h));return{c(){e=k("div"),t=k("h3"),s=R(l),r=L(),a=k("div");for(let h=0;h<u.length;h+=1)u[h].c();o=L(),this.h()},l(h){e=b(h,"DIV",{class:!0});var p=y(e);t=b(p,"H3",{class:!0});var g=y(t);s=O(g,l),g.forEach(d),r=x(p),a=b(p,"DIV",{class:!0});var _=y(a);for(let m=0;m<u.length;m+=1)u[m].l(_);_.forEach(d),o=x(p),p.forEach(d),this.h()},h(){i(t,"class","channel-name svelte-xewgme"),i(a,"class","result-list svelte-xewgme"),i(e,"class","channel-group svelte-xewgme")},m(h,p){D(h,e,p),f(e,t),f(t,s),f(e,r),f(e,a);for(let g=0;g<u.length;g+=1)u[g]&&u[g].m(a,null);f(e,o)},p(h,p){if(p[0]&16384&&l!==(l=h[40]+"")&&ie(s,l),p[0]&1065346){c=Ae(h[41]);let g;for(g=0;g<c.length;g+=1){const _=Ql(h,c,g);u[g]?u[g].p(_,p):(u[g]=cs(_),u[g].c(),u[g].m(a,null))}for(;g<u.length;g+=1)u[g].d(1);u.length=c.length}},d(h){h&&d(e),vt(u,h)}}}function fs(n){let e;function t(r,a){if(r[9].length>0)return ki;if(r[3]&&!r[5]&&r[10])return bi}let l=t(n),s=l&&l(n);return{c(){s&&s.c(),e=be()},l(r){s&&s.l(r),e=be()},m(r,a){s&&s.m(r,a),D(r,e,a)},p(r,a){l===(l=t(r))&&s?s.p(r,a):(s&&s.d(1),s=l&&l(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&d(e),s&&s.d(r)}}}function bi(n){let e,t='<p class="svelte-xewgme">No semantically similar messages found</p> <p class="help-text svelte-xewgme">Try describing what you&#39;re looking for in different words</p>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(l){e=b(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1row6bm"&&(e.innerHTML=t),this.h()},h(){i(e,"class","no-results svelte-xewgme")},m(l,s){D(l,e,s)},p:pe,d(l){l&&d(e)}}}function ki(n){let e,t,l=Ae(n[9]),s=[];for(let r=0;r<l.length;r+=1)s[r]=ds(Zl(n,l,r));return{c(){e=k("div"),t=k("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=b(r,"DIV",{class:!0});var a=y(e);t=b(a,"DIV",{class:!0});var o=y(t);for(let c=0;c<s.length;c+=1)s[c].l(o);o.forEach(d),a.forEach(d),this.h()},h(){i(t,"class","result-list semantic-results svelte-xewgme"),i(e,"class","results svelte-xewgme")},m(r,a){D(r,e,a),f(e,t);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(t,null)},p(r,a){if(a[0]&262912){l=Ae(r[9]);let o;for(o=0;o<l.length;o+=1){const c=Zl(r,l,o);s[o]?s[o].p(c,a):(s[o]=ds(c),s[o].c(),s[o].m(t,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=l.length}},d(r){r&&d(e),vt(s,r)}}}function ds(n){let e,t,l,s,r=n[37].noteId.slice(0,12)+"",a,o,c,u,h=(n[37].score*100).toFixed(0)+"",p,g,_,m,v="Click to view message in channel",w,C,E;function N(){return n[29](n[37])}return{c(){e=k("button"),t=k("div"),l=k("span"),s=R("Message: "),a=R(r),o=R("..."),c=L(),u=k("span"),p=R(h),g=R("% match"),_=L(),m=k("div"),m.textContent=v,w=L(),this.h()},l(z){e=b(z,"BUTTON",{class:!0});var S=y(e);t=b(S,"DIV",{class:!0});var M=y(t);l=b(M,"SPAN",{class:!0});var I=y(l);s=O(I,"Message: "),a=O(I,r),o=O(I,"..."),I.forEach(d),c=x(M),u=b(M,"SPAN",{class:!0});var T=y(u);p=O(T,h),g=O(T,"% match"),T.forEach(d),M.forEach(d),_=x(S),m=b(S,"DIV",{class:!0,"data-svelte-h":!0}),W(m)!=="svelte-1ms6c4w"&&(m.textContent=v),w=x(S),S.forEach(d),this.h()},h(){i(l,"class","note-id svelte-xewgme"),i(u,"class","match-score svelte-xewgme"),i(t,"class","result-header svelte-xewgme"),i(m,"class","semantic-hint svelte-xewgme"),i(e,"class","result-item semantic-result svelte-xewgme"),X(e,"selected",n[39]===n[8])},m(z,S){D(z,e,S),f(e,t),f(t,l),f(l,s),f(l,a),f(l,o),f(t,c),f(t,u),f(u,p),f(u,g),f(e,_),f(e,m),f(e,w),C||(E=q(e,"click",N),C=!0)},p(z,S){n=z,S[0]&512&&r!==(r=n[37].noteId.slice(0,12)+"")&&ie(a,r),S[0]&512&&h!==(h=(n[37].score*100).toFixed(0)+"")&&ie(p,h),S[0]&256&&X(e,"selected",n[39]===n[8])},d(z){z&&d(e),C=!1,E()}}}function wi(n){let e,t,l,s=`<svg viewBox="0 0 24 24" class="tab-icon svelte-xewgme"><path fill="currentColor" d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
          Text Search`,r,a,o=`<svg viewBox="0 0 24 24" class="tab-icon svelte-xewgme"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"></path></svg>
          Semantic Search`,c,u,h,p,g,_,m,v,w,C,E,N,z,S=(n[5]||n[13])&&ts(),M=n[2]==="text"&&n[4]&&ls(n),I=n[2]==="semantic"&&ss(n),T=n[2]==="text"&&n[6].length>0&&!n[3]&&!n[1].length&&rs(n),A=n[2]==="text"&&as(n),V=n[2]==="semantic"&&n[10]&&fs(n);return{c(){e=k("div"),t=k("div"),l=k("button"),l.innerHTML=s,r=L(),a=k("button"),a.innerHTML=o,c=L(),u=k("div"),h=k("input"),g=L(),S&&S.c(),_=L(),M&&M.c(),m=L(),I&&I.c(),v=L(),T&&T.c(),w=L(),A&&A.c(),C=L(),V&&V.c(),this.h()},l(j){e=b(j,"DIV",{class:!0});var B=y(e);t=b(B,"DIV",{class:!0});var U=y(t);l=b(U,"BUTTON",{class:!0,"data-svelte-h":!0}),W(l)!=="svelte-sh3047"&&(l.innerHTML=s),r=x(U),a=b(U,"BUTTON",{class:!0,"data-svelte-h":!0}),W(a)!=="svelte-1unl3eh"&&(a.innerHTML=o),U.forEach(d),c=x(B),u=b(B,"DIV",{class:!0});var P=y(u);h=b(P,"INPUT",{type:!0,placeholder:!0,class:!0}),g=x(P),S&&S.l(P),P.forEach(d),_=x(B),M&&M.l(B),m=x(B),I&&I.l(B),v=x(B),T&&T.l(B),w=x(B),A&&A.l(B),C=x(B),V&&V.l(B),B.forEach(d),this.h()},h(){i(l,"class","tab-btn svelte-xewgme"),X(l,"active",n[2]==="text"),i(a,"class","tab-btn svelte-xewgme"),X(a,"active",n[2]==="semantic"),i(t,"class","search-tabs svelte-xewgme"),i(h,"type","text"),i(h,"placeholder",p=n[2]==="text"?"Search messages (use 'AND' or 'OR' for operators)...":"Search by meaning or concept..."),i(h,"class","search-input svelte-xewgme"),h.autofocus=!0,i(u,"class","search-input-wrapper svelte-xewgme"),i(e,"class","search-container svelte-xewgme")},m(j,B){D(j,e,B),f(e,t),f(t,l),f(t,r),f(t,a),f(e,c),f(e,u),f(u,h),ct(h,n[3]),f(u,g),S&&S.m(u,null),f(e,_),M&&M.m(e,null),f(e,m),I&&I.m(e,null),f(e,v),T&&T.m(e,null),f(e,w),A&&A.m(e,null),f(e,C),V&&V.m(e,null),E=!0,h.focus(),N||(z=[q(l,"click",n[24]),q(a,"click",n[25]),q(h,"input",n[26]),q(h,"input",n[15]),q(h,"keydown",n[19])],N=!0)},p(j,B){(!E||B[0]&4)&&X(l,"active",j[2]==="text"),(!E||B[0]&4)&&X(a,"active",j[2]==="semantic"),(!E||B[0]&4&&p!==(p=j[2]==="text"?"Search messages (use 'AND' or 'OR' for operators)...":"Search by meaning or concept..."))&&i(h,"placeholder",p),B[0]&8&&h.value!==j[3]&&ct(h,j[3]),j[5]||j[13]?S?B[0]&8224&&$(S,1):(S=ts(),S.c(),$(S,1),S.m(u,null)):S&&(ze(),ce(S,1,1,()=>{S=null}),je()),j[2]==="text"&&j[4]?M?M.p(j,B):(M=ls(j),M.c(),M.m(e,m)):M&&(M.d(1),M=null),j[2]==="semantic"?I?I.p(j,B):(I=ss(j),I.c(),I.m(e,v)):I&&(I.d(1),I=null),j[2]==="text"&&j[6].length>0&&!j[3]&&!j[1].length?T?T.p(j,B):(T=rs(j),T.c(),T.m(e,w)):T&&(T.d(1),T=null),j[2]==="text"?A?A.p(j,B):(A=as(j),A.c(),A.m(e,C)):A&&(A.d(1),A=null),j[2]==="semantic"&&j[10]?V?V.p(j,B):(V=fs(j),V.c(),V.m(e,null)):V&&(V.d(1),V=null)},i(j){E||($(S),E=!0)},o(j){ce(S),E=!1},d(j){j&&d(e),S&&S.d(),M&&M.d(),I&&I.d(),T&&T.d(),A&&A.d(),V&&V.d(),N=!1,Ke(z)}}}function yi(n){let e,t,l=n[0]&&es(n);return{c(){l&&l.c(),e=be()},l(s){l&&l.l(s),e=be()},m(s,r){l&&l.m(s,r),D(s,e,r),t=!0},p(s,r){s[0]?l?(l.p(s,r),r[0]&1&&$(l,1)):(l=es(s),l.c(),$(l,1),l.m(e.parentNode,e)):l&&(ze(),ce(l,1,1,()=>{l=null}),je())},i(s){t||($(l),t=!0)},o(s){ce(l),t=!1},d(s){s&&d(e),l&&l.d(s)}}}function hs(n){return new Date(n).toLocaleDateString()}function ms(n){const e=new Date(n*1e3),l=new Date().getTime()-e.getTime(),s=Math.floor(l/(1e3*60*60*24));return s===0?e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):s===1?"Yesterday":s<7?`${s} days ago`:e.toLocaleDateString()}function Ci(n,e,t){let l,{isOpen:s=!1}=e,{onClose:r}=e,a="text",o="",c=[],u=null,h=!1,p=[],g=new Map,_=new Map,m,v=-1,w=[],C=!1,E=null,N=null,z=!1,S=new Map;async function M(F){if(S.has(F))return S.get(F);try{const K=await me.channels.get(F);if(K){const te=K.tags?.find(fe=>fe[0]==="section")?.[1]||"public-lobby";return S.set(F,te),te}}catch(K){console.warn("Failed to get channel section:",K)}return null}async function I(F){const K=[];for(const ue of F)try{const te=await me.messages.get(ue.noteId);if(!te)continue;const fe=await M(te.channelId);if(!fe)continue;Pl.canAccessSection(fe)&&K.push(ue)}catch{console.warn("Failed to check authorization for result:",ue.noteId)}return K}St(async()=>{t(6,p=await vr(5)),(await me.channels.toArray()).forEach(te=>{g.set(te.id,{name:te.name,id:te.id})}),t(23,g),(await me.users.toArray()).forEach(te=>{_.set(te.pubkey,{name:te.displayName||te.name||"Anonymous",avatar:te.avatar||void 0})}),t(7,_);const ue=await An();if(ue&&t(12,N={version:ue.version,lastSynced:ue.lastSynced}),ue?.version)try{t(10,C=await cl()),C&&t(11,E=Yl())}catch(te){console.warn("Failed to load semantic search index:",te)}});async function T(){if(o.trim().length<2){t(1,c=[]),t(4,u=null);return}t(5,h=!0);try{const F=await pr(o,{limit:50});t(1,c=F.results),t(4,u=F.stats),t(8,v=-1)}catch(F){console.error("Search failed:",F),t(1,c=[]),t(4,u=null)}finally{t(5,h=!1)}}function A(){clearTimeout(m),m=setTimeout(()=>{a==="text"?T():V()},300)}async function V(){if(o.trim().length<2){t(9,w=[]);return}if(C){t(5,h=!0);try{const F=await ii(o,30,.3),K=await I(F);t(9,w=K.slice(0,10)),t(8,v=-1)}catch(F){console.error("Semantic search failed:",F),t(9,w=[])}finally{t(5,h=!1)}}}async function j(){if(ln()){t(13,z=!0);try{const F=await xn(!0);F.synced&&(t(12,N={version:F.version,lastSynced:Date.now()}),t(10,C=await cl()),C&&t(11,E=Yl()))}catch(F){console.error("Failed to sync embeddings:",F)}finally{t(13,z=!1)}}}function B(F){t(2,a=F),t(1,c=[]),t(9,w=[]),t(4,u=null),t(8,v=-1),o.trim().length>=2&&(F==="text"?T():V())}async function U(F){try{const K=await me.messages.get(F);if(K){const ue=await M(K.channelId);if(ue&&!Pl.canAccessSection(ue)){console.warn("Access denied to message from unauthorized section");return}al(`${ne}/chat/${K.channelId}#msg-${F}`),r()}}catch(K){console.error("Failed to navigate to message:",K)}}function P(F){F.key==="Escape"?r():F.key==="ArrowDown"?(F.preventDefault(),t(8,v=Math.min(v+1,c.length-1))):F.key==="ArrowUp"?(F.preventDefault(),t(8,v=Math.max(v-1,-1))):F.key==="Enter"&&v>=0&&(F.preventDefault(),H(c[v]))}function H(F){const K=F.channelId;al(`${ne}/chat/${K}#msg-${F.messageId}`),r()}function G(F){t(3,o=F),T()}Zt(()=>{clearTimeout(m)});const Q=()=>B("text"),se=()=>B("semantic");function J(){o=this.value,t(3,o)}const ee=F=>G(F),he=F=>H(F),ae=F=>U(F.noteId);function we(F){s=F,t(0,s)}return n.$$set=F=>{"isOpen"in F&&t(0,s=F.isOpen),"onClose"in F&&t(22,r=F.onClose)},n.$$.update=()=>{n.$$.dirty[0]&8388610&&t(14,l=c.reduce((F,K)=>{const ue=g.get(K.channelId)?.name||"Unknown Channel";return F[ue]||(F[ue]=[]),F[ue].push(K),F},{}))},[s,c,a,o,u,h,p,_,v,w,C,E,N,z,l,A,j,B,U,P,H,G,r,g,Q,se,J,ee,he,ae,we]}class Ei extends qe{constructor(e){super(),Ge(this,e,Ci,yi,Fe,{isOpen:0,onClose:22},null,[-1,-1])}}function ps(n){let e,t,l="Admin";return{c(){e=k("li"),t=k("a"),t.textContent=l,this.h()},l(s){e=b(s,"LI",{});var r=y(e);t=b(r,"A",{href:!0,class:!0,"data-svelte-h":!0}),W(t)!=="svelte-1uoukks"&&(t.textContent=l),r.forEach(d),this.h()},h(){i(t,"href",ne+"/admin"),i(t,"class","min-h-11"),X(t,"active",n[5]===`${ne}/admin`)},m(s,r){D(s,e,r),f(e,t)},p(s,r){r&32&&X(t,"active",s[5]===`${ne}/admin`)},d(s){s&&d(e)}}}function Mi(n){let e,t;return{c(){e=Z("svg"),t=Z("path"),this.h()},l(l){e=Y(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0,"aria-hidden":!0});var s=y(e);t=Y(s,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(t).forEach(d),s.forEach(d),this.h()},h(){i(t,"stroke","currentColor"),i(t,"stroke-linecap","round"),i(t,"stroke-linejoin","round"),i(t,"stroke-width","2"),i(t,"d","M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"class","w-5 h-5"),i(e,"aria-hidden","true")},m(l,s){D(l,e,s),f(e,t)},d(l){l&&d(e)}}}function Ii(n){let e,t;return{c(){e=Z("svg"),t=Z("path"),this.h()},l(l){e=Y(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0,"aria-hidden":!0});var s=y(e);t=Y(s,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(t).forEach(d),s.forEach(d),this.h()},h(){i(t,"stroke","currentColor"),i(t,"stroke-linecap","round"),i(t,"stroke-linejoin","round"),i(t,"stroke-width","2"),i(t,"d","M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"class","w-5 h-5"),i(e,"aria-hidden","true")},m(l,s){D(l,e,s),f(e,t)},d(l){l&&d(e)}}}function vs(n){let e,t,l,s,r,a,o="Menu",c,u,h='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-6 h-6"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',p,g,_,m,v=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-5 h-5"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
						Back to DreamLab`,w,C,E,N,z,S,M,I,T,A,V,j,B,U,P,H,G,Q,se,J,ee,he,ae,we,F,K,ue,te,fe,re=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-5 h-5"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
						Profile`,ve,_e,xe,Ve=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-5 h-5"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
						Logout`,Ce,Me,oe=n[6]&&_s(n);return{c(){e=k("div"),t=k("div"),l=L(),s=k("div"),r=k("div"),a=k("h2"),a.textContent=o,c=L(),u=k("button"),u.innerHTML=h,p=L(),g=k("ul"),_=k("li"),m=k("a"),m.innerHTML=v,w=L(),C=k("div"),E=L(),N=k("li"),z=k("a"),S=Z("svg"),M=Z("path"),I=R(`
						Channels`),A=L(),V=k("li"),j=k("a"),B=Z("svg"),U=Z("path"),P=R(`
						Messages`),G=L(),Q=k("li"),se=k("a"),J=Z("svg"),ee=Z("path"),he=R(`
						Events`),we=L(),oe&&oe.c(),F=L(),K=k("div"),ue=L(),te=k("li"),fe=k("button"),fe.innerHTML=re,ve=L(),_e=k("li"),xe=k("button"),xe.innerHTML=Ve,this.h()},l(de){e=b(de,"DIV",{class:!0});var ye=y(e);t=b(ye,"DIV",{class:!0,role:!0,tabindex:!0,"aria-label":!0}),y(t).forEach(d),l=x(ye),s=b(ye,"DIV",{class:!0});var Le=y(s);r=b(Le,"DIV",{class:!0});var Ne=y(r);a=b(Ne,"H2",{class:!0,"data-svelte-h":!0}),W(a)!=="svelte-l4e1ui"&&(a.textContent=o),c=x(Ne),u=b(Ne,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(u)!=="svelte-1pmn0b8"&&(u.innerHTML=h),Ne.forEach(d),p=x(Le),g=b(Le,"UL",{class:!0});var Ee=y(g);_=b(Ee,"LI",{});var et=y(_);m=b(et,"A",{href:!0,class:!0,"data-svelte-h":!0}),W(m)!=="svelte-1w049fw"&&(m.innerHTML=v),et.forEach(d),w=x(Ee),C=b(Ee,"DIV",{class:!0}),y(C).forEach(d),E=x(Ee),N=b(Ee,"LI",{});var Se=y(N);z=b(Se,"A",{href:!0,class:!0});var De=y(z);S=Y(De,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var Ye=y(S);M=Y(Ye,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(M).forEach(d),Ye.forEach(d),I=O(De,`
						Channels`),De.forEach(d),Se.forEach(d),A=x(Ee),V=b(Ee,"LI",{});var tt=y(V);j=b(tt,"A",{href:!0,class:!0});var Ie=y(j);B=Y(Ie,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var lt=y(B);U=Y(lt,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(U).forEach(d),lt.forEach(d),P=O(Ie,`
						Messages`),Ie.forEach(d),tt.forEach(d),G=x(Ee),Q=b(Ee,"LI",{});var Ze=y(Q);se=b(Ze,"A",{href:!0,class:!0});var _t=y(se);J=Y(_t,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var gt=y(J);ee=Y(gt,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(ee).forEach(d),gt.forEach(d),he=O(_t,`
						Events`),_t.forEach(d),Ze.forEach(d),we=x(Ee),oe&&oe.l(Ee),F=x(Ee),K=b(Ee,"DIV",{class:!0}),y(K).forEach(d),ue=x(Ee),te=b(Ee,"LI",{});var We=y(te);fe=b(We,"BUTTON",{class:!0,"data-svelte-h":!0}),W(fe)!=="svelte-h9urup"&&(fe.innerHTML=re),We.forEach(d),ve=x(Ee),_e=b(Ee,"LI",{});var Je=y(_e);xe=b(Je,"BUTTON",{class:!0,"data-svelte-h":!0}),W(xe)!=="svelte-adz2xc"&&(xe.innerHTML=Ve),Je.forEach(d),Ee.forEach(d),Le.forEach(d),ye.forEach(d),this.h()},h(){i(t,"class","absolute inset-0 bg-black bg-opacity-50 animate-fade-in svelte-1833qa5"),i(t,"role","button"),i(t,"tabindex","0"),i(t,"aria-label","Close menu"),i(a,"class","text-lg font-bold"),i(u,"class","btn btn-ghost btn-square min-h-11 min-w-11"),i(u,"aria-label","Close menu"),i(r,"class","p-4 border-b border-base-300 flex items-center justify-between"),i(m,"href","/"),i(m,"class","min-h-11 text-base text-base-content/60"),i(C,"class","divider my-1"),i(M,"stroke","currentColor"),i(M,"stroke-linecap","round"),i(M,"stroke-linejoin","round"),i(M,"stroke-width","2"),i(M,"d","M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"),i(S,"xmlns","http://www.w3.org/2000/svg"),i(S,"fill","none"),i(S,"viewBox","0 0 24 24"),i(S,"class","w-5 h-5"),i(z,"href",ne+"/chat"),i(z,"class",T="min-h-11 text-base "+(n[5].startsWith(`${ne}/chat`)?"active":"")),i(U,"stroke","currentColor"),i(U,"stroke-linecap","round"),i(U,"stroke-linejoin","round"),i(U,"stroke-width","2"),i(U,"d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"),i(B,"xmlns","http://www.w3.org/2000/svg"),i(B,"fill","none"),i(B,"viewBox","0 0 24 24"),i(B,"class","w-5 h-5"),i(j,"href",ne+"/dm"),i(j,"class",H="min-h-11 text-base "+(n[5].startsWith(`${ne}/dm`)?"active":"")),i(ee,"stroke","currentColor"),i(ee,"stroke-linecap","round"),i(ee,"stroke-linejoin","round"),i(ee,"stroke-width","2"),i(ee,"d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"),i(J,"xmlns","http://www.w3.org/2000/svg"),i(J,"fill","none"),i(J,"viewBox","0 0 24 24"),i(J,"class","w-5 h-5"),i(se,"href",ne+"/admin/calendar"),i(se,"class",ae="min-h-11 text-base "+(n[5].startsWith(`${ne}/admin/calendar`)?"active":"")),i(K,"class","divider my-2"),i(fe,"class","min-h-11 text-base justify-start"),i(xe,"class","min-h-11 text-base text-error justify-start"),i(g,"class","menu p-4 gap-2"),i(s,"class","absolute left-0 top-0 bottom-0 w-64 bg-base-200 shadow-xl animate-slide-in svelte-1833qa5"),i(e,"class","fixed inset-0 z-50 md:hidden")},m(de,ye){D(de,e,ye),f(e,t),f(e,l),f(e,s),f(s,r),f(r,a),f(r,c),f(r,u),f(s,p),f(s,g),f(g,_),f(_,m),f(g,w),f(g,C),f(g,E),f(g,N),f(N,z),f(z,S),f(S,M),f(z,I),f(g,A),f(g,V),f(V,j),f(j,B),f(B,U),f(j,P),f(g,G),f(g,Q),f(Q,se),f(se,J),f(J,ee),f(se,he),f(g,we),oe&&oe.m(g,null),f(g,F),f(g,K),f(g,ue),f(g,te),f(te,fe),f(g,ve),f(g,_e),f(_e,xe),Ce||(Me=[q(t,"click",n[9]),q(t,"keydown",n[17]),q(u,"click",n[9]),q(m,"click",n[10]),q(z,"click",n[10]),q(j,"click",n[10]),q(se,"click",n[10]),q(fe,"click",n[11]),q(xe,"click",n[12])],Ce=!0)},p(de,ye){ye&32&&T!==(T="min-h-11 text-base "+(de[5].startsWith(`${ne}/chat`)?"active":""))&&i(z,"class",T),ye&32&&H!==(H="min-h-11 text-base "+(de[5].startsWith(`${ne}/dm`)?"active":""))&&i(j,"class",H),ye&32&&ae!==(ae="min-h-11 text-base "+(de[5].startsWith(`${ne}/admin/calendar`)?"active":""))&&i(se,"class",ae),de[6]?oe?oe.p(de,ye):(oe=_s(de),oe.c(),oe.m(g,F)):oe&&(oe.d(1),oe=null)},d(de){de&&d(e),oe&&oe.d(),Ce=!1,Ke(Me)}}}function _s(n){let e,t,l,s,r,a,o,c,u;return{c(){e=k("li"),t=k("a"),l=Z("svg"),s=Z("path"),r=Z("path"),a=R(`
							Admin`),this.h()},l(h){e=b(h,"LI",{});var p=y(e);t=b(p,"A",{href:!0,class:!0});var g=y(t);l=Y(g,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var _=y(l);s=Y(_,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(s).forEach(d),r=Y(_,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(r).forEach(d),_.forEach(d),a=O(g,`
							Admin`),g.forEach(d),p.forEach(d),this.h()},h(){i(s,"stroke","currentColor"),i(s,"stroke-linecap","round"),i(s,"stroke-linejoin","round"),i(s,"stroke-width","2"),i(s,"d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"),i(r,"stroke","currentColor"),i(r,"stroke-linecap","round"),i(r,"stroke-linejoin","round"),i(r,"stroke-width","2"),i(r,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),i(l,"xmlns","http://www.w3.org/2000/svg"),i(l,"fill","none"),i(l,"viewBox","0 0 24 24"),i(l,"class","w-5 h-5"),i(t,"href",ne+"/admin"),i(t,"class",o="min-h-11 text-base "+(n[5]===`${ne}/admin`?"active":""))},m(h,p){D(h,e,p),f(e,t),f(t,l),f(l,s),f(l,r),f(t,a),c||(u=q(t,"click",n[10]),c=!0)},p(h,p){p&32&&o!==(o="min-h-11 text-base "+(h[5]===`${ne}/admin`?"active":""))&&i(t,"class",o)},d(h){h&&d(e),c=!1,u()}}}function Ti(n){let e,t,l,s,r,a,o,c=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-4 h-4" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
			DreamLab`,u,h,p=n[7].name.split(" - ")[0]+"",g,_,m,v,w,C,E="Channels",N,z,S,M="Messages",I,T,A,V=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-4 h-4" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
					Events`,j,B,U,P,H='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-5 h-5" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>',G,Q,se,J,ee,he='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-5 h-5" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>',ae,we,F="Logout",K,ue,te,fe,re,ve,_e=n[6]&&ps(n);function xe(oe,de){return oe[0]==="dark"?Ii:Mi}let Ve=xe(n),Ce=Ve(n),Me=n[3]&&vs(n);return te=new Ei({props:{isOpen:n[4],onClose:n[14]}}),{c(){e=k("nav"),t=k("div"),l=k("button"),s=Z("svg"),r=Z("path"),a=L(),o=k("a"),o.innerHTML=c,u=L(),h=k("a"),g=R(p),_=L(),m=k("div"),v=k("ul"),w=k("li"),C=k("a"),C.textContent=E,N=L(),z=k("li"),S=k("a"),S.textContent=M,I=L(),T=k("li"),A=k("a"),A.innerHTML=V,j=L(),_e&&_e.c(),B=L(),U=k("div"),P=k("button"),P.innerHTML=H,G=L(),Q=k("button"),Ce.c(),J=L(),ee=k("button"),ee.innerHTML=he,ae=L(),we=k("button"),we.textContent=F,K=L(),Me&&Me.c(),ue=L(),Re(te.$$.fragment),this.h()},l(oe){e=b(oe,"NAV",{class:!0,role:!0,"aria-label":!0});var de=y(e);t=b(de,"DIV",{class:!0});var ye=y(t);l=b(ye,"BUTTON",{class:!0,"aria-label":!0,"aria-expanded":!0});var Le=y(l);s=Y(Le,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var Ne=y(s);r=Y(Ne,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(r).forEach(d),Ne.forEach(d),Le.forEach(d),a=x(ye),o=b(ye,"A",{href:!0,class:!0,"aria-label":!0,"data-svelte-h":!0}),W(o)!=="svelte-8aan9t"&&(o.innerHTML=c),u=x(ye),h=b(ye,"A",{href:!0,class:!0});var Ee=y(h);g=O(Ee,p),Ee.forEach(d),ye.forEach(d),_=x(de),m=b(de,"DIV",{class:!0});var et=y(m);v=b(et,"UL",{class:!0});var Se=y(v);w=b(Se,"LI",{});var De=y(w);C=b(De,"A",{href:!0,class:!0,"data-svelte-h":!0}),W(C)!=="svelte-17bfivq"&&(C.textContent=E),De.forEach(d),N=x(Se),z=b(Se,"LI",{});var Ye=y(z);S=b(Ye,"A",{href:!0,class:!0,"data-svelte-h":!0}),W(S)!=="svelte-1jnngtg"&&(S.textContent=M),Ye.forEach(d),I=x(Se),T=b(Se,"LI",{});var tt=y(T);A=b(tt,"A",{href:!0,class:!0,"data-svelte-h":!0}),W(A)!=="svelte-11119dx"&&(A.innerHTML=V),tt.forEach(d),j=x(Se),_e&&_e.l(Se),Se.forEach(d),et.forEach(d),B=x(de),U=b(de,"DIV",{class:!0});var Ie=y(U);P=b(Ie,"BUTTON",{class:!0,"aria-label":!0,title:!0,"data-svelte-h":!0}),W(P)!=="svelte-12holnz"&&(P.innerHTML=H),G=x(Ie),Q=b(Ie,"BUTTON",{class:!0,"aria-label":!0});var lt=y(Q);Ce.l(lt),lt.forEach(d),J=x(Ie),ee=b(Ie,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(ee)!=="svelte-1gzalt1"&&(ee.innerHTML=he),ae=x(Ie),we=b(Ie,"BUTTON",{class:!0,"data-svelte-h":!0}),W(we)!=="svelte-1vmo7ww"&&(we.textContent=F),Ie.forEach(d),de.forEach(d),K=x(oe),Me&&Me.l(oe),ue=x(oe),Oe(te.$$.fragment,oe),this.h()},h(){i(r,"stroke","currentColor"),i(r,"stroke-linecap","round"),i(r,"stroke-linejoin","round"),i(r,"stroke-width","2"),i(r,"d","M4 6h16M4 12h16M4 18h16"),i(s,"xmlns","http://www.w3.org/2000/svg"),i(s,"fill","none"),i(s,"viewBox","0 0 24 24"),i(s,"class","w-6 h-6"),i(l,"class","btn btn-ghost btn-square min-h-11 min-w-11 md:hidden"),i(l,"aria-label","Toggle menu"),i(l,"aria-expanded",n[3]),i(o,"href","/"),i(o,"class","btn btn-ghost btn-sm text-xs text-base-content/50 hidden md:inline-flex"),i(o,"aria-label","Back to DreamLab main site"),i(h,"href",ne+"/chat"),i(h,"class","btn btn-ghost text-xl"),i(t,"class","navbar-start"),i(C,"href",ne+"/chat"),i(C,"class","min-h-11"),X(C,"active",n[5].startsWith(`${ne}/chat`)),i(S,"href",ne+"/dm"),i(S,"class","min-h-11"),X(S,"active",n[5].startsWith(`${ne}/dm`)),i(A,"href",ne+"/admin/calendar"),i(A,"class","min-h-11"),X(A,"active",n[5].startsWith(`${ne}/admin/calendar`)),i(v,"class","menu menu-horizontal px-1"),i(m,"class","navbar-center hidden md:flex"),i(P,"class","btn btn-ghost btn-circle min-h-11 min-w-11"),i(P,"aria-label","Search (Ctrl+K)"),i(P,"title","Search (Ctrl+K)"),i(Q,"class","btn btn-ghost btn-circle min-h-11 min-w-11"),i(Q,"aria-label",se=n[0]==="dark"?"Switch to light mode":"Switch to dark mode"),i(ee,"class","btn btn-ghost btn-circle min-h-11 min-w-11 hidden md:flex"),i(ee,"aria-label","Open profile settings"),i(we,"class","btn btn-ghost min-h-11 hidden md:inline-flex"),i(U,"class","navbar-end gap-2"),i(e,"class","navbar bg-base-200/80 backdrop-blur-md border-b border-base-300/50 sticky top-0 z-40"),i(e,"role","navigation"),i(e,"aria-label","Main navigation")},m(oe,de){D(oe,e,de),f(e,t),f(t,l),f(l,s),f(s,r),f(t,a),f(t,o),f(t,u),f(t,h),f(h,g),f(e,_),f(e,m),f(m,v),f(v,w),f(w,C),f(v,N),f(v,z),f(z,S),f(v,I),f(v,T),f(T,A),f(v,j),_e&&_e.m(v,null),f(e,B),f(e,U),f(U,P),f(U,G),f(U,Q),Ce.m(Q,null),f(U,J),f(U,ee),f(U,ae),f(U,we),D(oe,K,de),Me&&Me.m(oe,de),D(oe,ue,de),Ue(te,oe,de),fe=!0,re||(ve=[q(l,"click",n[8]),q(P,"click",n[13]),q(Q,"click",function(){mt(n[1])&&n[1].apply(this,arguments)}),q(ee,"click",function(){mt(n[2])&&n[2].apply(this,arguments)}),q(we,"click",n[12])],re=!0)},p(oe,[de]){n=oe,(!fe||de&8)&&i(l,"aria-expanded",n[3]),(!fe||de&32)&&X(C,"active",n[5].startsWith(`${ne}/chat`)),(!fe||de&32)&&X(S,"active",n[5].startsWith(`${ne}/dm`)),(!fe||de&32)&&X(A,"active",n[5].startsWith(`${ne}/admin/calendar`)),n[6]?_e?_e.p(n,de):(_e=ps(n),_e.c(),_e.m(v,null)):_e&&(_e.d(1),_e=null),Ve!==(Ve=xe(n))&&(Ce.d(1),Ce=Ve(n),Ce&&(Ce.c(),Ce.m(Q,null))),(!fe||de&1&&se!==(se=n[0]==="dark"?"Switch to light mode":"Switch to dark mode"))&&i(Q,"aria-label",se),n[3]?Me?Me.p(n,de):(Me=vs(n),Me.c(),Me.m(ue.parentNode,ue)):Me&&(Me.d(1),Me=null);const ye={};de&16&&(ye.isOpen=n[4]),te.$set(ye)},i(oe){fe||($(te.$$.fragment,oe),fe=!0)},o(oe){ce(te.$$.fragment,oe),fe=!1},d(oe){oe&&(d(e),d(K),d(ue)),_e&&_e.d(),Ce.d(),Me&&Me.d(oe),He(te,oe),re=!1,Ke(ve)}}}function Si(n,e,t){let l,s,r,a;Te(n,Jt,M=>t(15,s=M)),Te(n,Zn,M=>t(16,r=M)),Te(n,dn,M=>t(6,a=M));const o=hl();let{themePreference:c="dark"}=e,{onThemeToggle:u}=e,{onProfileClick:h}=e,p=!1,g=!1;function _(){t(3,p=!p)}function m(){t(3,p=!1)}function v(){m()}function w(){h(),m()}function C(){pt.logout(),m()}function E(){t(4,g=!0)}function N(){t(4,g=!1)}function z(M){(M.metaKey||M.ctrlKey)&&M.key==="k"&&(M.preventDefault(),t(4,g=!g))}St(()=>{window.addEventListener("keydown",z)}),Zt(()=>{typeof window<"u"&&window.removeEventListener("keydown",z)});const S=M=>M.key==="Escape"&&m();return n.$$set=M=>{"themePreference"in M&&t(0,c=M.themePreference),"onThemeToggle"in M&&t(1,u=M.onThemeToggle),"onProfileClick"in M&&t(2,h=M.onProfileClick)},n.$$.update=()=>{n.$$.dirty&65536,n.$$.dirty&32768&&t(5,l=s?.url?.pathname??"")},[c,u,h,p,g,l,a,o,_,m,v,w,C,E,N,s,r,S]}class Ai extends qe{constructor(e){super(),Ge(this,e,Si,Ti,Fe,{themePreference:0,onThemeToggle:1,onProfileClick:2})}}async function xi(n,e,t="message",l){return{success:!1,error:"Image upload not configured. Please set VITE_IMAGE_API_URL environment variable."}}async function Li(n){return new Promise(e=>{const t=new Image;t.onload=()=>{if(t.width<50||t.height<50){e({valid:!1,error:"Image too small. Minimum size is 50x50 pixels"});return}if(Math.max(t.width,t.height)/Math.min(t.width,t.height)>10){e({valid:!1,error:"Image aspect ratio too extreme"});return}e({valid:!0,width:t.width,height:t.height})},t.onerror=()=>{e({valid:!1,error:"Failed to load image"})};const l=new FileReader;l.onload=s=>{t.src=s.target?.result},l.readAsDataURL(n)})}function Di(n){return URL.createObjectURL(n)}function nl(n){URL.revokeObjectURL(n)}function Ni(n){let e,t,l,s,r,a,o,c,u,h;function p(m,v){return m[6]?Vi:Pi}let g=p(n),_=g(n);return{c(){e=k("div"),t=Z("svg"),l=Z("path"),s=L(),r=k("span"),_.c(),a=L(),o=k("span"),c=R("Max "),u=R(n[0]),h=R("MB"),this.h()},l(m){e=b(m,"DIV",{class:!0});var v=y(e);t=Y(v,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var w=y(t);l=Y(w,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(d),w.forEach(d),s=x(v),r=b(v,"SPAN",{class:!0});var C=y(r);_.l(C),C.forEach(d),a=x(v),o=b(v,"SPAN",{class:!0});var E=y(o);c=O(E,"Max "),u=O(E,n[0]),h=O(E,"MB"),E.forEach(d),v.forEach(d),this.h()},h(){i(l,"stroke","currentColor"),i(l,"stroke-linecap","round"),i(l,"stroke-linejoin","round"),i(l,"stroke-width","2"),i(l,"d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"fill","none"),i(t,"viewBox","0 0 24 24"),i(t,"class","icon svelte-z8kc2t"),i(r,"class","placeholder-text svelte-z8kc2t"),i(o,"class","size-hint svelte-z8kc2t"),i(e,"class","placeholder svelte-z8kc2t")},m(m,v){D(m,e,v),f(e,t),f(t,l),f(e,s),f(e,r),_.m(r,null),f(e,a),f(e,o),f(o,c),f(o,u),f(o,h)},p(m,v){g!==(g=p(m))&&(_.d(1),_=g(m),_&&(_.c(),_.m(r,null))),v&1&&ie(u,m[0])},d(m){m&&d(e),_.d()}}}function Bi(n){let e,t,l,s,r=!n[4]&&gs();return{c(){e=k("img"),l=L(),r&&r.c(),s=be(),this.h()},l(a){e=b(a,"IMG",{src:!0,alt:!0,class:!0}),l=x(a),r&&r.l(a),s=be(),this.h()},h(){Et(e.src,t=n[7])||i(e,"src",t),i(e,"alt","Preview"),i(e,"class","preview-image svelte-z8kc2t")},m(a,o){D(a,e,o),D(a,l,o),r&&r.m(a,o),D(a,s,o)},p(a,o){o&128&&!Et(e.src,t=a[7])&&i(e,"src",t),a[4]?r&&(r.d(1),r=null):r||(r=gs(),r.c(),r.m(s.parentNode,s))},d(a){a&&(d(e),d(l),d(s)),r&&r.d(a)}}}function Pi(n){let e;return{c(){e=R("Drop image here or click to upload")},l(t){e=O(t,"Drop image here or click to upload")},m(t,l){D(t,e,l)},d(t){t&&d(e)}}}function Vi(n){let e;return{c(){e=R("Upload avatar")},l(t){e=O(t,"Upload avatar")},m(t,l){D(t,e,l)},d(t){t&&d(e)}}}function gs(n){let e,t='<span class="overlay-text svelte-z8kc2t">Click to change</span>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(l){e=b(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1he2pdm"&&(e.innerHTML=t),this.h()},h(){i(e,"class","overlay svelte-z8kc2t")},m(l,s){D(l,e,s)},d(l){l&&d(e)}}}function bs(n){let e,t='<span class="loading loading-spinner loading-md"></span> <span class="upload-text svelte-z8kc2t">Uploading...</span>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(l){e=b(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1e8rzwh"&&(e.innerHTML=t),this.h()},h(){i(e,"class","upload-overlay svelte-z8kc2t")},m(l,s){D(l,e,s)},d(l){l&&d(e)}}}function ks(n){let e,t,l,s,r,a;return{c(){e=k("div"),t=Z("svg"),l=Z("path"),s=L(),r=k("span"),a=R(n[5]),this.h()},l(o){e=b(o,"DIV",{class:!0});var c=y(e);t=Y(c,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var u=y(t);l=Y(u,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(d),u.forEach(d),s=x(c),r=b(c,"SPAN",{});var h=y(r);a=O(h,n[5]),h.forEach(d),c.forEach(d),this.h()},h(){i(l,"stroke","currentColor"),i(l,"stroke-linecap","round"),i(l,"stroke-linejoin","round"),i(l,"stroke-width","2"),i(l,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"class","error-icon svelte-z8kc2t"),i(t,"fill","none"),i(t,"viewBox","0 0 24 24"),i(e,"class","error-message svelte-z8kc2t")},m(o,c){D(o,e,c),f(e,t),f(t,l),f(e,s),f(e,r),f(r,a)},p(o,c){c&32&&ie(a,o[5])},d(o){o&&d(e)}}}function ws(n){let e,t="Remove image",l,s;return{c(){e=k("button"),e.textContent=t,this.h()},l(r){e=b(r,"BUTTON",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-10722ny"&&(e.textContent=t),this.h()},h(){i(e,"class","btn btn-ghost btn-xs mt-2")},m(r,a){D(r,e,a),l||(s=q(e,"click",gn(n[13])),l=!0)},p:pe,d(r){r&&d(e),l=!1,s()}}}function zi(n){let e,t,l,s,r,a,o,c,u;function h(w,C){return w[7]?Bi:Ni}let p=h(n),g=p(n),_=n[4]&&bs(),m=n[5]&&ks(n),v=n[7]&&!n[4]&&ws(n);return{c(){e=k("div"),t=k("input"),l=L(),s=k("div"),g.c(),r=L(),_&&_.c(),a=L(),m&&m.c(),o=L(),v&&v.c(),this.h()},l(w){e=b(w,"DIV",{class:!0});var C=y(e);t=b(C,"INPUT",{type:!0,accept:!0,class:!0}),l=x(C),s=b(C,"DIV",{class:!0,role:!0,tabindex:!0});var E=y(s);g.l(E),r=x(E),_&&_.l(E),E.forEach(d),a=x(C),m&&m.l(C),o=x(C),v&&v.l(C),C.forEach(d),this.h()},h(){i(t,"type","file"),i(t,"accept",n[1]),i(t,"class","hidden svelte-z8kc2t"),i(s,"class","drop-zone svelte-z8kc2t"),i(s,"role","button"),i(s,"tabindex","0"),X(s,"drag-over",n[3]),X(s,"has-image",!!n[7]),X(s,"uploading",n[4]),i(e,"class","image-upload svelte-z8kc2t"),X(e,"is-avatar",n[6])},m(w,C){D(w,e,C),f(e,t),n[17](t),f(e,l),f(e,s),g.m(s,null),f(s,r),_&&_.m(s,null),f(e,a),m&&m.m(e,null),f(e,o),v&&v.m(e,null),c||(u=[q(t,"change",n[8]),q(s,"drop",n[9]),q(s,"dragover",n[10]),q(s,"dragleave",n[11]),q(s,"click",n[12]),q(s,"keydown",n[18])],c=!0)},p(w,[C]){C&2&&i(t,"accept",w[1]),p===(p=h(w))&&g?g.p(w,C):(g.d(1),g=p(w),g&&(g.c(),g.m(s,r))),w[4]?_||(_=bs(),_.c(),_.m(s,null)):_&&(_.d(1),_=null),C&8&&X(s,"drag-over",w[3]),C&128&&X(s,"has-image",!!w[7]),C&16&&X(s,"uploading",w[4]),w[5]?m?m.p(w,C):(m=ks(w),m.c(),m.m(e,o)):m&&(m.d(1),m=null),w[7]&&!w[4]?v?v.p(w,C):(v=ws(w),v.c(),v.m(e,null)):v&&(v.d(1),v=null),C&64&&X(e,"is-avatar",w[6])},i:pe,o:pe,d(w){w&&d(e),n[17](null),g.d(),_&&_.d(),m&&m.d(),v&&v.d(),c=!1,Ke(u)}}}function ji(n,e,t){let l,s,r;Te(n,pt,A=>t(20,r=A));let{category:a="message"}=e,{currentUrl:o=null}=e,{maxSizeMB:c=5}=e,{accept:u="image/jpeg,image/png,image/webp,image/gif"}=e;const h=_n();let p,g=!1,_=!1,m=null,v=null;async function w(A){if(t(5,v=null),A.size>c*1024*1024){t(5,v=`File too large. Maximum size is ${c}MB`),h("error",v);return}const V=await Li(A);if(!V.valid){t(5,v=V.error||"Invalid image"),h("error",v);return}m&&nl(m),t(16,m=Di(A)),t(4,_=!0);try{const j=r.publicKey||"anonymous",B=await xi(A,j,a);B.success?h("upload",B):(t(5,v=B.error||"Upload failed"),h("error",v),m&&(nl(m),t(16,m=null)))}catch(j){t(5,v=j instanceof Error?j.message:"Upload failed"),h("error",v)}finally{t(4,_=!1)}}function C(A){const V=A.target,j=V.files?.[0];j&&w(j),V.value=""}function E(A){A.preventDefault(),t(3,g=!1);const V=A.dataTransfer?.files[0];V&&V.type.startsWith("image/")&&w(V)}function N(A){A.preventDefault(),t(3,g=!0)}function z(){t(3,g=!1)}function S(){p?.click()}function M(){m&&(nl(m),t(16,m=null)),h("upload",{success:!0,url:""})}function I(A){At[A?"unshift":"push"](()=>{p=A,t(2,p)})}const T=A=>A.key==="Enter"&&S();return n.$$set=A=>{"category"in A&&t(14,a=A.category),"currentUrl"in A&&t(15,o=A.currentUrl),"maxSizeMB"in A&&t(0,c=A.maxSizeMB),"accept"in A&&t(1,u=A.accept)},n.$$.update=()=>{n.$$.dirty&98304&&t(7,l=m||o),n.$$.dirty&16384&&t(6,s=a==="avatar")},[c,u,p,g,_,v,s,l,C,E,N,z,S,M,a,o,m,I,T]}class Hi extends qe{constructor(e){super(),Ge(this,e,ji,zi,Fe,{category:14,currentUrl:15,maxSizeMB:0,accept:1})}}function ys(n){let e,t,l,s="X",r,a,o="Your Profile",c,u,h,p,g,_,m,v=(n[6]||"Anonymous")+"",w,C,E,N=Ct(n[15])+"",z,S,M,I,T='<span class="label-text font-semibold">Nickname</span>',A,V,j,B,U,P,H="Avatar",G,Q,se=n[12]?"Use URL":"Upload Image",J,ee,he,ae,we,F,K,ue='<span class="label-text font-semibold">Birthday</span> <span class="label-text-alt text-base-content/60">Optional</span>',te,fe,re,ve,_e='<span class="label-text-alt text-base-content/60">Visible to community members on the calendar</span>',xe,Ve,Ce,Me,oe,de,ye,Le,Ne,Ee='<span class="label-text font-semibold">Your Public ID</span> <div class="tooltip tooltip-left" data-tip="Your public key is safe to share with anyone. It&#39;s how others find and message you."><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-5 h-5 text-info cursor-help"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div>',et,Se,De,Ye,tt,Ie,lt,Ze,_t='<span class="label-text-alt text-success">Safe to share - this is how others find you</span>',gt,We,Je,_l='<span class="label-text font-semibold">Secret Key</span> <div class="tooltip tooltip-left" data-tip="Your private key controls your identity. NEVER share it with anyone. Anyone with it can impersonate you permanently."><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-5 h-5 text-error cursor-help"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div>',Qt,Xt,ft,st,$t,gl;function bl(le,ke){return le[7]?Oi:Ui}let xt=bl(n),Qe=xt(n);const kl=[Fi,Ri],ot=[];function wl(le,ke){return le[12]?0:1}he=wl(n),ae=ot[he]=kl[he](n);let Be=n[11]&&Cs(n);function yl(le,ke){return le[10]?qi:le[9]?Ki:Wi}let Lt=yl(n),nt=Lt(n);function Cl(le,ke){if(le[16])return Yi;if(le[17])return Gi}let bt=Cl(n),Pe=bt&&bt(n);function El(le,ke){return le[4]?Xi:Qi}let Dt=El(n),rt=Dt(n);function Ml(le,ke){return le[1]?$i:ea}let Nt=Ml(n),Xe=Nt(n);return{c(){e=k("div"),t=k("div"),l=k("button"),l.textContent=s,r=L(),a=k("h3"),a.textContent=o,c=L(),u=k("div"),h=k("div"),p=k("div"),Qe.c(),g=L(),_=k("div"),m=k("div"),w=R(v),C=L(),E=k("div"),z=R(N),S=L(),M=k("div"),I=k("label"),I.innerHTML=T,A=L(),V=k("input"),j=L(),B=k("div"),U=k("label"),P=k("span"),P.textContent=H,G=L(),Q=k("button"),J=R(se),ee=L(),ae.c(),we=L(),F=k("div"),K=k("label"),K.innerHTML=ue,te=L(),fe=k("input"),re=L(),ve=k("label"),ve.innerHTML=_e,xe=L(),Be&&Be.c(),Ve=L(),Ce=k("button"),nt.c(),Me=L(),Pe&&Pe.c(),oe=L(),de=k("div"),ye=L(),Le=k("div"),Ne=k("label"),Ne.innerHTML=Ee,et=L(),Se=k("div"),De=k("input"),tt=L(),Ie=k("button"),rt.c(),lt=L(),Ze=k("label"),Ze.innerHTML=_t,gt=L(),We=k("div"),Je=k("label"),Je.innerHTML=_l,Qt=L(),Xe.c(),Xt=L(),ft=k("div"),this.h()},l(le){e=b(le,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0});var ke=y(e);t=b(ke,"DIV",{class:!0});var ge=y(t);l=b(ge,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(l)!=="svelte-11hc4lv"&&(l.textContent=s),r=x(ge),a=b(ge,"H3",{id:!0,class:!0,"data-svelte-h":!0}),W(a)!=="svelte-4jq17b"&&(a.textContent=o),c=x(ge),u=b(ge,"DIV",{class:!0});var Bt=y(u);h=b(Bt,"DIV",{class:!0});var Il=y(h);p=b(Il,"DIV",{class:!0});var Tl=y(p);Qe.l(Tl),Tl.forEach(d),Il.forEach(d),g=x(Bt),_=b(Bt,"DIV",{class:!0});var Pt=y(_);m=b(Pt,"DIV",{class:!0});var Sl=y(m);w=O(Sl,v),Sl.forEach(d),C=x(Pt),E=b(Pt,"DIV",{class:!0});var Al=y(E);z=O(Al,N),Al.forEach(d),Pt.forEach(d),Bt.forEach(d),S=x(ge),M=b(ge,"DIV",{class:!0});var Vt=y(M);I=b(Vt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),W(I)!=="svelte-192l7n9"&&(I.innerHTML=T),A=x(Vt),V=b(Vt,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0,maxlength:!0}),Vt.forEach(d),j=x(ge),B=b(ge,"DIV",{class:!0});var zt=y(B);U=b(zt,"LABEL",{class:!0});var jt=y(U);P=b(jt,"SPAN",{class:!0,"data-svelte-h":!0}),W(P)!=="svelte-1byrh1j"&&(P.textContent=H),G=x(jt),Q=b(jt,"BUTTON",{class:!0});var xl=y(Q);J=O(xl,se),xl.forEach(d),jt.forEach(d),ee=x(zt),ae.l(zt),zt.forEach(d),we=x(ge),F=b(ge,"DIV",{class:!0});var kt=y(F);K=b(kt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),W(K)!=="svelte-1lno6f0"&&(K.innerHTML=ue),te=x(kt),fe=b(kt,"INPUT",{id:!0,type:!0,class:!0}),re=x(kt),ve=b(kt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),W(ve)!=="svelte-j0hat2"&&(ve.innerHTML=_e),kt.forEach(d),xe=x(ge),Be&&Be.l(ge),Ve=x(ge),Ce=b(ge,"BUTTON",{class:!0});var Ll=y(Ce);nt.l(Ll),Ll.forEach(d),Me=x(ge),Pe&&Pe.l(ge),oe=x(ge),de=b(ge,"DIV",{class:!0}),y(de).forEach(d),ye=x(ge),Le=b(ge,"DIV",{class:!0});var wt=y(Le);Ne=b(wt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),W(Ne)!=="svelte-1tt803h"&&(Ne.innerHTML=Ee),et=x(wt),Se=b(wt,"DIV",{class:!0});var Ht=y(Se);De=b(Ht,"INPUT",{id:!0,type:!0,class:!0}),tt=x(Ht),Ie=b(Ht,"BUTTON",{class:!0,title:!0});var Dl=y(Ie);rt.l(Dl),Dl.forEach(d),Ht.forEach(d),lt=x(wt),Ze=b(wt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),W(Ze)!=="svelte-5rwzav"&&(Ze.innerHTML=_t),wt.forEach(d),gt=x(ge),We=b(ge,"DIV",{class:!0});var Ut=y(We);Je=b(Ut,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),W(Je)!=="svelte-1b4zftr"&&(Je.innerHTML=_l),Qt=x(Ut),Xe.l(Ut),Ut.forEach(d),ge.forEach(d),Xt=x(ke),ft=b(ke,"DIV",{class:!0,"aria-hidden":!0}),y(ft).forEach(d),ke.forEach(d),this.h()},h(){i(l,"class","btn btn-sm btn-circle btn-ghost absolute right-2 top-2"),i(l,"aria-label","Close profile modal"),i(a,"id","profile-modal-title"),i(a,"class","font-bold text-lg mb-4"),i(p,"class","w-16 h-16 rounded-full bg-base-300 flex items-center justify-center overflow-hidden"),i(h,"class","avatar"),i(m,"class","text-sm font-medium mb-1"),i(E,"class","text-xs text-base-content/60 font-mono"),i(_,"class","flex-1"),i(u,"class","flex items-center gap-4 mb-4"),i(I,"class","label py-1"),i(I,"for","profile-nickname-input"),i(V,"id","profile-nickname-input"),i(V,"type","text"),i(V,"placeholder","Enter a display name"),i(V,"class","input input-bordered input-sm"),i(V,"maxlength","50"),i(M,"class","form-control mb-3"),i(P,"class","label-text font-semibold"),i(Q,"class","btn btn-ghost btn-xs"),i(U,"class","label py-1"),i(B,"class","form-control mb-3"),i(K,"class","label py-1"),i(K,"for","profile-birthday-input"),i(fe,"id","profile-birthday-input"),i(fe,"type","date"),i(fe,"class","input input-bordered input-sm"),i(ve,"class","label py-1"),i(ve,"for","profile-birthday-input"),i(F,"class","form-control mb-4"),i(Ce,"class","btn btn-primary btn-sm w-full mb-4"),Ce.disabled=n[10],i(de,"class","divider my-2"),i(Ne,"class","label"),i(Ne,"for","profile-npub-input"),i(De,"id","profile-npub-input"),i(De,"type","text"),De.readOnly=!0,De.value=Ye=Ct(n[15]),i(De,"class","input input-bordered flex-1 font-mono text-sm"),i(Ie,"class","btn btn-square btn-outline"),i(Ie,"title","Copy Public ID"),i(Se,"class","flex gap-2"),i(Ze,"class","label"),i(Ze,"for","profile-npub-input"),i(Le,"class","form-control mb-4"),i(Je,"class","label"),i(Je,"for","profile-nsec-input"),i(We,"class","form-control"),i(t,"class","modal-box max-w-md"),i(ft,"class","modal-backdrop"),i(ft,"aria-hidden","true"),i(e,"class","modal modal-open"),i(e,"role","dialog"),i(e,"aria-modal","true"),i(e,"aria-labelledby","profile-modal-title")},m(le,ke){D(le,e,ke),f(e,t),f(t,l),f(t,r),f(t,a),f(t,c),f(t,u),f(u,h),f(h,p),Qe.m(p,null),f(u,g),f(u,_),f(_,m),f(m,w),f(_,C),f(_,E),f(E,z),f(t,S),f(t,M),f(M,I),f(M,A),f(M,V),ct(V,n[6]),f(t,j),f(t,B),f(B,U),f(U,P),f(U,G),f(U,Q),f(Q,J),f(B,ee),ot[he].m(B,null),f(t,we),f(t,F),f(F,K),f(F,te),f(F,fe),ct(fe,n[8]),f(F,re),f(F,ve),f(t,xe),Be&&Be.m(t,null),f(t,Ve),f(t,Ce),nt.m(Ce,null),f(t,Me),Pe&&Pe.m(t,null),f(t,oe),f(t,de),f(t,ye),f(t,Le),f(Le,Ne),f(Le,et),f(Le,Se),f(Se,De),f(Se,tt),f(Se,Ie),rt.m(Ie,null),f(Le,lt),f(Le,Ze),f(t,gt),f(t,We),f(We,Je),f(We,Qt),Xe.m(We,null),f(e,Xt),f(e,ft),st=!0,$t||(gl=[q(l,"click",n[24]),q(V,"input",n[30]),q(Q,"click",n[31]),q(fe,"input",n[33]),q(Ce,"click",n[26]),q(Ie,"click",n[34]),q(ft,"click",n[24]),q(e,"keydown",n[25])],$t=!0)},p(le,ke){xt===(xt=bl(le))&&Qe?Qe.p(le,ke):(Qe.d(1),Qe=xt(le),Qe&&(Qe.c(),Qe.m(p,null))),(!st||ke[0]&64)&&v!==(v=(le[6]||"Anonymous")+"")&&ie(w,v),(!st||ke[0]&32768)&&N!==(N=Ct(le[15])+"")&&ie(z,N),ke[0]&64&&V.value!==le[6]&&ct(V,le[6]),(!st||ke[0]&4096)&&se!==(se=le[12]?"Use URL":"Upload Image")&&ie(J,se);let ge=he;he=wl(le),he===ge?ot[he].p(le,ke):(ze(),ce(ot[ge],1,1,()=>{ot[ge]=null}),je(),ae=ot[he],ae?ae.p(le,ke):(ae=ot[he]=kl[he](le),ae.c()),$(ae,1),ae.m(B,null)),ke[0]&256&&ct(fe,le[8]),le[11]?Be?Be.p(le,ke):(Be=Cs(le),Be.c(),Be.m(t,Ve)):Be&&(Be.d(1),Be=null),Lt!==(Lt=yl(le))&&(nt.d(1),nt=Lt(le),nt&&(nt.c(),nt.m(Ce,null))),(!st||ke[0]&1024)&&(Ce.disabled=le[10]),bt===(bt=Cl(le))&&Pe?Pe.p(le,ke):(Pe&&Pe.d(1),Pe=bt&&bt(le),Pe&&(Pe.c(),Pe.m(t,oe))),(!st||ke[0]&32768&&Ye!==(Ye=Ct(le[15]))&&De.value!==Ye)&&(De.value=Ye),Dt!==(Dt=El(le))&&(rt.d(1),rt=Dt(le),rt&&(rt.c(),rt.m(Ie,null))),Nt===(Nt=Ml(le))&&Xe?Xe.p(le,ke):(Xe.d(1),Xe=Nt(le),Xe&&(Xe.c(),Xe.m(We,null)))},i(le){st||($(ae),st=!0)},o(le){ce(ae),st=!1},d(le){le&&d(e),Qe.d(),ot[he].d(),Be&&Be.d(),nt.d(),Pe&&Pe.d(),rt.d(),Xe.d(),$t=!1,Ke(gl)}}}function Ui(n){let e,t;return{c(){e=Z("svg"),t=Z("path"),this.h()},l(l){e=Y(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var s=y(e);t=Y(s,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(t).forEach(d),s.forEach(d),this.h()},h(){i(t,"stroke","currentColor"),i(t,"stroke-linecap","round"),i(t,"stroke-linejoin","round"),i(t,"stroke-width","2"),i(t,"d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"class","w-8 h-8 text-base-content/50")},m(l,s){D(l,e,s),f(e,t)},p:pe,d(l){l&&d(e)}}}function Oi(n){let e,t;return{c(){e=k("img"),this.h()},l(l){e=b(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Et(e.src,t=n[7])||i(e,"src",t),i(e,"alt","Avatar"),i(e,"class","w-full h-full object-cover")},m(l,s){D(l,e,s)},p(l,s){s[0]&128&&!Et(e.src,t=l[7])&&i(e,"src",t)},d(l){l&&d(e)}}}function Ri(n){let e,t,l,s='<span class="label-text-alt text-base-content/60">Direct link to an image</span>',r,a;return{c(){e=k("input"),t=L(),l=k("label"),l.innerHTML=s,this.h()},l(o){e=b(o,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),t=x(o),l=b(o,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),W(l)!=="svelte-19snjop"&&(l.innerHTML=s),this.h()},h(){i(e,"id","profile-avatar-input"),i(e,"type","url"),i(e,"placeholder","https://example.com/avatar.jpg"),i(e,"class","input input-bordered input-sm"),i(l,"class","label py-1"),i(l,"for","profile-avatar-input")},m(o,c){D(o,e,c),ct(e,n[7]),D(o,t,c),D(o,l,c),r||(a=q(e,"input",n[32]),r=!0)},p(o,c){c[0]&128&&e.value!==o[7]&&ct(e,o[7])},i:pe,o:pe,d(o){o&&(d(e),d(t),d(l)),r=!1,a()}}}function Fi(n){let e,t,l;return t=new Hi({props:{category:"avatar",currentUrl:n[7]}}),t.$on("upload",n[20]),t.$on("error",n[21]),{c(){e=k("div"),Re(t.$$.fragment),this.h()},l(s){e=b(s,"DIV",{class:!0});var r=y(e);Oe(t.$$.fragment,r),r.forEach(d),this.h()},h(){i(e,"class","flex justify-center")},m(s,r){D(s,e,r),Ue(t,e,null),l=!0},p(s,r){const a={};r[0]&128&&(a.currentUrl=s[7]),t.$set(a)},i(s){l||($(t.$$.fragment,s),l=!0)},o(s){ce(t.$$.fragment,s),l=!1},d(s){s&&d(e),He(t)}}}function Cs(n){let e,t,l,s,r,a;return{c(){e=k("div"),t=Z("svg"),l=Z("path"),s=L(),r=k("span"),a=R(n[11]),this.h()},l(o){e=b(o,"DIV",{class:!0});var c=y(e);t=Y(c,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var u=y(t);l=Y(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(d),u.forEach(d),s=x(c),r=b(c,"SPAN",{class:!0});var h=y(r);a=O(h,n[11]),h.forEach(d),c.forEach(d),this.h()},h(){i(l,"stroke-linecap","round"),i(l,"stroke-linejoin","round"),i(l,"stroke-width","2"),i(l,"d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"class","stroke-current shrink-0 h-5 w-5"),i(t,"fill","none"),i(t,"viewBox","0 0 24 24"),i(r,"class","text-sm"),i(e,"class","alert alert-error mb-3 py-2")},m(o,c){D(o,e,c),f(e,t),f(t,l),f(e,s),f(e,r),f(r,a)},p(o,c){c[0]&2048&&ie(a,o[11])},d(o){o&&d(e)}}}function Wi(n){let e;return{c(){e=R("Save & Publish Profile")},l(t){e=O(t,"Save & Publish Profile")},m(t,l){D(t,e,l)},d(t){t&&d(e)}}}function Ki(n){let e,t,l;return{c(){e=Z("svg"),t=Z("path"),l=R(`
					Profile Published!`),this.h()},l(s){e=Y(s,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var r=y(e);t=Y(r,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(t).forEach(d),r.forEach(d),l=O(s,`
					Profile Published!`),this.h()},h(){i(t,"stroke","currentColor"),i(t,"stroke-linecap","round"),i(t,"stroke-linejoin","round"),i(t,"stroke-width","2"),i(t,"d","M5 13l4 4L19 7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"class","w-4 h-4 text-success")},m(s,r){D(s,e,r),f(e,t),D(s,l,r)},d(s){s&&(d(e),d(l))}}}function qi(n){let e,t;return{c(){e=k("span"),t=R(`
					Publishing to relay...`),this.h()},l(l){e=b(l,"SPAN",{class:!0}),y(e).forEach(d),t=O(l,`
					Publishing to relay...`),this.h()},h(){i(e,"class","loading loading-spinner loading-sm")},m(l,s){D(l,e,s),D(l,t,s)},d(l){l&&(d(e),d(t))}}}function Gi(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-5 h-5"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span>App installed</span>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(l){e=b(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-699wmn"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex items-center gap-2 text-sm text-success mb-4 px-2")},m(l,s){D(l,e,s)},p:pe,d(l){l&&d(e)}}}function Yi(n){let e,t,l,s,r,a,o,c,u,h,p="Get offline access and faster loading",g,_,m,v;function w(N,z){return N[13]?Ji:Zi}let C=w(n),E=C(n);return{c(){e=k("div"),t=Z("svg"),l=Z("path"),s=L(),r=k("div"),a=k("p"),o=R("Install "),c=R(n[18]),u=L(),h=k("p"),h.textContent=p,g=L(),_=k("button"),E.c(),this.h()},l(N){e=b(N,"DIV",{class:!0});var z=y(e);t=Y(z,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var S=y(t);l=Y(S,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(d),S.forEach(d),s=x(z),r=b(z,"DIV",{class:!0});var M=y(r);a=b(M,"P",{class:!0});var I=y(a);o=O(I,"Install "),c=O(I,n[18]),I.forEach(d),u=x(M),h=b(M,"P",{class:!0,"data-svelte-h":!0}),W(h)!=="svelte-o4avhp"&&(h.textContent=p),M.forEach(d),g=x(z),_=b(z,"BUTTON",{class:!0});var T=y(_);E.l(T),T.forEach(d),z.forEach(d),this.h()},h(){i(l,"stroke-linecap","round"),i(l,"stroke-linejoin","round"),i(l,"stroke-width","2"),i(l,"d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"fill","none"),i(t,"viewBox","0 0 24 24"),i(t,"class","stroke-current shrink-0 w-5 h-5"),i(a,"class","font-semibold text-sm"),i(h,"class","text-xs opacity-80"),i(r,"class","flex-1"),i(_,"class","btn btn-sm btn-primary"),_.disabled=n[13],i(e,"class","alert alert-info mb-4")},m(N,z){D(N,e,z),f(e,t),f(t,l),f(e,s),f(e,r),f(r,a),f(a,o),f(a,c),f(r,u),f(r,h),f(e,g),f(e,_),E.m(_,null),m||(v=q(_,"click",n[19]),m=!0)},p(N,z){C!==(C=w(N))&&(E.d(1),E=C(N),E&&(E.c(),E.m(_,null))),z[0]&8192&&(_.disabled=N[13])},d(N){N&&d(e),E.d(),m=!1,v()}}}function Zi(n){let e;return{c(){e=R("Install")},l(t){e=O(t,"Install")},m(t,l){D(t,e,l)},d(t){t&&d(e)}}}function Ji(n){let e;return{c(){e=k("span"),this.h()},l(t){e=b(t,"SPAN",{class:!0}),y(e).forEach(d),this.h()},h(){i(e,"class","loading loading-spinner loading-xs")},m(t,l){D(t,e,l)},d(t){t&&d(e)}}}function Qi(n){let e,t;return{c(){e=Z("svg"),t=Z("path"),this.h()},l(l){e=Y(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var s=y(e);t=Y(s,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(t).forEach(d),s.forEach(d),this.h()},h(){i(t,"stroke","currentColor"),i(t,"stroke-linecap","round"),i(t,"stroke-linejoin","round"),i(t,"stroke-width","2"),i(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"class","w-5 h-5")},m(l,s){D(l,e,s),f(e,t)},d(l){l&&d(e)}}}function Xi(n){let e,t;return{c(){e=Z("svg"),t=Z("path"),this.h()},l(l){e=Y(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var s=y(e);t=Y(s,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(t).forEach(d),s.forEach(d),this.h()},h(){i(t,"stroke","currentColor"),i(t,"stroke-linecap","round"),i(t,"stroke-linejoin","round"),i(t,"stroke-width","2"),i(t,"d","M5 13l4 4L19 7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"class","w-5 h-5 text-success")},m(l,s){D(l,e,s),f(e,t)},d(l){l&&d(e)}}}function $i(n){let e,t,l,s,r,a,o="Your private key is now visible. Never share it!",c,u,h,p,g,_,m,v,w,C,E,N,z,S,M='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-5 h-5"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path></svg>',I,T;function A(B,U){return B[5]?la:ta}let V=A(n),j=V(n);return{c(){e=k("div"),t=Z("svg"),l=Z("path"),s=L(),r=k("div"),a=k("span"),a.textContent=o,c=L(),u=k("div"),h=R("Auto-hiding in "),p=k("span"),g=R(n[3]),_=R("s"),m=L(),v=k("div"),w=k("input"),E=L(),N=k("button"),j.c(),z=L(),S=k("button"),S.innerHTML=M,this.h()},l(B){e=b(B,"DIV",{class:!0});var U=y(e);t=Y(U,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var P=y(t);l=Y(P,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(d),P.forEach(d),s=x(U),r=b(U,"DIV",{class:!0});var H=y(r);a=b(H,"SPAN",{class:!0,"data-svelte-h":!0}),W(a)!=="svelte-6n7w1g"&&(a.textContent=o),c=x(H),u=b(H,"DIV",{class:!0});var G=y(u);h=O(G,"Auto-hiding in "),p=b(G,"SPAN",{class:!0});var Q=y(p);g=O(Q,n[3]),_=O(Q,"s"),Q.forEach(d),G.forEach(d),H.forEach(d),U.forEach(d),m=x(B),v=b(B,"DIV",{class:!0});var se=y(v);w=b(se,"INPUT",{type:!0,class:!0}),E=x(se),N=b(se,"BUTTON",{class:!0,title:!0});var J=y(N);j.l(J),J.forEach(d),z=x(se),S=b(se,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),W(S)!=="svelte-h7hl0y"&&(S.innerHTML=M),se.forEach(d),this.h()},h(){i(l,"stroke-linecap","round"),i(l,"stroke-linejoin","round"),i(l,"stroke-width","2"),i(l,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"class","stroke-current shrink-0 h-5 w-5"),i(t,"fill","none"),i(t,"viewBox","0 0 24 24"),i(a,"class","text-sm font-semibold"),i(p,"class","font-mono font-bold"),i(u,"class","text-xs opacity-80 mt-1"),i(r,"class","flex-1"),i(e,"class","alert alert-warning mb-2"),i(w,"type","text"),w.readOnly=!0,w.value=C=Ct(n[14]),i(w,"class","input input-bordered input-error flex-1 font-mono text-sm"),i(N,"class","btn btn-square btn-outline btn-warning"),i(N,"title","Copy Secret Key"),i(S,"class","btn btn-square btn-outline"),i(S,"title","Hide private key"),i(v,"class","flex gap-2 mb-2")},m(B,U){D(B,e,U),f(e,t),f(t,l),f(e,s),f(e,r),f(r,a),f(r,c),f(r,u),f(u,h),f(u,p),f(p,g),f(p,_),D(B,m,U),D(B,v,U),f(v,w),f(v,E),f(v,N),j.m(N,null),f(v,z),f(v,S),I||(T=[q(N,"click",n[37]),q(S,"click",n[23])],I=!0)},p(B,U){U[0]&8&&ie(g,B[3]),U[0]&16384&&C!==(C=Ct(B[14]))&&w.value!==C&&(w.value=C),V!==(V=A(B))&&(j.d(1),j=V(B),j&&(j.c(),j.m(N,null)))},d(B){B&&(d(e),d(m),d(v)),j.d(),I=!1,Ke(T)}}}function ea(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-5 w-5" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <div class="text-sm"><p class="font-bold">NEVER share your private key!</p> <p>Anyone with it controls your identity permanently.</p></div>',l,s,r,a,o,c,u="I understand the risk and want to reveal my private key",h,p,g,_,m,v;return{c(){e=k("div"),e.innerHTML=t,l=L(),s=k("div"),r=k("label"),a=k("input"),o=L(),c=k("span"),c.textContent=u,h=L(),p=k("button"),g=R("Export Account Key"),this.h()},l(w){e=b(w,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1sprta3"&&(e.innerHTML=t),l=x(w),s=b(w,"DIV",{class:!0});var C=y(s);r=b(C,"LABEL",{class:!0});var E=y(r);a=b(E,"INPUT",{type:!0,class:!0}),o=x(E),c=b(E,"SPAN",{class:!0,"data-svelte-h":!0}),W(c)!=="svelte-144kc2"&&(c.textContent=u),E.forEach(d),C.forEach(d),h=x(w),p=b(w,"BUTTON",{class:!0});var N=y(p);g=O(N,"Export Account Key"),N.forEach(d),this.h()},h(){i(e,"class","alert alert-error mb-3"),i(a,"type","checkbox"),i(a,"class","checkbox checkbox-error"),i(c,"class","label-text text-sm"),i(r,"class","label cursor-pointer justify-start gap-3 py-2"),i(s,"class","form-control mb-3"),i(p,"class","btn btn-outline btn-error btn-sm w-full"),p.disabled=_=!n[2]},m(w,C){D(w,e,C),D(w,l,C),D(w,s,C),f(s,r),f(r,a),a.checked=n[2],f(r,o),f(r,c),D(w,h,C),D(w,p,C),f(p,g),m||(v=[q(a,"change",n[35]),q(p,"click",n[36])],m=!0)},p(w,C){C[0]&4&&(a.checked=w[2]),C[0]&4&&_!==(_=!w[2])&&(p.disabled=_)},d(w){w&&(d(e),d(l),d(s),d(h),d(p)),m=!1,Ke(v)}}}function ta(n){let e,t;return{c(){e=Z("svg"),t=Z("path"),this.h()},l(l){e=Y(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var s=y(e);t=Y(s,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(t).forEach(d),s.forEach(d),this.h()},h(){i(t,"stroke","currentColor"),i(t,"stroke-linecap","round"),i(t,"stroke-linejoin","round"),i(t,"stroke-width","2"),i(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"class","w-5 h-5")},m(l,s){D(l,e,s),f(e,t)},d(l){l&&d(e)}}}function la(n){let e,t;return{c(){e=Z("svg"),t=Z("path"),this.h()},l(l){e=Y(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var s=y(e);t=Y(s,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(t).forEach(d),s.forEach(d),this.h()},h(){i(t,"stroke","currentColor"),i(t,"stroke-linecap","round"),i(t,"stroke-linejoin","round"),i(t,"stroke-width","2"),i(t,"d","M5 13l4 4L19 7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"class","w-5 h-5 text-success")},m(l,s){D(l,e,s),f(e,t)},d(l){l&&d(e)}}}function sa(n){let e,t,l=n[0]&&ys(n);return{c(){l&&l.c(),e=be()},l(s){l&&l.l(s),e=be()},m(s,r){l&&l.m(s,r),D(s,e,r),t=!0},p(s,r){s[0]?l?(l.p(s,r),r[0]&1&&$(l,1)):(l=ys(s),l.c(),$(l,1),l.m(e.parentNode,e)):l&&(ze(),ce(l,1,1,()=>{l=null}),je())},i(s){t||($(l),t=!0)},o(s){ce(l),t=!1},d(s){s&&d(e),l&&l.d(s)}}}const rl=30;function Ct(n){return n.length<=20?n:n.slice(0,12)+"..."+n.slice(-8)}function na(n,e,t){let l,s,r,a,o;Te(n,pt,re=>t(29,r=re)),Te(n,on,re=>t(16,a=re)),Te(n,sn,re=>t(17,o=re));const u=hl().name.split(" - ")[0];let{open:h=!1}=e,p=!1,g=!1,_=null,m=rl,v=!1,w=!1,C="",E="",N="",z=!1,S=!1,M=null,I=null,T=!1,A=!1;async function V(){t(13,A=!0);try{await cn()}finally{t(13,A=!1)}}function j(re){const ve=re.detail;ve.success&&ve.url&&t(7,E=ve.url)}function B(re){t(11,M=re.detail)}let U=!1;function P(){t(3,m=rl),_=setInterval(()=>{t(3,m--,m),m<=0&&G()},1e3)}function H(){_&&(clearInterval(_),_=null),t(3,m=rl)}function G(){t(1,p=!1),t(2,g=!1),H()}function Q(){t(0,h=!1),G(),t(9,z=!1),I&&(I.focus(),I=null)}function se(re){if(re.key==="Escape"&&h&&Q(),re.key==="Tab"&&h){const ve=document.querySelector(".modal.modal-open");if(!ve)return;const _e=ve.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),xe=_e[0],Ve=_e[_e.length-1];re.shiftKey&&document.activeElement===xe?(re.preventDefault(),Ve.focus()):!re.shiftKey&&document.activeElement===Ve&&(re.preventDefault(),xe.focus())}}async function J(){if(!r.publicKey||!r.privateKey){t(11,M="Not authenticated");return}t(10,S=!0),t(11,M=null);try{const re=rn();if(!re)throw new Error("NDK not connected");const ve=new an(re);ve.kind=0,ve.content=JSON.stringify({name:C||void 0,display_name:C||void 0,picture:E||void 0,birthday:N||void 0}),await ve.sign(),await ve.publish(),pt.setProfile(C||null,E||null),r.publicKey&&(el.remove(r.publicKey),el.updateCurrentUserProfile(r.publicKey,C||null,E||null)),t(9,z=!0),setTimeout(()=>t(9,z=!1),3e3)}catch(re){console.error("Failed to publish profile:",re),t(11,M=re instanceof Error?re.message:"Failed to save profile")}finally{t(10,S=!1)}}async function ee(re,ve){await navigator.clipboard.writeText(re),ve==="npub"?(t(4,v=!0),setTimeout(()=>t(4,v=!1),2e3)):(t(5,w=!0),setTimeout(()=>t(5,w=!1),2e3))}function he(){C=this.value,t(6,C),t(0,h),t(28,U),t(29,r)}const ae=()=>t(12,T=!T);function we(){E=this.value,t(7,E),t(0,h),t(28,U),t(29,r)}function F(){N=this.value,t(8,N),t(0,h),t(28,U),t(29,r)}const K=()=>ee(l,"npub");function ue(){g=this.checked,t(2,g)}const te=()=>{t(1,p=!0),P()},fe=()=>ee(s,"nsec");return n.$$set=re=>{"open"in re&&t(0,h=re.open)},n.$$.update=()=>{n.$$.dirty[0]&536870912&&t(15,l=r.publicKey?$n(r.publicKey):""),n.$$.dirty[0]&536870912&&t(14,s=r.privateKey?er(r.privateKey):""),n.$$.dirty[0]&1&&t(28,U=h),n.$$.dirty[0]&805306369&&h&&!U&&(t(6,C=r.nickname||""),t(7,E=r.avatar||""),t(8,N=""),I=document.activeElement,r.publicKey&&el.getProfile(r.publicKey).then(re=>{t(8,N=re.profile?.birthday||"")}))},[h,p,g,m,v,w,C,E,N,z,S,M,T,A,s,l,a,o,u,V,j,B,P,G,Q,se,J,ee,U,r,he,ae,we,F,K,ue,te,fe]}class ra extends qe{constructor(e){super(),Ge(this,e,na,sa,Fe,{open:0},null,[-1,-1])}}function Es(n,e,t){const l=n.slice();l[15]=e[t],l[22]=t;const s=pa(l[15]);l[16]=s;const r=l[7](l[15].id);l[17]=r;const a=l[6](l[15]);l[18]=a;const o=l[15].branding?.displayName||l[15].name;l[19]=o;const c=!l[18];return l[20]=c,l}function Ms(n,e,t){const l=n.slice();l[23]=e[t];const s=l[8](l[23].id);return l[24]=s,l}function Is(n){let e,t="Zones";return{c(){e=k("span"),e.textContent=t,this.h()},l(l){e=b(l,"SPAN",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-f54ky0"&&(e.textContent=t),this.h()},h(){i(e,"class","text-xs font-semibold text-base-content/50 uppercase tracking-wider")},m(l,s){D(l,e,s)},d(l){l&&d(e)}}}function ia(n){let e;return{c(){e=Z("path"),this.h()},l(t){e=Y(t,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(e).forEach(d),this.h()},h(){i(e,"stroke-linecap","round"),i(e,"stroke-linejoin","round"),i(e,"stroke-width","2"),i(e,"d","M11 19l-7-7 7-7m8 14l-7-7 7-7")},m(t,l){D(t,e,l)},d(t){t&&d(e)}}}function aa(n){let e;return{c(){e=Z("path"),this.h()},l(t){e=Y(t,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(e).forEach(d),this.h()},h(){i(e,"stroke-linecap","round"),i(e,"stroke-linejoin","round"),i(e,"stroke-width","2"),i(e,"d","M13 5l7 7-7 7M5 5l7 7-7 7")},m(t,l){D(t,e,l)},d(t){t&&d(e)}}}function oa(n){let e,t=n[15].icon+"",l;return{c(){e=k("span"),l=R(t),this.h()},l(s){e=b(s,"SPAN",{class:!0,style:!0});var r=y(e);l=O(r,t),r.forEach(d),this.h()},h(){i(e,"class","text-lg"),ut(e,"color",n[16])},m(s,r){D(s,e,r),f(e,l)},p(s,r){r&16&&t!==(t=s[15].icon+"")&&ie(l,t),r&16&&ut(e,"color",s[16])},d(s){s&&d(e)}}}function ca(n){let e,t="";return{c(){e=k("span"),e.textContent=t,this.h()},l(l){e=b(l,"SPAN",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-xtpphb"&&(e.textContent=t),this.h()},h(){i(e,"class","text-lg locked-icon svelte-1jmcf64")},m(l,s){D(l,e,s)},p:pe,d(l){l&&d(e)}}}function Ts(n){let e;function t(r,a){return r[20]?fa:ua}let l=t(n),s=l(n);return{c(){s.c(),e=be()},l(r){s.l(r),e=be()},m(r,a){s.m(r,a),D(r,e,a)},p(r,a){l===(l=t(r))&&s?s.p(r,a):(s.d(1),s=l(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&d(e),s.d(r)}}}function ua(n){let e,t=n[19]+"",l,s,r,a=n[15].access?.strictIsolation&&Ss();return{c(){e=k("span"),l=R(t),s=L(),a&&a.c(),r=be(),this.h()},l(o){e=b(o,"SPAN",{class:!0});var c=y(e);l=O(c,t),c.forEach(d),s=x(o),a&&a.l(o),r=be(),this.h()},h(){i(e,"class","flex-1 truncate font-medium")},m(o,c){D(o,e,c),f(e,l),D(o,s,c),a&&a.m(o,c),D(o,r,c)},p(o,c){c&16&&t!==(t=o[19]+"")&&ie(l,t),o[15].access?.strictIsolation?a||(a=Ss(),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(o){o&&(d(e),d(s),d(r)),a&&a.d(o)}}}function fa(n){let e,t=n[5](n[19].length,n[22]*13)+"",l,s,r,a="";return{c(){e=k("span"),l=R(t),s=L(),r=k("span"),r.textContent=a,this.h()},l(o){e=b(o,"SPAN",{class:!0,"aria-hidden":!0});var c=y(e);l=O(c,t),c.forEach(d),s=x(o),r=b(o,"SPAN",{class:!0,"aria-hidden":!0,"data-svelte-h":!0}),W(r)!=="svelte-1nq9rwu"&&(r.textContent=a),this.h()},h(){i(e,"class","flex-1 truncate font-mono text-sm scrambled-text svelte-1jmcf64"),i(e,"aria-hidden","true"),i(r,"class","text-xs opacity-40 font-mono"),i(r,"aria-hidden","true")},m(o,c){D(o,e,c),f(e,l),D(o,s,c),D(o,r,c)},p(o,c){c&16&&t!==(t=o[5](o[19].length,o[22]*13)+"")&&ie(l,t)},d(o){o&&(d(e),d(s),d(r))}}}function Ss(n){let e,t="Private";return{c(){e=k("span"),e.textContent=t,this.h()},l(l){e=b(l,"SPAN",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1gwrh53"&&(e.textContent=t),this.h()},h(){i(e,"class","badge badge-xs badge-ghost")},m(l,s){D(l,e,s)},d(l){l&&d(e)}}}function As(n){let e,t=[],l=new Map,s=Ae(n[15].sections);const r=a=>a[23].id;for(let a=0;a<s.length;a+=1){let o=Ms(n,s,a),c=r(o);l.set(c,t[a]=Ls(c,o))}return{c(){e=k("ul");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=b(a,"UL",{class:!0});var o=y(e);for(let c=0;c<t.length;c+=1)t[c].l(o);o.forEach(d),this.h()},h(){i(e,"class","ml-4 border-l-2 border-base-300")},m(a,o){D(a,e,o);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null)},p(a,o){o&272&&(s=Ae(a[15].sections),t=ml(t,o,r,1,a,s,l,e,hn,Ls,null,Ms))},d(a){a&&d(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function xs(n){let e,t="Approval";return{c(){e=k("span"),e.textContent=t,this.h()},l(l){e=b(l,"SPAN",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-w2xoc8"&&(e.textContent=t),this.h()},h(){i(e,"class","badge badge-xs badge-warning")},m(l,s){D(l,e,s)},d(l){l&&d(e)}}}function Ls(n,e){let t,l,s,r=e[23].icon+"",a,o,c,u=e[23].name+"",h,p,g,_,m,v,w=e[23].access.requiresApproval&&xs();return{key:n,first:null,c(){t=k("li"),l=k("a"),s=k("span"),a=R(r),o=L(),c=k("span"),h=R(u),p=L(),w&&w.c(),v=L(),this.h()},l(C){t=b(C,"LI",{});var E=y(t);l=b(E,"A",{href:!0,class:!0,style:!0});var N=y(l);s=b(N,"SPAN",{class:!0});var z=y(s);a=O(z,r),z.forEach(d),o=x(N),c=b(N,"SPAN",{class:!0});var S=y(c);h=O(S,u),S.forEach(d),p=x(N),w&&w.l(N),N.forEach(d),v=x(E),E.forEach(d),this.h()},h(){i(s,"class","text-base"),i(c,"class","truncate"),i(l,"href",g=ne+"/"+e[15].id+"/"+e[23].id),i(l,"class",_="flex items-center gap-2 py-2 "+(e[24]?"bg-primary/10 text-primary":"")),i(l,"style",m=e[24]?`color: ${e[16]};`:""),this.first=t},m(C,E){D(C,t,E),f(t,l),f(l,s),f(s,a),f(l,o),f(l,c),f(c,h),f(l,p),w&&w.m(l,null),f(t,v)},p(C,E){e=C,E&16&&r!==(r=e[23].icon+"")&&ie(a,r),E&16&&u!==(u=e[23].name+"")&&ie(h,u),e[23].access.requiresApproval?w||(w=xs(),w.c(),w.m(l,null)):w&&(w.d(1),w=null),E&16&&g!==(g=ne+"/"+e[15].id+"/"+e[23].id)&&i(l,"href",g),E&16&&_!==(_="flex items-center gap-2 py-2 "+(e[24]?"bg-primary/10 text-primary":""))&&i(l,"class",_),E&16&&m!==(m=e[24]?`color: ${e[16]};`:"")&&i(l,"style",m)},d(C){C&&d(t),w&&w.d()}}}function Ds(n,e){let t,l,s,r,a,o,c,u,h;function p(w,C){return w[20]?ca:oa}let g=p(e),_=g(e),m=!e[0]&&Ts(e),v=!e[0]&&e[18]&&As(e);return{key:n,first:null,c(){t=k("li"),l=k("details"),s=k("summary"),_.c(),r=L(),m&&m.c(),c=L(),v&&v.c(),h=L(),this.h()},l(w){t=b(w,"LI",{});var C=y(t);l=b(C,"DETAILS",{class:!0});var E=y(l);s=b(E,"SUMMARY",{class:!0,style:!0,"aria-label":!0});var N=y(s);_.l(N),r=x(N),m&&m.l(N),N.forEach(d),c=x(E),v&&v.l(E),E.forEach(d),h=x(C),C.forEach(d),this.h()},h(){i(s,"class","flex items-center gap-2 rounded-lg transition-colors svelte-1jmcf64"),i(s,"style",a=e[17]&&e[18]?`border-left: 3px solid ${e[16]};`:""),i(s,"aria-label",o=e[20]?`Locked zone: ${e[19]}`:void 0),X(s,"bg-base-200",e[17]&&e[18]),X(s,"locked-zone",e[20]),X(s,"cursor-not-allowed",e[20]),l.open=u=e[17]&&e[18],i(l,"class","svelte-1jmcf64"),X(l,"pointer-events-none",e[20]),this.first=t},m(w,C){D(w,t,C),f(t,l),f(l,s),_.m(s,null),f(s,r),m&&m.m(s,null),f(l,c),v&&v.m(l,null),f(t,h)},p(w,C){e=w,g===(g=p(e))&&_?_.p(e,C):(_.d(1),_=g(e),_&&(_.c(),_.m(s,r))),e[0]?m&&(m.d(1),m=null):m?m.p(e,C):(m=Ts(e),m.c(),m.m(s,null)),C&16&&a!==(a=e[17]&&e[18]?`border-left: 3px solid ${e[16]};`:"")&&i(s,"style",a),C&16&&o!==(o=e[20]?`Locked zone: ${e[19]}`:void 0)&&i(s,"aria-label",o),C&208&&X(s,"bg-base-200",e[17]&&e[18]),C&80&&X(s,"locked-zone",e[20]),C&80&&X(s,"cursor-not-allowed",e[20]),!e[0]&&e[18]?v?v.p(e,C):(v=As(e),v.c(),v.m(l,null)):v&&(v.d(1),v=null),C&16&&u!==(u=e[17]&&e[18])&&(l.open=u),C&80&&X(l,"pointer-events-none",e[20])},d(w){w&&d(t),_.d(),m&&m.d(),v&&v.d()}}}function Ns(n){let e,t='<p class="text-sm">No zones available</p> <p class="text-xs mt-1">Contact admin for access</p>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(l){e=b(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-9zfzb5"&&(e.innerHTML=t),this.h()},h(){i(e,"class","px-4 py-8 text-center text-base-content/50")},m(l,s){D(l,e,s)},d(l){l&&d(e)}}}function da(n){let e,t,l,s,r,a,o,c,u,h,p=[],g=new Map,_,m,v,w=!n[0]&&Is();function C(I,T){return I[0]?aa:ia}let E=C(n),N=E(n),z=Ae(n[4]);const S=I=>`${I[15].id}-${I[2]}-${I[3]}`;for(let I=0;I<z.length;I+=1){let T=Es(n,z,I),A=S(T);g.set(A,p[I]=Ds(A,T))}let M=!n[0]&&n[4].length===0&&Ns();return{c(){e=k("nav"),t=k("div"),w&&w.c(),l=L(),s=k("button"),r=Z("svg"),N.c(),c=L(),u=L(),h=k("ul");for(let I=0;I<p.length;I+=1)p[I].c();_=L(),M&&M.c(),this.h()},l(I){e=b(I,"NAV",{class:!0});var T=y(e);t=b(T,"DIV",{class:!0});var A=y(t);w&&w.l(A),l=x(A),s=b(A,"BUTTON",{class:!0,"aria-label":!0});var V=y(s);r=Y(V,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var j=y(r);N.l(j),j.forEach(d),V.forEach(d),A.forEach(d),c=x(T),u=x(T),h=b(T,"UL",{class:!0});var B=y(h);for(let U=0;U<p.length;U+=1)p[U].l(B);B.forEach(d),_=x(T),M&&M.l(T),T.forEach(d),this.h()},h(){i(r,"xmlns","http://www.w3.org/2000/svg"),i(r,"class","h-4 w-4"),i(r,"fill","none"),i(r,"viewBox","0 0 24 24"),i(r,"stroke","currentColor"),i(s,"class",a="btn btn-ghost btn-sm btn-square "+(n[0]?"mx-auto":"")),i(s,"aria-label",o=n[0]?"Expand zones":"Collapse zones"),i(t,"class","zone-nav-header flex items-center justify-between p-3 border-b border-base-300 dark:border-base-content/10"),i(h,"class","menu menu-sm gap-1"),i(e,"class","zone-nav svelte-1jmcf64"),X(e,"collapsed",n[0])},m(I,T){D(I,e,T),f(e,t),w&&w.m(t,null),f(t,l),f(t,s),f(s,r),N.m(r,null),f(e,c),f(e,u),f(e,h);for(let A=0;A<p.length;A+=1)p[A]&&p[A].m(h,null);f(e,_),M&&M.m(e,null),m||(v=q(s,"click",function(){mt(n[1])&&n[1].apply(this,arguments)}),m=!0)},p(I,[T]){n=I,n[0]?w&&(w.d(1),w=null):w||(w=Is(),w.c(),w.m(t,l)),E!==(E=C(n))&&(N.d(1),N=E(n),N&&(N.c(),N.m(r,null))),T&1&&a!==(a="btn btn-ghost btn-sm btn-square "+(n[0]?"mx-auto":""))&&i(s,"class",a),T&1&&o!==(o=n[0]?"Expand zones":"Collapse zones")&&i(s,"aria-label",o),T&509&&(z=Ae(n[4]),p=ml(p,T,S,1,n,z,g,h,hn,Ds,null,Es)),!n[0]&&n[4].length===0?M||(M=Ns(),M.c(),M.m(e,null)):M&&(M.d(1),M=null),T&1&&X(e,"collapsed",n[0])},i:pe,o:pe,d(I){I&&d(e),w&&w.d(),N.d();for(let T=0;T<p.length;T+=1)p[T].d();M&&M.d(),m=!1,v()}}}const ha="",ma="";function pa(n){return n.branding?.primaryColor||n.ui?.color||"#6366f1"}function va(n,e,t){let l,s,r,a,o;Te(n,mn,E=>t(12,o=E));let{currentCategoryId:c=null}=e,{currentSectionId:u=null}=e,{collapsed:h=!1}=e,{onToggle:p=void 0}=e,g=0,_;function m(E,N=0){const z=ha+ma;let S="";for(let M=0;M<E;M++){const I=(g+N+M*7)%z.length;S+=z[I]}return S}function v(E){if(r)return!0;if(!a)return!1;const N=E.access?.visibleToCohorts||[],z=E.access?.hiddenFromCohorts||[];if(N.length===0&&z.length===0)return!0;const S=s;return z.some(M=>S.includes(M))?!1:N.length===0?!0:N.some(M=>S.includes(M)||M==="cross-access")}function w(E){return c===E}function C(E){return u===E}return St(()=>{_=setInterval(()=>{g=(g+1)%100},80)}),Zt(()=>{_&&clearInterval(_)}),n.$$set=E=>{"currentCategoryId"in E&&t(9,c=E.currentCategoryId),"currentSectionId"in E&&t(10,u=E.currentSectionId),"collapsed"in E&&t(0,h=E.collapsed),"onToggle"in E&&t(1,p=E.onToggle)},n.$$.update=()=>{n.$$.dirty&4096&&t(11,s=o?.cohorts??[]),n.$$.dirty&4096&&t(2,r=o?.globalRole==="admin"),n.$$.dirty&2052&&t(3,a=r||s.length>0)},t(4,l=un()),[h,p,r,a,l,m,v,w,C,c,u,s,o]}class _a extends qe{constructor(e){super(),Ge(this,e,va,da,Fe,{currentCategoryId:9,currentSectionId:10,collapsed:0,onToggle:1})}}function Bs(n){let e,t,l,s,r,a,o="Admin",c;return{c(){e=k("a"),t=Z("svg"),l=Z("path"),s=Z("path"),r=L(),a=k("span"),a.textContent=o,this.h()},l(u){e=b(u,"A",{href:!0,class:!0,"aria-label":!0,"aria-current":!0});var h=y(e);t=Y(h,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var p=y(t);l=Y(p,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(d),s=Y(p,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(s).forEach(d),p.forEach(d),r=x(h),a=b(h,"SPAN",{class:!0,"data-svelte-h":!0}),W(a)!=="svelte-q7z5td"&&(a.textContent=o),h.forEach(d),this.h()},h(){i(l,"stroke-linecap","round"),i(l,"stroke-linejoin","round"),i(l,"stroke-width","2"),i(l,"d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"),i(s,"stroke-linecap","round"),i(s,"stroke-linejoin","round"),i(s,"stroke-width","2"),i(s,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"class","h-5 w-5"),i(t,"fill","none"),i(t,"viewBox","0 0 24 24"),i(t,"stroke","currentColor"),i(a,"class","btm-nav-label text-xs svelte-n36fz9"),i(e,"href",ne+"/admin"),i(e,"class","text-base-content/70 hover:text-primary transition-colors svelte-n36fz9"),i(e,"aria-label","Go to admin"),i(e,"aria-current",c=n[2]?"page":void 0),X(e,"active",n[2])},m(u,h){D(u,e,h),f(e,t),f(t,l),f(t,s),f(e,r),f(e,a)},p(u,h){h&4&&c!==(c=u[2]?"page":void 0)&&i(e,"aria-current",c),h&4&&X(e,"active",u[2])},d(u){u&&d(e)}}}function ga(n){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"></path></svg> <span class="btm-nav-label text-xs svelte-n36fz9">Zones</span>',s,r,a,o,c,u,h="Chat",p,g,_,m,v,w,C,E="Messages",N,z,S,M,I='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="btm-nav-label text-xs svelte-n36fz9">Profile</span>',T,A,V=n[5]&&Bs(n);return{c(){e=k("nav"),t=k("button"),t.innerHTML=l,s=L(),r=k("a"),a=Z("svg"),o=Z("path"),c=L(),u=k("span"),u.textContent=h,g=L(),_=k("a"),m=Z("svg"),v=Z("path"),w=L(),C=k("span"),C.textContent=E,z=L(),V&&V.c(),S=L(),M=k("button"),M.innerHTML=I,this.h()},l(j){e=b(j,"NAV",{class:!0,role:!0,"aria-label":!0});var B=y(e);t=b(B,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(t)!=="svelte-hm2x7o"&&(t.innerHTML=l),s=x(B),r=b(B,"A",{href:!0,class:!0,"aria-label":!0,"aria-current":!0});var U=y(r);a=Y(U,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var P=y(a);o=Y(P,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(o).forEach(d),P.forEach(d),c=x(U),u=b(U,"SPAN",{class:!0,"data-svelte-h":!0}),W(u)!=="svelte-l9jizu"&&(u.textContent=h),U.forEach(d),g=x(B),_=b(B,"A",{href:!0,class:!0,"aria-label":!0,"aria-current":!0});var H=y(_);m=Y(H,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var G=y(m);v=Y(G,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(v).forEach(d),G.forEach(d),w=x(H),C=b(H,"SPAN",{class:!0,"data-svelte-h":!0}),W(C)!=="svelte-17o0txo"&&(C.textContent=E),H.forEach(d),z=x(B),V&&V.l(B),S=x(B),M=b(B,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(M)!=="svelte-149yiy8"&&(M.innerHTML=I),B.forEach(d),this.h()},h(){i(t,"class","text-base-content/70 hover:text-primary transition-colors svelte-n36fz9"),i(t,"aria-label","Open zones menu"),X(t,"active",!1),i(o,"stroke-linecap","round"),i(o,"stroke-linejoin","round"),i(o,"stroke-width","2"),i(o,"d","M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"),i(a,"xmlns","http://www.w3.org/2000/svg"),i(a,"class","h-5 w-5"),i(a,"fill","none"),i(a,"viewBox","0 0 24 24"),i(a,"stroke","currentColor"),i(u,"class","btm-nav-label text-xs svelte-n36fz9"),i(r,"href",ne+"/chat"),i(r,"class","text-base-content/70 hover:text-primary transition-colors svelte-n36fz9"),i(r,"aria-label","Go to channels"),i(r,"aria-current",p=n[4]?"page":void 0),X(r,"active",n[4]),i(v,"stroke-linecap","round"),i(v,"stroke-linejoin","round"),i(v,"stroke-width","2"),i(v,"d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"),i(m,"xmlns","http://www.w3.org/2000/svg"),i(m,"class","h-5 w-5"),i(m,"fill","none"),i(m,"viewBox","0 0 24 24"),i(m,"stroke","currentColor"),i(C,"class","btm-nav-label text-xs svelte-n36fz9"),i(_,"href",ne+"/dm"),i(_,"class","text-base-content/70 hover:text-primary transition-colors svelte-n36fz9"),i(_,"aria-label","Go to direct messages"),i(_,"aria-current",N=n[3]?"page":void 0),X(_,"active",n[3]),i(M,"class","text-base-content/70 hover:text-primary transition-colors svelte-n36fz9"),i(M,"aria-label","Open profile"),i(e,"class","btm-nav btm-nav-md bg-base-200 border-t border-base-300 md:hidden z-40 svelte-n36fz9"),i(e,"role","navigation"),i(e,"aria-label","Mobile navigation")},m(j,B){D(j,e,B),f(e,t),f(e,s),f(e,r),f(r,a),f(a,o),f(r,c),f(r,u),f(e,g),f(e,_),f(_,m),f(m,v),f(_,w),f(_,C),f(e,z),V&&V.m(e,null),f(e,S),f(e,M),T||(A=[q(t,"click",function(){mt(n[0])&&n[0].apply(this,arguments)}),q(M,"click",function(){mt(n[1])&&n[1].apply(this,arguments)})],T=!0)},p(j,[B]){n=j,B&16&&p!==(p=n[4]?"page":void 0)&&i(r,"aria-current",p),B&16&&X(r,"active",n[4]),B&8&&N!==(N=n[3]?"page":void 0)&&i(_,"aria-current",N),B&8&&X(_,"active",n[3]),n[5]?V?V.p(n,B):(V=Bs(n),V.c(),V.m(e,S)):V&&(V.d(1),V=null)},i:pe,o:pe,d(j){j&&d(e),V&&V.d(),T=!1,Ke(A)}}}function ba(n,e,t){let l,s,r,a,o,c;Te(n,Jt,p=>t(7,o=p)),Te(n,dn,p=>t(5,c=p));let{onZonesClick:u}=e,{onProfileClick:h}=e;return n.$$set=p=>{"onZonesClick"in p&&t(0,u=p.onZonesClick),"onProfileClick"in p&&t(1,h=p.onProfileClick)},n.$$.update=()=>{n.$$.dirty&128&&t(6,l=o?.url?.pathname??""),n.$$.dirty&64&&t(4,s=l.startsWith(`${ne}/chat`)||l&&l.match(new RegExp(`^${ne}/[^/]+/[^/]+$`))),n.$$.dirty&64&&t(3,r=l.startsWith(`${ne}/dm`)),n.$$.dirty&64&&t(2,a=l===`${ne}/admin`)},[u,h,a,r,s,c,l,o]}class ka extends qe{constructor(e){super(),Ge(this,e,ba,ga,Fe,{onZonesClick:0,onProfileClick:1})}}function Ps(n,e,t){const l=n.slice();l[20]=e[t];const s=Ea(l[20]);l[21]=s;const r=l[6](l[20]);l[22]=r;const a=l[20].branding?.displayName||l[20].name;l[23]=a;const o=l[4]===l[20].id;return l[24]=o,l}function Vs(n,e,t){const l=n.slice();l[27]=e[t];const s=l[3]===l[27].id&&l[4]===l[20].id;return l[28]=s,l}function zs(n){let e,t,l,s,r,a='<div class="w-12 h-1.5 bg-base-content/20 rounded-full"></div>',o,c,u,h="Zones",p,g,_='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',m,v,w,C,E,N,z,S=Ae(n[5]),M=[];for(let T=0;T<S.length;T+=1)M[T]=Os(Ps(n,S,T));let I=n[5].length===0&&Rs();return{c(){e=k("div"),l=L(),s=k("div"),r=k("div"),r.innerHTML=a,o=L(),c=k("div"),u=k("h2"),u.textContent=h,p=L(),g=k("button"),g.innerHTML=_,m=L(),v=k("div");for(let T=0;T<M.length;T+=1)M[T].c();w=L(),I&&I.c(),this.h()},l(T){e=b(T,"DIV",{class:!0,role:!0,tabindex:!0,"aria-label":!0}),y(e).forEach(d),l=x(T),s=b(T,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-label":!0});var A=y(s);r=b(A,"DIV",{class:!0,"data-svelte-h":!0}),W(r)!=="svelte-bwejfd"&&(r.innerHTML=a),o=x(A),c=b(A,"DIV",{class:!0});var V=y(c);u=b(V,"H2",{class:!0,"data-svelte-h":!0}),W(u)!=="svelte-dnbrc"&&(u.textContent=h),p=x(V),g=b(V,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(g)!=="svelte-c6sszy"&&(g.innerHTML=_),V.forEach(d),m=x(A),v=b(A,"DIV",{class:!0});var j=y(v);for(let B=0;B<M.length;B+=1)M[B].l(j);w=x(j),I&&I.l(j),j.forEach(d),A.forEach(d),this.h()},h(){i(e,"class","fixed inset-0 bg-black/50 z-50 md:hidden"),i(e,"role","button"),i(e,"tabindex","0"),i(e,"aria-label","Close zones drawer"),i(r,"class","flex justify-center py-3"),i(u,"class","text-lg font-bold"),i(g,"class","btn btn-ghost btn-sm btn-circle"),i(g,"aria-label","Close"),i(c,"class","flex items-center justify-between px-4 pb-3 border-b border-base-300"),i(v,"class","overflow-y-auto flex-1 px-2 py-3 pb-safe svelte-12n8t3o"),i(s,"class","fixed inset-x-0 bottom-0 z-50 bg-base-100 rounded-t-2xl shadow-2xl md:hidden max-h-[80vh] flex flex-col"),i(s,"role","dialog"),i(s,"aria-modal","true"),i(s,"aria-label","Zones navigation")},m(T,A){D(T,e,A),D(T,l,A),D(T,s,A),f(s,r),f(s,o),f(s,c),f(c,u),f(c,p),f(c,g),f(s,m),f(s,v);for(let V=0;V<M.length;V+=1)M[V]&&M[V].m(v,null);f(v,w),I&&I.m(v,null),n[17](s),E=!0,N||(z=[q(e,"click",n[8]),q(e,"keydown",n[16]),q(g,"click",function(){mt(n[1])&&n[1].apply(this,arguments)})],N=!0)},p(T,A){if(n=T,A&248){S=Ae(n[5]);let V;for(V=0;V<S.length;V+=1){const j=Ps(n,S,V);M[V]?M[V].p(j,A):(M[V]=Os(j),M[V].c(),M[V].m(v,w))}for(;V<M.length;V+=1)M[V].d(1);M.length=S.length}n[5].length===0?I||(I=Rs(),I.c(),I.m(v,null)):I&&(I.d(1),I=null)},i(T){E||(T&&it(()=>{E&&(t||(t=$e(e,at,{duration:200},!0)),t.run(1))}),T&&it(()=>{E&&(C||(C=$e(s,Kt,{y:300,duration:300},!0)),C.run(1))}),E=!0)},o(T){T&&(t||(t=$e(e,at,{duration:200},!1)),t.run(0)),T&&(C||(C=$e(s,Kt,{y:300,duration:300},!1)),C.run(0)),E=!1},d(T){T&&(d(e),d(l),d(s)),T&&t&&t.end(),vt(M,T),I&&I.d(),n[17](null),T&&C&&C.end(),N=!1,Ke(z)}}}function wa(n){let e,t="",l,s,r=n[23]+"",a,o,c,u="Locked";return{c(){e=k("span"),e.textContent=t,l=L(),s=k("span"),a=R(r),o=L(),c=k("span"),c.textContent=u,this.h()},l(h){e=b(h,"SPAN",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-a7658i"&&(e.textContent=t),l=x(h),s=b(h,"SPAN",{class:!0});var p=y(s);a=O(p,r),p.forEach(d),o=x(h),c=b(h,"SPAN",{class:!0,"data-svelte-h":!0}),W(c)!=="svelte-ol6ij"&&(c.textContent=u),this.h()},h(){i(e,"class","text-xl"),i(s,"class","font-semibold text-base-content/50"),i(c,"class","badge badge-xs badge-ghost ml-auto")},m(h,p){D(h,e,p),D(h,l,p),D(h,s,p),f(s,a),D(h,o,p),D(h,c,p)},p(h,p){p&32&&r!==(r=h[23]+"")&&ie(a,r)},d(h){h&&(d(e),d(l),d(s),d(o),d(c))}}}function ya(n){let e,t=n[20].icon+"",l,s,r,a=n[23]+"",o;return{c(){e=k("span"),l=R(t),s=L(),r=k("span"),o=R(a),this.h()},l(c){e=b(c,"SPAN",{class:!0,style:!0});var u=y(e);l=O(u,t),u.forEach(d),s=x(c),r=b(c,"SPAN",{class:!0});var h=y(r);o=O(h,a),h.forEach(d),this.h()},h(){i(e,"class","text-xl"),ut(e,"color",n[21]),i(r,"class","font-semibold")},m(c,u){D(c,e,u),f(e,l),D(c,s,u),D(c,r,u),f(r,o)},p(c,u){u&32&&t!==(t=c[20].icon+"")&&ie(l,t),u&32&&ut(e,"color",c[21]),u&32&&a!==(a=c[23]+"")&&ie(o,a)},d(c){c&&(d(e),d(s),d(r))}}}function js(n){let e,t=Ae(n[20].sections),l=[];for(let s=0;s<t.length;s+=1)l[s]=Us(Vs(n,t,s));return{c(){e=k("ul");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=b(s,"UL",{class:!0});var r=y(e);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(d),this.h()},h(){i(e,"class","ml-6 mt-1 space-y-1")},m(s,r){D(s,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(s,r){if(r&184){t=Ae(s[20].sections);let a;for(a=0;a<t.length;a+=1){const o=Vs(s,t,a);l[a]?l[a].p(o,r):(l[a]=Us(o),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(s){s&&d(e),vt(l,s)}}}function Hs(n){let e,t;return{c(){e=Z("svg"),t=Z("path"),this.h()},l(l){e=Y(l,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var s=y(e);t=Y(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(t).forEach(d),s.forEach(d),this.h()},h(){i(t,"stroke-linecap","round"),i(t,"stroke-linejoin","round"),i(t,"stroke-width","2"),i(t,"d","M5 13l4 4L19 7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor")},m(l,s){D(l,e,s),f(e,t)},d(l){l&&d(e)}}}function Us(n){let e,t,l,s=n[27].icon+"",r,a,o,c=n[27].name+"",u,h,p,g,_,m,v=n[28]&&Hs();return{c(){e=k("li"),t=k("a"),l=k("span"),r=R(s),a=L(),o=k("span"),u=R(c),h=L(),v&&v.c(),this.h()},l(w){e=b(w,"LI",{});var C=y(e);t=b(C,"A",{href:!0,class:!0});var E=y(t);l=b(E,"SPAN",{class:!0});var N=y(l);r=O(N,s),N.forEach(d),a=x(E),o=b(E,"SPAN",{class:!0});var z=y(o);u=O(z,c),z.forEach(d),h=x(E),v&&v.l(E),E.forEach(d),C.forEach(d),this.h()},h(){i(l,"class","text-lg"),i(o,"class","flex-1"),i(t,"href",p=ne+"/"+n[20].id+"/"+n[27].id),i(t,"class",g="flex items-center gap-2 px-3 py-2.5 rounded-lg transition-colors "+(n[28]?"bg-primary/10 text-primary":""))},m(w,C){D(w,e,C),f(e,t),f(t,l),f(l,r),f(t,a),f(t,o),f(o,u),f(t,h),v&&v.m(t,null),_||(m=q(t,"click",n[7]),_=!0)},p(w,C){C&32&&s!==(s=w[27].icon+"")&&ie(r,s),C&32&&c!==(c=w[27].name+"")&&ie(u,c),w[28]?v||(v=Hs(),v.c(),v.m(t,null)):v&&(v.d(1),v=null),C&32&&p!==(p=ne+"/"+w[20].id+"/"+w[27].id)&&i(t,"href",p),C&56&&g!==(g="flex items-center gap-2 px-3 py-2.5 rounded-lg transition-colors "+(w[28]?"bg-primary/10 text-primary":""))&&i(t,"class",g)},d(w){w&&d(e),v&&v.d(),_=!1,m()}}}function Os(n){let e,t,l,s;function r(u,h){return u[22]?ya:wa}let a=r(n),o=a(n),c=n[22]&&js(n);return{c(){e=k("div"),t=k("div"),o.c(),s=L(),c&&c.c(),this.h()},l(u){e=b(u,"DIV",{class:!0});var h=y(e);t=b(h,"DIV",{class:!0,style:!0});var p=y(t);o.l(p),p.forEach(d),s=x(h),c&&c.l(h),h.forEach(d),this.h()},h(){i(t,"class","flex items-center gap-3 px-3 py-2 rounded-lg"),i(t,"style",l=n[24]&&n[22]?`border-left: 3px solid ${n[21]};`:""),X(t,"bg-base-200",n[24]&&n[22]),X(t,"opacity-50",!n[22]),i(e,"class","mb-3")},m(u,h){D(u,e,h),f(e,t),o.m(t,null),f(e,s),c&&c.m(e,null)},p(u,h){a===(a=r(u))&&o?o.p(u,h):(o.d(1),o=a(u),o&&(o.c(),o.m(t,null))),h&48&&l!==(l=u[24]&&u[22]?`border-left: 3px solid ${u[21]};`:"")&&i(t,"style",l),h&112&&X(t,"bg-base-200",u[24]&&u[22]),h&96&&X(t,"opacity-50",!u[22]),u[22]?c?c.p(u,h):(c=js(u),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},d(u){u&&d(e),o.d(),c&&c.d()}}}function Rs(n){let e,t='<p>No zones available</p> <p class="text-sm mt-1">Contact admin for access</p>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(l){e=b(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-shlctw"&&(e.innerHTML=t),this.h()},h(){i(e,"class","text-center py-8 text-base-content/50")},m(l,s){D(l,e,s)},d(l){l&&d(e)}}}function Ca(n){let e,t,l,s=n[0]&&zs(n);return{c(){s&&s.c(),e=be()},l(r){s&&s.l(r),e=be()},m(r,a){s&&s.m(r,a),D(r,e,a),t||(l=q(window,"keydown",n[9]),t=!0)},p(r,[a]){r[0]?s?(s.p(r,a),a&1&&$(s,1)):(s=zs(r),s.c(),$(s,1),s.m(e.parentNode,e)):s&&(ze(),ce(s,1,1,()=>{s=null}),je())},i(r){$(s)},o(r){ce(s)},d(r){r&&d(e),s&&s.d(r),t=!1,l()}}}function Ea(n){return n.branding?.primaryColor||n.ui?.color||"#6366f1"}function Ma(n,e,t){let l,s,r,a,o,c,u,h,p,g;Te(n,Jt,I=>t(14,p=I)),Te(n,mn,I=>t(15,g=I));let{isOpen:_=!1}=e,{onClose:m}=e;function v(I){if(r)return!0;if(!a)return!1;const T=I.access?.visibleToCohorts||[],A=I.access?.hiddenFromCohorts||[];if(T.length===0&&A.length===0)return!0;const V=s;return A.some(j=>V.includes(j))?!1:T.length===0?!0:T.some(j=>V.includes(j)||j==="cross-access")}function w(){m()}function C(){m()}let E;function N(){return E?Array.from(E.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])')):[]}function z(I){if(I.key==="Escape"){m();return}if(I.key==="Tab"&&_&&E){const T=N();if(T.length===0)return;const A=T[0],V=T[T.length-1];I.shiftKey?document.activeElement===A&&(I.preventDefault(),V.focus()):document.activeElement===V&&(I.preventDefault(),A.focus())}}const S=I=>I.key==="Enter"&&C();function M(I){At[I?"unshift":"push"](()=>{E=I,t(2,E)})}return n.$$set=I=>{"isOpen"in I&&t(0,_=I.isOpen),"onClose"in I&&t(1,m=I.onClose)},n.$$.update=()=>{n.$$.dirty&32768&&t(10,s=g?.cohorts??[]),n.$$.dirty&32768&&t(11,r=g?.globalRole==="admin"),n.$$.dirty&3072&&(a=r||s.length>0),n.$$.dirty&16384&&t(13,o=p?.url?.pathname??""),n.$$.dirty&8192&&t(12,c=o?o.replace(ne||"","").split("/").filter(Boolean):[]),n.$$.dirty&4096&&t(4,u=c[0]||null),n.$$.dirty&4096&&t(3,h=c[1]||null),n.$$.dirty&5&&_&&E&&requestAnimationFrame(()=>{const I=N();I.length>0&&I[0].focus()})},t(5,l=un()),[_,m,E,h,u,l,v,w,C,z,s,r,c,o,p,g,S,M]}class Ia extends qe{constructor(e){super(),Ge(this,e,Ma,Ca,Fe,{isOpen:0,onClose:1})}}const{document:il}=en;function Fs(n){let e,t,l,s,r,a,o,c,u,h,p,g="Install",_,m,v="Dismiss",w,C;return{c(){e=k("div"),t=Z("svg"),l=Z("path"),s=L(),r=k("span"),a=R("Install "),o=R(n[19]),c=R(" app for offline access"),u=L(),h=k("div"),p=k("button"),p.textContent=g,_=L(),m=k("button"),m.textContent=v,this.h()},l(E){e=b(E,"DIV",{class:!0,role:!0,"aria-live":!0});var N=y(e);t=Y(N,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0,"aria-hidden":!0});var z=y(t);l=Y(z,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(d),z.forEach(d),s=x(N),r=b(N,"SPAN",{});var S=y(r);a=O(S,"Install "),o=O(S,n[19]),c=O(S," app for offline access"),S.forEach(d),u=x(N),h=b(N,"DIV",{class:!0});var M=y(h);p=b(M,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(p)!=="svelte-1ae1y8b"&&(p.textContent=g),_=x(M),m=b(M,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(m)!=="svelte-1kwyjeb"&&(m.textContent=v),M.forEach(d),N.forEach(d),this.h()},h(){i(l,"stroke-linecap","round"),i(l,"stroke-linejoin","round"),i(l,"stroke-width","2"),i(l,"d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"fill","none"),i(t,"viewBox","0 0 24 24"),i(t,"class","stroke-current shrink-0 w-6 h-6"),i(t,"aria-hidden","true"),i(p,"class","btn btn-sm btn-primary"),i(p,"aria-label","Install application"),i(m,"class","btn btn-sm btn-ghost"),i(m,"aria-label","Dismiss install banner"),i(h,"class","flex gap-2"),i(e,"class","alert alert-info fixed top-0 left-0 right-0 z-50 rounded-none"),i(e,"role","banner"),i(e,"aria-live","polite")},m(E,N){D(E,e,N),f(e,t),f(t,l),f(e,s),f(e,r),f(r,a),f(r,o),f(r,c),f(e,u),f(e,h),f(h,p),f(h,_),f(h,m),w||(C=[q(p,"click",n[23]),q(m,"click",n[22])],w=!0)},p:pe,d(E){E&&d(e),w=!1,Ke(C)}}}function Ws(n){let e,t,l,s,r,a="A new version is available",o,c,u="Update Now",h,p;return{c(){e=k("div"),t=Z("svg"),l=Z("path"),s=L(),r=k("span"),r.textContent=a,o=L(),c=k("button"),c.textContent=u,this.h()},l(g){e=b(g,"DIV",{class:!0,role:!0,"aria-live":!0});var _=y(e);t=Y(_,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0,"aria-hidden":!0});var m=y(t);l=Y(m,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(d),m.forEach(d),s=x(_),r=b(_,"SPAN",{"data-svelte-h":!0}),W(r)!=="svelte-1sypjsy"&&(r.textContent=a),o=x(_),c=b(_,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(c)!=="svelte-rjtxgf"&&(c.textContent=u),_.forEach(d),this.h()},h(){i(l,"stroke-linecap","round"),i(l,"stroke-linejoin","round"),i(l,"stroke-width","2"),i(l,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"fill","none"),i(t,"viewBox","0 0 24 24"),i(t,"class","stroke-current shrink-0 w-6 h-6"),i(t,"aria-hidden","true"),i(c,"class","btn btn-sm btn-warning"),i(c,"aria-label","Update application now"),i(e,"class","alert alert-warning fixed top-0 left-0 right-0 z-50 rounded-none"),i(e,"role","banner"),i(e,"aria-live","polite")},m(g,_){D(g,e,_),f(e,t),f(t,l),f(e,s),f(e,r),f(e,o),f(e,c),h||(p=q(c,"click",n[24]),h=!0)},p:pe,d(g){g&&d(e),h=!1,p()}}}function Ks(n){let e,t,l,s,r,a,o=n[16]>0&&qs(n);return{c(){e=k("div"),t=Z("svg"),l=Z("path"),s=L(),r=k("span"),a=R(`You're offline. Messages will be queued.
			`),o&&o.c(),this.h()},l(c){e=b(c,"DIV",{class:!0,role:!0,"aria-live":!0});var u=y(e);t=Y(u,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0,"aria-hidden":!0});var h=y(t);l=Y(h,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(d),h.forEach(d),s=x(u),r=b(u,"SPAN",{});var p=y(r);a=O(p,`You're offline. Messages will be queued.
			`),o&&o.l(p),p.forEach(d),u.forEach(d),this.h()},h(){i(l,"stroke-linecap","round"),i(l,"stroke-linejoin","round"),i(l,"stroke-width","2"),i(l,"d","M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"fill","none"),i(t,"viewBox","0 0 24 24"),i(t,"class","stroke-current shrink-0 w-6 h-6"),i(t,"aria-hidden","true"),i(e,"class","alert alert-error fixed bottom-0 left-0 right-0 z-50 rounded-none"),i(e,"role","status"),i(e,"aria-live","assertive")},m(c,u){D(c,e,u),f(e,t),f(t,l),f(e,s),f(e,r),f(r,a),o&&o.m(r,null)},p(c,u){c[16]>0?o?o.p(c,u):(o=qs(c),o.c(),o.m(r,null)):o&&(o.d(1),o=null)},d(c){c&&d(e),o&&o.d()}}}function qs(n){let e,t,l;return{c(){e=R("("),t=R(n[16]),l=R(" queued)")},l(s){e=O(s,"("),t=O(s,n[16]),l=O(s," queued)")},m(s,r){D(s,e,r),D(s,t,r),D(s,l,r)},p(s,r){r[0]&65536&&ie(t,s[16])},d(s){s&&(d(e),d(t),d(l))}}}function Ta(n){let e,t='<div class="loading loading-spinner loading-lg text-primary"></div> <span class="sr-only">Loading application...</span>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(l){e=b(l,"DIV",{class:!0,role:!0,"aria-live":!0,"aria-label":!0,"data-svelte-h":!0}),W(e)!=="svelte-1p40hns"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex items-center justify-center min-h-screen"),i(e,"role","status"),i(e,"aria-live","polite"),i(e,"aria-label","Loading application")},m(l,s){D(l,e,s)},p:pe,i:pe,o:pe,d(l){l&&d(e)}}}function Sa(n){let e,t,l,s=n[0],r,a,o,c,u=n[14]&&n[1]&&Gs(n),h=n[14]&&n[1]&&!n[7]&&Ys(n),p=Js(n),g=n[14]&&n[1]&&n[7]&&Qs(n),_=n[14]&&n[1]&&n[7]&&Xs(n);return{c(){u&&u.c(),e=L(),t=k("div"),h&&h.c(),l=L(),p.c(),r=L(),g&&g.c(),a=L(),_&&_.c(),o=be(),this.h()},l(m){u&&u.l(m),e=x(m),t=b(m,"DIV",{class:!0});var v=y(t);h&&h.l(v),l=x(v),p.l(v),v.forEach(d),r=x(m),g&&g.l(m),a=x(m),_&&_.l(m),o=be(),this.h()},h(){i(t,"class","flex")},m(m,v){u&&u.m(m,v),D(m,e,v),D(m,t,v),h&&h.m(t,null),f(t,l),p.m(t,null),D(m,r,v),g&&g.m(m,v),D(m,a,v),_&&_.m(m,v),D(m,o,v),c=!0},p(m,v){m[14]&&m[1]?u?(u.p(m,v),v[0]&16386&&$(u,1)):(u=Gs(m),u.c(),$(u,1),u.m(e.parentNode,e)):u&&(ze(),ce(u,1,1,()=>{u=null}),je()),m[14]&&m[1]&&!m[7]?h?(h.p(m,v),v[0]&16514&&$(h,1)):(h=Ys(m),h.c(),$(h,1),h.m(t,l)):h&&(ze(),ce(h,1,1,()=>{h=null}),je()),v[0]&1&&Fe(s,s=m[0])?(ze(),ce(p,1,1,pe),je(),p=Js(m),p.c(),$(p,1),p.m(t,null)):p.p(m,v),m[14]&&m[1]&&m[7]?g?(g.p(m,v),v[0]&16514&&$(g,1)):(g=Qs(m),g.c(),$(g,1),g.m(a.parentNode,a)):g&&(ze(),ce(g,1,1,()=>{g=null}),je()),m[14]&&m[1]&&m[7]?_?(_.p(m,v),v[0]&16514&&$(_,1)):(_=Xs(m),_.c(),$(_,1),_.m(o.parentNode,o)):_&&(ze(),ce(_,1,1,()=>{_=null}),je())},i(m){c||($(u),$(h),$(p),$(g),$(_),c=!0)},o(m){ce(u),ce(h),ce(p),ce(g),ce(_),c=!1},d(m){m&&(d(e),d(t),d(r),d(a),d(o)),u&&u.d(m),h&&h.d(),p.d(m),g&&g.d(m),_&&_.d(m)}}}function Gs(n){let e,t;return e=new Ai({props:{themePreference:n[3],onThemeToggle:n[20],onProfileClick:n[21]}}),{c(){Re(e.$$.fragment)},l(l){Oe(e.$$.fragment,l)},m(l,s){Ue(e,l,s),t=!0},p(l,s){const r={};s[0]&8&&(r.themePreference=l[3]),e.$set(r)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){ce(e.$$.fragment,l),t=!1},d(l){He(e,l)}}}function Ys(n){let e,t,l,s;t=new _a({props:{currentCategoryId:n[13],currentSectionId:n[12],collapsed:n[9],onToggle:n[33]}});let r=n[17]&&Zs(n);return{c(){e=k("aside"),Re(t.$$.fragment),l=L(),r&&r.c(),this.h()},l(a){e=b(a,"ASIDE",{class:!0,style:!0,"aria-label":!0});var o=y(e);Oe(t.$$.fragment,o),l=x(o),r&&r.l(o),o.forEach(d),this.h()},h(){i(e,"class","flex-shrink-0 flex flex-col border-r border-base-300 bg-base-100 overflow-y-auto"),ut(e,"max-height","calc(100vh - 64px)"),ut(e,"transition","width 0.3s ease-in-out"),i(e,"aria-label","Navigation sidebar"),X(e,"w-72",!n[9]||!n[10]),X(e,"w-16",n[9]&&n[10])},m(a,o){D(a,e,o),Ue(t,e,null),f(e,l),r&&r.m(e,null),s=!0},p(a,o){const c={};o[0]&8192&&(c.currentCategoryId=a[13]),o[0]&4096&&(c.currentSectionId=a[12]),o[0]&512&&(c.collapsed=a[9]),o[0]&512&&(c.onToggle=a[33]),t.$set(c),a[17]?r?(r.p(a,o),o[0]&131072&&$(r,1)):(r=Zs(a),r.c(),$(r,1),r.m(e,null)):r&&(ze(),ce(r,1,1,()=>{r=null}),je()),(!s||o[0]&1536)&&X(e,"w-72",!a[9]||!a[10]),(!s||o[0]&1536)&&X(e,"w-16",a[9]&&a[10])},i(a){s||($(t.$$.fragment,a),$(r),s=!0)},o(a){ce(t.$$.fragment,a),ce(r),s=!1},d(a){a&&d(e),He(t),r&&r.d()}}}function Zs(n){let e,t,l;return t=new Kn({props:{isExpanded:!n[10],isVisible:n[17],onToggle:n[34],compact:!0}}),{c(){e=k("div"),Re(t.$$.fragment),this.h()},l(s){e=b(s,"DIV",{class:!0});var r=y(e);Oe(t.$$.fragment,r),r.forEach(d),this.h()},h(){i(e,"class","border-t border-base-300")},m(s,r){D(s,e,r),Ue(t,e,null),l=!0},p(s,r){const a={};r[0]&1024&&(a.isExpanded=!s[10]),r[0]&131072&&(a.isVisible=s[17]),r[0]&1024&&(a.onToggle=s[34]),t.$set(a)},i(s){l||($(t.$$.fragment,s),l=!0)},o(s){ce(t.$$.fragment,s),l=!1},d(s){s&&d(e),He(t)}}}function Js(n){let e,t,l,s,r;const a=n[31].default,o=kn(a,n,n[30],null);return{c(){e=k("main"),o&&o.c(),this.h()},l(c){e=b(c,"MAIN",{id:!0,role:!0,tabindex:!0,class:!0});var u=y(e);o&&o.l(u),u.forEach(d),this.h()},h(){i(e,"id","main-content"),i(e,"role","main"),i(e,"tabindex","-1"),i(e,"class",t="flex-1 min-w-0 "+(n[7]&&n[14]&&n[1]?"pb-20":""))},m(c,u){D(c,e,u),o&&o.m(e,null),r=!0},p(c,u){o&&o.p&&(!r||u[0]&1073741824)&&wn(o,a,c,c[30],r?Cn(a,c[30],u,null):yn(c[30]),null),(!r||u[0]&16514&&t!==(t="flex-1 min-w-0 "+(c[7]&&c[14]&&c[1]?"pb-20":"")))&&i(e,"class",t)},i(c){r||($(o,c),c&&it(()=>{r&&(s&&s.end(1),l=Wt(e,at,{duration:150,delay:75}),l.start())}),r=!0)},o(c){ce(o,c),l&&l.invalidate(),c&&(s=$s(e,at,{duration:75})),r=!1},d(c){c&&d(e),o&&o.d(c),c&&s&&s.end()}}}function Qs(n){let e,t,l;function s(a){n[35](a)}let r={};return n[8]!==void 0&&(r.isOpen=n[8]),e=new Wn({props:r}),At.push(()=>fl(e,"isOpen",s)),{c(){Re(e.$$.fragment)},l(a){Oe(e.$$.fragment,a)},m(a,o){Ue(e,a,o),l=!0},p(a,o){const c={};!t&&o[0]&256&&(t=!0,c.isOpen=a[8],ul(()=>t=!1)),e.$set(c)},i(a){l||($(e.$$.fragment,a),l=!0)},o(a){ce(e.$$.fragment,a),l=!1},d(a){He(e,a)}}}function Xs(n){let e,t,l,s;return e=new ka({props:{onZonesClick:n[36],onProfileClick:n[21]}}),l=new Ia({props:{isOpen:n[11],onClose:n[37]}}),{c(){Re(e.$$.fragment),t=L(),Re(l.$$.fragment)},l(r){Oe(e.$$.fragment,r),t=x(r),Oe(l.$$.fragment,r)},m(r,a){Ue(e,r,a),D(r,t,a),Ue(l,r,a),s=!0},p(r,a){const o={};a[0]&2048&&(o.onZonesClick=r[36]),e.$set(o);const c={};a[0]&2048&&(c.isOpen=r[11]),a[0]&2048&&(c.onClose=r[37]),l.$set(c)},i(r){s||($(e.$$.fragment,r),$(l.$$.fragment,r),s=!0)},o(r){ce(e.$$.fragment,r),ce(l.$$.fragment,r),s=!1},d(r){r&&d(t),He(e,r),He(l,r)}}}function Aa(n){let e,t,l,s="Skip to main content",r,a,o,c,u,h,p,g,_,m,v,w,C,E,N,z,S;il.title=e=n[18].name;let M=n[4]&&Fs(n),I=n[5]&&Ws(n),T=!n[15]&&Ks(n);function A(P){n[32](P)}let V={};n[6]!==void 0&&(V.open=n[6]),u=new ra({props:V}),At.push(()=>fl(u,"open",A));const j=[Sa,Ta],B=[];function U(P,H){return P[2]?0:1}return _=U(n),m=B[_]=j[_](n),w=new Lr({}),E=new Vr({}),z=new Hr({}),{c(){t=L(),l=k("a"),l.textContent=s,r=L(),M&&M.c(),a=L(),I&&I.c(),o=L(),T&&T.c(),c=L(),Re(u.$$.fragment),p=L(),g=k("div"),m.c(),v=L(),Re(w.$$.fragment),C=L(),Re(E.$$.fragment),N=L(),Re(z.$$.fragment),this.h()},l(P){bn("svelte-vevsda",il.head).forEach(d),t=x(P),l=b(P,"A",{href:!0,class:!0,"data-svelte-h":!0}),W(l)!=="svelte-1i6h3li"&&(l.textContent=s),r=x(P),M&&M.l(P),a=x(P),I&&I.l(P),o=x(P),T&&T.l(P),c=x(P),Oe(u.$$.fragment,P),p=x(P),g=b(P,"DIV",{class:!0});var G=y(g);m.l(G),G.forEach(d),v=x(P),Oe(w.$$.fragment,P),C=x(P),Oe(E.$$.fragment,P),N=x(P),Oe(z.$$.fragment,P),this.h()},h(){i(l,"href","#main-content"),i(l,"class","skip-to-main svelte-1kw7ryj"),i(g,"class","min-h-screen w-full transition-base")},m(P,H){D(P,t,H),D(P,l,H),D(P,r,H),M&&M.m(P,H),D(P,a,H),I&&I.m(P,H),D(P,o,H),T&&T.m(P,H),D(P,c,H),Ue(u,P,H),D(P,p,H),D(P,g,H),B[_].m(g,null),D(P,v,H),Ue(w,P,H),D(P,C,H),Ue(E,P,H),D(P,N,H),Ue(z,P,H),S=!0},p(P,H){(!S||H[0]&262144)&&e!==(e=P[18].name)&&(il.title=e),P[4]?M?M.p(P,H):(M=Fs(P),M.c(),M.m(a.parentNode,a)):M&&(M.d(1),M=null),P[5]?I?I.p(P,H):(I=Ws(P),I.c(),I.m(o.parentNode,o)):I&&(I.d(1),I=null),P[15]?T&&(T.d(1),T=null):T?T.p(P,H):(T=Ks(P),T.c(),T.m(c.parentNode,c));const G={};!h&&H[0]&64&&(h=!0,G.open=P[6],ul(()=>h=!1)),u.$set(G);let Q=_;_=U(P),_===Q?B[_].p(P,H):(ze(),ce(B[Q],1,1,()=>{B[Q]=null}),je(),m=B[_],m?m.p(P,H):(m=B[_]=j[_](P),m.c()),$(m,1),m.m(g,null))},i(P){S||($(u.$$.fragment,P),$(m),$(w.$$.fragment,P),$(E.$$.fragment,P),$(z.$$.fragment,P),S=!0)},o(P){ce(u.$$.fragment,P),ce(m),ce(w.$$.fragment,P),ce(E.$$.fragment,P),ce(z.$$.fragment,P),S=!1},d(P){P&&(d(t),d(l),d(r),d(a),d(o),d(c),d(p),d(g),d(v),d(C),d(N)),M&&M.d(P),I&&I.d(P),T&&T.d(P),He(u,P),B[_].d(),He(w,P),He(E,P),He(z,P)}}}function xa(n,e,t){let l,s,r,a,o,c,u,h,p,g,_;Te(n,Jt,K=>t(28,c=K)),Te(n,On,K=>t(1,u=K)),Te(n,pt,K=>t(29,h=K)),Te(n,nn,K=>t(15,p=K)),Te(n,Rn,K=>t(16,g=K)),Te(n,qn,K=>t(17,_=K));let{$$slots:m={},$$scope:v}=e;const w=hl(),C=w.name.split(" - ")[0];let E=!1,N="dark",z=!1,S=!1,M=!1,I,T=window.innerWidth<768,A=!1,V=!1,j=!0,B=!1,U=!1;on.subscribe(K=>{t(4,z=K)}),Vn.subscribe(K=>{t(5,S=K)}),St(()=>{t(2,E=!0);try{const te=sessionStorage.getItem("redirect");if(te&&typeof te=="string"){sessionStorage.removeItem("redirect");const fe=ne||"/community",re=c?.url?.pathname??"";if(te.startsWith(fe)&&te!==re){const ve=te.slice(fe.length)||"/";al(`${ne}${ve}`,{replaceState:!0})}}}catch(te){console.warn("SPA redirect handling failed:",te)}const K=localStorage.getItem("theme");t(3,N=K==="light"?"light":"dark"),document.documentElement.setAttribute("data-theme",N),ur(),wr(),"Notification"in window&&Notification.permission==="default"&&fn.requestPermission(),Tr();const ue=()=>{t(7,T=window.innerWidth<768)};return ue(),window.addEventListener("resize",ue),Fn.fetchUpcomingEvents(14),()=>{window.removeEventListener("resize",ue)}}),Zt(()=>{I&&(I(),t(25,I=void 0))});function P(){t(3,N=N==="dark"?"light":"dark"),document.documentElement.setAttribute("data-theme",N),localStorage.setItem("theme",N)}function H(){t(6,M=!M)}function G(){t(4,z=!1)}async function Q(){await cn()&&t(4,z=!1)}async function se(){await Un()}function J(K){M=K,t(6,M)}const ee=()=>t(9,V=!V),he=()=>t(10,j=!j);function ae(K){A=K,t(8,A)}const we=()=>t(11,B=!0),F=()=>t(11,B=!1);return n.$$set=K=>{"$$scope"in K&&t(30,v=K.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&603979776&&h.isAuthenticated&&!zn()&&!U&&(t(26,U=!0),(h.isNip07?jn(Bl):h.privateKey?Hn(Bl,h.privateKey):Promise.reject(new Error("No signing method available"))).catch(ue=>{console.error("[Layout] Relay connection failed:",ue)}).finally(()=>{t(26,U=!1)})),n.$$.dirty[0]&268435456&&t(0,l=c?.url?.pathname??""),n.$$.dirty[0]&1&&t(14,s=l!==`${ne}/`&&l!==ne&&l!==`${ne}/signup`&&l!==`${ne}/login`&&l!==`${ne}/pending`&&l!==""),n.$$.dirty[0]&1&&t(27,r=l?l.replace(ne||"","").split("/").filter(Boolean):[]),n.$$.dirty[0]&134217728&&t(13,a=r[0]||null),n.$$.dirty[0]&134217728&&t(12,o=r[1]||null),n.$$.dirty[0]&33554434&&(u&&!I?t(25,I=qt.start(()=>{pt.logout()})):!u&&I&&(I(),t(25,I=void 0),qt.stop()))},[l,u,E,N,z,S,M,T,A,V,j,B,o,a,s,p,g,_,w,C,P,H,G,Q,se,I,U,r,c,h,v,m,J,ee,he,ae,we,F]}class Xa extends qe{constructor(e){super(),Ge(this,e,xa,Aa,Fe,{},null,[-1,-1])}}export{Xa as component,Qa as universal};
