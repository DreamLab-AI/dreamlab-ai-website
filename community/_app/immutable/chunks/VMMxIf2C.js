const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BPZifr_e.js","./CmsKOCeN.js","./DxD0Wn3l.js","./xKPZ-4ZK.js","./0ZVSoAEn.js","./BToyndCo.js"])))=>i.map(i=>d[i]);
import{_ as Xe}from"./CmsKOCeN.js";import{s as Ie,K as ht,L as vt,p as We,d as a,z as mt,a as Ee,i as C,b as o,l,c as f,e as k,u as ie,ad as bt,g as I,f as $,h as p,v as ae,ae as kt,j as L,t as ee,q as Q,n as fe,o as H,k as ft,C as je,r as ze,P as Be,A as Ze,E as _t,x as $e}from"./0ZVSoAEn.js";import{S as Le,i as Me,f as gt,d as Ae,t as we,a as ye,m as Pe,b as Se,e as Ne,g as wt,c as yt}from"./DKVmOqaf.js";import{a as J,g as xt,j as et,u as pt,h as Ct,e as Et,n as Tt,N as It,G as Lt}from"./DxD0Wn3l.js";import{e as tt}from"./m0NROLOn.js";import{M as Mt}from"./DOw5f1QP.js";import{profileCache as At}from"./D7m-JnSU.js";import{checkWhitelistStatus as Oe}from"./BPZifr_e.js";import{encodePubkey as Pt}from"./DDGWR2uk.js";function st(i,e,s){const t=i.slice();return t[8]=e[s],t[10]=s,t}function nt(i){let e,s,t,n;function r(){return i[6](i[10])}return{c(){e=p("button"),this.h()},l(c){e=f(c,"BUTTON",{class:!0,"aria-label":!0}),k(e).forEach(a),this.h()},h(){l(e,"class",s="w-2 h-2 rounded-full transition-all "+(i[10]===i[1]?"bg-primary w-8":"bg-base-content/20")),l(e,"aria-label","Go to slide "+(i[10]+1))},m(c,u){C(c,e,u),t||(n=Q(e,"click",r),t=!0)},p(c,u){i=c,u&2&&s!==(s="w-2 h-2 rounded-full transition-all "+(i[10]===i[1]?"bg-primary w-8":"bg-base-content/20"))&&l(e,"class",s)},d(c){c&&a(e),t=!1,n()}}}function lt(i){let e,s="Back",t,n;return{c(){e=p("button"),e.textContent=s,this.h()},l(r){e=f(r,"BUTTON",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-embpm3"&&(e.textContent=s),this.h()},h(){l(e,"class","btn btn-ghost flex-1")},m(r,c){C(r,e,c),t||(n=Q(e,"click",i[4]),t=!0)},p:fe,d(r){r&&a(e),t=!1,n()}}}function St(i){let e,s="Get Started",t,n;return{c(){e=p("button"),e.textContent=s,this.h()},l(r){e=f(r,"BUTTON",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-1pfi481"&&(e.textContent=s),this.h()},h(){l(e,"class","btn btn-primary flex-1")},m(r,c){C(r,e,c),t||(n=Q(e,"click",i[5]),t=!0)},p:fe,d(r){r&&a(e),t=!1,n()}}}function Nt(i){let e,s="Next",t,n;return{c(){e=p("button"),e.textContent=s,this.h()},l(r){e=f(r,"BUTTON",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-vck9o8"&&(e.textContent=s),this.h()},h(){l(e,"class","btn btn-primary flex-1")},m(r,c){C(r,e,c),t||(n=Q(e,"click",i[3]),t=!0)},p:fe,d(r){r&&a(e),t=!1,n()}}}function rt(i){let e,s="Skip Tutorial",t,n;return{c(){e=p("button"),e.textContent=s,this.h()},l(r){e=f(r,"BUTTON",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-1122ecg"&&(e.textContent=s),this.h()},h(){l(e,"class","btn btn-ghost btn-sm mt-4")},m(r,c){C(r,e,c),t||(n=Q(e,"click",i[5]),t=!0)},p:fe,d(r){r&&a(e),t=!1,n()}}}function Dt(i){let e,s,t,n,r=i[2][i[1]].icon+"",c,u,d=i[2][i[1]].title+"",v,h,m,_=i[2][i[1]].content+"",b,g,T,M,S,O,N,x=tt(i[2]),w=[];for(let P=0;P<x.length;P+=1)w[P]=nt(st(i,x,P));let A=i[1]>0&&lt(i);function W(P,j){return P[1]<P[2].length-1?Nt:St}let F=W(i),R=F(i),y=i[1]<i[2].length-1&&rt(i);return{c(){e=p("div"),s=p("div"),t=ae("svg"),n=new kt(!0),c=L(),u=p("h2"),v=ee(d),h=L(),m=p("p"),b=ee(_),g=L(),T=p("div");for(let P=0;P<w.length;P+=1)w[P].c();M=L(),S=p("div"),A&&A.c(),O=L(),R.c(),N=L(),y&&y.c(),this.h()},l(P){e=f(P,"DIV",{class:!0});var j=k(e);s=f(j,"DIV",{class:!0});var K=k(s);t=ie(K,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var X=k(t);n=bt(X,!0),X.forEach(a),K.forEach(a),c=I(j),u=f(j,"H2",{class:!0});var V=k(u);v=$(V,d),V.forEach(a),h=I(j),m=f(j,"P",{class:!0});var U=k(m);b=$(U,_),U.forEach(a),g=I(j),T=f(j,"DIV",{class:!0});var E=k(T);for(let G=0;G<w.length;G+=1)w[G].l(E);E.forEach(a),M=I(j),S=f(j,"DIV",{class:!0});var D=k(S);A&&A.l(D),O=I(D),R.l(D),D.forEach(a),N=I(j),y&&y.l(j),j.forEach(a),this.h()},h(){n.a=null,l(t,"xmlns","http://www.w3.org/2000/svg"),l(t,"class","h-16 w-16 text-primary"),l(t,"fill","none"),l(t,"viewBox","0 0 24 24"),l(t,"stroke","currentColor"),l(s,"class","bg-primary/10 rounded-full p-6 mb-6"),l(u,"class","text-2xl font-bold mb-4"),l(m,"class","text-base-content/80 mb-8 max-w-md leading-relaxed"),l(T,"class","flex gap-2 mb-8"),l(S,"class","flex gap-3 w-full max-w-md"),l(e,"class","flex flex-col items-center text-center py-6")},m(P,j){C(P,e,j),o(e,s),o(s,t),n.m(r,t),o(e,c),o(e,u),o(u,v),o(e,h),o(e,m),o(m,b),o(e,g),o(e,T);for(let K=0;K<w.length;K+=1)w[K]&&w[K].m(T,null);o(e,M),o(e,S),A&&A.m(S,null),o(S,O),R.m(S,null),o(e,N),y&&y.m(e,null)},p(P,j){if(j&2&&r!==(r=P[2][P[1]].icon+"")&&n.p(r),j&2&&d!==(d=P[2][P[1]].title+"")&&Ee(v,d),j&2&&_!==(_=P[2][P[1]].content+"")&&Ee(b,_),j&2){x=tt(P[2]);let K;for(K=0;K<x.length;K+=1){const X=st(P,x,K);w[K]?w[K].p(X,j):(w[K]=nt(X),w[K].c(),w[K].m(T,null))}for(;K<w.length;K+=1)w[K].d(1);w.length=x.length}P[1]>0?A?A.p(P,j):(A=lt(P),A.c(),A.m(S,O)):A&&(A.d(1),A=null),F===(F=W(P))&&R?R.p(P,j):(R.d(1),R=F(P),R&&(R.c(),R.m(S,null))),P[1]<P[2].length-1?y?y.p(P,j):(y=rt(P),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},d(P){P&&a(e),mt(w,P),A&&A.d(),R.d(),y&&y.d()}}}function Bt(i){let e,s,t;function n(c){i[7](c)}let r={size:"md",title:"",closeOnBackdrop:!1,closeOnEscape:!1,$$slots:{default:[Dt]},$$scope:{ctx:i}};return i[0]!==void 0&&(r.open=i[0]),e=new Mt({props:r}),ht.push(()=>gt(e,"open",n)),{c(){Ne(e.$$.fragment)},l(c){Se(e.$$.fragment,c)},m(c,u){Pe(e,c,u),t=!0},p(c,[u]){const d={};u&2050&&(d.$$scope={dirty:u,ctx:c}),!s&&u&1&&(s=!0,d.open=c[0],vt(()=>s=!1)),e.$set(d)},i(c){t||(ye(e.$$.fragment,c),t=!0)},o(c){we(e.$$.fragment,c),t=!1},d(c){Ae(e,c)}}}function jt(i,e,s){let{open:t=!1}=e,n=0;const r=[{title:"Welcome to the Community",content:"A private, invite-only space for DreamLab members. Discuss ideas, share projects, and connect with peers — with your privacy intact.",icon:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />'},{title:"Your Keys, Your Identity",content:"You own your identity here. Your public key is like a username — safe to share. Your private key is your password — keep it secret and back it up.",icon:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z" />'},{title:"End-to-End Encrypted",content:"Private messages are encrypted so only you and your recipients can read them. No one — not even the server — can access your private conversations.",icon:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />'},{title:"Get Started",content:"Create your account with a passkey for the most secure experience, or use a private key if you prefer. Download your backup key and keep it somewhere safe.",icon:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />'}];function c(){n<r.length-1&&s(1,n++,n)}function u(){n>0&&s(1,n--,n)}function d(){localStorage.setItem("hasSeenOnboarding","true"),s(0,t=!1)}We(()=>{localStorage.getItem("hasSeenOnboarding")||s(0,t=!0)});const v=m=>s(1,n=m);function h(m){t=m,s(0,t)}return i.$$set=m=>{"open"in m&&s(0,t=m.open)},[t,n,r,c,u,d,v,h]}class Vt extends Le{constructor(e){super(),Me(this,e,jt,Bt,Ie,{open:0})}}function Ht(i){let e,s='<svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <div class="text-sm"><p class="font-bold">Save your backup key</p> <p>You&#39;ll need it if you lose access to your passkey. This download is only available now.</p></div>',t,n,r,c="Your public key",u,d,v,h,m,_,b=`<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
            Download private key`,g,T,M="I've saved my key →",S,O;return{c(){e=p("div"),e.innerHTML=s,t=L(),n=p("div"),r=p("p"),r.textContent=c,u=L(),d=p("p"),v=ee(i[0]),h=L(),m=p("div"),_=p("button"),_.innerHTML=b,g=L(),T=p("button"),T.textContent=M,this.h()},l(N){e=f(N,"DIV",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-eso2j7"&&(e.innerHTML=s),t=I(N),n=f(N,"DIV",{class:!0});var x=k(n);r=f(x,"P",{class:!0,"data-svelte-h":!0}),H(r)!=="svelte-rql4s6"&&(r.textContent=c),u=I(x),d=f(x,"P",{class:!0});var w=k(d);v=$(w,i[0]),w.forEach(a),x.forEach(a),h=I(N),m=f(N,"DIV",{class:!0});var A=k(m);_=f(A,"BUTTON",{class:!0,"data-svelte-h":!0}),H(_)!=="svelte-tjkw35"&&(_.innerHTML=b),g=I(A),T=f(A,"BUTTON",{class:!0,"data-svelte-h":!0}),H(T)!=="svelte-1g9owe8"&&(T.textContent=M),A.forEach(a),this.h()},h(){l(e,"class","alert alert-warning mb-4"),l(r,"class","text-xs text-base-content/60 mb-1"),l(d,"class","font-mono text-xs break-all"),l(n,"class","bg-base-200 rounded-lg p-4 mb-4"),l(_,"class","btn btn-warning w-full gap-2"),l(T,"class","btn btn-primary w-full"),l(m,"class","card-actions flex-col gap-3 mt-2")},m(N,x){C(N,e,x),C(N,t,x),C(N,n,x),o(n,r),o(n,u),o(n,d),o(d,v),C(N,h,x),C(N,m,x),o(m,_),o(m,g),o(m,T),S||(O=[Q(_,"click",i[9]),Q(T,"click",i[10])],S=!0)},p(N,x){x&1&&Ee(v,N[0])},d(N){N&&(a(e),a(t),a(n),a(h),a(m)),S=!1,ze(O)}}}function Kt(i){let e,s='<span class="loading loading-spinner loading-lg text-primary"></span> <p class="text-center text-base-content/70">Creating your secure account...</p>';return{c(){e=p("div"),e.innerHTML=s,this.h()},l(t){e=f(t,"DIV",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-o1x4pn"&&(e.innerHTML=s),this.h()},h(){l(e,"class","flex flex-col items-center gap-4 py-6")},m(t,n){C(t,e,n)},p:fe,d(t){t&&a(e)}}}function Ut(i){let e,s='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm">Your private key is derived from your passkey — no password needed</span>',t,n,r,c,u,d='<span class="label-text font-medium">Display name</span> <span class="label-text-alt text-base-content/50">shown publicly</span>',v,h,m,_,b,g=`<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"></path></svg>
            Create account with passkey`,T,M,S="OR",O,N,x,w=`<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path></svg>
            Create account with local key`,A,W,F="Generates a standard key pair. Your private key will be cached in this browser.",R,y,P,j="Already have an account?",K,X,V=i[3]&&it(),U=i[4].error&&!i[3]&&at(i);return{c(){e=p("div"),e.innerHTML=s,t=L(),V&&V.c(),n=L(),U&&U.c(),r=L(),c=p("div"),u=p("label"),u.innerHTML=d,v=L(),h=p("input"),m=L(),_=p("div"),b=p("button"),b.innerHTML=g,T=L(),M=p("div"),M.textContent=S,O=L(),N=p("div"),x=p("button"),x.innerHTML=w,A=L(),W=p("p"),W.textContent=F,R=L(),y=p("div"),P=p("button"),P.textContent=j,this.h()},l(E){e=f(E,"DIV",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-rdvof3"&&(e.innerHTML=s),t=I(E),V&&V.l(E),n=I(E),U&&U.l(E),r=I(E),c=f(E,"DIV",{class:!0});var D=k(c);u=f(D,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),H(u)!=="svelte-4dphq6"&&(u.innerHTML=d),v=I(D),h=f(D,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0,maxlength:!0}),D.forEach(a),m=I(E),_=f(E,"DIV",{class:!0});var G=k(_);b=f(G,"BUTTON",{class:!0,"data-svelte-h":!0}),H(b)!=="svelte-my6707"&&(b.innerHTML=g),G.forEach(a),T=I(E),M=f(E,"DIV",{class:!0,"data-svelte-h":!0}),H(M)!=="svelte-cr75gt"&&(M.textContent=S),O=I(E),N=f(E,"DIV",{class:!0});var Z=k(N);x=f(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),H(x)!=="svelte-1808rsr"&&(x.innerHTML=w),A=I(Z),W=f(Z,"P",{class:!0,"data-svelte-h":!0}),H(W)!=="svelte-pvdewf"&&(W.textContent=F),Z.forEach(a),R=I(E),y=f(E,"DIV",{class:!0});var oe=k(y);P=f(oe,"BUTTON",{class:!0,"data-svelte-h":!0}),H(P)!=="svelte-1r0w43j"&&(P.textContent=j),oe.forEach(a),this.h()},h(){l(e,"class","alert alert-info mb-4"),l(u,"class","label"),l(u,"for","display-name-input"),l(h,"id","display-name-input"),l(h,"type","text"),l(h,"class","input input-bordered"),l(h,"placeholder","e.g. Alice"),l(h,"maxlength","50"),l(c,"class","form-control mb-4"),l(b,"class","btn btn-primary btn-lg w-full gap-2"),l(_,"class","card-actions justify-center mt-2"),l(M,"class","divider"),l(x,"class","btn btn-outline btn-warning w-full gap-2"),l(W,"class","text-xs text-base-content/50 mt-1 text-center"),l(N,"class","card-actions justify-center"),l(P,"class","btn btn-ghost btn-sm"),l(y,"class","mt-4 text-center")},m(E,D){C(E,e,D),C(E,t,D),V&&V.m(E,D),C(E,n,D),U&&U.m(E,D),C(E,r,D),C(E,c,D),o(c,u),o(c,v),o(c,h),Be(h,i[2]),C(E,m,D),C(E,_,D),o(_,b),C(E,T,D),C(E,M,D),C(E,O,D),C(E,N,D),o(N,x),o(N,A),o(N,W),C(E,R,D),C(E,y,D),o(y,P),K||(X=[Q(h,"input",i[12]),Q(h,"keydown",i[13]),Q(b,"click",i[7]),Q(x,"click",i[8]),Q(P,"click",i[14])],K=!0)},p(E,D){E[3]?V||(V=it(),V.c(),V.m(n.parentNode,n)):V&&(V.d(1),V=null),E[4].error&&!E[3]?U?U.p(E,D):(U=at(E),U.c(),U.m(r.parentNode,r)):U&&(U.d(1),U=null),D&4&&h.value!==E[2]&&Be(h,E[2])},d(E){E&&(a(e),a(t),a(n),a(r),a(c),a(m),a(_),a(T),a(M),a(O),a(N),a(R),a(y)),V&&V.d(E),U&&U.d(E),K=!1,ze(X)}}}function it(i){let e,s=`<svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <div class="text-sm"><p class="font-bold">Passkey not fully supported</p> <p>Your browser or authenticator does not support the secure key feature required for passkey-based accounts.
                Try <strong>Create account with local key</strong> below, or use an existing account on the login page.</p></div>`;return{c(){e=p("div"),e.innerHTML=s,this.h()},l(t){e=f(t,"DIV",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-3t7x96"&&(e.innerHTML=s),this.h()},h(){l(e,"class","alert alert-warning mb-4")},m(t,n){C(t,e,n)},d(t){t&&a(e)}}}function at(i){let e,s,t,n,r,c=i[4].error+"",u;return{c(){e=p("div"),s=ae("svg"),t=ae("path"),n=L(),r=p("span"),u=ee(c),this.h()},l(d){e=f(d,"DIV",{class:!0});var v=k(e);s=ie(v,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var h=k(s);t=ie(h,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),k(t).forEach(a),h.forEach(a),n=I(v),r=f(v,"SPAN",{});var m=k(r);u=$(m,c),m.forEach(a),v.forEach(a),this.h()},h(){l(t,"stroke-linecap","round"),l(t,"stroke-linejoin","round"),l(t,"stroke-width","2"),l(t,"d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"),l(s,"xmlns","http://www.w3.org/2000/svg"),l(s,"class","stroke-current shrink-0 h-6 w-6"),l(s,"fill","none"),l(s,"viewBox","0 0 24 24"),l(e,"class","alert alert-error mb-4")},m(d,v){C(d,e,v),o(e,s),o(s,t),o(e,n),o(e,r),o(r,u)},p(d,v){v&16&&c!==(c=d[4].error+"")&&Ee(u,c)},d(d){d&&a(e)}}}function Ot(i){let e,s,t,n,r,c,u,d,v,h;e=new Vt({});function m(g,T){if(g[1]==="idle")return Ut;if(g[1]==="registering")return Kt;if(g[1]==="download")return Ht}let _=m(i),b=_&&_(i);return{c(){Ne(e.$$.fragment),s=L(),t=p("div"),n=p("div"),r=p("div"),c=p("h2"),u=ee("Welcome to "),d=ee(i[5]),v=L(),b&&b.c(),this.h()},l(g){Se(e.$$.fragment,g),s=I(g),t=f(g,"DIV",{class:!0});var T=k(t);n=f(T,"DIV",{class:!0});var M=k(n);r=f(M,"DIV",{class:!0});var S=k(r);c=f(S,"H2",{class:!0});var O=k(c);u=$(O,"Welcome to "),d=$(O,i[5]),O.forEach(a),v=I(S),b&&b.l(S),S.forEach(a),M.forEach(a),T.forEach(a),this.h()},h(){l(c,"class","card-title text-2xl justify-center mb-4"),l(r,"class","card-body"),l(n,"class","card w-full bg-base-100 shadow-xl"),l(t,"class","w-full max-w-md sm:max-w-lg mx-auto")},m(g,T){Pe(e,g,T),C(g,s,T),C(g,t,T),o(t,n),o(n,r),o(r,c),o(c,u),o(c,d),o(r,v),b&&b.m(r,null),h=!0},p(g,[T]){_===(_=m(g))&&b?b.p(g,T):(b&&b.d(1),b=_&&_(g),b&&(b.c(),b.m(r,null)))},i(g){h||(ye(e.$$.fragment,g),h=!0)},o(g){we(e.$$.fragment,g),h=!1},d(g){g&&(a(s),a(t)),Ae(e,g),b&&b.d()}}}function zt(i,e,s){let t,n,r;ft(i,J,x=>s(4,r=x));const u=xt().name.split(" - ")[0],d=je();let v="idle",h="",m="",_=!1;async function b(){h.trim()||s(2,h="New User"),s(1,v="registering"),J.clearError(),s(3,_=!1);try{const x=await J.registerWithPasskey(h.trim());s(11,m=x.pubkey),s(1,v="download")}catch(x){const w=x instanceof Error?x.message:"Registration failed";w.toLowerCase().includes("prf")&&s(3,_=!0),J.setError(w),s(1,v="idle")}}async function g(){h.trim()||s(2,h="New User"),s(1,v="registering"),J.clearError(),s(3,_=!1);try{const x=await J.registerWithLocalKey(h.trim());s(11,m=x.pubkey),s(1,v="download")}catch(x){const w=x instanceof Error?x.message:"Registration failed";J.setError(w),s(1,v="idle")}}function T(){const x=J.getPrivkey();if(!x)return;const w=pt.bytesToHex(x),A=et.nsecEncode(x),W=`DreamLab Community - Identity Backup
Public key: ${t}
Public key (hex): ${m}
Private key: ${A}
Private key (hex): ${w}
Generated: ${new Date().toISOString()}
KEEP THIS FILE SECURE. Never share the private key.
`,F=new Blob([W],{type:"text/plain"}),R=URL.createObjectURL(F),y=document.createElement("a");y.href=R,y.download=`dreamlab-${n.replace(/\.\./g,"")}.txt`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(R)}function M(){J.confirmNsecBackup(),d("next",{publicKey:m})}function S(){h=this.value,s(2,h)}const O=x=>x.key==="Enter"&&b(),N=()=>d("next",{publicKey:""});return i.$$.update=()=>{i.$$.dirty&2048&&s(0,t=m?et.npubEncode(m):""),i.$$.dirty&1&&(n=t?t.slice(0,12)+"..."+t.slice(-6):"")},[t,v,h,_,r,u,d,b,g,T,M,m,S,O,N]}class Yt extends Le{constructor(e){super(),Me(this,e,zt,Ot,Ie,{})}}function Wt(i){let e,s="2-50 characters, letters, numbers, and symbols allowed";return{c(){e=p("span"),e.textContent=s,this.h()},l(t){e=f(t,"SPAN",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-1vzq00z"&&(e.textContent=s),this.h()},h(){l(e,"class","label-text-alt text-base-content/60 mt-1")},m(t,n){C(t,e,n)},p:fe,d(t){t&&a(e)}}}function Rt(i){let e,s;return{c(){e=p("span"),s=ee(i[4]),this.h()},l(t){e=f(t,"SPAN",{class:!0});var n=k(e);s=$(n,i[4]),n.forEach(a),this.h()},h(){l(e,"class","label-text-alt text-error mt-1")},m(t,n){C(t,e,n),o(e,s)},p(t,n){n&16&&Ee(s,t[4])},d(t){t&&a(e)}}}function ot(i){let e,s,t,n,r,c;return{c(){e=p("div"),s=ae("svg"),t=ae("path"),n=L(),r=p("span"),c=ee(i[3]),this.h()},l(u){e=f(u,"DIV",{class:!0});var d=k(e);s=ie(d,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var v=k(s);t=ie(v,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),k(t).forEach(a),v.forEach(a),n=I(d),r=f(d,"SPAN",{});var h=k(r);c=$(h,i[3]),h.forEach(a),d.forEach(a),this.h()},h(){l(t,"stroke-linecap","round"),l(t,"stroke-linejoin","round"),l(t,"stroke-width","2"),l(t,"d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"),l(s,"xmlns","http://www.w3.org/2000/svg"),l(s,"class","stroke-current shrink-0 h-6 w-6"),l(s,"fill","none"),l(s,"viewBox","0 0 24 24"),l(e,"class","alert alert-error mb-4")},m(u,d){C(u,e,d),o(e,s),o(s,t),o(e,n),o(e,r),o(r,c)},p(u,d){d&8&&Ee(c,u[3])},d(u){u&&a(e)}}}function Ft(i){let e;return{c(){e=ee("Continue")},l(s){e=$(s,"Continue")},m(s,t){C(s,e,t)},d(s){s&&a(e)}}}function qt(i){let e,s;return{c(){e=p("span"),s=ee(`
            Saving...`),this.h()},l(t){e=f(t,"SPAN",{class:!0}),k(e).forEach(a),s=$(t,`
            Saving...`),this.h()},h(){l(e,"class","loading loading-spinner")},m(t,n){C(t,e,n),C(t,s,n)},d(t){t&&(a(e),a(s))}}}function Gt(i){let e,s,t,n,r="Choose Your Nickname",c,u,d="Pick a display name that others will see. You can change this later in your profile settings.",v,h,m='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="text-sm"><p class="font-bold">This is how you&#39;ll appear to others</p> <p>Your nickname will be shown instead of your public key throughout the system.</p></div>',_,b,g='<svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <div class="text-sm"><p class="font-bold">Nickname required for permissions</p> <p>You must set a nickname to appear on the admin permissions list. Without a nickname, admins cannot grant you additional access to other areas.</p></div>',T,M,S,O,N="Nickname / Handle",x,w,A=i[0].length+"",W,F,R,y,P,j,K,X,V,U,E,D,G="You can add an avatar and update your profile anytime in Settings.",Z,oe;function ke(z,le){return z[4]?Rt:Wt}let Y=ke(i),se=Y(i),q=i[3]&&ot(i);function pe(z,le){return z[2]?qt:Ft}let be=pe(i),he=be(i);return{c(){e=p("div"),s=p("div"),t=p("div"),n=p("h2"),n.textContent=r,c=L(),u=p("p"),u.textContent=d,v=L(),h=p("div"),h.innerHTML=m,_=L(),b=p("div"),b.innerHTML=g,T=L(),M=p("div"),S=p("label"),O=p("span"),O.textContent=N,x=L(),w=p("span"),W=ee(A),F=ee("/50"),R=L(),y=p("input"),P=L(),se.c(),j=L(),q&&q.c(),K=L(),X=p("div"),V=p("button"),he.c(),E=L(),D=p("p"),D.textContent=G,this.h()},l(z){e=f(z,"DIV",{class:!0});var le=k(e);s=f(le,"DIV",{class:!0});var ve=k(s);t=f(ve,"DIV",{class:!0});var te=k(t);n=f(te,"H2",{class:!0,"data-svelte-h":!0}),H(n)!=="svelte-18uxpuw"&&(n.textContent=r),c=I(te),u=f(te,"P",{class:!0,"data-svelte-h":!0}),H(u)!=="svelte-h06ju"&&(u.textContent=d),v=I(te),h=f(te,"DIV",{class:!0,"data-svelte-h":!0}),H(h)!=="svelte-15p70ua"&&(h.innerHTML=m),_=I(te),b=f(te,"DIV",{class:!0,"data-svelte-h":!0}),H(b)!=="svelte-1ir8gd0"&&(b.innerHTML=g),T=I(te),M=f(te,"DIV",{class:!0});var _e=k(M);S=f(_e,"LABEL",{class:!0,for:!0});var Te=k(S);O=f(Te,"SPAN",{class:!0,"data-svelte-h":!0}),H(O)!=="svelte-1u308jh"&&(O.textContent=N),x=I(Te),w=f(Te,"SPAN",{class:!0});var xe=k(w);W=$(xe,A),F=$(xe,"/50"),xe.forEach(a),Te.forEach(a),R=I(_e),y=f(_e,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0,maxlength:!0}),P=I(_e),se.l(_e),_e.forEach(a),j=I(te),q&&q.l(te),K=I(te),X=f(te,"DIV",{class:!0});var me=k(X);V=f(me,"BUTTON",{class:!0});var ne=k(V);he.l(ne),ne.forEach(a),me.forEach(a),E=I(te),D=f(te,"P",{class:!0,"data-svelte-h":!0}),H(D)!=="svelte-1dfs5vl"&&(D.textContent=G),te.forEach(a),ve.forEach(a),le.forEach(a),this.h()},h(){l(n,"class","card-title text-2xl justify-center mb-2"),l(u,"class","text-center text-base-content/70 mb-4"),l(h,"class","alert alert-info mb-4"),l(b,"class","alert alert-warning mb-4"),l(O,"class","label-text font-semibold"),l(w,"class","label-text-alt text-base-content/50"),l(S,"class","label"),l(S,"for","nickname-input"),l(y,"type","text"),l(y,"id","nickname-input"),l(y,"placeholder","e.g., Alice, Bob123, CoolUser"),l(y,"class","input input-bordered input-lg w-full"),l(y,"maxlength","50"),y.disabled=i[2],Ze(y,"input-error",i[4]),l(M,"class","form-control mb-4"),l(V,"class","btn btn-primary btn-lg w-full"),V.disabled=U=!i[1]||i[2],l(X,"class","card-actions flex-col gap-2 mt-4"),l(D,"class","text-xs text-center text-base-content/50 mt-4"),l(t,"class","card-body"),l(s,"class","card w-full max-w-md bg-base-100 shadow-xl"),l(e,"class","flex flex-col items-center justify-center min-h-screen p-4 bg-base-200")},m(z,le){C(z,e,le),o(e,s),o(s,t),o(t,n),o(t,c),o(t,u),o(t,v),o(t,h),o(t,_),o(t,b),o(t,T),o(t,M),o(M,S),o(S,O),o(S,x),o(S,w),o(w,W),o(w,F),o(M,R),o(M,y),Be(y,i[0]),o(M,P),se.m(M,null),o(t,j),q&&q.m(t,null),o(t,K),o(t,X),o(X,V),he.m(V,null),o(t,E),o(t,D),Z||(oe=[Q(y,"input",i[7]),Q(y,"keydown",i[8]),Q(V,"click",i[5])],Z=!0)},p(z,[le]){le&1&&A!==(A=z[0].length+"")&&Ee(W,A),le&4&&(y.disabled=z[2]),le&1&&y.value!==z[0]&&Be(y,z[0]),le&16&&Ze(y,"input-error",z[4]),Y===(Y=ke(z))&&se?se.p(z,le):(se.d(1),se=Y(z),se&&(se.c(),se.m(M,null))),z[3]?q?q.p(z,le):(q=ot(z),q.c(),q.m(t,K)):q&&(q.d(1),q=null),be!==(be=pe(z))&&(he.d(1),he=be(z),he&&(he.c(),he.m(V,null))),le&6&&U!==(U=!z[1]||z[2])&&(V.disabled=U)},i:fe,o:fe,d(z){z&&a(e),se.d(),q&&q.d(),he.d(),Z=!1,ze(oe)}}}function Jt(i,e,s){let t,n,{publicKey:r}=e;const c=je();let u="",d=!1,v=null;async function h(){if(t){s(2,d=!0),s(3,v=null);try{if(!Ct()){const T=J.getPrivkey(),M=T?pt.bytesToHex(T):null;await Et({privateKey:M})}const b=Tt();if(!b)throw new Error("Failed to initialize NDK");const g=new It(b);g.kind=0,g.content=JSON.stringify({name:u.trim(),display_name:u.trim()}),await g.sign(),await g.publish(),J.setProfile(u.trim(),null),At.updateCurrentUserProfile(r,u.trim(),null),c("continue",{nickname:u.trim()})}catch(b){console.error("[NicknameSetup] Failed to publish profile:",b),s(3,v=b instanceof Error?b.message:"Failed to save profile")}finally{s(2,d=!1)}}}function m(){u=this.value,s(0,u)}const _=b=>b.key==="Enter"&&t&&h();return i.$$set=b=>{"publicKey"in b&&s(6,r=b.publicKey)},i.$$.update=()=>{i.$$.dirty&1&&s(1,t=u.trim().length>=2&&u.trim().length<=50),i.$$.dirty&3&&s(4,n=u.length>0&&!t?u.trim().length<2?"Nickname must be at least 2 characters":"Nickname must be 50 characters or less":null)},[u,t,d,v,n,h,r,m,_]}class Qt extends Le{constructor(e){super(),Me(this,e,Jt,Gt,Ie,{publicKey:6})}}function Xt(i){let e,s,t,n,r,c;return{c(){e=p("div"),s=p("div"),t=ae("svg"),n=ae("path"),this.h()},l(u){e=f(u,"DIV",{class:!0,"data-tip":!0});var d=k(e);s=f(d,"DIV",{class:!0,"data-tip":!0});var v=k(s);t=ie(v,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var h=k(t);n=ie(h,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),k(n).forEach(a),h.forEach(a),v.forEach(a),d.forEach(a),this.h()},h(){l(n,"stroke-linecap","round"),l(n,"stroke-linejoin","round"),l(n,"stroke-width","2"),l(n,"d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),l(t,"xmlns","http://www.w3.org/2000/svg"),l(t,"class","h-4 w-4 text-base-content/60 hover:text-info cursor-help transition-colors"),l(t,"fill","none"),l(t,"viewBox","0 0 24 24"),l(t,"stroke","currentColor"),l(s,"class",r="tooltip tooltip-"+i[1]+" svelte-kacsoa"),l(s,"data-tip",i[0]),l(e,"class",c="info-tooltip "+(i[2]?"inline-block":"")+" svelte-kacsoa"),l(e,"data-tip",i[0])},m(u,d){C(u,e,d),o(e,s),o(s,t),o(t,n)},p(u,[d]){d&2&&r!==(r="tooltip tooltip-"+u[1]+" svelte-kacsoa")&&l(s,"class",r),d&1&&l(s,"data-tip",u[0]),d&4&&c!==(c="info-tooltip "+(u[2]?"inline-block":"")+" svelte-kacsoa")&&l(e,"class",c),d&1&&l(e,"data-tip",u[0])},i:fe,o:fe,d(u){u&&a(e)}}}function Zt(i,e,s){let{text:t}=e,{position:n="top"}=e,{maxWidth:r="300px"}=e,{inline:c=!1}=e;return i.$$set=u=>{"text"in u&&s(0,t=u.text),"position"in u&&s(1,n=u.position),"maxWidth"in u&&s(3,r=u.maxWidth),"inline"in u&&s(2,c=u.inline)},[t,n,c,r]}class $t extends Le{constructor(e){super(),Me(this,e,Zt,Xt,Ie,{text:0,position:1,maxWidth:3,inline:2})}}function es(i){let e,s,t;return{c(){e=ae("svg"),s=ae("path"),t=ee(`
            Sign in with passkey`),this.h()},l(n){e=ie(n,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var r=k(e);s=ie(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),k(s).forEach(a),r.forEach(a),t=$(n,`
            Sign in with passkey`),this.h()},h(){l(s,"stroke-linecap","round"),l(s,"stroke-linejoin","round"),l(s,"stroke-width","2"),l(s,"d","M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"class","h-6 w-6"),l(e,"fill","none"),l(e,"viewBox","0 0 24 24"),l(e,"stroke","currentColor")},m(n,r){C(n,e,r),o(e,s),C(n,t,r)},d(n){n&&(a(e),a(t))}}}function ts(i){let e,s,t,n="Checking approval status...";return{c(){e=p("span"),s=L(),t=p("span"),t.textContent=n,this.h()},l(r){e=f(r,"SPAN",{class:!0,"aria-hidden":!0}),k(e).forEach(a),s=I(r),t=f(r,"SPAN",{"data-svelte-h":!0}),H(t)!=="svelte-165kt37"&&(t.textContent=n),this.h()},h(){l(e,"class","loading loading-spinner"),l(e,"aria-hidden","true")},m(r,c){C(r,e,c),C(r,s,c),C(r,t,c)},d(r){r&&(a(e),a(s),a(t))}}}function ss(i){let e,s,t,n="Authenticating...";return{c(){e=p("span"),s=L(),t=p("span"),t.textContent=n,this.h()},l(r){e=f(r,"SPAN",{class:!0,"aria-hidden":!0}),k(e).forEach(a),s=I(r),t=f(r,"SPAN",{"data-svelte-h":!0}),H(t)!=="svelte-1htiwf6"&&(t.textContent=n),this.h()},h(){l(e,"class","loading loading-spinner"),l(e,"aria-hidden","true")},m(r,c){C(r,e,c),C(r,s,c),C(r,t,c)},d(r){r&&(a(e),a(s),a(t))}}}function ct(i){let e,s,t,n,r="Use a compatible browser extension (Alby, nos2x, etc.)",c,u;function d(m,_){return m[1]?ls:ns}let v=d(i),h=v(i);return{c(){e=p("div"),s=p("button"),h.c(),t=L(),n=p("p"),n.textContent=r,this.h()},l(m){e=f(m,"DIV",{class:!0});var _=k(e);s=f(_,"BUTTON",{class:!0,"aria-busy":!0});var b=k(s);h.l(b),b.forEach(a),t=I(_),n=f(_,"P",{class:!0,"data-svelte-h":!0}),H(n)!=="svelte-16a3ge0"&&(n.textContent=r),_.forEach(a),this.h()},h(){l(s,"class","btn btn-outline w-full gap-2"),s.disabled=i[8],l(s,"aria-busy",i[1]),l(n,"class","text-xs text-center text-base-content/60 mt-1"),l(e,"class","mb-4")},m(m,_){C(m,e,_),o(e,s),h.m(s,null),o(e,t),o(e,n),c||(u=Q(s,"click",i[12]),c=!0)},p(m,_){v!==(v=d(m))&&(h.d(1),h=v(m),h&&(h.c(),h.m(s,null))),_&256&&(s.disabled=m[8]),_&2&&l(s,"aria-busy",m[1])},d(m){m&&a(e),h.d(),c=!1,u()}}}function ns(i){let e,s,t;return{c(){e=ae("svg"),s=ae("path"),t=ee(`
              Sign in with browser extension`),this.h()},l(n){e=ie(n,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var r=k(e);s=ie(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),k(s).forEach(a),r.forEach(a),t=$(n,`
              Sign in with browser extension`),this.h()},h(){l(s,"stroke-linecap","round"),l(s,"stroke-linejoin","round"),l(s,"stroke-width","2"),l(s,"d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"class","h-5 w-5"),l(e,"fill","none"),l(e,"viewBox","0 0 24 24"),l(e,"stroke","currentColor")},m(n,r){C(n,e,r),o(e,s),C(n,t,r)},d(n){n&&(a(e),a(t))}}}function ls(i){let e,s,t,n="Connecting to extension...";return{c(){e=p("span"),s=L(),t=p("span"),t.textContent=n,this.h()},l(r){e=f(r,"SPAN",{class:!0,"aria-hidden":!0}),k(e).forEach(a),s=I(r),t=f(r,"SPAN",{"data-svelte-h":!0}),H(t)!=="svelte-kvbc4q"&&(t.textContent=n),this.h()},h(){l(e,"class","loading loading-spinner"),l(e,"aria-hidden","true")},m(r,c){C(r,e,c),C(r,s,c),C(r,t,c)},d(r){r&&(a(e),a(s),a(t))}}}function ut(i){let e,s='<svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-5 w-5" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <span class="text-xs">Your private key will be stored locally. Anyone with access to this browser can use your account.</span>';return{c(){e=p("div"),e.innerHTML=s,this.h()},l(t){e=f(t,"DIV",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-u3nkdn"&&(e.innerHTML=s),this.h()},h(){l(e,"class","alert alert-warning py-2 mt-2")},m(t,n){C(t,e,n)},d(t){t&&a(e)}}}function rs(i){let e;return{c(){e=ee("Log In with Private Key")},l(s){e=$(s,"Log In with Private Key")},m(s,t){C(s,e,t)},d(s){s&&a(e)}}}function is(i){let e,s,t,n="Checking approval status...";return{c(){e=p("span"),s=L(),t=p("span"),t.textContent=n,this.h()},l(r){e=f(r,"SPAN",{class:!0,"aria-hidden":!0}),k(e).forEach(a),s=I(r),t=f(r,"SPAN",{"data-svelte-h":!0}),H(t)!=="svelte-165kt37"&&(t.textContent=n),this.h()},h(){l(e,"class","loading loading-spinner"),l(e,"aria-hidden","true")},m(r,c){C(r,e,c),C(r,s,c),C(r,t,c)},d(r){r&&(a(e),a(s),a(t))}}}function as(i){let e,s,t,n="Validating key...";return{c(){e=p("span"),s=L(),t=p("span"),t.textContent=n,this.h()},l(r){e=f(r,"SPAN",{class:!0,"aria-hidden":!0}),k(e).forEach(a),s=I(r),t=f(r,"SPAN",{"data-svelte-h":!0}),H(t)!=="svelte-gew4fa"&&(t.textContent=n),this.h()},h(){l(e,"class","loading loading-spinner"),l(e,"aria-hidden","true")},m(r,c){C(r,e,c),C(r,s,c),C(r,t,c)},d(r){r&&(a(e),a(s),a(t))}}}function dt(i){let e,s,t,n,r,c=(i[5]||i[9].error)+"",u;return{c(){e=p("div"),s=ae("svg"),t=ae("path"),n=L(),r=p("span"),u=ee(c),this.h()},l(d){e=f(d,"DIV",{class:!0});var v=k(e);s=ie(v,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var h=k(s);t=ie(h,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),k(t).forEach(a),h.forEach(a),n=I(v),r=f(v,"SPAN",{});var m=k(r);u=$(m,c),m.forEach(a),v.forEach(a),this.h()},h(){l(t,"stroke-linecap","round"),l(t,"stroke-linejoin","round"),l(t,"stroke-width","2"),l(t,"d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"),l(s,"xmlns","http://www.w3.org/2000/svg"),l(s,"class","stroke-current shrink-0 h-6 w-6"),l(s,"fill","none"),l(s,"viewBox","0 0 24 24"),l(e,"class","alert alert-error mb-4")},m(d,v){C(d,e,v),o(e,s),o(s,t),o(e,n),o(e,r),o(r,u)},p(d,v){v&544&&c!==(c=(d[5]||d[9].error)+"")&&Ee(u,c)},d(d){d&&a(e)}}}function os(i){let e,s,t,n,r="Log In",c,u,d,v,h,m,_,b,g="Advanced: sign in with private key",T,M,S,O='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-xs">Enter your private key to access your account</span>',N,x,w,A,W,F,R,y,P,j,K='<span id="private-key-hint" class="label-text-alt text-base-content/50">Enter your secret key in hex format</span>',X,V,U,E,D,G,Z="Remember me on this device",oe,ke,Y,se,q,pe,be="OR",he,z,le="Create an account",ve,te,_e;function Te(B,re){return B[0]?ss:B[3]&&!B[1]&&!B[2]?ts:es}let xe=Te(i),me=xe(i),ne=i[6]&&ct(i);F=new $t({props:{text:"Your secret key is the credential that proves you own your account. It is a 64-character hex string. NEVER share this with anyone.",position:"top",maxWidth:"350px",inline:!0}});let ue=i[7]&&ut();function Re(B,re){return B[2]&&!B[3]?as:B[3]&&B[2]?is:rs}let Ve=Re(i),ge=Ve(i),ce=(i[5]||i[9].error)&&dt(i);return{c(){e=p("div"),s=p("div"),t=p("div"),n=p("h2"),n.textContent=r,c=L(),u=p("div"),d=p("button"),me.c(),h=L(),ne&&ne.c(),m=L(),_=p("details"),b=p("summary"),b.textContent=g,T=L(),M=p("div"),S=p("div"),S.innerHTML=O,N=L(),x=p("div"),w=p("label"),A=p("span"),W=ee(`Private Key
                `),Ne(F.$$.fragment),R=L(),y=p("input"),P=L(),j=p("label"),j.innerHTML=K,X=L(),V=p("div"),U=p("label"),E=p("input"),D=L(),G=p("span"),G.textContent=Z,oe=L(),ue&&ue.c(),ke=L(),Y=p("button"),ge.c(),se=L(),ce&&ce.c(),q=L(),pe=p("div"),pe.textContent=be,he=L(),z=p("button"),z.textContent=le,this.h()},l(B){e=f(B,"DIV",{class:!0});var re=k(e);s=f(re,"DIV",{class:!0});var Fe=k(s);t=f(Fe,"DIV",{class:!0});var de=k(t);n=f(de,"H2",{class:!0,"data-svelte-h":!0}),H(n)!=="svelte-e5mrur"&&(n.textContent=r),c=I(de),u=f(de,"DIV",{class:!0});var qe=k(u);d=f(qe,"BUTTON",{class:!0,"aria-busy":!0});var Ge=k(d);me.l(Ge),Ge.forEach(a),qe.forEach(a),h=I(de),ne&&ne.l(de),m=I(de),_=f(de,"DETAILS",{class:!0});var He=k(_);b=f(He,"SUMMARY",{class:!0,"data-svelte-h":!0}),H(b)!=="svelte-1yjwxmn"&&(b.textContent=g),T=I(He),M=f(He,"DIV",{class:!0});var Ce=k(M);S=f(Ce,"DIV",{class:!0,"data-svelte-h":!0}),H(S)!=="svelte-ukmcj1"&&(S.innerHTML=O),N=I(Ce),x=f(Ce,"DIV",{class:!0});var De=k(x);w=f(De,"LABEL",{class:!0,for:!0});var Je=k(w);A=f(Je,"SPAN",{class:!0});var Ye=k(A);W=$(Ye,`Private Key
                `),Se(F.$$.fragment,Ye),Ye.forEach(a),Je.forEach(a),R=I(De),y=f(De,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0,autocomplete:!0,"aria-describedby":!0}),P=I(De),j=f(De,"LABEL",{class:!0,"data-svelte-h":!0}),H(j)!=="svelte-1m305m6"&&(j.innerHTML=K),De.forEach(a),X=I(Ce),V=f(Ce,"DIV",{class:!0});var Ke=k(V);U=f(Ke,"LABEL",{class:!0});var Ue=k(U);E=f(Ue,"INPUT",{type:!0,class:!0}),D=I(Ue),G=f(Ue,"SPAN",{class:!0,"data-svelte-h":!0}),H(G)!=="svelte-1yibmld"&&(G.textContent=Z),Ue.forEach(a),oe=I(Ke),ue&&ue.l(Ke),Ke.forEach(a),ke=I(Ce),Y=f(Ce,"BUTTON",{class:!0,"aria-busy":!0});var Qe=k(Y);ge.l(Qe),Qe.forEach(a),Ce.forEach(a),He.forEach(a),se=I(de),ce&&ce.l(de),q=I(de),pe=f(de,"DIV",{class:!0,"data-svelte-h":!0}),H(pe)!=="svelte-cr75gt"&&(pe.textContent=be),he=I(de),z=f(de,"BUTTON",{class:!0,"data-svelte-h":!0}),H(z)!=="svelte-7j58ox"&&(z.textContent=le),de.forEach(a),Fe.forEach(a),re.forEach(a),this.h()},h(){l(n,"class","card-title text-2xl justify-center mb-4"),l(d,"class","btn btn-primary btn-lg w-full gap-2"),d.disabled=i[8],l(d,"aria-busy",v=i[0]||i[3]&&!i[1]&&!i[2]),l(u,"class","mb-4"),l(b,"class","cursor-pointer text-sm text-base-content/60 hover:text-base-content transition-colors select-none"),l(S,"class","alert alert-info mb-3"),l(A,"class","label-text font-medium flex items-center gap-2"),l(w,"class","label"),l(w,"for","private-key-input"),l(y,"id","private-key-input"),l(y,"type","password"),l(y,"class","input input-bordered font-mono"),l(y,"placeholder","Your secret key (64 hex characters)"),y.disabled=i[8],l(y,"autocomplete","off"),l(y,"aria-describedby","private-key-hint"),l(j,"class","label"),l(x,"class","form-control mb-3"),l(E,"type","checkbox"),l(E,"class","checkbox checkbox-sm"),E.disabled=i[8],l(G,"class","label-text"),l(U,"class","cursor-pointer label justify-start gap-2"),l(V,"class","form-control mb-3"),l(Y,"class","btn btn-primary w-full"),Y.disabled=i[8],l(Y,"aria-busy",i[2]),l(M,"class","mt-4"),l(_,"class","mb-4"),l(pe,"class","divider"),l(z,"class","btn btn-ghost btn-sm"),l(t,"class","card-body"),l(s,"class","card w-full bg-base-100 shadow-xl"),l(e,"class","w-full max-w-md sm:max-w-lg mx-auto")},m(B,re){C(B,e,re),o(e,s),o(s,t),o(t,n),o(t,c),o(t,u),o(u,d),me.m(d,null),o(t,h),ne&&ne.m(t,null),o(t,m),o(t,_),o(_,b),o(_,T),o(_,M),o(M,S),o(M,N),o(M,x),o(x,w),o(w,A),o(A,W),Pe(F,A,null),o(x,R),o(x,y),Be(y,i[4]),o(x,P),o(x,j),o(M,X),o(M,V),o(V,U),o(U,E),E.checked=i[7],o(U,D),o(U,G),o(V,oe),ue&&ue.m(V,null),o(M,ke),o(M,Y),ge.m(Y,null),o(t,se),ce&&ce.m(t,null),o(t,q),o(t,pe),o(t,he),o(t,z),ve=!0,te||(_e=[Q(d,"click",i[11]),Q(y,"input",i[14]),Q(y,"keypress",i[15]),Q(E,"change",i[16]),Q(Y,"click",i[13]),Q(z,"click",i[17])],te=!0)},p(B,[re]){xe!==(xe=Te(B))&&(me.d(1),me=xe(B),me&&(me.c(),me.m(d,null))),(!ve||re&256)&&(d.disabled=B[8]),(!ve||re&15&&v!==(v=B[0]||B[3]&&!B[1]&&!B[2]))&&l(d,"aria-busy",v),B[6]?ne?ne.p(B,re):(ne=ct(B),ne.c(),ne.m(t,m)):ne&&(ne.d(1),ne=null),(!ve||re&256)&&(y.disabled=B[8]),re&16&&y.value!==B[4]&&Be(y,B[4]),(!ve||re&256)&&(E.disabled=B[8]),re&128&&(E.checked=B[7]),B[7]?ue||(ue=ut(),ue.c(),ue.m(V,null)):ue&&(ue.d(1),ue=null),Ve!==(Ve=Re(B))&&(ge.d(1),ge=Ve(B),ge&&(ge.c(),ge.m(Y,null))),(!ve||re&256)&&(Y.disabled=B[8]),(!ve||re&4)&&l(Y,"aria-busy",B[2]),B[5]||B[9].error?ce?ce.p(B,re):(ce=dt(B),ce.c(),ce.m(t,q)):ce&&(ce.d(1),ce=null)},i(B){ve||(ye(F.$$.fragment,B),ve=!0)},o(B){we(F.$$.fragment,B),ve=!1},d(B){B&&a(e),me.d(),ne&&ne.d(),Ae(F),ue&&ue.d(),ge.d(),ce&&ce.d(),te=!1,ze(_e)}}}function cs(i,e,s){let t,n;ft(i,J,w=>s(9,n=w));const r=je();let c="",u=!1,d=!1,v=!1,h="",m=!1,_=!1,b=!1;We(async()=>{s(6,_=await Lt(1e3))});async function g(){s(0,u=!0),s(5,h=""),J.clearError();try{const A=(await J.loginWithPasskey()).pubkey;s(3,m=!0);const W=await Oe(A);s(3,m=!1),W.isApproved||W.isAdmin?r("success",{publicKey:A}):r("pending",{publicKey:A})}catch(w){s(5,h=w instanceof Error?w.message:"Passkey sign-in failed")}finally{s(0,u=!1),s(3,m=!1)}}async function T(){s(1,d=!0),s(5,h=""),J.clearError();try{const{publicKey:w}=await J.loginWithExtension();s(3,m=!0);const A=await Oe(w);s(3,m=!1),A.isApproved||A.isAdmin?r("success",{publicKey:w}):r("pending",{publicKey:w})}catch(w){s(5,h=w instanceof Error?w.message:"Failed to connect to extension")}finally{s(1,d=!1),s(3,m=!1)}}async function M(){s(2,v=!0),s(5,h=""),J.clearError();try{if(await new Promise(W=>setTimeout(W,100)),!c.trim()){s(5,h="Please enter your private key");return}const{publicKey:w}=await J.loginWithLocalKey(c.trim(),b);s(4,c=""),s(3,m=!0);const A=await Oe(w);s(3,m=!1),A.isApproved||A.isAdmin?(J.completeSignup(),r("success",{publicKey:w})):r("pending",{publicKey:w})}catch(w){s(5,h=w instanceof Error?w.message:"Invalid private key"),J.setError(h)}finally{s(2,v=!1),s(3,m=!1)}}function S(){c=this.value,s(4,c)}const O=w=>w.key==="Enter"&&M();function N(){b=this.checked,s(7,b)}const x=()=>r("signup");return i.$$.update=()=>{i.$$.dirty&15&&s(8,t=u||d||v||m)},[u,d,v,m,c,h,_,b,t,n,r,g,T,M,S,O,N,x]}class us extends Le{constructor(e){super(),Me(this,e,cs,os,Ie,{})}}function ds(i){let e,s,t;return{c(){e=ae("svg"),s=ae("path"),t=ee(`
            Copy Public Key`),this.h()},l(n){e=ie(n,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var r=k(e);s=ie(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),k(s).forEach(a),r.forEach(a),t=$(n,`
            Copy Public Key`),this.h()},h(){l(s,"stroke-linecap","round"),l(s,"stroke-linejoin","round"),l(s,"stroke-width","2"),l(s,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"class","h-4 w-4"),l(e,"fill","none"),l(e,"viewBox","0 0 24 24"),l(e,"stroke","currentColor")},m(n,r){C(n,e,r),o(e,s),C(n,t,r)},d(n){n&&(a(e),a(t))}}}function fs(i){let e,s,t;return{c(){e=ae("svg"),s=ae("path"),t=ee(`
            Copied!`),this.h()},l(n){e=ie(n,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var r=k(e);s=ie(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),k(s).forEach(a),r.forEach(a),t=$(n,`
            Copied!`),this.h()},h(){l(s,"stroke-linecap","round"),l(s,"stroke-linejoin","round"),l(s,"stroke-width","2"),l(s,"d","M5 13l4 4L19 7"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"class","h-4 w-4"),l(e,"fill","none"),l(e,"viewBox","0 0 24 24"),l(e,"stroke","currentColor")},m(n,r){C(n,e,r),o(e,s),C(n,t,r)},d(n){n&&(a(e),a(t))}}}function ps(i){let e,s,t,n,r='<div class="relative"><div class="w-24 h-24 rounded-full bg-primary/20 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-primary animate-pulse" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <div class="absolute inset-0 rounded-full border-4 border-primary border-t-transparent animate-spin"></div></div>',c,u,d,v=i[3]()+"",h,m,_,b='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="text-sm"><p class="font-bold">Your account has been created!</p> <p>An administrator needs to approve your access before you can join. This usually takes a few minutes.</p></div>',g,T,M,S="Your Public Key:",O,N,x,w,A,W,F,R=`<p class="flex items-center gap-2"><span class="loading loading-ring loading-xs"></span>
          Waiting for admin approval</p> <p class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
          Your keys are saved locally</p> <p class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
          Keep your backup key safe</p>`,y,P,j,K,X="You can close this page and check back later. Your account will be ready once approved.",V,U;function E(Z,oe){return Z[0]?fs:ds}let D=E(i),G=D(i);return{c(){e=p("div"),s=p("div"),t=p("div"),n=p("div"),n.innerHTML=r,c=L(),u=p("h2"),d=ee("Pending Admin Approval"),h=ee(v),m=L(),_=p("div"),_.innerHTML=b,g=L(),T=p("div"),M=p("h3"),M.textContent=S,O=L(),N=p("div"),x=ee(i[1]),w=L(),A=p("button"),G.c(),W=L(),F=p("div"),F.innerHTML=R,y=L(),P=p("div"),j=L(),K=p("p"),K.textContent=X,this.h()},l(Z){e=f(Z,"DIV",{class:!0});var oe=k(e);s=f(oe,"DIV",{class:!0});var ke=k(s);t=f(ke,"DIV",{class:!0});var Y=k(t);n=f(Y,"DIV",{class:!0,"data-svelte-h":!0}),H(n)!=="svelte-hk5023"&&(n.innerHTML=r),c=I(Y),u=f(Y,"H2",{class:!0});var se=k(u);d=$(se,"Pending Admin Approval"),h=$(se,v),se.forEach(a),m=I(Y),_=f(Y,"DIV",{class:!0,"data-svelte-h":!0}),H(_)!=="svelte-1x9j6vt"&&(_.innerHTML=b),g=I(Y),T=f(Y,"DIV",{class:!0});var q=k(T);M=f(q,"H3",{class:!0,"data-svelte-h":!0}),H(M)!=="svelte-1blnqpr"&&(M.textContent=S),O=I(q),N=f(q,"DIV",{class:!0});var pe=k(N);x=$(pe,i[1]),pe.forEach(a),w=I(q),A=f(q,"BUTTON",{class:!0});var be=k(A);G.l(be),be.forEach(a),q.forEach(a),W=I(Y),F=f(Y,"DIV",{class:!0,"data-svelte-h":!0}),H(F)!=="svelte-1m3tr1g"&&(F.innerHTML=R),y=I(Y),P=f(Y,"DIV",{class:!0}),k(P).forEach(a),j=I(Y),K=f(Y,"P",{class:!0,"data-svelte-h":!0}),H(K)!=="svelte-1mmv0uz"&&(K.textContent=X),Y.forEach(a),ke.forEach(a),oe.forEach(a),this.h()},h(){l(n,"class","flex justify-center mb-4"),l(u,"class","card-title text-2xl justify-center mb-2"),l(_,"class","alert alert-info mb-4"),l(M,"class","font-semibold text-sm mb-2"),l(N,"class","bg-base-100 rounded p-3 mb-3 break-all font-mono text-xs"),l(A,"class","btn btn-outline btn-sm btn-block gap-2"),l(T,"class","bg-base-200 rounded-lg p-4 mb-4"),l(F,"class","flex flex-col gap-2 text-sm text-base-content/70"),l(P,"class","divider"),l(K,"class","text-center text-sm text-base-content/70"),l(t,"class","card-body"),l(s,"class","card w-full max-w-lg bg-base-100 shadow-xl"),l(e,"class","flex flex-col items-center justify-center min-h-screen p-4 bg-base-200")},m(Z,oe){C(Z,e,oe),o(e,s),o(s,t),o(t,n),o(t,c),o(t,u),o(u,d),o(u,h),o(t,m),o(t,_),o(t,g),o(t,T),o(T,M),o(T,O),o(T,N),o(N,x),o(T,w),o(T,A),G.m(A,null),o(t,W),o(t,F),o(t,y),o(t,P),o(t,j),o(t,K),V||(U=Q(A,"click",i[2]),V=!0)},p(Z,[oe]){D!==(D=E(Z))&&(G.d(1),G=D(Z),G&&(G.c(),G.m(A,null)))},i:fe,o:fe,d(Z){Z&&a(e),G.d(),V=!1,U()}}}function hs(i,e,s){let{publicKey:t}=e;const n=je();let r=!1,c=0,u,d,v=!1;const h=Pt(t);We(()=>{u=setInterval(()=>{c=(c+1)%4},500),d=setInterval(async()=>{await m()},1e4),m()}),_t(()=>{u&&clearInterval(u),d&&clearInterval(d)});async function m(){if(!v){v=!0;try{const g=await Oe(t);(g.isApproved||g.isAdmin)&&n("approved")}catch(g){console.error("Failed to check approval status:",g)}finally{v=!1}}}async function _(){try{await navigator.clipboard.writeText(h),s(0,r=!0),setTimeout(()=>{s(0,r=!1)},2e3)}catch(g){console.error("Failed to copy:",g)}}const b=()=>".".repeat(c);return i.$$set=g=>{"publicKey"in g&&s(4,t=g.publicKey)},[r,h,_,b,t]}class vs extends Le{constructor(e){super(),Me(this,e,hs,ps,Ie,{publicKey:4})}}function ms(i){let e,s;return e=new vs({props:{publicKey:i[1]}}),e.$on("approved",i[6]),{c(){Ne(e.$$.fragment)},l(t){Se(e.$$.fragment,t)},m(t,n){Pe(e,t,n),s=!0},p(t,n){const r={};n&2&&(r.publicKey=t[1]),e.$set(r)},i(t){s||(ye(e.$$.fragment,t),s=!0)},o(t){we(e.$$.fragment,t),s=!1},d(t){Ae(e,t)}}}function bs(i){let e,s;return e=new us({}),e.$on("success",i[4]),e.$on("pending",i[5]),e.$on("signup",i[8]),{c(){Ne(e.$$.fragment)},l(t){Se(e.$$.fragment,t)},m(t,n){Pe(e,t,n),s=!0},p:fe,i(t){s||(ye(e.$$.fragment,t),s=!0)},o(t){we(e.$$.fragment,t),s=!1},d(t){Ae(e,t)}}}function ks(i){let e,s;return e=new Qt({props:{publicKey:i[1]}}),e.$on("continue",i[3]),{c(){Ne(e.$$.fragment)},l(t){Se(e.$$.fragment,t)},m(t,n){Pe(e,t,n),s=!0},p(t,n){const r={};n&2&&(r.publicKey=t[1]),e.$set(r)},i(t){s||(ye(e.$$.fragment,t),s=!0)},o(t){we(e.$$.fragment,t),s=!1},d(t){Ae(e,t)}}}function _s(i){let e,s;return e=new Yt({}),e.$on("next",i[2]),{c(){Ne(e.$$.fragment)},l(t){Se(e.$$.fragment,t)},m(t,n){Pe(e,t,n),s=!0},p:fe,i(t){s||(ye(e.$$.fragment,t),s=!0)},o(t){we(e.$$.fragment,t),s=!1},d(t){Ae(e,t)}}}function gs(i){let e,s,t,n;const r=[_s,ks,bs,ms],c=[];function u(d,v){return d[0]==="signup"?0:d[0]==="nickname"&&d[1]?1:d[0]==="login"?2:d[0]==="pending-approval"&&d[1]?3:-1}return~(e=u(i))&&(s=c[e]=r[e](i)),{c(){s&&s.c(),t=$e()},l(d){s&&s.l(d),t=$e()},m(d,v){~e&&c[e].m(d,v),C(d,t,v),n=!0},p(d,[v]){let h=e;e=u(d),e===h?~e&&c[e].p(d,v):(s&&(wt(),we(c[h],1,1,()=>{c[h]=null}),yt()),~e?(s=c[e],s?s.p(d,v):(s=c[e]=r[e](d),s.c()),ye(s,1),s.m(t.parentNode,t)):s=null)},i(d){n||(ye(s),n=!0)},o(d){we(s),n=!1},d(d){d&&a(t),~e&&c[e].d(d)}}}function ws(i,e,s){let{initialStep:t="signup"}=e,n=t,r="";const c=je();function u(b){const{publicKey:g}=b.detail;g?(s(1,r=g),s(0,n="nickname")):s(0,n="login")}async function d(){if(r){try{const{checkWhitelistStatus:b}=await Xe(async()=>{const{checkWhitelistStatus:T}=await import("./BPZifr_e.js");return{checkWhitelistStatus:T}},__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),g=await b(r);if(g.isApproved||g.isAdmin){c("complete",{publicKey:r});return}}catch(b){console.warn("[AuthFlow] Failed to check whitelist status:",b)}J.setPending(!0),s(0,n="pending-approval")}}async function v(b){const{publicKey:g}=b.detail;if(g){s(1,r=g);try{const{checkWhitelistStatus:T}=await Xe(async()=>{const{checkWhitelistStatus:S}=await import("./BPZifr_e.js");return{checkWhitelistStatus:S}},__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),M=await T(g);if(M.isApproved||M.isAdmin){c("complete",{publicKey:g});return}}catch(T){console.warn("[AuthFlow] Failed to check whitelist status:",T)}s(0,n="pending-approval")}else s(0,n="signup")}function h(b){const{publicKey:g}=b.detail;s(1,r=g),J.setPending(!0),s(0,n="pending-approval")}async function m(){J.setPending(!1),c("complete",{publicKey:r})}const _=()=>{s(0,n="signup")};return i.$$set=b=>{"initialStep"in b&&s(7,t=b.initialStep)},[n,r,u,d,v,h,m,t,_]}class Ps extends Le{constructor(e){super(),Me(this,e,ws,gs,Ie,{initialStep:7})}}export{Ps as A};
