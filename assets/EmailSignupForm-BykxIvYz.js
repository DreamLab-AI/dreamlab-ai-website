import{r as o,j as e,C as f,b as S}from"./ui-yh-qgxH4.js";import{B as y}from"./button-BNQytKCK.js";import{L as d,I as b,s as v}from"./supabase-DSpLTP30.js";import{a as h,u as l}from"./index-CRR85PwD.js";import{C as N}from"./Header-DU7ovN2S.js";import"./three-B8BJtqwY.js";import"./vendor-BkNSrfR2.js";const g=o.forwardRef(({className:s,...i},n)=>e.jsx(f,{ref:n,className:h("peer h-4 w-4 shrink-0 rounded-sm border border-input ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...i,children:e.jsx(S,{className:h("flex items-center justify-center text-current"),children:e.jsx(N,{className:"h-3.5 w-3.5"})})}));g.displayName=f.displayName;const E="Thanks for signing up! We'll be in touch soon.",j="Please enter a valid email address",k="Please accept our privacy policy to sign up",C="Failed to sign up. Please try again later.",w=/^\S+@\S+\.\S+$/,_="Submitting...",I="Sign Up",B=()=>{const[s,i]=o.useState(""),[n,u]=o.useState(""),[c,m]=o.useState(!1),[t,p]=o.useState(!1),x=async r=>{if(r.preventDefault(),!s.trim()||!w.test(s)){l.error(j);return}if(!c){l.error(k);return}p(!0);try{const{error:a}=await v.from("email_subscribers").upsert({email:s.trim().toLowerCase(),name:n.trim()||null,has_consent:c,source:"website_signup_form"},{onConflict:"email"});if(a)throw console.error("Supabase error:",a),a;i(""),u(""),m(!1),l.success(E)}catch(a){console.error("Error submitting email:",a),l.error(C)}finally{p(!1)}};return e.jsxs("form",{onSubmit:x,className:"w-full max-w-md space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"animate-slide-in-left",style:{animationDelay:"0.1s"},children:[e.jsx(d,{htmlFor:"name-signup",className:"text-sm mb-1 block text-muted-foreground/90",children:"Name (optional)"}),e.jsx(b,{id:"name-signup",type:"text",placeholder:"Your name",value:n,onChange:r=>u(r.target.value),className:"rounded-lg bg-background/60 backdrop-blur-sm border-purple-500/30 placeholder:text-muted-foreground/50 focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all duration-300",disabled:t})]}),e.jsxs("div",{className:"animate-slide-in-right",style:{animationDelay:"0.2s"},children:[e.jsx(d,{htmlFor:"email-signup",className:"text-sm mb-1 block text-muted-foreground/90",children:"Email Address"}),e.jsx(b,{id:"email-signup",type:"email",placeholder:"Your email address",value:s,onChange:r=>i(r.target.value),className:"rounded-lg bg-background/60 backdrop-blur-sm border-purple-500/30 placeholder:text-muted-foreground/50 focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all duration-300",required:!0,disabled:t})]}),e.jsxs("div",{className:"flex items-start gap-2 mt-2 animate-scale-in",style:{animationDelay:"0.3s"},children:[e.jsx(g,{id:"consent",checked:c,onCheckedChange:r=>m(r===!0),disabled:t,className:"mt-1 border-purple-500/50 data-[state=checked]:bg-purple-600 data-[state=checked]:border-purple-600"}),e.jsxs(d,{htmlFor:"consent",className:"text-xs text-muted-foreground/80 leading-tight cursor-pointer hover:text-muted-foreground transition-colors",children:["I agree to receive emails from DreamLab about projects, opportunities, and news. You can unsubscribe at any time. See our ",e.jsx("a",{href:"/privacy",className:"underline hover:text-purple-400 transition-colors",children:"Privacy Policy"})," for more information."]})]})]}),e.jsx(y,{type:"submit",disabled:t,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-purple-600 hover:to-pink-600 text-white font-medium rounded-lg transition-all duration-300 hover:shadow-xl hover:shadow-purple-500/50 hover:scale-[1.02] disabled:opacity-50 disabled:hover:scale-100 disabled:hover:shadow-none animate-scale-in",style:{animationDelay:"0.4s"},children:t?_:I}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Stay updated on our projects & opportunities"})]})};export{B as EmailSignupForm};
