const l=/^[0-9a-f]{64}$/i;function u(t){return l.test(t)}function g(t){const e=[];return typeof t!="string"?(e.push("Content must be a string"),{valid:!1,errors:e}):(t.length>64e3&&e.push("Content exceeds maximum length of 64000 characters"),t.includes("\0")&&e.push("Content contains null bytes"),{valid:e.length===0,errors:e})}function k(t){const e=[];return typeof t!="string"?(e.push("Channel name must be a string"),{valid:!1,errors:e}):(t.length<1&&e.push("Channel name cannot be empty"),t.length>100&&e.push("Channel name too long (max 100 characters)"),/^[\w\s\-'.!?]+$/u.test(t)||e.push("Channel name contains invalid characters"),{valid:e.length===0,errors:e})}const s={message:{capacity:10,refillRate:10/60,tokensPerAction:1},channelCreate:{capacity:2,refillRate:2/3600,tokensPerAction:1},dm:{capacity:20,refillRate:20/60,tokensPerAction:1},api:{capacity:100,refillRate:100/60,tokensPerAction:1},login:{capacity:5,refillRate:5/900,tokensPerAction:1}};class a{buckets=new Map;config;constructor(e){this.config=e}check(e){const i=Date.now()/1e3;let n=this.buckets.get(e);n||(n={tokens:this.config.capacity,lastRefill:i},this.buckets.set(e,n));const o=(i-n.lastRefill)*this.config.refillRate;if(n.tokens=Math.min(this.config.capacity,n.tokens+o),n.lastRefill=i,n.tokens>=this.config.tokensPerAction)return n.tokens-=this.config.tokensPerAction,{allowed:!0,retryAfter:0,remaining:Math.floor(n.tokens)};const c=this.config.tokensPerAction-n.tokens;return{allowed:!1,retryAfter:Math.ceil(c/this.config.refillRate),remaining:0}}reset(e){this.buckets.delete(e)}getRemaining(e){const i=this.buckets.get(e);if(!i)return this.config.capacity;const o=(Date.now()/1e3-i.lastRefill)*this.config.refillRate;return Math.min(this.config.capacity,Math.floor(i.tokens+o))}}const f={message:new a(s.message),channelCreate:new a(s.channelCreate),dm:new a(s.dm),api:new a(s.api),login:new a(s.login)};function p(t,e="default"){return f[t].check(e)}class d extends Error{retryAfter;constructor(e,i){super(e),this.name="RateLimitError",this.retryAfter=i}}export{d as R,g as a,p as c,u as i,k as v};
