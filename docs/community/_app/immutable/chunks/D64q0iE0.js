import{w as u}from"./BrNZSoMP.js";import{B as c}from"./CwRy9Tox.js";const l="Nostr-BBS-read-positions";function m(){const d=JSON.parse(localStorage.getItem(l)||"{}"),{subscribe:a,set:p,update:n}=u(d);function i(t){localStorage.setItem(l,JSON.stringify(t))}return{subscribe:a,setLastRead:(t,e)=>{n(o=>{const r={...o,[t]:e};return i(r),r})},getLastRead:t=>c({subscribe:a})[t]||0,getUnreadCount:(t,e)=>{const r=c({subscribe:a})[t]||0;return e.filter(s=>s.createdAt>r).length},markAllRead:(t,e)=>{if(e.length===0)return;const o=Math.max(...e.map(r=>r.createdAt));n(r=>{const s={...r,[t]:o};return i(s),s})},clearChannel:t=>{n(e=>{const o={...e};return delete o[t],i(o),o})},clearAll:()=>{p({}),localStorage.removeItem(l)}}}const f=m();export{f as l};
