const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CHLmt3N8.js","./CmsKOCeN.js","./Box6chXe.js","./CwRy9Tox.js","./BToyndCo.js"])))=>i.map(i=>d[i]);
import{_ as Ke}from"./CmsKOCeN.js";import{w as He,d as Pe}from"./Box6chXe.js";import{B as Fe,s as de,n as ce,d as f,i as C,g as N,x as te,j as L,C as Re,r as me,P as Ne,b as c,q as R,l as u,c as w,e as _,o as F,h as k,V as Ye,a as le,f as se,t as ae,u as V,v as q,w as Le,K as Ge,A as ee,L as Je,p as We}from"./CwRy9Tox.js";import{S as he,i as be,t as X,a as Y,g as je,c as Oe,d as pe,m as ve,b as _e,e as ge,f as Qe}from"./D-vqeeah.js";import{p as De}from"./Cgcvo8-k.js";import{g as xe}from"./9tEgXtNp.js";import{A as Xe}from"./CJcYv5Rm.js";import{c as Ze,m as ze}from"./C8JcX2X-.js";import{f as $e}from"./CHLmt3N8.js";const et={channels:[],messages:{},selectedChannelId:null,joinRequests:[],isLoading:!1},O=He(et);function tt(){return Fe(O)}const St={subscribe:O.subscribe,setChannels:s=>{O.update(e=>({...e,channels:s}))},addChannel:s=>{O.update(e=>({...e,channels:[...e.channels,s]}))},selectChannel:s=>{O.update(e=>({...e,selectedChannelId:s}))},setMessages:(s,e)=>{O.update(t=>({...t,messages:{...t.messages,[s]:e}}))},addMessage:s=>{O.update(e=>{const t=e.messages[s.channelId]||[];return{...e,messages:{...e.messages,[s.channelId]:[...t,s]}}})},deleteMessage:(s,e)=>{O.update(t=>({...t,messages:{...t.messages,[s]:(t.messages[s]||[]).filter(l=>l.id!==e)}}))},requestJoin:(s,e)=>{const t={channelId:s,requesterPubkey:e,status:"pending",createdAt:Date.now()};O.update(l=>({...l,joinRequests:[...l.joinRequests,t]}))},getMemberStatus:(s,e)=>{if(!e)return"non-member";const l=tt().channels.find(a=>a.id===s);return l?l.admins.includes(e)?"admin":l.members.includes(e)?"member":l.pendingRequests.includes(e)?"pending":"non-member":"non-member"},approveMember:(s,e)=>{O.update(t=>({...t,channels:t.channels.map(l=>l.id!==s?l:{...l,members:l.members.includes(e)?l.members:[...l.members,e],pendingRequests:l.pendingRequests.filter(a=>a!==e)})}))},setLoading:s=>{O.update(e=>({...e,isLoading:s}))}};let oe=null,fe=null;function lt(){return oe||(oe=Pe(O,s=>s.channels.find(e=>e.id===s.selectedChannelId)||null)),oe}function st(){return fe||(Ke(async()=>{const{authStore:s}=await import("./CHLmt3N8.js").then(e=>e.Y);return{authStore:s}},__vite__mapDeps([0,1,2,3,4]),import.meta.url).then(({authStore:s})=>{const e=lt();fe=Pe([e,s],([t,l])=>{if(!t||!l.publicKey)return"non-member";const a=l.publicKey;return t.admins.includes(a)?"admin":t.members.includes(a)?"member":t.pendingRequests.includes(a)?"pending":"non-member"})}),He("non-member"))}const Tt={subscribe:s=>st().subscribe(s)};function at(s){let e,t,l,a;function r(o,d){return o[5]?it:rt}let n=r(s),i=n(s);return{c(){e=k("button"),i.c(),this.h()},l(o){e=w(o,"BUTTON",{class:!0});var d=_(e);i.l(d),d.forEach(f),this.h()},h(){u(e,"class",t="btn "+(s[5]?"btn-error":"btn-ghost")+" btn-sm")},m(o,d){C(o,e,d),i.m(e,null),l||(a=R(e,"click",s[6]),l=!0)},p(o,d){n!==(n=r(o))&&(i.d(1),i=n(o),i&&(i.c(),i.m(e,null))),d&32&&t!==(t="btn "+(o[5]?"btn-error":"btn-ghost")+" btn-sm")&&u(e,"class",t)},d(o){o&&f(e),i.d(),l=!1,a()}}}function nt(s){let e,t,l,a,r;function n(v,h){return v[5]?ot:ut}let i=n(s),o=i(s),d=s[1]&&Se(s);return{c(){e=k("button"),o.c(),t=L(),d&&d.c(),this.h()},l(v){e=w(v,"BUTTON",{class:!0,"aria-label":!0});var h=_(e);o.l(h),t=N(h),d&&d.l(h),h.forEach(f),this.h()},h(){u(e,"class","btn btn-ghost btn-xs"),u(e,"aria-label",l=s[5]?"Unmute user":"Mute user")},m(v,h){C(v,e,h),o.m(e,null),c(e,t),d&&d.m(e,null),a||(r=R(e,"click",s[6]),a=!0)},p(v,h){i!==(i=n(v))&&(o.d(1),o=i(v),o&&(o.c(),o.m(e,t))),v[1]?d?d.p(v,h):(d=Se(v),d.c(),d.m(e,null)):d&&(d.d(1),d=null),h&32&&l!==(l=v[5]?"Unmute user":"Mute user")&&u(e,"aria-label",l)},d(v){v&&f(e),o.d(),d&&d.d(),a=!1,r()}}}function rt(s){let e,t,l,a,r,n="Mute User";return{c(){e=q("svg"),t=q("path"),l=q("path"),a=L(),r=k("span"),r.textContent=n,this.h()},l(i){e=V(i,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var o=_(e);t=V(o,"path",{d:!0}),_(t).forEach(f),l=V(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(l).forEach(f),o.forEach(f),a=N(i),r=w(i,"SPAN",{"data-svelte-h":!0}),F(r)!=="svelte-1m9o542"&&(r.textContent=n),this.h()},h(){u(t,"d","M10 12a2 2 0 100-4 2 2 0 000 4z"),u(l,"fill-rule","evenodd"),u(l,"d","M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"),u(l,"clip-rule","evenodd"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"class","h-5 w-5"),u(e,"viewBox","0 0 20 20"),u(e,"fill","currentColor")},m(i,o){C(i,e,o),c(e,t),c(e,l),C(i,a,o),C(i,r,o)},d(i){i&&(f(e),f(a),f(r))}}}function it(s){let e,t,l,a,r,n="Unmute User";return{c(){e=q("svg"),t=q("path"),l=q("path"),a=L(),r=k("span"),r.textContent=n,this.h()},l(i){e=V(i,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var o=_(e);t=V(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(t).forEach(f),l=V(o,"path",{d:!0}),_(l).forEach(f),o.forEach(f),a=N(i),r=w(i,"SPAN",{"data-svelte-h":!0}),F(r)!=="svelte-1smeqx1"&&(r.textContent=n),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z"),u(t,"clip-rule","evenodd"),u(l,"d","M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"class","h-5 w-5"),u(e,"viewBox","0 0 20 20"),u(e,"fill","currentColor")},m(i,o){C(i,e,o),c(e,t),c(e,l),C(i,a,o),C(i,r,o)},d(i){i&&(f(e),f(a),f(r))}}}function ut(s){let e,t,l;return{c(){e=q("svg"),t=q("path"),l=q("path"),this.h()},l(a){e=V(a,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var r=_(e);t=V(r,"path",{d:!0}),_(t).forEach(f),l=V(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(l).forEach(f),r.forEach(f),this.h()},h(){u(t,"d","M10 12a2 2 0 100-4 2 2 0 000 4z"),u(l,"fill-rule","evenodd"),u(l,"d","M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"),u(l,"clip-rule","evenodd"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"class","h-4 w-4"),u(e,"viewBox","0 0 20 20"),u(e,"fill","currentColor")},m(a,r){C(a,e,r),c(e,t),c(e,l)},d(a){a&&f(e)}}}function ot(s){let e,t,l;return{c(){e=q("svg"),t=q("path"),l=q("path"),this.h()},l(a){e=V(a,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var r=_(e);t=V(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(t).forEach(f),l=V(r,"path",{d:!0}),_(l).forEach(f),r.forEach(f),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z"),u(t,"clip-rule","evenodd"),u(l,"d","M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"class","h-4 w-4"),u(e,"viewBox","0 0 20 20"),u(e,"fill","currentColor")},m(a,r){C(a,e,r),c(e,t),c(e,l)},d(a){a&&f(e)}}}function Se(s){let e,t=s[5]?"Unmute":"Mute",l;return{c(){e=k("span"),l=ae(t),this.h()},l(a){e=w(a,"SPAN",{class:!0});var r=_(e);l=se(r,t),r.forEach(f),this.h()},h(){u(e,"class","ml-1")},m(a,r){C(a,e,r),c(e,l)},p(a,r){r&32&&t!==(t=a[5]?"Unmute":"Mute")&&le(l,t)},d(a){a&&f(e)}}}function Te(s){let e,t,l,a="Mute User",r,n,i="Are you sure you want to mute this user? You won't see their messages, DMs, or notifications.",o,d,v,h='<span class="label-text">Reason (optional)</span>',b,y,z,m,p,E="Cancel",g,S,M="Mute User",K,T,Z,$;return{c(){e=k("div"),t=k("div"),l=k("h3"),l.textContent=a,r=L(),n=k("p"),n.textContent=i,o=L(),d=k("div"),v=k("label"),v.innerHTML=h,b=L(),y=k("input"),z=L(),m=k("div"),p=k("button"),p.textContent=E,g=L(),S=k("button"),S.textContent=M,K=L(),T=k("div"),this.h()},l(B){e=w(B,"DIV",{class:!0});var U=_(e);t=w(U,"DIV",{class:!0});var x=_(t);l=w(x,"H3",{class:!0,"data-svelte-h":!0}),F(l)!=="svelte-toefa9"&&(l.textContent=a),r=N(x),n=w(x,"P",{class:!0,"data-svelte-h":!0}),F(n)!=="svelte-2x92m8"&&(n.textContent=i),o=N(x),d=w(x,"DIV",{class:!0});var G=_(d);v=w(G,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),F(v)!=="svelte-ortkjm"&&(v.innerHTML=h),b=N(G),y=w(G,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),G.forEach(f),z=N(x),m=w(x,"DIV",{class:!0});var P=_(m);p=w(P,"BUTTON",{class:!0,"data-svelte-h":!0}),F(p)!=="svelte-b4k9mk"&&(p.textContent=E),g=N(P),S=w(P,"BUTTON",{class:!0,"data-svelte-h":!0}),F(S)!=="svelte-t8h8jt"&&(S.textContent=M),P.forEach(f),x.forEach(f),K=N(U),T=w(U,"DIV",{class:!0}),_(T).forEach(f),U.forEach(f),this.h()},h(){u(l,"class","font-bold text-lg"),u(n,"class","py-4"),u(v,"class","label"),u(v,"for","mute-reason"),u(y,"id","mute-reason"),u(y,"type","text"),u(y,"placeholder","Why are you muting this user?"),u(y,"class","input input-bordered"),u(d,"class","form-control"),u(p,"class","btn btn-ghost"),u(S,"class","btn btn-error"),u(m,"class","modal-action"),u(t,"class","modal-box"),u(T,"class","modal-backdrop svelte-1jdm9d6"),u(e,"class","modal modal-open")},m(B,U){C(B,e,U),c(e,t),c(t,l),c(t,r),c(t,n),c(t,o),c(t,d),c(d,v),c(d,b),c(d,y),Ne(y,s[3]),c(t,z),c(t,m),c(m,p),c(m,g),c(m,S),c(e,K),c(e,T),Z||($=[R(y,"input",s[10]),R(p,"click",s[8]),R(S,"click",s[7]),R(T,"click",s[8])],Z=!0)},p(B,U){U&8&&y.value!==B[3]&&Ne(y,B[3])},d(B){B&&f(e),Z=!1,me($)}}}function ft(s){let e,t;function l(i,o){return i[0]?nt:at}let a=l(s),r=a(s),n=s[2]&&Te(s);return{c(){r.c(),e=L(),n&&n.c(),t=te()},l(i){r.l(i),e=N(i),n&&n.l(i),t=te()},m(i,o){r.m(i,o),C(i,e,o),n&&n.m(i,o),C(i,t,o)},p(i,[o]){a===(a=l(i))&&r?r.p(i,o):(r.d(1),r=a(i),r&&(r.c(),r.m(e.parentNode,e))),i[2]?n?n.p(i,o):(n=Te(i),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:ce,o:ce,d(i){i&&(f(e),f(t)),r.d(i),n&&n.d(i)}}}function ct(s,e,t){let l,a,r=ce,n=()=>(r(),r=Ye(l,E=>t(5,a=E)),l);s.$$.on_destroy.push(()=>r());let{pubkey:i}=e,{compact:o=!1}=e,{showLabel:d=!0}=e;const v=Re();let h=!1,b="";function y(){a?(ze.unmuteUser(i),v("unmuted")):t(2,h=!0)}function z(){ze.muteUser(i,b||void 0),t(2,h=!1),t(3,b=""),v("muted")}function m(){t(2,h=!1),t(3,b="")}function p(){b=this.value,t(3,b)}return s.$$set=E=>{"pubkey"in E&&t(9,i=E.pubkey),"compact"in E&&t(0,o=E.compact),"showLabel"in E&&t(1,d=E.showLabel)},s.$$.update=()=>{s.$$.dirty&512&&n(t(4,l=Ze(i)))},[o,d,h,b,l,a,y,z,m,i,p]}class dt extends he{constructor(e){super(),be(this,e,ct,ft,de,{pubkey:9,compact:0,showLabel:1})}}function Be(s){let e,t,l,a='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',r,n,i,o,d,v,h,b,y,z,m,p,E,g,S,M,K,T,Z='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"></path><path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"></path></svg>',$,B,U,x=`<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg>
            Send DM`,G,P,ie,W,J,ue,we,I=s[3]&&Ue(s),A=s[2]&&Ie(s);return P=new dt({props:{pubkey:s[1],compact:!1}}),{c(){e=k("div"),t=k("div"),l=k("button"),l.innerHTML=a,r=L(),n=k("div"),i=k("div"),o=k("div"),d=k("img"),h=L(),b=k("h2"),y=ae(s[5]),z=L(),I&&I.c(),m=L(),A&&A.c(),p=L(),E=k("div"),g=k("div"),S=k("code"),M=ae(s[6]),K=L(),T=k("button"),T.innerHTML=Z,$=L(),B=k("div"),U=k("button"),U.innerHTML=x,G=L(),ge(P.$$.fragment),ie=L(),W=k("div"),this.h()},l(D){e=w(D,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0});var H=_(e);t=w(H,"DIV",{class:!0});var Q=_(t);l=w(Q,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),F(l)!=="svelte-fl45yq"&&(l.innerHTML=a),r=N(Q),n=w(Q,"DIV",{class:!0});var j=_(n);i=w(j,"DIV",{class:!0});var ke=_(i);o=w(ke,"DIV",{class:!0});var Me=_(o);d=w(Me,"IMG",{src:!0,alt:!0}),Me.forEach(f),ke.forEach(f),h=N(j),b=w(j,"H2",{id:!0,class:!0});var Ee=_(b);y=se(Ee,s[5]),Ee.forEach(f),z=N(j),I&&I.l(j),m=N(j),A&&A.l(j),p=N(j),E=w(j,"DIV",{class:!0});var ye=_(E);g=w(ye,"DIV",{class:!0});var ne=_(g);S=w(ne,"CODE",{class:!0});var Ce=_(S);M=se(Ce,s[6]),Ce.forEach(f),K=N(ne),T=w(ne,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),F(T)!=="svelte-135sd9z"&&(T.innerHTML=Z),ne.forEach(f),ye.forEach(f),$=N(j),B=w(j,"DIV",{class:!0});var re=_(B);U=w(re,"BUTTON",{class:!0,"data-svelte-h":!0}),F(U)!=="svelte-13u28ox"&&(U.innerHTML=x),G=N(re),_e(P.$$.fragment,re),re.forEach(f),j.forEach(f),Q.forEach(f),ie=N(H),W=w(H,"DIV",{class:!0,"aria-hidden":!0}),_(W).forEach(f),H.forEach(f),this.h()},h(){u(l,"class","btn btn-sm btn-circle btn-ghost absolute right-2 top-2"),u(l,"aria-label","Close user profile"),Le(d.src,v=s[4])||u(d,"src",v),u(d,"alt",s[5]),u(o,"class","w-24 h-24 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2"),u(i,"class","avatar mb-4"),u(b,"id","user-profile-modal-title"),u(b,"class","text-2xl font-bold mb-1"),u(S,"class","text-xs flex-1 truncate"),u(T,"class","btn btn-ghost btn-xs"),u(T,"aria-label","Copy npub"),u(g,"class","flex items-center gap-2 bg-base-200 rounded-lg p-3"),u(E,"class","w-full px-4 mb-4"),u(U,"class","btn btn-primary"),u(B,"class","flex flex-wrap gap-2 justify-center"),u(n,"class","flex flex-col items-center py-6"),u(t,"class","modal-box max-w-2xl"),u(W,"class","modal-backdrop svelte-1jdm9d6"),u(W,"aria-hidden","true"),u(e,"class","modal modal-open"),u(e,"role","dialog"),u(e,"aria-modal","true"),u(e,"aria-labelledby","user-profile-modal-title")},m(D,H){C(D,e,H),c(e,t),c(t,l),c(t,r),c(t,n),c(n,i),c(i,o),c(o,d),c(n,h),c(n,b),c(b,y),c(n,z),I&&I.m(n,null),c(n,m),A&&A.m(n,null),c(n,p),c(n,E),c(E,g),c(g,S),c(S,M),c(g,K),c(g,T),c(n,$),c(n,B),c(B,U),c(B,G),ve(P,B,null),c(e,ie),c(e,W),J=!0,ue||(we=[R(l,"click",s[7]),R(T,"click",s[12]),R(U,"click",s[8]),R(W,"click",s[7]),R(e,"keydown",s[9])],ue=!0)},p(D,H){(!J||H&16&&!Le(d.src,v=D[4]))&&u(d,"src",v),(!J||H&32)&&u(d,"alt",D[5]),(!J||H&32)&&le(y,D[5]),D[3]?I?I.p(D,H):(I=Ue(D),I.c(),I.m(n,m)):I&&(I.d(1),I=null),D[2]?A?A.p(D,H):(A=Ie(D),A.c(),A.m(n,p)):A&&(A.d(1),A=null),(!J||H&64)&&le(M,D[6]);const Q={};H&2&&(Q.pubkey=D[1]),P.$set(Q)},i(D){J||(Y(P.$$.fragment,D),J=!0)},o(D){X(P.$$.fragment,D),J=!1},d(D){D&&f(e),I&&I.d(),A&&A.d(),pe(P),ue=!1,me(we)}}}function Ue(s){let e,t,l,a,r;return{c(){e=k("div"),t=q("svg"),l=q("path"),a=L(),r=ae(s[3]),this.h()},l(n){e=w(n,"DIV",{class:!0});var i=_(e);t=V(i,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var o=_(t);l=V(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(l).forEach(f),o.forEach(f),a=N(i),r=se(i,s[3]),i.forEach(f),this.h()},h(){u(l,"fill-rule","evenodd"),u(l,"d","M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"),u(l,"clip-rule","evenodd"),u(t,"xmlns","http://www.w3.org/2000/svg"),u(t,"class","h-3 w-3"),u(t,"viewBox","0 0 20 20"),u(t,"fill","currentColor"),u(e,"class","badge badge-success gap-2 mb-3")},m(n,i){C(n,e,i),c(e,t),c(t,l),c(e,a),c(e,r)},p(n,i){i&8&&le(r,n[3])},d(n){n&&f(e)}}}function Ie(s){let e,t;return{c(){e=k("p"),t=ae(s[2]),this.h()},l(l){e=w(l,"P",{class:!0});var a=_(e);t=se(a,s[2]),a.forEach(f),this.h()},h(){u(e,"class","text-base-content/80 text-center mb-4 px-4")},m(l,a){C(l,e,a),c(e,t)},p(l,a){a&4&&le(t,l[2])},d(l){l&&f(e)}}}function mt(s){let e,t,l=s[0]&&Be(s);return{c(){l&&l.c(),e=te()},l(a){l&&l.l(a),e=te()},m(a,r){l&&l.m(a,r),C(a,e,r),t=!0},p(a,[r]){a[0]?l?(l.p(a,r),r&1&&Y(l,1)):(l=Be(a),l.c(),Y(l,1),l.m(e.parentNode,e)):l&&(je(),X(l,1,1,()=>{l=null}),Oe())},i(a){t||(Y(l),t=!0)},o(a){X(l),t=!1},d(a){a&&f(e),l&&l.d(a)}}}function ht(s){navigator.clipboard.writeText(s)}function bt(s,e,t){let l,a,r,{pubkey:n}=e,{name:i=null}=e,{avatar:o=null}=e,{about:d=null}=e,{nip05:v=null}=e,{show:h=!1}=e;const b=Re();let y=null;function z(){t(0,h=!1),b("close"),y&&(y.focus(),y=null)}function m(){b("startDM",{pubkey:n}),z()}function p(g){if(g.key==="Escape"&&z(),g.key==="Tab"){const S=document.querySelector(".modal.modal-open");if(!S)return;const M=S.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),K=M[0],T=M[M.length-1];g.shiftKey&&document.activeElement===K?(g.preventDefault(),T.focus()):!g.shiftKey&&document.activeElement===T&&(g.preventDefault(),K.focus())}}const E=()=>ht(l);return s.$$set=g=>{"pubkey"in g&&t(1,n=g.pubkey),"name"in g&&t(10,i=g.name),"avatar"in g&&t(11,o=g.avatar),"about"in g&&t(2,d=g.about),"nip05"in g&&t(3,v=g.nip05),"show"in g&&t(0,h=g.show)},s.$$.update=()=>{s.$$.dirty&2&&t(6,l=$e.npubEncode(n)),s.$$.dirty&1026&&t(5,a=i||`${n.slice(0,8)}...${n.slice(-4)}`),s.$$.dirty&2050&&t(4,r=o||xe(n,80)),s.$$.dirty&1&&h&&typeof window<"u"&&(y=document.activeElement,setTimeout(()=>{const g=document.querySelector(".modal.modal-open button");g&&g.focus()},0))},[h,n,d,v,r,a,l,z,m,p,i,o,E]}class pt extends he{constructor(e){super(),be(this,e,bt,mt,de,{pubkey:1,name:10,avatar:11,about:2,nip05:3,show:0})}}function Ae(s){let e,t;return e=new Xe({props:{src:s[10],pubkey:s[0],size:s[2],alt:s[7]}}),{c(){ge(e.$$.fragment)},l(l){_e(e.$$.fragment,l)},m(l,a){ve(e,l,a),t=!0},p(l,a){const r={};a&1024&&(r.src=l[10]),a&1&&(r.pubkey=l[0]),a&4&&(r.size=l[2]),a&128&&(r.alt=l[7]),e.$set(r)},i(l){t||(Y(e.$$.fragment,l),t=!0)},o(l){X(e.$$.fragment,l),t=!1},d(l){pe(e,l)}}}function Ve(s){let e,t,l,a,r=s[6]?.nip05&&qe();return{c(){e=k("span"),t=ae(s[9]),l=L(),r&&r.c(),a=te(),this.h()},l(n){e=w(n,"SPAN",{class:!0});var i=_(e);t=se(i,s[9]),i.forEach(f),l=N(n),r&&r.l(n),a=te(),this.h()},h(){u(e,"class","user-name svelte-vf73on"),ee(e,"font-semibold",s[4])},m(n,i){C(n,e,i),c(e,t),C(n,l,i),r&&r.m(n,i),C(n,a,i)},p(n,i){i&512&&le(t,n[9]),i&16&&ee(e,"font-semibold",n[4]),n[6]?.nip05?r||(r=qe(),r.c(),r.m(a.parentNode,a)):r&&(r.d(1),r=null)},d(n){n&&(f(e),f(l),f(a)),r&&r.d(n)}}}function qe(s){let e,t;return{c(){e=q("svg"),t=q("path"),this.h()},l(l){e=V(l,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0,"aria-label":!0});var a=_(e);t=V(a,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(t).forEach(f),a.forEach(f),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"),u(t,"clip-rule","evenodd"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"class","h-4 w-4 text-success flex-shrink-0"),u(e,"viewBox","0 0 20 20"),u(e,"fill","currentColor"),u(e,"aria-label","Verified")},m(l,a){C(l,e,a),c(e,t)},d(l){l&&f(e)}}}function vt(s){let e,t,l,a,r,n,i,o,d,v,h=s[1]&&Ae(s),b=s[3]&&Ve(s);function y(m){s[14](m)}let z={pubkey:s[0],name:s[6]?.displayName||null,avatar:s[6]?.avatar||null,about:s[6]?.about||null,nip05:s[6]?.nip05||null};return s[8]!==void 0&&(z.show=s[8]),n=new pt({props:z}),Ge.push(()=>Qe(n,"show",y)),n.$on("startDM",gt),{c(){e=k("div"),h&&h.c(),t=L(),b&&b.c(),r=L(),ge(n.$$.fragment),this.h()},l(m){e=w(m,"DIV",{class:!0,role:!0,tabindex:!0});var p=_(e);h&&h.l(p),t=N(p),b&&b.l(p),p.forEach(f),r=N(m),_e(n.$$.fragment,m),this.h()},h(){u(e,"class","user-display inline-flex items-center gap-2 svelte-vf73on"),u(e,"role",l=s[5]?"button":"presentation"),u(e,"tabindex",a=s[5]?0:-1),ee(e,"cursor-pointer",s[5]),ee(e,"hover:opacity-80",s[5])},m(m,p){C(m,e,p),h&&h.m(e,null),c(e,t),b&&b.m(e,null),C(m,r,p),ve(n,m,p),o=!0,d||(v=[R(e,"click",s[11]),R(e,"keydown",s[13])],d=!0)},p(m,[p]){m[1]?h?(h.p(m,p),p&2&&Y(h,1)):(h=Ae(m),h.c(),Y(h,1),h.m(e,t)):h&&(je(),X(h,1,1,()=>{h=null}),Oe()),m[3]?b?b.p(m,p):(b=Ve(m),b.c(),b.m(e,null)):b&&(b.d(1),b=null),(!o||p&32&&l!==(l=m[5]?"button":"presentation"))&&u(e,"role",l),(!o||p&32&&a!==(a=m[5]?0:-1))&&u(e,"tabindex",a),(!o||p&32)&&ee(e,"cursor-pointer",m[5]),(!o||p&32)&&ee(e,"hover:opacity-80",m[5]);const E={};p&1&&(E.pubkey=m[0]),p&64&&(E.name=m[6]?.displayName||null),p&64&&(E.avatar=m[6]?.avatar||null),p&64&&(E.about=m[6]?.about||null),p&64&&(E.nip05=m[6]?.nip05||null),!i&&p&256&&(i=!0,E.show=m[8],Je(()=>i=!1)),n.$set(E)},i(m){o||(Y(h),Y(n.$$.fragment,m),o=!0)},o(m){X(h),X(n.$$.fragment,m),o=!1},d(m){m&&(f(e),f(r)),h&&h.d(),b&&b.d(),pe(n,m),d=!1,me(v)}}}function _t(s){return s.length<=16?s:`${s.slice(0,8)}...${s.slice(-4)}`}function gt(s){const e=new CustomEvent("startDM",{detail:{pubkey:s.detail.pubkey},bubbles:!0});window.dispatchEvent(e)}function wt(s,e,t){let l,a,r,{pubkey:n}=e,{showAvatar:i=!0}=e,{avatarSize:o="md"}=e,{showName:d=!0}=e,{showFullName:v=!1}=e,{clickable:h=!1}=e,{maxNameLength:b=null}=e,y=null,z=null,m=!1;const p={xs:32,sm:48,md:64,lg:80};We(()=>(z=De.subscribe(M=>{t(6,y=M.profiles.get(n)||null)}),De.getProfile(n),()=>{z&&z()}));function E(){h&&t(8,m=!0)}const g=M=>M.key==="Enter"&&h&&E();function S(M){m=M,t(8,m)}return s.$$set=M=>{"pubkey"in M&&t(0,n=M.pubkey),"showAvatar"in M&&t(1,i=M.showAvatar),"avatarSize"in M&&t(2,o=M.avatarSize),"showName"in M&&t(3,d=M.showName),"showFullName"in M&&t(4,v=M.showFullName),"clickable"in M&&t(5,h=M.clickable),"maxNameLength"in M&&t(12,b=M.maxNameLength)},s.$$.update=()=>{s.$$.dirty&65&&t(7,l=y?.displayName||_t(n)),s.$$.dirty&69&&t(10,a=y?.avatar||xe(n,p[o])),s.$$.dirty&4224&&t(9,r=b&&l.length>b?l.slice(0,b)+"...":l)},[n,i,o,d,v,h,y,l,m,r,a,E,b,g,S]}class Bt extends he{constructor(e){super(),be(this,e,wt,vt,de,{pubkey:0,showAvatar:1,avatarSize:2,showName:3,showFullName:4,clickable:5,maxNameLength:12})}}export{Bt as U,St as c,Tt as u};
