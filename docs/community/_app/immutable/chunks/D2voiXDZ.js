import{d as c,w as M}from"./BrNZSoMP.js";import{B as d}from"./CwRy9Tox.js";const U="Nostr-BBS-muted-users";function p(){try{const e=localStorage.getItem(U);if(!e)return new Map;const t=JSON.parse(e);return new Map(t.map(a=>[a.pubkey,a]))}catch(e){return console.error("Failed to load muted users:",e),new Map}}function m(e){try{const t=Array.from(e.values());localStorage.setItem(U,JSON.stringify(t))}catch(t){console.error("Failed to save muted users:",t)}}function f(){const e={mutedUsers:p()},{subscribe:t,set:a,update:o}=M(e);return{subscribe:t,muteUser:(s,u)=>{o(r=>{const l={pubkey:s,mutedAt:Date.now(),reason:u},n=new Map(r.mutedUsers);return n.set(s,l),m(n),{...r,mutedUsers:n}})},unmuteUser:s=>{o(u=>{const r=new Map(u.mutedUsers);return r.delete(s),m(r),{...u,mutedUsers:r}})},isMuted:s=>d({subscribe:t}).mutedUsers.has(s),getMutedUsers:()=>{const s=d({subscribe:t});return Array.from(s.mutedUsers.values()).sort((u,r)=>r.mutedAt-u.mutedAt)},clearAllMutes:()=>{o(s=>(m(new Map),{...s,mutedUsers:new Map}))},getMutedCount:()=>d({subscribe:t}).mutedUsers.size}}const i=f();function S(e){return c(i,t=>t.mutedUsers.has(e))}c(i,e=>e.mutedUsers.size);const g=c(i,e=>Array.from(e.mutedUsers.values()).sort((t,a)=>a.mutedAt-t.mutedAt));export{g as a,S as c,i as m};
