import{B as xe,s as je,n as ie,d as _,z as ve,i as K,b as o,l as c,c as d,e as E,g as w,h as f,j as I,k as Ce,p as Re,f as te,x as ae,t as ne,K as Ye,r as ce,q as R,o as V,P as se,u as Ie,v as Ee,a as de}from"../chunks/CwRy9Tox.js";import{e as oe}from"../chunks/BFk-VQ8S.js";import{S as qe,i as ze}from"../chunks/D-vqeeah.js";import{g as ye}from"../chunks/DKfTTBpB.js";import{d as be,w as He}from"../chunks/BrNZSoMP.js";import{s as Fe,p as Ke}from"../chunks/BToyndCo.js";const Ge=!1,xt=Object.freeze(Object.defineProperty({__proto__:null,ssr:Ge},Symbol.toStringTag,{value:"Module"})),me="minimoonoir-setup-complete",ke="minimoonoir-custom-config",Te="minimoonoir-deployment-config",Me={isComplete:!1,currentStep:"welcome",config:{},errors:[],uploadedFile:null};function Je(){const i=localStorage.getItem(me)==="true",e=localStorage.getItem(ke);let n={};if(e)try{n=JSON.parse(e)}catch{}return{...Me,isComplete:i,config:n,currentStep:i?"complete":"welcome"}}function We(){const{subscribe:i,set:e,update:n}=He(Je());return{subscribe:i,get isSetupComplete(){return xe({subscribe:i}).isComplete},nextStep(){n(t=>{const l=["welcome","upload-config","app-settings","admin-setup","sections-setup","review","complete"],s=l.indexOf(t.currentStep),a=Math.min(s+1,l.length-1);return{...t,currentStep:l[a]}})},prevStep(){n(t=>{const l=["welcome","upload-config","app-settings","admin-setup","sections-setup","review","complete"],s=l.indexOf(t.currentStep),a=Math.max(s-1,0);return{...t,currentStep:l[a]}})},goToStep(t){n(l=>({...l,currentStep:t}))},async uploadConfig(t){const l=[];try{const s=Ke(t);s.app?.name||l.push("Missing app.name");let a=s.sections||[];if(!a.length&&s.categories&&(a=s.categories.flatMap(u=>u.sections||[])),a.length||l.push("No sections defined"),s.roles?.length||l.push("No roles defined"),s.roles&&a.length){const u=new Set(s.roles.map(r=>r.id));for(const r of a)u.has(r.access.defaultRole)||l.push(`Section "${r.id}" references unknown role: ${r.access.defaultRole}`)}return l.length===0?(n(u=>({...u,config:s,uploadedFile:t,errors:[]})),{success:!0,errors:[]}):(n(u=>({...u,errors:l})),{success:!1,errors:l})}catch(s){const a=s instanceof Error?s.message:"Invalid YAML format";return l.push(a),n(u=>({...u,errors:l})),{success:!1,errors:l}}},setAppSettings(t){n(l=>{const s=l.config.sections?.[0]?.id,a=t.defaultSection||s||"";return{...l,config:{...l.config,app:{name:t.name,version:t.version||"1.0.0",defaultSection:a}}}})},addSection(t,l){n(s=>{const a=[...s.config.sections||[]],u=a.findIndex(r=>r.id===t.id);return u>=0?a[u]=t:a.push(t),{...s,config:{...s.config,sections:a}}})},removeSection(t){n(l=>({...l,config:{...l.config,sections:(l.config.sections||[]).filter(s=>s.id!==t)}}))},addRole(t){n(l=>{const s=l.config.roles||[],a=s.findIndex(u=>u.id===t.id);return a>=0?s[a]=t:s.push(t),{...l,config:{...l.config,roles:s}}})},addCohort(t){n(l=>{const s=l.config.cohorts||[],a=s.findIndex(u=>u.id===t.id);return a>=0?s[a]=t:s.push(t),{...l,config:{...l.config,cohorts:s}}})},completeSetup(){const t=xe({subscribe:i});if(localStorage.setItem(me,"true"),localStorage.setItem(ke,JSON.stringify(t.config)),t.config.deployment||t.config.superuser){const l={...t.config.deployment,adminPubkey:t.config.superuser?.pubkey,relayUrl:t.config.deployment?.relayUrl||t.config.superuser?.relayUrl};localStorage.setItem(Te,JSON.stringify(l))}n(l=>({...l,isComplete:!0,currentStep:"complete"}))},exportConfigYaml(){const t=xe({subscribe:i});return Fe(t.config,{indent:2})},resetSetup(){localStorage.removeItem(me),localStorage.removeItem(ke),localStorage.removeItem(Te),e(Me)},skipSetup(){localStorage.setItem(me,"true"),n(t=>({...t,isComplete:!0,currentStep:"complete"}))}}}const H=We();be(H,i=>!i.isComplete);const Xe=be(H,i=>i.currentStep),Qe=be(H,i=>i.errors),Ze=be(H,i=>i.config);function De(i,e,n){const t=i.slice();return t[39]=e[n],t}function Ae(i,e,n){const t=i.slice();return t[42]=e[n],t}function Ue(i,e,n){const t=i.slice();return t[36]=e[n],t}function Ve(i,e,n){const t=i.slice();return t[45]=e[n],t[47]=n,t}function $e(i){let e=i[45].icon+"",n;return{c(){n=ne(e)},l(t){n=te(t,e)},m(t,l){K(t,n,l)},p:ie,d(t){t&&_(n)}}}function et(i){let e,n;return{c(){e=Ee("svg"),n=Ee("path"),this.h()},l(t){e=Ie(t,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var l=E(e);n=Ie(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),E(n).forEach(_),l.forEach(_),this.h()},h(){c(n,"stroke-linecap","round"),c(n,"stroke-linejoin","round"),c(n,"stroke-width","2"),c(n,"d","M5 13l4 4L19 7"),c(e,"class","w-4 h-4"),c(e,"fill","none"),c(e,"stroke","currentColor"),c(e,"viewBox","0 0 24 24")},m(t,l){K(t,e,l),o(e,n)},p:ie,d(t){t&&_(e)}}}function tt(i){let e,n;return{c(){e=f("div"),this.h()},l(t){e=d(t,"DIV",{class:!0}),E(e).forEach(_),this.h()},h(){c(e,"class",n="flex-1 h-0.5 mx-4 "+(i[10](i[9][i[47]+1].id,i[6])?"bg-green-600":"bg-gray-700"))},m(t,l){K(t,e,l)},p(t,l){l[0]&64&&n!==(n="flex-1 h-0.5 mx-4 "+(t[10](t[9][t[47]+1].id,t[6])?"bg-green-600":"bg-gray-700"))&&c(e,"class",n)},d(t){t&&_(e)}}}function Ne(i){let e,n,t,l,s,a,u=i[45].label+"",r,g,p,v;function h(m,k){return k[0]&64&&(t=null),t==null&&(t=!!m[10](m[45].id,m[6])),t?et:$e}let x=h(i,[-1,-1]),C=x(i),b=i[47]<i[9].length-1&&tt(i);return{c(){e=f("div"),n=f("div"),C.c(),s=I(),a=f("span"),r=ne(u),p=I(),b&&b.c(),v=ae(),this.h()},l(m){e=d(m,"DIV",{class:!0});var k=E(e);n=d(k,"DIV",{class:!0});var T=E(n);C.l(T),T.forEach(_),s=w(k),a=d(k,"SPAN",{class:!0});var D=E(a);r=te(D,u),D.forEach(_),k.forEach(_),p=w(m),b&&b.l(m),v=ae(),this.h()},h(){c(n,"class",l="w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium "+(i[10](i[45].id,i[6])?"bg-green-600 text-white":ge(i[45].id,i[6])?"bg-indigo-600 text-white ring-2 ring-indigo-400":"bg-gray-700 text-gray-400")),c(a,"class",g="ml-2 text-sm hidden sm:block "+(ge(i[45].id,i[6])?"text-white font-medium":"text-gray-500")),c(e,"class","flex items-center")},m(m,k){K(m,e,k),o(e,n),C.m(n,null),o(e,s),o(e,a),o(a,r),K(m,p,k),b&&b.m(m,k),K(m,v,k)},p(m,k){x===(x=h(m,k))&&C?C.p(m,k):(C.d(1),C=x(m),C&&(C.c(),C.m(n,null))),k[0]&64&&l!==(l="w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium "+(m[10](m[45].id,m[6])?"bg-green-600 text-white":ge(m[45].id,m[6])?"bg-indigo-600 text-white ring-2 ring-indigo-400":"bg-gray-700 text-gray-400"))&&c(n,"class",l),k[0]&64&&g!==(g="ml-2 text-sm hidden sm:block "+(ge(m[45].id,m[6])?"text-white font-medium":"text-gray-500"))&&c(a,"class",g),m[47]<m[9].length-1&&b.p(m,k)},d(m){m&&(_(e),_(p),_(v)),C.d(),b&&b.d(m)}}}function nt(i){let e,n,t="Review Configuration",l,s,a="Review your configuration before completing setup.",u,r,g,p,v="Configuration Preview",h,x,C="Export YAML",b,m,k=H.exportConfigYaml()+"",T,D,S,y,A="Back",P,N,L="Complete Setup",j,O;return{c(){e=f("div"),n=f("h2"),n.textContent=t,l=I(),s=f("p"),s.textContent=a,u=I(),r=f("div"),g=f("div"),p=f("h3"),p.textContent=v,h=I(),x=f("button"),x.textContent=C,b=I(),m=f("pre"),T=ne(k),D=I(),S=f("div"),y=f("button"),y.textContent=A,P=I(),N=f("button"),N.textContent=L,this.h()},l(Y){e=d(Y,"DIV",{});var U=E(e);n=d(U,"H2",{class:!0,"data-svelte-h":!0}),V(n)!=="svelte-14pn8ta"&&(n.textContent=t),l=w(U),s=d(U,"P",{class:!0,"data-svelte-h":!0}),V(s)!=="svelte-be570o"&&(s.textContent=a),u=w(U),r=d(U,"DIV",{class:!0});var B=E(r);g=d(B,"DIV",{class:!0});var z=E(g);p=d(z,"H3",{class:!0,"data-svelte-h":!0}),V(p)!=="svelte-gzxnt0"&&(p.textContent=v),h=w(z),x=d(z,"BUTTON",{class:!0,"data-svelte-h":!0}),V(x)!=="svelte-1kh5hrj"&&(x.textContent=C),z.forEach(_),b=w(B),m=d(B,"PRE",{class:!0});var W=E(m);T=te(W,k),W.forEach(_),B.forEach(_),D=w(U),S=d(U,"DIV",{class:!0});var G=E(S);y=d(G,"BUTTON",{class:!0,"data-svelte-h":!0}),V(y)!=="svelte-w9adrh"&&(y.textContent=A),P=w(G),N=d(G,"BUTTON",{class:!0,"data-svelte-h":!0}),V(N)!=="svelte-1pgf6z2"&&(N.textContent=L),G.forEach(_),U.forEach(_),this.h()},h(){c(n,"class","text-2xl font-bold mb-2"),c(s,"class","text-gray-400 mb-6"),c(p,"class","font-medium"),c(x,"class","text-indigo-400 hover:text-indigo-300 text-sm"),c(g,"class","flex justify-between items-center mb-4"),c(m,"class","text-xs text-gray-300 overflow-auto max-h-96 font-mono"),c(r,"class","bg-gray-800 rounded-lg p-4 mb-6"),c(y,"class","px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg"),c(N,"class","px-6 py-2 bg-green-600 hover:bg-green-700 rounded-lg"),c(S,"class","flex justify-between mt-8")},m(Y,U){K(Y,e,U),o(e,n),o(e,l),o(e,s),o(e,u),o(e,r),o(r,g),o(g,p),o(g,h),o(g,x),o(r,b),o(r,m),o(m,T),o(e,D),o(e,S),o(S,y),o(S,P),o(S,N),j||(O=[R(x,"click",i[20]),R(y,"click",i[33]),R(N,"click",i[18])],j=!0)},p:ie,d(Y){Y&&_(e),j=!1,ce(O)}}}function lt(i){let e,n,t="Sections",l,s,a="Sections are areas of your app with different access controls.",u,r,g,p,v,h,x="Back",C,b,m="Continue",k,T;function D(A,P){return P[0]&256&&(g=null),g==null&&(g=!!A[8].categories?.some(ft)),g?ct:at}let S=D(i,[-1,-1]),y=S(i);return{c(){e=f("div"),n=f("h2"),n.textContent=t,l=I(),s=f("p"),s.textContent=a,u=I(),r=f("div"),y.c(),p=I(),v=f("div"),h=f("button"),h.textContent=x,C=I(),b=f("button"),b.textContent=m,this.h()},l(A){e=d(A,"DIV",{});var P=E(e);n=d(P,"H2",{class:!0,"data-svelte-h":!0}),V(n)!=="svelte-bv9538"&&(n.textContent=t),l=w(P),s=d(P,"P",{class:!0,"data-svelte-h":!0}),V(s)!=="svelte-17bubz4"&&(s.textContent=a),u=w(P),r=d(P,"DIV",{class:!0});var N=E(r);y.l(N),N.forEach(_),p=w(P),v=d(P,"DIV",{class:!0});var L=E(v);h=d(L,"BUTTON",{class:!0,"data-svelte-h":!0}),V(h)!=="svelte-w9adrh"&&(h.textContent=x),C=w(L),b=d(L,"BUTTON",{class:!0,"data-svelte-h":!0}),V(b)!=="svelte-iythzd"&&(b.textContent=m),L.forEach(_),P.forEach(_),this.h()},h(){c(n,"class","text-2xl font-bold mb-2"),c(s,"class","text-gray-400 mb-6"),c(r,"class","space-y-4 mb-6"),c(h,"class","px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg"),c(b,"class","px-6 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-lg"),c(v,"class","flex justify-between mt-8")},m(A,P){K(A,e,P),o(e,n),o(e,l),o(e,s),o(e,u),o(e,r),y.m(r,null),o(e,p),o(e,v),o(v,h),o(v,C),o(v,b),k||(T=[R(h,"click",i[31]),R(b,"click",i[32])],k=!0)},p(A,P){S===(S=D(A,P))&&y?y.p(A,P):(y.d(1),y=S(A),y&&(y.c(),y.m(r,null)))},d(A){A&&_(e),y.d(),k=!1,ce(T)}}}function st(i){let e,n,t="Admin Setup",l,s,a="Configure the initial administrator account.",u,r,g,p,v="Admin Public Key (hex)",h,x,C,b,m="This pubkey will have full admin access. You can add more admins later.",k,T,D,S="Back",y,A,P="Continue",N,L;return{c(){e=f("div"),n=f("h2"),n.textContent=t,l=I(),s=f("p"),s.textContent=a,u=I(),r=f("div"),g=f("div"),p=f("label"),p.textContent=v,h=I(),x=f("input"),C=I(),b=f("p"),b.textContent=m,k=I(),T=f("div"),D=f("button"),D.textContent=S,y=I(),A=f("button"),A.textContent=P,this.h()},l(j){e=d(j,"DIV",{});var O=E(e);n=d(O,"H2",{class:!0,"data-svelte-h":!0}),V(n)!=="svelte-1chjzle"&&(n.textContent=t),l=w(O),s=d(O,"P",{class:!0,"data-svelte-h":!0}),V(s)!=="svelte-1fbvjcc"&&(s.textContent=a),u=w(O),r=d(O,"DIV",{class:!0});var Y=E(r);g=d(Y,"DIV",{});var U=E(g);p=d(U,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),V(p)!=="svelte-1vkakbk"&&(p.textContent=v),h=w(U),x=d(U,"INPUT",{id:!0,placeholder:!0,class:!0}),C=w(U),b=d(U,"P",{class:!0,"data-svelte-h":!0}),V(b)!=="svelte-19ts8p4"&&(b.textContent=m),U.forEach(_),Y.forEach(_),k=w(O),T=d(O,"DIV",{class:!0});var B=E(T);D=d(B,"BUTTON",{class:!0,"data-svelte-h":!0}),V(D)!=="svelte-w9adrh"&&(D.textContent=S),y=w(B),A=d(B,"BUTTON",{class:!0,"data-svelte-h":!0}),V(A)!=="svelte-iythzd"&&(A.textContent=P),B.forEach(_),O.forEach(_),this.h()},h(){c(n,"class","text-2xl font-bold mb-2"),c(s,"class","text-gray-400 mb-6"),c(p,"for","setup-admin-pubkey"),c(p,"class","block text-sm font-medium text-gray-300 mb-2"),c(x,"id","setup-admin-pubkey"),c(x,"placeholder","64-character hex public key"),c(x,"class","w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg font-mono text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"),c(b,"class","text-gray-500 text-sm mt-2"),c(r,"class","space-y-4"),c(D,"class","px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg"),c(A,"class","px-6 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-lg"),c(T,"class","flex justify-between mt-8")},m(j,O){K(j,e,O),o(e,n),o(e,l),o(e,s),o(e,u),o(e,r),o(r,g),o(g,p),o(g,h),o(g,x),se(x,i[2]),o(g,C),o(g,b),o(e,k),o(e,T),o(T,D),o(T,y),o(T,A),N||(L=[R(x,"input",i[28]),R(D,"click",i[29]),R(A,"click",i[30])],N=!0)},p(j,O){O[0]&4&&x.value!==j[2]&&se(x,j[2])},d(j){j&&_(e),N=!1,ce(L)}}}function ot(i){let e,n,t="App Settings",l,s,a="Configure basic application settings.",u,r,g,p,v="Application Name",h,x,C,b,m,k="Relay URL",T,D,S,y,A,P="Back",N,L,j="Continue",O,Y;return{c(){e=f("div"),n=f("h2"),n.textContent=t,l=I(),s=f("p"),s.textContent=a,u=I(),r=f("div"),g=f("div"),p=f("label"),p.textContent=v,h=I(),x=f("input"),C=I(),b=f("div"),m=f("label"),m.textContent=k,T=I(),D=f("input"),S=I(),y=f("div"),A=f("button"),A.textContent=P,N=I(),L=f("button"),L.textContent=j,this.h()},l(U){e=d(U,"DIV",{});var B=E(e);n=d(B,"H2",{class:!0,"data-svelte-h":!0}),V(n)!=="svelte-12jssmc"&&(n.textContent=t),l=w(B),s=d(B,"P",{class:!0,"data-svelte-h":!0}),V(s)!=="svelte-1tkzjny"&&(s.textContent=a),u=w(B),r=d(B,"DIV",{class:!0});var z=E(r);g=d(z,"DIV",{});var W=E(g);p=d(W,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),V(p)!=="svelte-vp50pq"&&(p.textContent=v),h=w(W),x=d(W,"INPUT",{id:!0,placeholder:!0,class:!0}),W.forEach(_),C=w(z),b=d(z,"DIV",{});var G=E(b);m=d(G,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),V(m)!=="svelte-10nmrwf"&&(m.textContent=k),T=w(G),D=d(G,"INPUT",{id:!0,placeholder:!0,class:!0}),G.forEach(_),z.forEach(_),S=w(B),y=d(B,"DIV",{class:!0});var Z=E(y);A=d(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),V(A)!=="svelte-w9adrh"&&(A.textContent=P),N=w(Z),L=d(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),V(L)!=="svelte-12li3w2"&&(L.textContent=j),Z.forEach(_),B.forEach(_),this.h()},h(){c(n,"class","text-2xl font-bold mb-2"),c(s,"class","text-gray-400 mb-6"),c(p,"for","setup-app-name"),c(p,"class","block text-sm font-medium text-gray-300 mb-2"),c(x,"id","setup-app-name"),c(x,"placeholder","My Community"),c(x,"class","w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"),c(m,"for","setup-relay-url"),c(m,"class","block text-sm font-medium text-gray-300 mb-2"),c(D,"id","setup-relay-url"),c(D,"placeholder","wss://relay.example.com"),c(D,"class","w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"),c(r,"class","space-y-4"),c(A,"class","px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg"),c(L,"class","px-6 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-lg"),c(y,"class","flex justify-between mt-8")},m(U,B){K(U,e,B),o(e,n),o(e,l),o(e,s),o(e,u),o(e,r),o(r,g),o(g,p),o(g,h),o(g,x),se(x,i[1]),o(r,C),o(r,b),o(b,m),o(b,T),o(b,D),se(D,i[3]),o(e,S),o(e,y),o(y,A),o(y,N),o(y,L),O||(Y=[R(x,"input",i[24]),R(D,"input",i[25]),R(A,"click",i[26]),R(L,"click",i[27])],O=!0)},p(U,B){B[0]&2&&x.value!==U[1]&&se(x,U[1]),B[0]&8&&D.value!==U[3]&&se(D,U[3])},d(U){U&&_(e),O=!1,ce(Y)}}}function rt(i){let e,n,t="Configuration",l,s,a="Upload an existing YAML configuration file or create one manually.",u,r,g,p="ðŸ“„",v,h,x="Drop your YAML config file here",C,b,m="or",k,T,D="Browse files",S,y,A,P,N,L,j="Paste YAML directly",O,Y,U,B,z,W,G,Z,ue,$,ee,_e=`<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
						Download Template`,M,q,le="Configure Manually",re,Se,J=i[7].length>0&&Be(i);return{c(){e=f("div"),n=f("h2"),n.textContent=t,l=I(),s=f("p"),s.textContent=a,u=I(),r=f("div"),g=f("div"),g.textContent=p,v=I(),h=f("p"),h.textContent=x,C=I(),b=f("p"),b.textContent=m,k=I(),T=f("button"),T.textContent=D,S=I(),y=f("input"),P=I(),N=f("details"),L=f("summary"),L.textContent=j,O=I(),Y=f("div"),U=f("textarea"),B=I(),z=f("button"),W=ne("Parse Configuration"),Z=I(),J&&J.c(),ue=I(),$=f("div"),ee=f("button"),ee.innerHTML=_e,M=I(),q=f("button"),q.textContent=le,this.h()},l(X){e=d(X,"DIV",{});var F=E(e);n=d(F,"H2",{class:!0,"data-svelte-h":!0}),V(n)!=="svelte-19fakgu"&&(n.textContent=t),l=w(F),s=d(F,"P",{class:!0,"data-svelte-h":!0}),V(s)!=="svelte-7ejmn4"&&(s.textContent=a),u=w(F),r=d(F,"DIV",{class:!0,role:!0,tabindex:!0});var Q=E(r);g=d(Q,"DIV",{class:!0,"data-svelte-h":!0}),V(g)!=="svelte-nydcs9"&&(g.textContent=p),v=w(Q),h=d(Q,"P",{class:!0,"data-svelte-h":!0}),V(h)!=="svelte-rre8rn"&&(h.textContent=x),C=w(Q),b=d(Q,"P",{class:!0,"data-svelte-h":!0}),V(b)!=="svelte-139g341"&&(b.textContent=m),k=w(Q),T=d(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),V(T)!=="svelte-mqfjwv"&&(T.textContent=D),S=w(Q),y=d(Q,"INPUT",{type:!0,accept:!0,class:!0}),Q.forEach(_),P=w(F),N=d(F,"DETAILS",{class:!0});var fe=E(N);L=d(fe,"SUMMARY",{class:!0,"data-svelte-h":!0}),V(L)!=="svelte-zhwzqr"&&(L.textContent=j),O=w(fe),Y=d(fe,"DIV",{class:!0});var pe=E(Y);U=d(pe,"TEXTAREA",{placeholder:!0,class:!0}),E(U).forEach(_),B=w(pe),z=d(pe,"BUTTON",{class:!0});var we=E(z);W=te(we,"Parse Configuration"),we.forEach(_),pe.forEach(_),fe.forEach(_),Z=w(F),J&&J.l(F),ue=w(F),$=d(F,"DIV",{class:!0});var he=E($);ee=d(he,"BUTTON",{class:!0,"data-svelte-h":!0}),V(ee)!=="svelte-yy3pcp"&&(ee.innerHTML=_e),M=w(he),q=d(he,"BUTTON",{class:!0,"data-svelte-h":!0}),V(q)!=="svelte-74qelr"&&(q.textContent=le),he.forEach(_),F.forEach(_),this.h()},h(){c(n,"class","text-2xl font-bold mb-2"),c(s,"class","text-gray-400 mb-6"),c(g,"class","text-4xl mb-4"),c(h,"class","text-gray-300 mb-2"),c(b,"class","text-gray-500 text-sm mb-4"),c(T,"class","px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm"),c(y,"type","file"),c(y,"accept",".yaml,.yml"),c(y,"class","hidden"),c(r,"class",A="border-2 border-dashed rounded-xl p-8 text-center mb-6 transition-colors "+(i[4]?"border-indigo-500 bg-indigo-500/10":"border-gray-700 hover:border-gray-600")),c(r,"role","button"),c(r,"tabindex","0"),c(L,"class","cursor-pointer text-indigo-400 hover:text-indigo-300"),c(U,"placeholder","Paste your YAML configuration here..."),c(U,"class","w-full h-64 px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg font-mono text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"),z.disabled=G=!i[0].trim(),c(z,"class","mt-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-700 disabled:text-gray-500 rounded-lg text-sm"),c(Y,"class","mt-4"),c(N,"class","mb-6"),c(ee,"class","text-gray-400 hover:text-white text-sm flex items-center gap-2"),c(q,"class","px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm"),c($,"class","flex items-center justify-between pt-4 border-t border-gray-800")},m(X,F){K(X,e,F),o(e,n),o(e,l),o(e,s),o(e,u),o(e,r),o(r,g),o(r,v),o(r,h),o(r,C),o(r,b),o(r,k),o(r,T),o(r,S),o(r,y),i[22](y),o(e,P),o(e,N),o(N,L),o(N,O),o(N,Y),o(Y,U),se(U,i[0]),o(Y,B),o(Y,z),o(z,W),o(e,Z),J&&J.m(e,null),o(e,ue),o(e,$),o($,ee),o($,M),o($,q),re||(Se=[R(T,"click",i[15]),R(y,"change",i[16]),R(r,"drop",i[12]),R(r,"dragover",i[13]),R(r,"dragleave",i[14]),R(U,"input",i[23]),R(z,"click",i[11]),R(ee,"click",dt),R(q,"click",i[17])],re=!0)},p(X,F){F[0]&16&&A!==(A="border-2 border-dashed rounded-xl p-8 text-center mb-6 transition-colors "+(X[4]?"border-indigo-500 bg-indigo-500/10":"border-gray-700 hover:border-gray-600"))&&c(r,"class",A),F[0]&1&&se(U,X[0]),F[0]&1&&G!==(G=!X[0].trim())&&(z.disabled=G),X[7].length>0?J?J.p(X,F):(J=Be(X),J.c(),J.m(e,ue)):J&&(J.d(1),J=null)},d(X){X&&_(e),i[22](null),J&&J.d(),re=!1,ce(Se)}}}function it(i){let e,n,t="ðŸŒ±",l,s,a="Instance Setup",u,r,g=`Configure your instance with sections, roles, and permissions. You can upload an existing
					configuration or create one step by step.`,p,v,h,x="Start Setup",C,b,m="Use default configuration",k,T;return{c(){e=f("div"),n=f("div"),n.textContent=t,l=I(),s=f("h1"),s.textContent=a,u=I(),r=f("p"),r.textContent=g,p=I(),v=f("div"),h=f("button"),h.textContent=x,C=I(),b=f("button"),b.textContent=m,this.h()},l(D){e=d(D,"DIV",{class:!0});var S=E(e);n=d(S,"DIV",{class:!0,"data-svelte-h":!0}),V(n)!=="svelte-12wa65f"&&(n.textContent=t),l=w(S),s=d(S,"H1",{class:!0,"data-svelte-h":!0}),V(s)!=="svelte-56h4tv"&&(s.textContent=a),u=w(S),r=d(S,"P",{class:!0,"data-svelte-h":!0}),V(r)!=="svelte-10rufqk"&&(r.textContent=g),p=w(S),v=d(S,"DIV",{class:!0});var y=E(v);h=d(y,"BUTTON",{class:!0,"data-svelte-h":!0}),V(h)!=="svelte-q6ayg6"&&(h.textContent=x),C=w(y),b=d(y,"BUTTON",{class:!0,"data-svelte-h":!0}),V(b)!=="svelte-mcg9s4"&&(b.textContent=m),y.forEach(_),S.forEach(_),this.h()},h(){c(n,"class","text-6xl mb-6"),c(s,"class","text-3xl font-bold mb-4"),c(r,"class","text-gray-400 mb-8 max-w-md mx-auto"),c(h,"class","w-full max-w-xs mx-auto block px-6 py-3 bg-indigo-600 hover:bg-indigo-700 rounded-lg font-medium transition-colors"),c(b,"class","text-gray-500 hover:text-gray-300 text-sm"),c(v,"class","space-y-4"),c(e,"class","text-center")},m(D,S){K(D,e,S),o(e,n),o(e,l),o(e,s),o(e,u),o(e,r),o(e,p),o(e,v),o(v,h),o(v,C),o(v,b),k||(T=[R(h,"click",i[21]),R(b,"click",i[19])],k=!0)},p:ie,d(D){D&&_(e),k=!1,ce(T)}}}function at(i){let e,n='<p>No sections configured yet.</p> <p class="text-sm mt-2">Default sections will be used.</p>';return{c(){e=f("div"),e.innerHTML=n,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-u8tagm"&&(e.innerHTML=n),this.h()},h(){c(e,"class","text-center py-8 text-gray-500")},m(t,l){K(t,e,l)},p:ie,d(t){t&&_(e)}}}function ct(i){let e,n=oe(i[8].categories??[]),t=[];for(let l=0;l<n.length;l+=1)t[l]=Le(De(i,n,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=ae()},l(l){for(let s=0;s<t.length;s+=1)t[s].l(l);e=ae()},m(l,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(l,s);K(l,e,s)},p(l,s){if(s[0]&256){n=oe(l[8].categories??[]);let a;for(a=0;a<n.length;a+=1){const u=De(l,n,a);t[a]?t[a].p(u,s):(t[a]=Le(u),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},d(l){l&&_(e),ve(t,l)}}}function Pe(i){let e,n,t,l=i[42].icon+"",s,a,u,r,g=i[42].name+"",p,v,h,x=i[42].description+"",C,b,m,k=i[42].access.requiresApproval?"Approval required":"Auto-approve",T,D;return{c(){e=f("div"),n=f("div"),t=f("span"),s=ne(l),a=I(),u=f("div"),r=f("p"),p=ne(g),v=I(),h=f("p"),C=ne(x),b=I(),m=f("span"),T=ne(k),D=I(),this.h()},l(S){e=d(S,"DIV",{class:!0});var y=E(e);n=d(y,"DIV",{class:!0});var A=E(n);t=d(A,"SPAN",{class:!0});var P=E(t);s=te(P,l),P.forEach(_),a=w(A),u=d(A,"DIV",{});var N=E(u);r=d(N,"P",{class:!0});var L=E(r);p=te(L,g),L.forEach(_),v=w(N),h=d(N,"P",{class:!0});var j=E(h);C=te(j,x),j.forEach(_),N.forEach(_),A.forEach(_),b=w(y),m=d(y,"SPAN",{class:!0});var O=E(m);T=te(O,k),O.forEach(_),D=w(y),y.forEach(_),this.h()},h(){c(t,"class","text-2xl"),c(r,"class","font-medium"),c(h,"class","text-gray-500 text-sm"),c(n,"class","flex items-center gap-3"),c(m,"class","text-sm text-gray-400"),c(e,"class","bg-gray-800 rounded-lg p-4 flex items-center justify-between")},m(S,y){K(S,e,y),o(e,n),o(n,t),o(t,s),o(n,a),o(n,u),o(u,r),o(r,p),o(u,v),o(u,h),o(h,C),o(e,b),o(e,m),o(m,T),o(e,D)},p(S,y){y[0]&256&&l!==(l=S[42].icon+"")&&de(s,l),y[0]&256&&g!==(g=S[42].name+"")&&de(p,g),y[0]&256&&x!==(x=S[42].description+"")&&de(C,x),y[0]&256&&k!==(k=S[42].access.requiresApproval?"Approval required":"Auto-approve")&&de(T,k)},d(S){S&&_(e)}}}function Le(i){let e,n=oe(i[39].sections??[]),t=[];for(let l=0;l<n.length;l+=1)t[l]=Pe(Ae(i,n,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=ae()},l(l){for(let s=0;s<t.length;s+=1)t[s].l(l);e=ae()},m(l,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(l,s);K(l,e,s)},p(l,s){if(s[0]&256){n=oe(l[39].sections??[]);let a;for(a=0;a<n.length;a+=1){const u=Ae(l,n,a);t[a]?t[a].p(u,s):(t[a]=Pe(u),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},d(l){l&&_(e),ve(t,l)}}}function Be(i){let e,n,t="Configuration Errors",l,s,a=oe(i[7]),u=[];for(let r=0;r<a.length;r+=1)u[r]=Oe(Ue(i,a,r));return{c(){e=f("div"),n=f("p"),n.textContent=t,l=I(),s=f("ul");for(let r=0;r<u.length;r+=1)u[r].c();this.h()},l(r){e=d(r,"DIV",{class:!0});var g=E(e);n=d(g,"P",{class:!0,"data-svelte-h":!0}),V(n)!=="svelte-55ta77"&&(n.textContent=t),l=w(g),s=d(g,"UL",{class:!0});var p=E(s);for(let v=0;v<u.length;v+=1)u[v].l(p);p.forEach(_),g.forEach(_),this.h()},h(){c(n,"class","font-medium text-red-400 mb-2"),c(s,"class","list-disc list-inside text-red-300 text-sm space-y-1"),c(e,"class","bg-red-900/30 border border-red-700 rounded-lg p-4 mb-6")},m(r,g){K(r,e,g),o(e,n),o(e,l),o(e,s);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(s,null)},p(r,g){if(g[0]&128){a=oe(r[7]);let p;for(p=0;p<a.length;p+=1){const v=Ue(r,a,p);u[p]?u[p].p(v,g):(u[p]=Oe(v),u[p].c(),u[p].m(s,null))}for(;p<u.length;p+=1)u[p].d(1);u.length=a.length}},d(r){r&&_(e),ve(u,r)}}}function Oe(i){let e,n=i[36]+"",t;return{c(){e=f("li"),t=ne(n)},l(l){e=d(l,"LI",{});var s=E(e);t=te(s,n),s.forEach(_)},m(l,s){K(l,e,s),o(e,t)},p(l,s){s[0]&128&&n!==(n=l[36]+"")&&de(t,n)},d(l){l&&_(e)}}}function ut(i){let e,n,t,l,s,a,u=oe(i[9]),r=[];for(let h=0;h<u.length;h+=1)r[h]=Ne(Ve(i,u,h));function g(h,x){if(h[6]==="welcome")return it;if(h[6]==="upload-config")return rt;if(h[6]==="app-settings")return ot;if(h[6]==="admin-setup")return st;if(h[6]==="sections-setup")return lt;if(h[6]==="review")return nt}let p=g(i),v=p&&p(i);return{c(){e=f("div"),n=f("div"),t=f("div"),l=f("div");for(let h=0;h<r.length;h+=1)r[h].c();s=I(),a=f("div"),v&&v.c(),this.h()},l(h){e=d(h,"DIV",{class:!0});var x=E(e);n=d(x,"DIV",{class:!0});var C=E(n);t=d(C,"DIV",{class:!0});var b=E(t);l=d(b,"DIV",{class:!0});var m=E(l);for(let T=0;T<r.length;T+=1)r[T].l(m);m.forEach(_),b.forEach(_),C.forEach(_),s=w(x),a=d(x,"DIV",{class:!0});var k=E(a);v&&v.l(k),k.forEach(_),x.forEach(_),this.h()},h(){c(l,"class","flex items-center justify-between"),c(t,"class","max-w-4xl mx-auto px-4 py-4"),c(n,"class","border-b border-gray-800 bg-gray-900/80 backdrop-blur sticky top-0 z-10"),c(a,"class","max-w-2xl mx-auto px-4 py-12"),c(e,"class","min-h-screen bg-gray-900 text-white")},m(h,x){K(h,e,x),o(e,n),o(n,t),o(t,l);for(let C=0;C<r.length;C+=1)r[C]&&r[C].m(l,null);o(e,s),o(e,a),v&&v.m(a,null)},p(h,x){if(x[0]&1600){u=oe(h[9]);let C;for(C=0;C<u.length;C+=1){const b=Ve(h,u,C);r[C]?r[C].p(b,x):(r[C]=Ne(b),r[C].c(),r[C].m(l,null))}for(;C<r.length;C+=1)r[C].d(1);r.length=u.length}p===(p=g(h))&&v?v.p(h,x):(v&&v.d(1),v=p&&p(h),v&&(v.c(),v.m(a,null)))},i:ie,o:ie,d(h){h&&_(e),ve(r,h),v&&v.d()}}}function ge(i,e){return i===e}function dt(){const i=`# Instance Configuration Template
# Edit this file and upload to configure your instance

app:
  name: "Your App Name"
  version: "1.0.0"
  defaultSection: "public"

roles:
  - id: "guest"
    name: "Guest"
    level: 0
    description: "Basic authenticated user"
  - id: "member"
    name: "Member"
    level: 1
    description: "Approved member"
  - id: "moderator"
    name: "Moderator"
    level: 2
    description: "Can moderate content"
    capabilities: ["channel.create", "message.delete"]
  - id: "section-admin"
    name: "Section Admin"
    level: 3
    description: "Section administrator"
    capabilities: ["section.manage", "member.approve"]
  - id: "admin"
    name: "Admin"
    level: 4
    description: "Global administrator"
    capabilities: ["admin.global"]

cohorts:
  - id: "admin"
    name: "Administrators"
    description: "System administrators"
  - id: "approved"
    name: "Approved Users"
    description: "Manually approved users"

sections:
  - id: "public"
    name: "Public Area"
    description: "Open to all authenticated users"
    icon: "globe"
    order: 1
    access:
      requiresApproval: false
      defaultRole: "guest"
      autoApprove: true
    features:
      showStats: true
      allowChannelCreation: false
      calendar:
        access: "full"
        canCreate: false
    ui:
      color: "#6366f1"

  - id: "members"
    name: "Members Area"
    description: "Requires approval to join"
    icon: "users"
    order: 2
    access:
      requiresApproval: true
      defaultRole: "member"
      autoApprove: false
    features:
      showStats: true
      allowChannelCreation: true
      calendar:
        access: "full"
        canCreate: true
    ui:
      color: "#8b5cf6"
`,e=new Blob([i],{type:"text/yaml"}),n=URL.createObjectURL(e),t=document.createElement("a");t.href=n,t.download="sections-template.yaml",t.click(),URL.revokeObjectURL(n)}const ft=i=>i.sections?.length;function pt(i,e,n){let t,l,s;Ce(i,Xe,M=>n(6,t=M)),Ce(i,Qe,M=>n(7,l=M)),Ce(i,Ze,M=>n(8,s=M));let a="",u="",r="",g="",p=!1,v;const h=[{id:"welcome",label:"Welcome",icon:"1"},{id:"upload-config",label:"Configuration",icon:"2"},{id:"app-settings",label:"App Settings",icon:"3"},{id:"admin-setup",label:"Admin Setup",icon:"4"},{id:"sections-setup",label:"Sections",icon:"5"},{id:"review",label:"Review",icon:"6"}];function x(M){return h.findIndex(q=>q.id===M)}function C(M,q){return x(M)<x(q)}async function b(M){const q=await M.text();n(0,a=q),await m()}async function m(){if(!a.trim())return;(await H.uploadConfig(a)).success&&H.goToStep("review")}function k(M){M.preventDefault(),n(4,p=!1);const q=M.dataTransfer?.files[0];q&&(q.name.endsWith(".yaml")||q.name.endsWith(".yml"))&&b(q)}function T(M){M.preventDefault(),n(4,p=!0)}function D(){n(4,p=!1)}function S(){v?.click()}function y(M){const le=M.target.files?.[0];le&&b(le)}function A(){H.nextStep()}function P(){H.completeSetup(),ye("/")}function N(){H.skipSetup(),ye("/")}function L(){const M=H.exportConfigYaml(),q=new Blob([M],{type:"text/yaml"}),le=URL.createObjectURL(q),re=document.createElement("a");re.href=le,re.download="sections.yaml",re.click(),URL.revokeObjectURL(le)}Re(()=>{H.isSetupComplete&&ye("/")});const j=()=>H.nextStep();function O(M){Ye[M?"unshift":"push"](()=>{v=M,n(5,v)})}function Y(){a=this.value,n(0,a)}function U(){u=this.value,n(1,u)}function B(){g=this.value,n(3,g)}const z=()=>H.prevStep(),W=()=>{H.setAppSettings({name:u||"My Community"}),H.nextStep()};function G(){r=this.value,n(2,r)}return[a,u,r,g,p,v,t,l,s,h,C,m,k,T,D,S,y,A,P,N,L,j,O,Y,U,B,z,W,G,()=>H.prevStep(),()=>H.nextStep(),()=>H.prevStep(),()=>H.nextStep(),()=>H.prevStep()]}class Ct extends qe{constructor(e){super(),ze(this,e,pt,ut,je,{},null,[-1,-1])}}export{Ct as component,xt as universal};
