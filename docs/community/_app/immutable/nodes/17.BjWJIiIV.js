import{s as It,n as _e,d as u,a as ve,A as V,i as N,b as r,q as Q,l as i,c as d,e as _,f as q,g as w,h,t as z,j as C,k as _t,C as ll,r as yt,D as wt,o as R,u as Ct,v as Tt,O as nl,P as pe,U as al,z as rl,m as il,x as ct,p as ol,B as cl,K as ul,L as fl}from"../chunks/CwRy9Tox.js";import{S as Mt,i as Lt,t as Ge,a as qe,c as mt,d as Vt,m as Nt,b as At,e as St,g as bt,f as dl}from"../chunks/D-vqeeah.js";import{e as gt,u as hl,o as pl}from"../chunks/BFk-VQ8S.js";import{g as vt}from"../chunks/DKfTTBpB.js";import{b as ut}from"../chunks/BrNZSoMP.js";import{p as vl}from"../chunks/BgttACkO.js";import{a as Dt,o as _l,g as ml}from"../chunks/I2mpdA09.js";import{w as bl}from"../chunks/t4_QlDax.js";import{isConnected as gl,connectRelay as kl}from"../chunks/DRx8R66N.js";import{R as El}from"../chunks/CsmHjMo3.js";import{r as wl,c as Cl,f as Tl}from"../chunks/DEOhKmFO.js";import{f as Dl}from"../chunks/BZVWDyrL.js";import{f as Il}from"../chunks/Dt5HpIRg.js";import{E as yl}from"../chunks/L6wmBm7Q.js";function jt(l){let e,t,n=kt(l[0].end)+"",a;return{c(){e=h("span"),t=z("- "),a=z(n)},l(s){e=d(s,"SPAN",{});var o=_(e);t=q(o,"- "),a=q(o,n),o.forEach(u)},m(s,o){N(s,e,o),r(e,t),r(e,a)},p(s,o){o&1&&n!==(n=kt(s[0].end)+"")&&ve(a,n)},d(s){s&&u(e)}}}function Ml(l){let e,t="Past";return{c(){e=h("span"),e.textContent=t,this.h()},l(n){e=d(n,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-d5so4d"&&(e.textContent=t),this.h()},h(){i(e,"class","badge badge-ghost badge-sm")},m(n,a){N(n,e,a)},p:_e,d(n){n&&u(e)}}}function Ll(l){let e,t=Wt(l[0].start)+"",n;return{c(){e=h("span"),n=z(t),this.h()},l(a){e=d(a,"SPAN",{class:!0});var s=_(e);n=q(s,t),s.forEach(u),this.h()},h(){i(e,"class","badge badge-primary badge-sm")},m(a,s){N(a,e,s),r(e,n)},p(a,s){s&1&&t!==(t=Wt(a[0].start)+"")&&ve(n,t)},d(a){a&&u(e)}}}function Vl(l){let e,t="LIVE";return{c(){e=h("span"),e.textContent=t,this.h()},l(n){e=d(n,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-gy780q"&&(e.textContent=t),this.h()},h(){i(e,"class","badge badge-success badge-sm animate-pulse")},m(n,a){N(n,e,a)},p:_e,d(n){n&&u(e)}}}function Rt(l){let e,t,n,a,s,o=l[0].description&&qt(l),f=l[0].location&&zt(l),c=l[1]&&l[0].channelId&&Ft(l),p=l[0].maxAttendees&&Kt(l),v=l[0].chatRoomId&&Gt(l);return{c(){o&&o.c(),e=C(),t=h("div"),f&&f.c(),n=C(),c&&c.c(),a=C(),p&&p.c(),s=C(),v&&v.c(),this.h()},l(b){o&&o.l(b),e=w(b),t=d(b,"DIV",{class:!0});var E=_(t);f&&f.l(E),n=w(E),c&&c.l(E),a=w(E),p&&p.l(E),s=w(E),v&&v.l(E),E.forEach(u),this.h()},h(){i(t,"class","flex flex-wrap items-center gap-2 mt-2")},m(b,E){o&&o.m(b,E),N(b,e,E),N(b,t,E),f&&f.m(t,null),r(t,n),c&&c.m(t,null),r(t,a),p&&p.m(t,null),r(t,s),v&&v.m(t,null)},p(b,E){b[0].description?o?o.p(b,E):(o=qt(b),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),b[0].location?f?f.p(b,E):(f=zt(b),f.c(),f.m(t,n)):f&&(f.d(1),f=null),b[1]&&b[0].channelId?c?c.p(b,E):(c=Ft(b),c.c(),c.m(t,a)):c&&(c.d(1),c=null),b[0].maxAttendees?p?p.p(b,E):(p=Kt(b),p.c(),p.m(t,s)):p&&(p.d(1),p=null),b[0].chatRoomId?v?v.p(b,E):(v=Gt(b),v.c(),v.m(t,null)):v&&(v.d(1),v=null)},d(b){b&&(u(e),u(t)),o&&o.d(b),f&&f.d(),c&&c.d(),p&&p.d(),v&&v.d()}}}function qt(l){let e,t=l[0].description+"",n;return{c(){e=h("p"),n=z(t),this.h()},l(a){e=d(a,"P",{class:!0});var s=_(e);n=q(s,t),s.forEach(u),this.h()},h(){i(e,"class","text-sm text-base-content/60 line-clamp-2 mt-1")},m(a,s){N(a,e,s),r(e,n)},p(a,s){s&1&&t!==(t=a[0].description+"")&&ve(n,t)},d(a){a&&u(e)}}}function zt(l){let e,t,n,a,s,o=l[0].location+"",f;return{c(){e=h("span"),t=Tt("svg"),n=Tt("path"),a=Tt("path"),s=C(),f=z(o),this.h()},l(c){e=d(c,"SPAN",{class:!0});var p=_(e);t=Ct(p,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var v=_(t);n=Ct(v,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),_(n).forEach(u),a=Ct(v,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),_(a).forEach(u),v.forEach(u),s=w(p),f=q(p,o),p.forEach(u),this.h()},h(){i(n,"stroke-linecap","round"),i(n,"stroke-linejoin","round"),i(n,"stroke-width","2"),i(n,"d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(a,"stroke-width","2"),i(a,"d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"class","h-3 w-3"),i(t,"fill","none"),i(t,"viewBox","0 0 24 24"),i(t,"stroke","currentColor"),i(e,"class","badge badge-outline badge-sm gap-1")},m(c,p){N(c,e,p),r(e,t),r(t,n),r(t,a),r(e,s),r(e,f)},p(c,p){p&1&&o!==(o=c[0].location+"")&&ve(f,o)},d(c){c&&u(e)}}}function Ft(l){let e,t=l[0].channelId.slice(0,8)+"",n,a;return{c(){e=h("span"),n=z(t),a=z("..."),this.h()},l(s){e=d(s,"SPAN",{class:!0});var o=_(e);n=q(o,t),a=q(o,"..."),o.forEach(u),this.h()},h(){i(e,"class","badge badge-secondary badge-sm")},m(s,o){N(s,e,o),r(e,n),r(e,a)},p(s,o){o&1&&t!==(t=s[0].channelId.slice(0,8)+"")&&ve(n,t)},d(s){s&&u(e)}}}function Kt(l){let e,t,n=l[0].maxAttendees+"",a;return{c(){e=h("span"),t=z("Max: "),a=z(n),this.h()},l(s){e=d(s,"SPAN",{class:!0});var o=_(e);t=q(o,"Max: "),a=q(o,n),o.forEach(u),this.h()},h(){i(e,"class","badge badge-outline badge-sm")},m(s,o){N(s,e,o),r(e,t),r(e,a)},p(s,o){o&1&&n!==(n=s[0].maxAttendees+"")&&ve(a,n)},d(s){s&&u(e)}}}function Gt(l){let e,t=`<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>
                Chat`,n,a;return{c(){e=h("button"),e.innerHTML=t,this.h()},l(s){e=d(s,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),R(e)!=="svelte-1r490hx"&&(e.innerHTML=t),this.h()},h(){i(e,"class","btn btn-xs btn-primary gap-1"),i(e,"title","Join event chatroom")},m(s,o){N(s,e,o),n||(a=Q(e,"click",l[6]),n=!0)},p:_e,d(s){s&&u(e),n=!1,a()}}}function Jt(l){let e,t,n="RSVP:",a,s,o,f,c,p,v,b,E,T,I;return{c(){e=h("div"),t=h("span"),t.textContent=n,a=C(),s=h("button"),o=z("Going"),f=C(),c=h("button"),p=z("Maybe"),v=C(),b=h("button"),E=z("Can't Go"),this.h()},l(k){e=d(k,"DIV",{class:!0});var m=_(e);t=d(m,"SPAN",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-1fe6zfs"&&(t.textContent=n),a=w(m),s=d(m,"BUTTON",{class:!0});var L=_(s);o=q(L,"Going"),L.forEach(u),f=w(m),c=d(m,"BUTTON",{class:!0});var te=_(c);p=q(te,"Maybe"),te.forEach(u),v=w(m),b=d(m,"BUTTON",{class:!0});var Z=_(b);E=q(Z,"Can't Go"),Z.forEach(u),m.forEach(u),this.h()},h(){i(t,"class","text-xs text-base-content/50"),i(s,"class","btn btn-xs"),s.disabled=l[3],V(s,"btn-success",l[4]==="accept"),V(s,"btn-outline",l[4]!=="accept"),i(c,"class","btn btn-xs"),c.disabled=l[3],V(c,"btn-warning",l[4]==="tentative"),V(c,"btn-outline",l[4]!=="tentative"),i(b,"class","btn btn-xs"),b.disabled=l[3],V(b,"btn-error",l[4]==="decline"),V(b,"btn-outline",l[4]!=="decline"),i(e,"class","flex items-center gap-2 mt-3")},m(k,m){N(k,e,m),r(e,t),r(e,a),r(e,s),r(s,o),r(e,f),r(e,c),r(c,p),r(e,v),r(e,b),r(b,E),T||(I=[Q(s,"click",wt(l[9])),Q(c,"click",wt(l[10])),Q(b,"click",wt(l[11]))],T=!0)},p(k,m){m&8&&(s.disabled=k[3]),m&16&&V(s,"btn-success",k[4]==="accept"),m&16&&V(s,"btn-outline",k[4]!=="accept"),m&8&&(c.disabled=k[3]),m&16&&V(c,"btn-warning",k[4]==="tentative"),m&16&&V(c,"btn-outline",k[4]!=="tentative"),m&8&&(b.disabled=k[3]),m&16&&V(b,"btn-error",k[4]==="decline"),m&16&&V(b,"btn-outline",k[4]!=="decline")},d(k){k&&u(e),T=!1,yt(I)}}}function Nl(l){let e,t,n,a,s,o=new Date(l[0].start*1e3).toLocaleDateString(void 0,{month:"short"})+"",f,c,p,v=new Date(l[0].start*1e3).getDate()+"",b,E,T,I,k,m,L=l[0].title+"",te,Z,G,le,W=kt(l[0].start)+"",x,ie,oe,y,ne,F,K,ae,Te=Re(l[0].start)&&l[5].isAuthenticated&&!l[2],O,U,S=l[0].end&&l[0].end!==l[0].start&&jt(l);function ce(D,A){return A&1&&(ne=null),A&1&&(F=null),ne==null&&(ne=!!Qe(D[0].start,D[0].end)),ne?Vl:(F==null&&(F=!!Re(D[0].start)),F?Ll:Ml)}let be=ce(l,-1),de=be(l),B=!l[2]&&Rt(l),P=Te&&Jt(l);return{c(){e=h("button"),t=h("div"),n=h("div"),a=h("div"),s=h("span"),f=z(o),c=C(),p=h("span"),b=z(v),E=C(),T=h("div"),I=h("div"),k=h("div"),m=h("h4"),te=z(L),Z=C(),G=h("div"),le=h("span"),x=z(W),ie=C(),S&&S.c(),oe=C(),y=h("div"),de.c(),K=C(),B&&B.c(),ae=C(),P&&P.c(),this.h()},l(D){e=d(D,"BUTTON",{class:!0});var A=_(e);t=d(A,"DIV",{class:!0});var we=_(t);n=d(we,"DIV",{class:!0});var De=_(n);a=d(De,"DIV",{class:!0});var Ie=_(a);s=d(Ie,"SPAN",{class:!0});var ue=_(s);f=q(ue,o),ue.forEach(u),c=w(Ie),p=d(Ie,"SPAN",{class:!0});var ze=_(p);b=q(ze,v),ze.forEach(u),Ie.forEach(u),E=w(De),T=d(De,"DIV",{class:!0});var $=_(T);I=d($,"DIV",{class:!0});var se=_(I);k=d(se,"DIV",{});var Fe=_(k);m=d(Fe,"H4",{class:!0});var Ke=_(m);te=q(Ke,L),Ke.forEach(u),Z=w(Fe),G=d(Fe,"DIV",{class:!0});var ee=_(G);le=d(ee,"SPAN",{});var Pe=_(le);x=q(Pe,W),Pe.forEach(u),ie=w(ee),S&&S.l(ee),ee.forEach(u),Fe.forEach(u),oe=w(se),y=d(se,"DIV",{class:!0});var ge=_(y);de.l(ge),ge.forEach(u),se.forEach(u),K=w($),B&&B.l($),ae=w($),P&&P.l($),$.forEach(u),De.forEach(u),we.forEach(u),A.forEach(u),this.h()},h(){i(s,"class","text-xs font-medium uppercase"),i(p,"class","text-xl font-bold leading-none"),i(a,"class","flex-shrink-0 flex flex-col items-center justify-center w-14 h-14 rounded-lg"),V(a,"bg-primary",Re(l[0].start)),V(a,"text-primary-content",Re(l[0].start)),V(a,"bg-success",Qe(l[0].start,l[0].end)),V(a,"text-success-content",Qe(l[0].start,l[0].end)),V(a,"bg-base-300",!Re(l[0].start)&&!Qe(l[0].start,l[0].end)),i(m,"class","font-bold text-base truncate"),i(G,"class","flex items-center gap-2 text-sm text-base-content/70 mt-0.5"),i(y,"class","flex-shrink-0"),i(I,"class","flex items-start justify-between gap-2"),i(T,"class","flex-1 min-w-0"),i(n,"class","flex gap-4"),i(t,"class","card-body p-4"),V(t,"py-2",l[2]),i(e,"class","card bg-base-200 hover:bg-base-300 transition-all text-left w-full border border-transparent hover:border-primary/30"),V(e,"opacity-60",!Re(l[0].start)&&!Qe(l[0].start,l[0].end))},m(D,A){N(D,e,A),r(e,t),r(t,n),r(n,a),r(a,s),r(s,f),r(a,c),r(a,p),r(p,b),r(n,E),r(n,T),r(T,I),r(I,k),r(k,m),r(m,te),r(k,Z),r(k,G),r(G,le),r(le,x),r(G,ie),S&&S.m(G,null),r(I,oe),r(I,y),de.m(y,null),r(T,K),B&&B.m(T,null),r(T,ae),P&&P.m(T,null),O||(U=Q(e,"click",l[8]),O=!0)},p(D,[A]){A&1&&o!==(o=new Date(D[0].start*1e3).toLocaleDateString(void 0,{month:"short"})+"")&&ve(f,o),A&1&&v!==(v=new Date(D[0].start*1e3).getDate()+"")&&ve(b,v),A&1&&V(a,"bg-primary",Re(D[0].start)),A&1&&V(a,"text-primary-content",Re(D[0].start)),A&1&&V(a,"bg-success",Qe(D[0].start,D[0].end)),A&1&&V(a,"text-success-content",Qe(D[0].start,D[0].end)),A&1&&V(a,"bg-base-300",!Re(D[0].start)&&!Qe(D[0].start,D[0].end)),A&1&&L!==(L=D[0].title+"")&&ve(te,L),A&1&&W!==(W=kt(D[0].start)+"")&&ve(x,W),D[0].end&&D[0].end!==D[0].start?S?S.p(D,A):(S=jt(D),S.c(),S.m(G,null)):S&&(S.d(1),S=null),be===(be=ce(D,A))&&de?de.p(D,A):(de.d(1),de=be(D),de&&(de.c(),de.m(y,null))),D[2]?B&&(B.d(1),B=null):B?B.p(D,A):(B=Rt(D),B.c(),B.m(T,ae)),A&37&&(Te=Re(D[0].start)&&D[5].isAuthenticated&&!D[2]),Te?P?P.p(D,A):(P=Jt(D),P.c(),P.m(T,null)):P&&(P.d(1),P=null),A&4&&V(t,"py-2",D[2]),A&1&&V(e,"opacity-60",!Re(D[0].start)&&!Qe(D[0].start,D[0].end))},i:_e,o:_e,d(D){D&&u(e),S&&S.d(),de.d(),B&&B.d(),P&&P.d(),O=!1,U()}}}function Al(l){return new Date(l*1e3).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}function kt(l){return new Date(l*1e3).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})}function Wt(l){const e=Math.floor(Date.now()/1e3),t=l-e;return t<0?"Past":t<3600?`In ${Math.floor(t/60)}m`:t<86400?`In ${Math.floor(t/3600)}h`:t<604800?`In ${Math.floor(t/86400)}d`:Al(l)}function Re(l){const e=Math.floor(Date.now()/1e3);return l>e}function Qe(l,e){const t=Math.floor(Date.now()/1e3);return t>=l&&t<=e}function Sl(l,e,t){let n;_t(l,Dt,m=>t(5,n=m));let{event:a}=e,{showChannel:s=!1}=e,{compact:o=!1}=e;const f=ll();let c=!1,p=null;function v(m){m.stopPropagation(),a.chatRoomId&&vt(`${ut}/chat/${a.chatRoomId}`)}async function b(m){if(!(c||!n.isAuthenticated)){t(3,c=!0);try{await wl(a.id,m)&&(t(4,p=m),f("rsvp",{eventId:a.id,status:m}))}catch(L){console.error("RSVP failed:",L)}finally{t(3,c=!1)}}}function E(){f("click",a)}const T=()=>b("accept"),I=()=>b("tentative"),k=()=>b("decline");return l.$$set=m=>{"event"in m&&t(0,a=m.event),"showChannel"in m&&t(1,s=m.showChannel),"compact"in m&&t(2,o=m.compact)},[a,s,o,c,p,n,v,b,E,T,I,k]}class Pl extends Mt{constructor(e){super(),Lt(this,e,Sl,Nl,It,{event:0,showChannel:1,compact:2})}}function Hl(l){let e,t,n,a,s='<span class="label-text">Event Title *</span>',o,f,c,p,v,b='<span class="label-text">Description</span>',E,T,I,k,m,L,te='<span class="label-text">Start Date *</span>',Z,G,le,W,x,ie='<span class="label-text">Start Time *</span>',oe,y,ne,F,K,ae,Te='<span class="label-text">End Date</span>',O,U,S,ce,be,de='<span class="label-text">End Time</span>',B,P,D,A,we,De='<span class="label-text">Location</span>',Ie,ue,ze,$,se,Fe='<span class="label-text">Max Attendees (optional)</span>',Ke,ee,Pe,ge,He,Oe='<span class="label-text">Tags (comma-separated)</span>',Ue,ye,Ze,Ve,Me,Ne,xe,Le,Ce='<span class="label-text">Create linked chatroom</span> <p class="text-xs text-base-content/60 mt-0.5">Event attendees can join a dedicated chat for this event</p>',ke,Ae,me,Ee,$e,Se,it,et,J=l[13]&&Xt(l);function fe(H,M){return H[12]?Ul:Ol}let je=fe(l),X=je(l);return{c(){e=h("form"),J&&J.c(),t=C(),n=h("div"),a=h("label"),a.innerHTML=s,o=C(),f=h("input"),c=C(),p=h("div"),v=h("label"),v.innerHTML=b,E=C(),T=h("textarea"),I=C(),k=h("div"),m=h("div"),L=h("label"),L.innerHTML=te,Z=C(),G=h("input"),le=C(),W=h("div"),x=h("label"),x.innerHTML=ie,oe=C(),y=h("input"),ne=C(),F=h("div"),K=h("div"),ae=h("label"),ae.innerHTML=Te,O=C(),U=h("input"),S=C(),ce=h("div"),be=h("label"),be.innerHTML=de,B=C(),P=h("input"),D=C(),A=h("div"),we=h("label"),we.innerHTML=De,Ie=C(),ue=h("input"),ze=C(),$=h("div"),se=h("label"),se.innerHTML=Fe,Ke=C(),ee=h("input"),Pe=C(),ge=h("div"),He=h("label"),He.innerHTML=Oe,Ue=C(),ye=h("input"),Ze=C(),Ve=h("div"),Me=h("label"),Ne=h("input"),xe=C(),Le=h("div"),Le.innerHTML=Ce,ke=C(),Ae=h("div"),me=h("button"),Ee=z("Cancel"),$e=C(),Se=h("button"),X.c(),this.h()},l(H){e=d(H,"FORM",{class:!0});var M=_(e);J&&J.l(M),t=w(M),n=d(M,"DIV",{class:!0});var tt=_(n);a=d(tt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R(a)!=="svelte-1d9j8s"&&(a.innerHTML=s),o=w(tt),f=d(tt,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),tt.forEach(u),c=w(M),p=d(M,"DIV",{class:!0});var Y=_(p);v=d(Y,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R(v)!=="svelte-1vg0q56"&&(v.innerHTML=b),E=w(Y),T=d(Y,"TEXTAREA",{id:!0,class:!0,placeholder:!0}),_(T).forEach(u),Y.forEach(u),I=w(M),k=d(M,"DIV",{class:!0});var g=_(k);m=d(g,"DIV",{class:!0});var j=_(m);L=d(j,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R(L)!=="svelte-80j60e"&&(L.innerHTML=te),Z=w(j),G=d(j,"INPUT",{id:!0,type:!0,class:!0}),j.forEach(u),le=w(g),W=d(g,"DIV",{class:!0});var he=_(W);x=d(he,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R(x)!=="svelte-1nwlowe"&&(x.innerHTML=ie),oe=w(he),y=d(he,"INPUT",{id:!0,type:!0,class:!0}),he.forEach(u),g.forEach(u),ne=w(M),F=d(M,"DIV",{class:!0});var re=_(F);K=d(re,"DIV",{class:!0});var Be=_(K);ae=d(Be,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R(ae)!=="svelte-1uucxkk"&&(ae.innerHTML=Te),O=w(Be),U=d(Be,"INPUT",{id:!0,type:!0,class:!0}),Be.forEach(u),S=w(re),ce=d(re,"DIV",{class:!0});var Je=_(ce);be=d(Je,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R(be)!=="svelte-1dtbq4k"&&(be.innerHTML=de),B=w(Je),P=d(Je,"INPUT",{id:!0,type:!0,class:!0}),Je.forEach(u),re.forEach(u),D=w(M),A=d(M,"DIV",{class:!0});var lt=_(A);we=d(lt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R(we)!=="svelte-xnlt3k"&&(we.innerHTML=De),Ie=w(lt),ue=d(lt,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),lt.forEach(u),ze=w(M),$=d(M,"DIV",{class:!0});var We=_($);se=d(We,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R(se)!=="svelte-7ihomf"&&(se.innerHTML=Fe),Ke=w(We),ee=d(We,"INPUT",{id:!0,type:!0,class:!0,min:!0,placeholder:!0}),We.forEach(u),Pe=w(M),ge=d(M,"DIV",{class:!0});var Xe=_(ge);He=d(Xe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R(He)!=="svelte-ea2zuw"&&(He.innerHTML=Oe),Ue=w(Xe),ye=d(Xe,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),Xe.forEach(u),Ze=w(M),Ve=d(M,"DIV",{class:!0});var nt=_(Ve);Me=d(nt,"LABEL",{class:!0});var Ye=_(Me);Ne=d(Ye,"INPUT",{type:!0,class:!0}),xe=w(Ye),Le=d(Ye,"DIV",{"data-svelte-h":!0}),R(Le)!=="svelte-1gdgea"&&(Le.innerHTML=Ce),Ye.forEach(u),nt.forEach(u),ke=w(M),Ae=d(M,"DIV",{class:!0});var st=_(Ae);me=d(st,"BUTTON",{type:!0,class:!0});var at=_(me);Ee=q(at,"Cancel"),at.forEach(u),$e=w(st),Se=d(st,"BUTTON",{type:!0,class:!0});var rt=_(Se);X.l(rt),rt.forEach(u),st.forEach(u),M.forEach(u),this.h()},h(){i(a,"class","label"),i(a,"for","event-title"),i(f,"id","event-title"),i(f,"type","text"),i(f,"class","input input-bordered"),i(f,"placeholder","e.g., Weekly Meetup"),f.required=!0,i(n,"class","form-control"),i(v,"class","label"),i(v,"for","event-description"),i(T,"id","event-description"),i(T,"class","textarea textarea-bordered h-24"),i(T,"placeholder","What's this event about?"),i(p,"class","form-control"),i(L,"class","label"),i(L,"for","start-date"),i(G,"id","start-date"),i(G,"type","date"),i(G,"class","input input-bordered"),G.required=!0,i(m,"class","form-control"),i(x,"class","label"),i(x,"for","start-time"),i(y,"id","start-time"),i(y,"type","time"),i(y,"class","input input-bordered"),y.required=!0,i(W,"class","form-control"),i(k,"class","grid grid-cols-2 gap-3"),i(ae,"class","label"),i(ae,"for","end-date"),i(U,"id","end-date"),i(U,"type","date"),i(U,"class","input input-bordered"),i(K,"class","form-control"),i(be,"class","label"),i(be,"for","end-time"),i(P,"id","end-time"),i(P,"type","time"),i(P,"class","input input-bordered"),i(ce,"class","form-control"),i(F,"class","grid grid-cols-2 gap-3"),i(we,"class","label"),i(we,"for","event-location"),i(ue,"id","event-location"),i(ue,"type","text"),i(ue,"class","input input-bordered"),i(ue,"placeholder","e.g., Online / Meeting Room A"),i(A,"class","form-control"),i(se,"class","label"),i(se,"for","max-attendees"),i(ee,"id","max-attendees"),i(ee,"type","number"),i(ee,"class","input input-bordered"),i(ee,"min","1"),i(ee,"placeholder","Leave empty for unlimited"),i($,"class","form-control"),i(He,"class","label"),i(He,"for","event-tags"),i(ye,"id","event-tags"),i(ye,"type","text"),i(ye,"class","input input-bordered"),i(ye,"placeholder","e.g., workshop, social, music"),i(ge,"class","form-control"),i(Ne,"type","checkbox"),i(Ne,"class","checkbox checkbox-primary"),i(Me,"class","label cursor-pointer justify-start gap-3"),i(Ve,"class","form-control"),i(me,"type","button"),i(me,"class","btn btn-ghost"),me.disabled=l[12],i(Se,"type","submit"),i(Se,"class","btn btn-primary"),Se.disabled=l[12],i(Ae,"class","modal-action"),i(e,"class","space-y-4")},m(H,M){N(H,e,M),J&&J.m(e,null),r(e,t),r(e,n),r(n,a),r(n,o),r(n,f),pe(f,l[3]),r(e,c),r(e,p),r(p,v),r(p,E),r(p,T),pe(T,l[4]),r(e,I),r(e,k),r(k,m),r(m,L),r(m,Z),r(m,G),pe(G,l[2]),r(k,le),r(k,W),r(W,x),r(W,oe),r(W,y),pe(y,l[5]),r(e,ne),r(e,F),r(F,K),r(K,ae),r(K,O),r(K,U),pe(U,l[6]),r(F,S),r(F,ce),r(ce,be),r(ce,B),r(ce,P),pe(P,l[7]),r(e,D),r(e,A),r(A,we),r(A,Ie),r(A,ue),pe(ue,l[8]),r(e,ze),r(e,$),r($,se),r($,Ke),r($,ee),pe(ee,l[9]),r(e,Pe),r(e,ge),r(ge,He),r(ge,Ue),r(ge,ye),pe(ye,l[10]),r(e,Ze),r(e,Ve),r(Ve,Me),r(Me,Ne),Ne.checked=l[11],r(Me,xe),r(Me,Le),r(e,ke),r(e,Ae),r(Ae,me),r(me,Ee),r(Ae,$e),r(Ae,Se),X.m(Se,null),it||(et=[Q(f,"input",l[18]),Q(T,"input",l[19]),Q(G,"input",l[20]),Q(y,"input",l[21]),Q(U,"input",l[22]),Q(P,"input",l[23]),Q(ue,"input",l[24]),Q(ee,"input",l[25]),Q(ye,"input",l[26]),Q(Ne,"change",l[27]),Q(me,"click",l[16]),Q(e,"submit",al(l[15]))],it=!0)},p(H,M){H[13]?J?J.p(H,M):(J=Xt(H),J.c(),J.m(e,t)):J&&(J.d(1),J=null),M&8&&f.value!==H[3]&&pe(f,H[3]),M&16&&pe(T,H[4]),M&4&&pe(G,H[2]),M&32&&pe(y,H[5]),M&64&&pe(U,H[6]),M&128&&pe(P,H[7]),M&256&&ue.value!==H[8]&&pe(ue,H[8]),M&512&&nl(ee.value)!==H[9]&&pe(ee,H[9]),M&1024&&ye.value!==H[10]&&pe(ye,H[10]),M&2048&&(Ne.checked=H[11]),M&4096&&(me.disabled=H[12]),je!==(je=fe(H))&&(X.d(1),X=je(H),X&&(X.c(),X.m(Se,null))),M&4096&&(Se.disabled=H[12])},d(H){H&&u(e),J&&J.d(),X.d(),it=!1,yt(et)}}}function Bl(l){let e,t=`<svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <div><span>Creating events is disabled in read-only mode.</span> <a href="${ut}/signup" class="link link-hover font-semibold underline">Complete signup</a> <span>to create events.</span></div>`,n,a,s,o="Close",f,c;return{c(){e=h("div"),e.innerHTML=t,n=C(),a=h("div"),s=h("button"),s.textContent=o,this.h()},l(p){e=d(p,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-6is0e4"&&(e.innerHTML=t),n=w(p),a=d(p,"DIV",{class:!0});var v=_(a);s=d(v,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),R(s)!=="svelte-k7k11d"&&(s.textContent=o),v.forEach(u),this.h()},h(){i(e,"class","alert alert-warning mb-4"),i(s,"type","button"),i(s,"class","btn btn-ghost"),i(a,"class","modal-action")},m(p,v){N(p,e,v),N(p,n,v),N(p,a,v),r(a,s),f||(c=Q(s,"click",l[16]),f=!0)},p:_e,d(p){p&&(u(e),u(n),u(a)),f=!1,c()}}}function Xt(l){let e,t,n;return{c(){e=h("div"),t=h("span"),n=z(l[13]),this.h()},l(a){e=d(a,"DIV",{class:!0});var s=_(e);t=d(s,"SPAN",{});var o=_(t);n=q(o,l[13]),o.forEach(u),s.forEach(u),this.h()},h(){i(e,"class","alert alert-error text-sm")},m(a,s){N(a,e,s),r(e,t),r(t,n)},p(a,s){s&8192&&ve(n,a[13])},d(a){a&&u(e)}}}function Ol(l){let e;return{c(){e=z("Create Event")},l(t){e=q(t,"Create Event")},m(t,n){N(t,e,n)},d(t){t&&u(e)}}}function Ul(l){let e,t;return{c(){e=h("span"),t=z(`
            Creating...`),this.h()},l(n){e=d(n,"SPAN",{class:!0}),_(e).forEach(u),t=q(n,`
            Creating...`),this.h()},h(){i(e,"class","loading loading-spinner loading-sm")},m(n,a){N(n,e,a),N(n,t,a)},d(n){n&&(u(e),u(t))}}}function jl(l){let e,t,n,a,s,o,f,c,p="Close",v,b;function E(k,m){return k[14]?Bl:Hl}let T=E(l),I=T(l);return{c(){e=h("div"),t=h("div"),n=h("h3"),a=z("Create Event for "),s=z(l[1]),o=C(),I.c(),f=C(),c=h("button"),c.textContent=p,this.h()},l(k){e=d(k,"DIV",{class:!0});var m=_(e);t=d(m,"DIV",{class:!0});var L=_(t);n=d(L,"H3",{class:!0});var te=_(n);a=q(te,"Create Event for "),s=q(te,l[1]),te.forEach(u),o=w(L),I.l(L),L.forEach(u),f=w(m),c=d(m,"BUTTON",{class:!0,"data-svelte-h":!0}),R(c)!=="svelte-eob31m"&&(c.textContent=p),m.forEach(u),this.h()},h(){i(n,"class","font-bold text-xl mb-4"),i(t,"class","modal-box max-w-lg"),i(c,"class","modal-backdrop"),i(e,"class","modal"),V(e,"modal-open",l[0])},m(k,m){N(k,e,m),r(e,t),r(t,n),r(n,a),r(n,s),r(t,o),I.m(t,null),r(e,f),r(e,c),v||(b=Q(c,"click",l[16]),v=!0)},p(k,[m]){m&2&&ve(s,k[1]),T===(T=E(k))&&I?I.p(k,m):(I.d(1),I=T(k),I&&(I.c(),I.m(t,null))),m&1&&V(e,"modal-open",k[0])},i:_e,o:_e,d(k){k&&u(e),I.d(),v=!1,b()}}}function Rl(l,e,t){let n;_t(l,_l,O=>t(14,n=O));let{channelId:a}=e,{channelName:s="this channel"}=e,{isOpen:o=!1}=e;const f=ll();let c="",p="",v="",b="",E="",T="",I="",k=null,m="",L=!0,te=!1,Z=null;async function G(){if(!c.trim()){t(13,Z="Event title is required");return}if(!v||!b){t(13,Z="Start date and time are required");return}t(12,te=!0),t(13,Z=null);try{const O={title:c.trim(),description:p.trim(),start:new Date(`${v}T${b}`),end:new Date(`${E||v}T${T||b}`),location:I.trim()||void 0,channelId:a,maxAttendees:k||void 0,tags:m.split(",").map(S=>S.trim()).filter(S=>S),createChatRoom:L},U=await Cl(O);U?(f("created",U),le()):t(13,Z="Failed to create event. Please try again.")}catch(O){console.error("Error creating event:",O),t(13,Z=O instanceof Error?O.message:"An error occurred")}finally{t(12,te=!1)}}function le(){t(0,o=!1),t(3,c=""),t(4,p=""),t(2,v=""),t(5,b=""),t(6,E=""),t(7,T=""),t(8,I=""),t(9,k=null),t(10,m=""),t(13,Z=null),f("close")}function W(){c=this.value,t(3,c)}function x(){p=this.value,t(4,p)}function ie(){v=this.value,t(2,v),t(0,o)}function oe(){b=this.value,t(5,b),t(0,o),t(2,v)}function y(){E=this.value,t(6,E),t(0,o),t(2,v)}function ne(){T=this.value,t(7,T),t(0,o),t(2,v)}function F(){I=this.value,t(8,I)}function K(){k=nl(this.value),t(9,k)}function ae(){m=this.value,t(10,m)}function Te(){L=this.checked,t(11,L)}return l.$$set=O=>{"channelId"in O&&t(17,a=O.channelId),"channelName"in O&&t(1,s=O.channelName),"isOpen"in O&&t(0,o=O.isOpen)},l.$$.update=()=>{if(l.$$.dirty&5&&o&&!v){const O=new Date,U=new Date(O);U.setDate(U.getDate()+1),U.setHours(10,0,0,0),t(2,v=U.toISOString().split("T")[0]),t(5,b="10:00"),t(6,E=U.toISOString().split("T")[0]),t(7,T="11:00")}},[o,s,v,c,p,b,E,T,I,k,m,L,te,Z,n,G,le,a,W,x,ie,oe,y,ne,F,K,ae,Te]}class ql extends Mt{constructor(e){super(),Lt(this,e,Rl,jl,It,{channelId:17,channelName:1,isOpen:0})}}function Yt(l,e,t){const n=l.slice();return n[23]=e[t],n}function Qt(l,e,t){const n=l.slice();return n[26]=e[t],n}function zl(l){let e;return{c(){e=z("All community events")},l(t){e=q(t,"All community events")},m(t,n){N(t,e,n)},p:_e,d(t){t&&u(e)}}}function Fl(l){let e,t=l[7].name+"",n;return{c(){e=z("Events for "),n=z(t)},l(a){e=q(a,"Events for "),n=q(a,t)},m(a,s){N(a,e,s),N(a,n,s)},p(a,s){s&128&&t!==(t=a[7].name+"")&&ve(n,t)},d(a){a&&(u(e),u(n))}}}function Zt(l){let e,t=`<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
            Create Event`,n,a;return{c(){e=h("button"),e.innerHTML=t,this.h()},l(s){e=d(s,"BUTTON",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-8oj2vg"&&(e.innerHTML=t),this.h()},h(){i(e,"class","btn btn-primary btn-sm")},m(s,o){N(s,e,o),n||(a=Q(e,"click",l[15]),n=!0)},p:_e,d(s){s&&u(e),n=!1,a()}}}function xt(l){let e,t=l[26].name+"",n,a,s,o;function f(){return l[17](l[26])}return{c(){e=h("button"),n=z(t),a=C(),this.h()},l(c){e=d(c,"BUTTON",{class:!0});var p=_(e);n=q(p,t),a=w(p),p.forEach(u),this.h()},h(){i(e,"class","btn btn-sm btn-block justify-start truncate"),V(e,"btn-primary",l[2]===l[26].id),V(e,"btn-ghost",l[2]!==l[26].id)},m(c,p){N(c,e,p),r(e,n),r(e,a),s||(o=Q(e,"click",f),s=!0)},p(c,p){l=c,p&2&&t!==(t=l[26].name+"")&&ve(n,t),p&6&&V(e,"btn-primary",l[2]===l[26].id),p&6&&V(e,"btn-ghost",l[2]!==l[26].id)},d(c){c&&u(e),s=!1,o()}}}function Kl(l){let e,t,n,a;const s=[Yl,Xl],o=[];function f(c,p){return c[8].length===0?0:1}return t=f(l),n=o[t]=s[t](l),{c(){e=h("div"),n.c(),this.h()},l(c){e=d(c,"DIV",{class:!0});var p=_(e);n.l(p),p.forEach(u),this.h()},h(){i(e,"class","space-y-3")},m(c,p){N(c,e,p),o[t].m(e,null),a=!0},p(c,p){let v=t;t=f(c),t===v?o[t].p(c,p):(bt(),Ge(o[v],1,1,()=>{o[v]=null}),mt(),n=o[t],n?n.p(c,p):(n=o[t]=s[t](c),n.c()),qe(n,1),n.m(e,null))},i(c){a||(qe(n),a=!0)},o(c){Ge(n),a=!1},d(c){c&&u(e),o[t].d()}}}function Gl(l){let e,t;return e=new yl({props:{events:l[8],currentDate:l[10]}}),e.$on("eventClick",sl),e.$on("dayClick",Zl),{c(){St(e.$$.fragment)},l(n){At(e.$$.fragment,n)},m(n,a){Nt(e,n,a),t=!0},p(n,a){const s={};a&256&&(s.events=n[8]),e.$set(s)},i(n){t||(qe(e.$$.fragment,n),t=!0)},o(n){Ge(e.$$.fragment,n),t=!1},d(n){Vt(e,n)}}}function Jl(l){let e,t,n;return{c(){e=h("div"),t=h("span"),n=z(l[4]),this.h()},l(a){e=d(a,"DIV",{class:!0});var s=_(e);t=d(s,"SPAN",{});var o=_(t);n=q(o,l[4]),o.forEach(u),s.forEach(u),this.h()},h(){i(e,"class","alert alert-error")},m(a,s){N(a,e,s),r(e,t),r(t,n)},p(a,s){s&16&&ve(n,a[4])},i:_e,o:_e,d(a){a&&u(e)}}}function Wl(l){let e,t='<span class="loading loading-spinner loading-lg text-primary"></span>';return{c(){e=h("div"),e.innerHTML=t,this.h()},l(n){e=d(n,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-x7gtd4"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex justify-center items-center min-h-[400px]")},m(n,a){N(n,e,a)},p:_e,i:_e,o:_e,d(n){n&&u(e)}}}function Xl(l){let e=[],t=new Map,n,a,s=gt(l[8]);const o=f=>f[23].id;for(let f=0;f<s.length;f+=1){let c=Yt(l,s,f),p=o(c);t.set(p,e[f]=$t(p,c))}return{c(){for(let f=0;f<e.length;f+=1)e[f].c();n=ct()},l(f){for(let c=0;c<e.length;c+=1)e[c].l(f);n=ct()},m(f,c){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(f,c);N(f,n,c),a=!0},p(f,c){c&260&&(s=gt(f[8]),bt(),e=hl(e,c,o,1,f,s,t,n.parentNode,pl,$t,n,Yt),mt())},i(f){if(!a){for(let c=0;c<s.length;c+=1)qe(e[c]);a=!0}},o(f){for(let c=0;c<e.length;c+=1)Ge(e[c]);a=!1},d(f){f&&u(n);for(let c=0;c<e.length;c+=1)e[c].d(f)}}}function Yl(l){let e,t,n,a="No events found",s,o=l[2]&&el(l);return{c(){e=h("div"),t=h("div"),n=h("p"),n.textContent=a,s=C(),o&&o.c(),this.h()},l(f){e=d(f,"DIV",{class:!0});var c=_(e);t=d(c,"DIV",{class:!0});var p=_(t);n=d(p,"P",{class:!0,"data-svelte-h":!0}),R(n)!=="svelte-nf02lm"&&(n.textContent=a),s=w(p),o&&o.l(p),p.forEach(u),c.forEach(u),this.h()},h(){i(n,"class","text-base-content/70"),i(t,"class","card-body items-center text-center"),i(e,"class","card bg-base-200")},m(f,c){N(f,e,c),r(e,t),r(t,n),r(t,s),o&&o.m(t,null)},p(f,c){f[2]?o?o.p(f,c):(o=el(f),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},i:_e,o:_e,d(f){f&&u(e),o&&o.d()}}}function $t(l,e){let t,n,a;return n=new Pl({props:{event:e[23],showChannel:!e[2]}}),n.$on("click",sl),{key:l,first:null,c(){t=ct(),St(n.$$.fragment),this.h()},l(s){t=ct(),At(n.$$.fragment,s),this.h()},h(){this.first=t},m(s,o){N(s,t,o),Nt(n,s,o),a=!0},p(s,o){e=s;const f={};o&256&&(f.event=e[23]),o&4&&(f.showChannel=!e[2]),n.$set(f)},i(s){a||(qe(n.$$.fragment,s),a=!0)},o(s){Ge(n.$$.fragment,s),a=!1},d(s){s&&u(t),Vt(n,s)}}}function el(l){let e,t="Create the first event",n,a;return{c(){e=h("button"),e.textContent=t,this.h()},l(s){e=d(s,"BUTTON",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-dfkipw"&&(e.textContent=t),this.h()},h(){i(e,"class","btn btn-primary btn-sm mt-2")},m(s,o){N(s,e,o),n||(a=Q(e,"click",l[19]),n=!0)},p:_e,d(s){s&&u(e),n=!1,a()}}}function tl(l){let e,t,n;function a(o){l[20](o)}let s={channelId:l[2],channelName:l[7].name};return l[5]!==void 0&&(s.isOpen=l[5]),e=new ql({props:s}),ul.push(()=>dl(e,"isOpen",a)),e.$on("created",l[11]),{c(){St(e.$$.fragment)},l(o){At(e.$$.fragment,o)},m(o,f){Nt(e,o,f),n=!0},p(o,f){const c={};f&4&&(c.channelId=o[2]),f&128&&(c.channelName=o[7].name),!t&&f&32&&(t=!0,c.isOpen=o[5],fl(()=>t=!1)),e.$set(c)},i(o){n||(qe(e.$$.fragment,o),n=!0)},o(o){Ge(e.$$.fragment,o),n=!1},d(o){Vt(e,o)}}}function Ql(l){let e,t,n,a,s,o,f,c="Events",p,v,b,E,T,I,k='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>',m,L,te='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path></svg>',Z,G,le,W,x,ie,oe,y="Filter by Channel",ne,F,K,ae="All Events",Te,O,U,S,ce,be="Event Stats",de,B,P,D,A="Total Events",we,De,Ie=l[0].length+"",ue,ze,$,se,Fe="This Month",Ke,ee,Pe=l[8].length+"",ge,He,Oe,Ue,ye="Upcoming",Ze,Ve,Me=l[8].filter(l[18]).length+"",Ne,xe,Le,Ce,ke,Ae,me,Ee,$e,Se;document.title=e="Events - "+l[9].name;function it(g,j){return g[7]?Fl:zl}let et=it(l),J=et(l),fe=l[2]&&Zt(l),je=gt(l[1]),X=[];for(let g=0;g<je.length;g+=1)X[g]=xt(Qt(l,je,g));const H=[Wl,Jl,Gl,Kl],M=[];function tt(g,j){return g[3]?0:g[4]?1:g[6]==="calendar"?2:3}Ce=tt(l),ke=M[Ce]=H[Ce](l);let Y=l[2]&&l[7]&&tl(l);return{c(){t=C(),n=h("div"),a=h("div"),s=h("div"),o=h("div"),f=h("h1"),f.textContent=c,p=C(),v=h("p"),J.c(),b=C(),E=h("div"),T=h("div"),I=h("button"),I.innerHTML=k,m=C(),L=h("button"),L.innerHTML=te,Z=C(),fe&&fe.c(),G=C(),le=h("div"),W=h("div"),x=h("div"),ie=h("div"),oe=h("h3"),oe.textContent=y,ne=C(),F=h("div"),K=h("button"),K.textContent=ae,Te=C();for(let g=0;g<X.length;g+=1)X[g].c();O=C(),U=h("div"),S=h("div"),ce=h("h3"),ce.textContent=be,de=C(),B=h("div"),P=h("div"),D=h("span"),D.textContent=A,we=C(),De=h("span"),ue=z(Ie),ze=C(),$=h("div"),se=h("span"),se.textContent=Fe,Ke=C(),ee=h("span"),ge=z(Pe),He=C(),Oe=h("div"),Ue=h("span"),Ue.textContent=ye,Ze=C(),Ve=h("span"),Ne=z(Me),xe=C(),Le=h("div"),ke.c(),Ae=C(),Y&&Y.c(),me=ct(),this.h()},l(g){il("svelte-1ww5knl",document.head).forEach(u),t=w(g),n=d(g,"DIV",{class:!0});var he=_(n);a=d(he,"DIV",{class:!0});var re=_(a);s=d(re,"DIV",{class:!0});var Be=_(s);o=d(Be,"DIV",{});var Je=_(o);f=d(Je,"H1",{class:!0,"data-svelte-h":!0}),R(f)!=="svelte-1n6vejd"&&(f.textContent=c),p=w(Je),v=d(Je,"P",{class:!0});var lt=_(v);J.l(lt),lt.forEach(u),Je.forEach(u),b=w(Be),E=d(Be,"DIV",{class:!0});var We=_(E);T=d(We,"DIV",{class:!0});var Xe=_(T);I=d(Xe,"BUTTON",{class:!0,"data-svelte-h":!0}),R(I)!=="svelte-knomi5"&&(I.innerHTML=k),m=w(Xe),L=d(Xe,"BUTTON",{class:!0,"data-svelte-h":!0}),R(L)!=="svelte-1llc14w"&&(L.innerHTML=te),Xe.forEach(u),Z=w(We),fe&&fe.l(We),We.forEach(u),Be.forEach(u),re.forEach(u),G=w(he),le=d(he,"DIV",{class:!0});var nt=_(le);W=d(nt,"DIV",{class:!0});var Ye=_(W);x=d(Ye,"DIV",{class:!0});var st=_(x);ie=d(st,"DIV",{class:!0});var at=_(ie);oe=d(at,"H3",{class:!0,"data-svelte-h":!0}),R(oe)!=="svelte-1sa5bhz"&&(oe.textContent=y),ne=w(at),F=d(at,"DIV",{class:!0});var rt=_(F);K=d(rt,"BUTTON",{class:!0,"data-svelte-h":!0}),R(K)!=="svelte-fntre5"&&(K.textContent=ae),Te=w(rt);for(let Et=0;Et<X.length;Et+=1)X[Et].l(rt);rt.forEach(u),at.forEach(u),st.forEach(u),O=w(Ye),U=d(Ye,"DIV",{class:!0});var Pt=_(U);S=d(Pt,"DIV",{class:!0});var ft=_(S);ce=d(ft,"H3",{class:!0,"data-svelte-h":!0}),R(ce)!=="svelte-x8lsnc"&&(ce.textContent=be),de=w(ft),B=d(ft,"DIV",{class:!0});var ot=_(B);P=d(ot,"DIV",{class:!0});var dt=_(P);D=d(dt,"SPAN",{class:!0,"data-svelte-h":!0}),R(D)!=="svelte-1x6ky2e"&&(D.textContent=A),we=w(dt),De=d(dt,"SPAN",{class:!0});var Ht=_(De);ue=q(Ht,Ie),Ht.forEach(u),dt.forEach(u),ze=w(ot),$=d(ot,"DIV",{class:!0});var ht=_($);se=d(ht,"SPAN",{class:!0,"data-svelte-h":!0}),R(se)!=="svelte-1ro6dt5"&&(se.textContent=Fe),Ke=w(ht),ee=d(ht,"SPAN",{class:!0});var Bt=_(ee);ge=q(Bt,Pe),Bt.forEach(u),ht.forEach(u),He=w(ot),Oe=d(ot,"DIV",{class:!0});var pt=_(Oe);Ue=d(pt,"SPAN",{class:!0,"data-svelte-h":!0}),R(Ue)!=="svelte-m3dfw9"&&(Ue.textContent=ye),Ze=w(pt),Ve=d(pt,"SPAN",{class:!0});var Ot=_(Ve);Ne=q(Ot,Me),Ot.forEach(u),pt.forEach(u),ot.forEach(u),ft.forEach(u),Pt.forEach(u),Ye.forEach(u),xe=w(nt),Le=d(nt,"DIV",{class:!0});var Ut=_(Le);ke.l(Ut),Ut.forEach(u),nt.forEach(u),he.forEach(u),Ae=w(g),Y&&Y.l(g),me=ct(),this.h()},h(){i(f,"class","text-4xl font-bold gradient-text mb-2"),i(v,"class","text-base-content/70"),i(I,"class","btn btn-sm"),V(I,"btn-active",l[6]==="calendar"),i(L,"class","btn btn-sm"),V(L,"btn-active",l[6]==="list"),i(T,"class","btn-group"),i(E,"class","flex items-center gap-2"),i(s,"class","flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"),i(a,"class","mb-6"),i(oe,"class","font-bold text-sm mb-3"),i(K,"class","btn btn-sm btn-block justify-start"),V(K,"btn-primary",!l[2]),V(K,"btn-ghost",l[2]),i(F,"class","space-y-1"),i(ie,"class","card-body p-4"),i(x,"class","card bg-base-200 shadow-lg"),i(ce,"class","font-bold text-sm mb-3"),i(D,"class","text-base-content/60"),i(De,"class","font-medium"),i(P,"class","flex justify-between"),i(se,"class","text-base-content/60"),i(ee,"class","font-medium"),i($,"class","flex justify-between"),i(Ue,"class","text-base-content/60"),i(Ve,"class","font-medium"),i(Oe,"class","flex justify-between"),i(B,"class","space-y-2 text-sm"),i(S,"class","card-body p-4"),i(U,"class","card bg-base-200 shadow-lg"),i(W,"class","lg:w-64 space-y-4"),i(Le,"class","flex-1"),i(le,"class","flex flex-col lg:flex-row gap-6"),i(n,"class","container mx-auto p-4 max-w-6xl")},m(g,j){N(g,t,j),N(g,n,j),r(n,a),r(a,s),r(s,o),r(o,f),r(o,p),r(o,v),J.m(v,null),r(s,b),r(s,E),r(E,T),r(T,I),r(T,m),r(T,L),r(E,Z),fe&&fe.m(E,null),r(n,G),r(n,le),r(le,W),r(W,x),r(x,ie),r(ie,oe),r(ie,ne),r(ie,F),r(F,K),r(F,Te);for(let he=0;he<X.length;he+=1)X[he]&&X[he].m(F,null);r(W,O),r(W,U),r(U,S),r(S,ce),r(S,de),r(S,B),r(B,P),r(P,D),r(P,we),r(P,De),r(De,ue),r(B,ze),r(B,$),r($,se),r($,Ke),r($,ee),r(ee,ge),r(B,He),r(B,Oe),r(Oe,Ue),r(Oe,Ze),r(Oe,Ve),r(Ve,Ne),r(le,xe),r(le,Le),M[Ce].m(Le,null),N(g,Ae,j),Y&&Y.m(g,j),N(g,me,j),Ee=!0,$e||(Se=[Q(I,"click",l[13]),Q(L,"click",l[14]),Q(K,"click",l[16])],$e=!0)},p(g,[j]){if((!Ee||j&512)&&e!==(e="Events - "+g[9].name)&&(document.title=e),et===(et=it(g))&&J?J.p(g,j):(J.d(1),J=et(g),J&&(J.c(),J.m(v,null))),(!Ee||j&64)&&V(I,"btn-active",g[6]==="calendar"),(!Ee||j&64)&&V(L,"btn-active",g[6]==="list"),g[2]?fe?fe.p(g,j):(fe=Zt(g),fe.c(),fe.m(E,null)):fe&&(fe.d(1),fe=null),(!Ee||j&4)&&V(K,"btn-primary",!g[2]),(!Ee||j&4)&&V(K,"btn-ghost",g[2]),j&4102){je=gt(g[1]);let re;for(re=0;re<je.length;re+=1){const Be=Qt(g,je,re);X[re]?X[re].p(Be,j):(X[re]=xt(Be),X[re].c(),X[re].m(F,null))}for(;re<X.length;re+=1)X[re].d(1);X.length=je.length}(!Ee||j&1)&&Ie!==(Ie=g[0].length+"")&&ve(ue,Ie),(!Ee||j&256)&&Pe!==(Pe=g[8].length+"")&&ve(ge,Pe),(!Ee||j&256)&&Me!==(Me=g[8].filter(g[18]).length+"")&&ve(Ne,Me);let he=Ce;Ce=tt(g),Ce===he?M[Ce].p(g,j):(bt(),Ge(M[he],1,1,()=>{M[he]=null}),mt(),ke=M[Ce],ke?ke.p(g,j):(ke=M[Ce]=H[Ce](g),ke.c()),qe(ke,1),ke.m(Le,null)),g[2]&&g[7]?Y?(Y.p(g,j),j&132&&qe(Y,1)):(Y=tl(g),Y.c(),qe(Y,1),Y.m(me.parentNode,me)):Y&&(bt(),Ge(Y,1,1,()=>{Y=null}),mt())},i(g){Ee||(qe(ke),qe(Y),Ee=!0)},o(g){Ge(ke),Ge(Y),Ee=!1},d(g){g&&(u(t),u(n),u(Ae),u(me)),J.d(),fe&&fe.d(),rl(X,g),M[Ce].d(),Y&&Y.d(g),$e=!1,yt(Se)}}}function sl(l){}function Zl(l){}function xl(l,e,t){let n,a,s,o;_t(l,Dt,y=>t(21,s=y)),_t(l,vl,y=>t(22,o=y));const f=ml();let c=[],p=[],v=!0,b=null,E=null,T=!1,I=new Date,k="calendar";ol(async()=>{if(await Dt.waitForReady(),!s.isAuthenticated||!s.publicKey){vt(`${ut}/`);return}const y=o.url.searchParams.get("channel");y&&t(2,E=y);try{!gl()&&s.privateKey&&await kl(El,s.privateKey);const ne=cl(bl),F=ne?.cohorts??[],K=ne?.isAdmin??!1,[ae,Te,O]=await Promise.all([Dl({userCohorts:F,userPubkey:s.publicKey??void 0,isAdmin:K}),Tl(),Il(s.publicKey)]);t(1,p=ae),t(0,c=[...Te,...O].sort((U,S)=>U.start-S.start))}catch(ne){console.error("Failed to load events:",ne),t(4,b=ne instanceof Error?ne.message:"Failed to load events")}finally{t(3,v=!1)}});function m(y){t(0,c=[...c,y.detail].sort((ne,F)=>ne.start-F.start)),t(5,T=!1)}function L(y){t(2,E=y),y?vt(`${ut}/events?channel=${y}`,{replaceState:!0}):vt(`${ut}/events`,{replaceState:!0})}const te=()=>t(6,k="calendar"),Z=()=>t(6,k="list"),G=()=>t(5,T=!0),le=()=>L(null),W=y=>L(y.id),x=y=>y.start>Date.now()/1e3,ie=()=>t(5,T=!0);function oe(y){T=y,t(5,T)}return l.$$.update=()=>{l.$$.dirty&5&&t(8,n=E?c.filter(y=>y.channelId===E):c),l.$$.dirty&6&&t(7,a=p.find(y=>y.id===E))},[c,p,E,v,b,T,k,a,n,f,I,m,L,te,Z,G,le,W,x,ie,oe]}class pn extends Mt{constructor(e){super(),Lt(this,e,xl,Ql,It,{})}}export{pn as component};
