import{s as Ve,d as u,l as s,b as t,i as O,m as He,c,g as M,e as k,o as P,h as d,j as D,k as Le,p as Ne,n as Y,r as Te,a as J,q as ne,f as Q,t as X,u as ke,v as Ee}from"../chunks/CwRy9Tox.js";import{S as $e,i as Pe,t as ce,a as de,c as je,d as Be,m as Fe,b as Se,e as ze,g as Ue}from"../chunks/D-vqeeah.js";import{g as ie}from"../chunks/BVYH3h24.js";import{b as te}from"../chunks/DjSB8mDa.js";import{p as Ae}from"../chunks/BMPJZPAg.js";import{f as Ce,t as Oe,v as qe}from"../chunks/Do1Y_WLx.js";import{p as Ie}from"../chunks/Da8Ipvaz.js";import{g as Re}from"../chunks/9tEgXtNp.js";import{A as Ke}from"../chunks/CJcYv5Rm.js";import"../chunks/C-w-Rj8u.js";function We(){return Math.floor(Date.now()/1e3)}function Me(r){const e=We()-r;if(e<0)return"in the future";if(e<60)return"just now";if(e<3600){const a=Math.floor(e/60);return`${a} min${a>1?"s":""} ago`}if(e<86400){const a=Math.floor(e/3600);return`${a} hour${a>1?"s":""} ago`}if(e<604800){const a=Math.floor(e/86400);return`${a} day${a>1?"s":""} ago`}if(e<2592e3){const a=Math.floor(e/604800);return`${a} week${a>1?"s":""} ago`}if(e<31536e3){const a=Math.floor(e/2592e3);return`${a} month${a>1?"s":""} ago`}const n=Math.floor(e/31536e3);return`${n} year${n>1?"s":""} ago`}const Ge=!1,Je=async({params:r})=>({noteId:r.noteId}),ft=Object.freeze(Object.defineProperty({__proto__:null,load:Je,prerender:Ge},Symbol.toStringTag,{value:"Module"}));function Qe(r){let o,e,n,a,m,i,g,_,p,f,v,E=Me(r[0].created_at||0)+"",y,j,b,C,I=r[0].content+"",T,l,h,x=new Date((r[0].created_at||0)*1e3).toLocaleString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"})+"",V,q,N,$,R,ue="Join the conversation",oe,K,fe="Connect with the community on Fairfield. Reply to posts, share your thoughts, and discover more content.",re,F,S,ve=`<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path></svg>
							Create Account`,se,z,he=`<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path></svg>
							Sign In`,ae,W,me="Fairfield uses the Nostr protocol - your identity is portable and you control your data.",U,le,pe;a=new Ke({props:{src:r[4],pubkey:r[0].pubkey,size:"md",alt:r[5]}});let H=r[1]?.nip05&&De(r);return{c(){o=d("div"),e=d("div"),n=d("div"),ze(a.$$.fragment),m=D(),i=d("div"),g=d("p"),_=X(r[5]),p=D(),H&&H.c(),f=D(),v=d("div"),y=X(E),j=D(),b=d("div"),C=d("p"),T=X(I),l=D(),h=d("div"),V=X(x),q=D(),N=d("div"),$=d("div"),R=d("h3"),R.textContent=ue,oe=D(),K=d("p"),K.textContent=fe,re=D(),F=d("div"),S=d("button"),S.innerHTML=ve,se=D(),z=d("button"),z.innerHTML=he,ae=D(),W=d("p"),W.textContent=me,this.h()},l(w){o=c(w,"DIV",{class:!0});var L=k(o);e=c(L,"DIV",{class:!0});var B=k(e);n=c(B,"DIV",{class:!0});var G=k(n);Se(a.$$.fragment,G),m=M(G),i=c(G,"DIV",{class:!0});var Z=k(i);g=c(Z,"P",{class:!0});var be=k(g);_=Q(be,r[5]),be.forEach(u),p=M(Z),H&&H.l(Z),Z.forEach(u),f=M(G),v=c(G,"DIV",{class:!0});var _e=k(v);y=Q(_e,E),_e.forEach(u),G.forEach(u),j=M(B),b=c(B,"DIV",{class:!0});var ge=k(b);C=c(ge,"P",{class:!0});var we=k(C);T=Q(we,I),we.forEach(u),ge.forEach(u),l=M(B),h=c(B,"DIV",{class:!0});var ye=k(h);V=Q(ye,x),ye.forEach(u),B.forEach(u),L.forEach(u),q=M(w),N=c(w,"DIV",{class:!0});var xe=k(N);$=c(xe,"DIV",{class:!0});var A=k($);R=c(A,"H3",{class:!0,"data-svelte-h":!0}),P(R)!=="svelte-ls6vd8"&&(R.textContent=ue),oe=M(A),K=c(A,"P",{class:!0,"data-svelte-h":!0}),P(K)!=="svelte-14e1h48"&&(K.textContent=fe),re=M(A),F=c(A,"DIV",{class:!0});var ee=k(F);S=c(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),P(S)!=="svelte-arwge6"&&(S.innerHTML=ve),se=M(ee),z=c(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),P(z)!=="svelte-tq6s8u"&&(z.innerHTML=he),ee.forEach(u),ae=M(A),W=c(A,"P",{class:!0,"data-svelte-h":!0}),P(W)!=="svelte-19ym1yq"&&(W.textContent=me),A.forEach(u),xe.forEach(u),this.h()},h(){s(g,"class","font-semibold truncate"),s(i,"class","flex-1 min-w-0"),s(v,"class","text-sm text-base-content/60"),s(n,"class","flex items-center gap-3 mb-4"),s(C,"class","whitespace-pre-wrap text-base leading-relaxed"),s(b,"class","prose prose-sm max-w-none"),s(h,"class","mt-4 pt-4 border-t border-base-200 text-sm text-base-content/60"),s(e,"class","card-body"),s(o,"class","card bg-base-100 shadow-xl mb-6"),s(R,"class","text-xl font-bold mb-2"),s(K,"class","text-base-content/70 mb-6"),s(S,"class","btn btn-primary btn-lg"),s(z,"class","btn btn-outline btn-lg"),s(F,"class","flex flex-col sm:flex-row gap-3 justify-center"),s(W,"class","text-xs text-base-content/50 mt-4"),s($,"class","card-body text-center"),s(N,"class","card bg-gradient-to-br from-primary/10 to-secondary/10 border border-primary/20")},m(w,L){O(w,o,L),t(o,e),t(e,n),Fe(a,n,null),t(n,m),t(n,i),t(i,g),t(g,_),t(i,p),H&&H.m(i,null),t(n,f),t(n,v),t(v,y),t(e,j),t(e,b),t(b,C),t(C,T),t(e,l),t(e,h),t(h,V),O(w,q,L),O(w,N,L),t(N,$),t($,R),t($,oe),t($,K),t($,re),t($,F),t(F,S),t(F,se),t(F,z),t($,ae),t($,W),U=!0,le||(pe=[ne(S,"click",r[7]),ne(z,"click",r[6])],le=!0)},p(w,L){const B={};L&16&&(B.src=w[4]),L&1&&(B.pubkey=w[0].pubkey),L&32&&(B.alt=w[5]),a.$set(B),(!U||L&32)&&J(_,w[5]),w[1]?.nip05?H?H.p(w,L):(H=De(w),H.c(),H.m(i,null)):H&&(H.d(1),H=null),(!U||L&1)&&E!==(E=Me(w[0].created_at||0)+"")&&J(y,E),(!U||L&1)&&I!==(I=w[0].content+"")&&J(T,I),(!U||L&1)&&x!==(x=new Date((w[0].created_at||0)*1e3).toLocaleString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"})+"")&&J(V,x)},i(w){U||(de(a.$$.fragment,w),U=!0)},o(w){ce(a.$$.fragment,w),U=!1},d(w){w&&(u(o),u(q),u(N)),Be(a),H&&H.d(),le=!1,Te(pe)}}}function Xe(r){let o,e,n,a='<svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>',m,i,g="Unable to load note",_,p,f,v,E,y,j="Sign Up",b,C,I="Go Home",T,l;return{c(){o=d("div"),e=d("div"),n=d("div"),n.innerHTML=a,m=D(),i=d("h2"),i.textContent=g,_=D(),p=d("p"),f=X(r[3]),v=D(),E=d("div"),y=d("button"),y.textContent=j,b=D(),C=d("button"),C.textContent=I,this.h()},l(h){o=c(h,"DIV",{class:!0});var x=k(o);e=c(x,"DIV",{class:!0});var V=k(e);n=c(V,"DIV",{class:!0,"data-svelte-h":!0}),P(n)!=="svelte-1ophlby"&&(n.innerHTML=a),m=M(V),i=c(V,"H2",{class:!0,"data-svelte-h":!0}),P(i)!=="svelte-oc9ihw"&&(i.textContent=g),_=M(V),p=c(V,"P",{class:!0});var q=k(p);f=Q(q,r[3]),q.forEach(u),v=M(V),E=c(V,"DIV",{class:!0});var N=k(E);y=c(N,"BUTTON",{class:!0,"data-svelte-h":!0}),P(y)!=="svelte-plzhka"&&(y.textContent=j),b=M(N),C=c(N,"BUTTON",{class:!0,"data-svelte-h":!0}),P(C)!=="svelte-tkfdy3"&&(C.textContent=I),N.forEach(u),V.forEach(u),x.forEach(u),this.h()},h(){s(n,"class","text-error mb-4"),s(i,"class","text-xl font-bold mb-2"),s(p,"class","text-base-content/70 mb-6"),s(y,"class","btn btn-primary"),s(C,"class","btn btn-ghost"),s(E,"class","flex flex-col sm:flex-row gap-3 justify-center"),s(e,"class","card-body text-center"),s(o,"class","card bg-base-100 shadow-xl")},m(h,x){O(h,o,x),t(o,e),t(e,n),t(e,m),t(e,i),t(e,_),t(e,p),t(p,f),t(e,v),t(e,E),t(E,y),t(E,b),t(E,C),T||(l=[ne(y,"click",r[7]),ne(C,"click",r[9])],T=!0)},p(h,x){x&8&&J(f,h[3])},i:Y,o:Y,d(h){h&&u(o),T=!1,Te(l)}}}function Ye(r){let o,e='<div class="loading loading-spinner loading-lg text-primary"></div>';return{c(){o=d("div"),o.innerHTML=e,this.h()},l(n){o=c(n,"DIV",{class:!0,"data-svelte-h":!0}),P(o)!=="svelte-ngm5e1"&&(o.innerHTML=e),this.h()},h(){s(o,"class","flex justify-center items-center py-20")},m(n,a){O(n,o,a)},p:Y,i:Y,o:Y,d(n){n&&u(o)}}}function De(r){let o,e,n,a,m=r[1].nip05+"",i;return{c(){o=d("p"),e=Ee("svg"),n=Ee("path"),a=D(),i=X(m),this.h()},l(g){o=c(g,"P",{class:!0});var _=k(o);e=ke(_,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var p=k(e);n=ke(p,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),k(n).forEach(u),p.forEach(u),a=M(_),i=Q(_,m),_.forEach(u),this.h()},h(){s(n,"fill-rule","evenodd"),s(n,"d","M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"),s(n,"clip-rule","evenodd"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"class","h-4 w-4 text-success"),s(e,"viewBox","0 0 20 20"),s(e,"fill","currentColor"),s(o,"class","text-sm text-base-content/60 flex items-center gap-1")},m(g,_){O(g,o,_),t(o,e),t(e,n),t(o,a),t(o,i)},p(g,_){_&2&&m!==(m=g[1].nip05+"")&&J(i,m)},d(g){g&&u(o)}}}function Ze(r){let o,e,n,a,m,i,g=`<div class="container mx-auto px-4 max-w-2xl"><a href="${te}/" class="text-xl font-bold text-primary hover:opacity-80 transition-opacity">Fairfield</a></div>`,_,p,f,v,E,y,j='<div class="container mx-auto px-4 max-w-2xl text-center text-sm text-base-content/60"><p>Powered by Nostr - Decentralized social networking</p></div>',b;document.title=o=(r[0]?`Note by ${r[5]}`:"View Note")+" - Fairfield";const C=[Ye,Xe,Qe],I=[];function T(l,h){return l[2]?0:l[3]?1:l[0]?2:-1}return~(f=T(r))&&(v=I[f]=C[f](r)),{c(){e=d("meta"),a=D(),m=d("div"),i=d("header"),i.innerHTML=g,_=D(),p=d("main"),v&&v.c(),E=D(),y=d("footer"),y.innerHTML=j,this.h()},l(l){const h=He("svelte-1ikmprb",document.head);e=c(h,"META",{name:!0,content:!0}),h.forEach(u),a=M(l),m=c(l,"DIV",{class:!0});var x=k(m);i=c(x,"HEADER",{class:!0,"data-svelte-h":!0}),P(i)!=="svelte-1ludpfa"&&(i.innerHTML=g),_=M(x),p=c(x,"MAIN",{class:!0});var V=k(p);v&&v.l(V),V.forEach(u),E=M(x),y=c(x,"FOOTER",{class:!0,"data-svelte-h":!0}),P(y)!=="svelte-1whurfg"&&(y.innerHTML=j),x.forEach(u),this.h()},h(){s(e,"name","description"),s(e,"content",n=r[0]?.content?.slice(0,160)||"View this post on Fairfield"),s(i,"class","bg-base-100 border-b border-base-300 py-4"),s(p,"class","flex-1 container mx-auto px-4 py-8 max-w-2xl"),s(y,"class","bg-base-100 border-t border-base-300 py-4"),s(m,"class","min-h-screen bg-base-200 gradient-mesh flex flex-col")},m(l,h){t(document.head,e),O(l,a,h),O(l,m,h),t(m,i),t(m,_),t(m,p),~f&&I[f].m(p,null),t(m,E),t(m,y),b=!0},p(l,[h]){(!b||h&33)&&o!==(o=(l[0]?`Note by ${l[5]}`:"View Note")+" - Fairfield")&&(document.title=o),(!b||h&1&&n!==(n=l[0]?.content?.slice(0,160)||"View this post on Fairfield"))&&s(e,"content",n);let x=f;f=T(l),f===x?~f&&I[f].p(l,h):(v&&(Ue(),ce(I[x],1,1,()=>{I[x]=null}),je()),~f?(v=I[f],v?v.p(l,h):(v=I[f]=C[f](l),v.c()),de(v,1),v.m(p,null)):v=null)},i(l){b||(de(v),b=!0)},o(l){ce(v),b=!1},d(l){l&&(u(a),u(m)),u(e),~f&&I[f].d()}}}function et(r){return r.length<=16?r:`${r.slice(0,8)}...${r.slice(-4)}`}function tt(r,o,e){let n,a,m,i;Le(r,Ae,b=>e(8,i=b));let g=!0,_=null,p=null,f=null;Ne(async()=>{await v()});async function v(){e(2,g=!0),e(3,_=null);try{let b;if(n.startsWith("note1"))try{const l=Ce.decode(n);if(l.type!=="note")throw new Error("Invalid note format");b=l.data}catch{throw new Error("Invalid note ID format")}else if(n.startsWith("nevent1"))try{const l=Ce.decode(n);if(l.type!=="nevent")throw new Error("Invalid nevent format");b=l.data.id}catch{throw new Error("Invalid nevent format")}else if(/^[0-9a-f]{64}$/i.test(n))b=n.toLowerCase();else throw new Error("Invalid note ID format. Expected note1..., nevent1..., or hex event ID");await Oe();const I=await qe().fetchEvents({ids:[b]}),T=Array.from(I)[0];if(!T)throw new Error("Note not found");e(0,p=T),Ie.getProfile(T.pubkey),Ie.subscribe(l=>{const h=l.profiles.get(T.pubkey);h&&e(1,f=h)})}catch(b){console.error("Error loading note:",b),e(3,_=b instanceof Error?b.message:"Failed to load note")}finally{e(2,g=!1)}}function E(){ie(`${te}/login`)}function y(){ie(`${te}/signup`)}const j=()=>ie(`${te}/`);return r.$$.update=()=>{r.$$.dirty&256&&(n=i.params.noteId),r.$$.dirty&3&&e(5,a=f?.displayName||(p?.pubkey?et(p.pubkey):"Unknown")),r.$$.dirty&3&&e(4,m=f?.avatar||(p?.pubkey?Re(p.pubkey,80):""))},[p,f,g,_,m,a,E,y,i,j]}class vt extends $e{constructor(o){super(),Pe(this,o,tt,Ze,Ve,{})}}export{vt as component,ft as universal};
