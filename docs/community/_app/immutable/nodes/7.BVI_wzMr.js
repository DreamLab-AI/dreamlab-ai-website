import{s as K,d,i as k,l as _,m as N,g as q,c as b,e as v,j as w,h as y,k as B,p as R,n as E,o as W,a as Y,b as g,f as M,t as V}from"../chunks/CwRy9Tox.js";import{S as z,i as G,t as D,a as F,c as J,d as O,m as Q,b as U,e as X,g as Z}from"../chunks/D-vqeeah.js";import{g as j}from"../chunks/CQ8JIY5d.js";import{b as C}from"../chunks/Box6chXe.js";import{p as x}from"../chunks/ac69Psw1.js";import{g as $,a as H,b as ee,c as L}from"../chunks/CHLmt3N8.js";import{u as te}from"../chunks/Cz6ajzO7.js";import"../chunks/C_zicc2g.js";import{B as re}from"../chunks/BFgplg1u.js";function oe(s){let a,n,o,t,i,f,l,u,m,r;return a=new re({props:{items:L(s[3],s[0])}}),{c(){X(a.$$.fragment),n=w(),o=y("div"),t=y("span"),i=V(s[2]),f=w(),l=y("a"),u=V("Back to Section"),this.h()},l(e){U(a.$$.fragment,e),n=q(e),o=b(e,"DIV",{class:!0});var c=v(o);t=b(c,"SPAN",{});var p=v(t);i=M(p,s[2]),p.forEach(d),f=q(c),l=b(c,"A",{href:!0,class:!0});var S=v(l);u=M(S,"Back to Section"),S.forEach(d),c.forEach(d),this.h()},h(){_(l,"href",m=C+"/"+s[3]+"/"+s[0]),_(l,"class","btn btn-sm btn-ghost"),_(o,"class","alert alert-error mt-4")},m(e,c){Q(a,e,c),k(e,n,c),k(e,o,c),g(o,t),g(t,i),g(o,f),g(o,l),g(l,u),r=!0},p(e,c){const p={};c&9&&(p.items=L(e[3],e[0])),a.$set(p),(!r||c&4)&&Y(i,e[2]),(!r||c&9&&m!==(m=C+"/"+e[3]+"/"+e[0]))&&_(l,"href",m)},i(e){r||(F(a.$$.fragment,e),r=!0)},o(e){D(a.$$.fragment,e),r=!1},d(e){e&&(d(n),d(o)),O(a,e)}}}function se(s){let a,n='<span class="loading loading-spinner loading-lg text-primary"></span>';return{c(){a=y("div"),a.innerHTML=n,this.h()},l(o){a=b(o,"DIV",{class:!0,"data-svelte-h":!0}),W(a)!=="svelte-f5e84o"&&(a.innerHTML=n),this.h()},h(){_(a,"class","flex justify-center items-center min-h-[400px]")},m(o,t){k(o,a,t)},p:E,i:E,o:E,d(o){o&&d(a)}}}function ae(s){let a,n,o,t,i,f;document.title=a="Forum - "+s[4].name;const l=[se,oe],u=[];function m(r,e){return r[1]?0:r[2]?1:-1}return~(t=m(s))&&(i=u[t]=l[t](s)),{c(){n=w(),o=y("div"),i&&i.c(),this.h()},l(r){N("svelte-1fea6eh",document.head).forEach(d),n=q(r),o=b(r,"DIV",{class:!0});var c=v(o);i&&i.l(c),c.forEach(d),this.h()},h(){_(o,"class","container mx-auto p-4 max-w-6xl")},m(r,e){k(r,n,e),k(r,o,e),~t&&u[t].m(o,null),f=!0},p(r,[e]){(!f||e&16)&&a!==(a="Forum - "+r[4].name)&&(document.title=a);let c=t;t=m(r),t===c?~t&&u[t].p(r,e):(i&&(Z(),D(u[c],1,1,()=>{u[c]=null}),J()),~t?(i=u[t],i?i.p(r,e):(i=u[t]=l[t](r),i.c()),F(i,1),i.m(o,null)):i=null)},i(r){f||(F(i),f=!0)},o(r){D(i),f=!1},d(r){r&&(d(n),d(o)),~t&&u[t].d()}}}function ne(s,a,n){let o,t,i,f,l,u,m,r,e,c,p;B(s,H,h=>n(13,e=h)),B(s,te,h=>n(8,c=h)),B(s,x,h=>n(9,p=h));const S=$();let I=!0,A=null;return R(async()=>{if(await H.waitForReady(),!e.isAuthenticated||!e.publicKey){j(`${C}/`);return}if(!l||!u){n(2,A=`Section "${t}" not found`),n(1,I=!1);return}if(!r){n(2,A="You do not have access to this section"),n(1,I=!1);return}j(`${C}/chat/${i}`)}),s.$$.update=()=>{s.$$.dirty&512&&n(3,o=p.params.category),s.$$.dirty&512&&n(0,t=p.params.section),s.$$.dirty&512&&(i=p.params.forumId),s.$$.dirty&1&&n(7,f=ee(t)),s.$$.dirty&128&&n(5,l=f?.section),s.$$.dirty&128&&(u=f?.category),s.$$.dirty&256&&n(6,m=c.profile?.cohorts||[]),s.$$.dirty&96&&(r=(()=>{if(!l?.access?.requiresApproval)return!0;const h=l.access.requiredCohorts||[];if(h.length===0)return!0;const P=m;return h.some(T=>P.includes(T))})())},[t,I,A,o,S,l,m,f,c,p]}class _e extends z{constructor(a){super(),G(this,a,ne,ae,K,{})}}export{_e as component};
