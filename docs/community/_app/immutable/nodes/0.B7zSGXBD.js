import{n as pe,_ as Os,B as st,W as nt,s as Pe,d as f,i as z,l as r,c as k,e as C,h as w,k as ve,p as Qt,R as ft,a as he,b as u,g as L,u as q,f as Y,j as N,v as K,t as J,y as $e,q as Z,o as W,x as ke,r as De,A as se,C as Fs,D as Rs,K as Xt,w as St,P as ct,E as ys,z as Cs,L as Es,m as Ws,G as qs,H as Ks,I as Zs,J as Gs}from"../chunks/CwRy9Tox.js";import{n as Ys,l as Js,j as Qs,k as Xs,S as He,i as Oe,t as ae,a as te,g as Ie,c as Te,o as Ve,d as Be,m as Se,b as Le,e as Ne,f as Ms,p as $s,h as en}from"../chunks/D-vqeeah.js";import{g as Is}from"../chunks/D0QH3NT1.js";import{p as Dt}from"../chunks/BgttACkO.js";import{w as $t,d as Ts,b as ne}from"../chunks/BrNZSoMP.js";import{g as tn}from"../chunks/DKfTTBpB.js";import{c as ln,f as Lt,s as Cl,a as dt}from"../chunks/BvU0z6gS.js";import{G as sn,H as xs,I as nn,J as rn,K as an,L as As,M as on,N as Bs,a as ht,g as el,O as Ss,P as Ls,d as Ns,Q as cn,R as un,i as fn,T as dn}from"../chunks/I2mpdA09.js";import{c as hn,a as pn,C as mn,s as vn}from"../chunks/B0Zo0m3g.js";import{s as bn,n as Ps}from"../chunks/D5jpkL_C.js";import{d as me}from"../chunks/BidevG8G.js";import{c as gn,u as tl,i as Ds,w as zs}from"../chunks/t4_QlDax.js";import{t as lt}from"../chunks/F-JjANfI.js";import{subscribe as xt,publishEvent as El,ndk as js}from"../chunks/DRx8R66N.js";import{e as Ue,u as ll,f as _n,d as Vs}from"../chunks/BFk-VQ8S.js";import{p as Wt}from"../chunks/ic1NEA3a.js";import{e as kn,b as wn}from"../chunks/CP-hDz56.js";import"../chunks/DS5nLLdG.js";import"../chunks/pu4wIEmN.js";import"../chunks/CsmHjMo3.js";function yn(s,e,t,l){if(!e)return pe;const n=s.getBoundingClientRect();if(e.left===n.left&&e.right===n.right&&e.top===n.top&&e.bottom===n.bottom)return pe;const{delay:a=0,duration:i=300,easing:c=Os,start:o=Ys()+a,end:h=o+i,tick:m=pe,css:g}=t(s,{from:e,to:n},l);let v=!0,p=!1,d;function b(){g&&(d=Xs(s,0,1,i,a,c,g)),a||(p=!0)}function _(){g&&Qs(s,d),v=!1}return Js(y=>{if(!p&&y>=o&&(p=!0),p&&y>=h&&(m(1,0),_()),!v)return!1;if(p){const M=y-o,T=0+1*c(M/i);m(T,1-T)}return!0}),b(),m(0,1),_}function Cn(s){const e=getComputedStyle(s);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:l}=e,n=s.getBoundingClientRect();s.style.position="absolute",s.style.width=t,s.style.height=l,Us(s,n)}}function Us(s,e){const t=s.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const l=getComputedStyle(s),n=l.transform==="none"?"":l.transform;s.style.transform=`${n} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}const En=!0,Mn=!1,Sa=Object.freeze(Object.defineProperty({__proto__:null,prerender:En,ssr:Mn},Symbol.toStringTag,{value:"Module"})),Bt=30*60*1e3,In=2*60*1e3,Tn=30*1e3,Ml="nostr_bbs_last_activity",Il={isActive:!0,showWarning:!1,remainingMs:Bt};function xn(){const{subscribe:s,set:e,update:t}=$t(Il);let l=null,n=null;function a(){localStorage.setItem(Ml,Date.now().toString()),t(v=>({...v,isActive:!0,showWarning:!1,remainingMs:Bt}))}function i(){const v=localStorage.getItem(Ml);return v?parseInt(v,10):Date.now()}function c(){const v=i(),p=Date.now()-v,d=Bt-p;d<=0?(t(b=>({...b,isActive:!1,showWarning:!1,remainingMs:0})),n&&n()):d<=In?t(b=>({...b,isActive:!0,showWarning:!0,remainingMs:d})):t(b=>({...b,isActive:!0,showWarning:!1,remainingMs:d}))}function o(){return st(xs)||sn()||localStorage.getItem("nostr_bbs_pwa_mode")==="true"}function h(v){if(o())return console.log("[Session] PWA mode detected - session timeout disabled"),t(b=>({...b,isActive:!0,showWarning:!1,remainingMs:Bt})),()=>{};n=v,a(),l&&clearInterval(l),l=setInterval(c,Tn);const p=["mousedown","keydown","touchstart","scroll"],d=An(a,1e4);return p.forEach(b=>{document.addEventListener(b,d,{passive:!0})}),()=>{l&&(clearInterval(l),l=null),p.forEach(b=>{document.removeEventListener(b,d)})}}function m(){l&&(clearInterval(l),l=null),n=null,e(Il)}function g(){a()}return{subscribe:s,start:h,stop:m,touch:a,extend:g,checkTimeout:c}}function An(s,e){let t=0;return(...l)=>{const n=Date.now();n-t>=e&&(t=n,s(...l))}}const Nt=xn();function Bn(s){const e=Math.floor(s/6e4),t=Math.floor(s%6e4/1e3);return e>0?`${e}m ${t}s`:`${t}s`}async function Sn(){if(typeof window>"u")return;if(nn(),await rn()){console.log("[PWA] Service worker registered successfully");try{const e=await an();e.length>0&&(console.log(`[PWA] Found ${e.length} queued messages`),st(As)&&await on())}catch(e){console.error("[PWA] Failed to check message queue:",e)}}}async function Ln(s){const e=performance.now();await me.clearSearchIndex();const t=await me.messages.toCollection().filter(i=>!i.deleted).toArray(),l=t.length,n=100;for(let i=0;i<t.length;i+=n){const c=t.slice(i,i+n);await me.bulkIndexMessages(c),s&&s(Math.min(i+n,l),l),await new Promise(o=>setTimeout(o,0))}const a=performance.now();console.log(`Search index built: ${l} messages in ${(a-e).toFixed(2)}ms`)}async function qt(s){await me.indexMessage(s)}async function Tl(s){await me.removeFromIndex(s)}async function sl(){const s=await me.searchIndex.count();if(s===0)return{totalIndexed:0,oldestMessage:0,newestMessage:0};const e=await me.searchIndex.orderBy("timestamp").first(),t=await me.searchIndex.orderBy("timestamp").reverse().first();return{totalIndexed:s,oldestMessage:e?.timestamp||0,newestMessage:t?.timestamp||0}}const Nn={REMOVE_DATE:"2025-12-01"},xl={messages:[],loading:!1,error:null,currentChannelId:null,hasMore:!0,lastFetchTime:null};function Pn(){const{subscribe:s,set:e,update:t}=$t(xl),l=new Map;async function n(o){const h=await me.getUser(o.pubkey);return{id:o.id,channelId:o.channelId,pubkey:o.pubkey,content:o.content,created_at:o.created_at,encrypted:o.encrypted,deleted:o.deleted,author:{pubkey:o.pubkey,name:h?.name||h?.displayName||void 0,avatar:h?.avatar||void 0}}}function a(){return console.warn("[REMOVED] NIP-04 decryption removed as of",Nn.REMOVE_DATE),"[Legacy NIP-04 encrypted message - encryption method no longer supported]"}function i(o,h,m){const g=js();if(!g)throw new Error("NDK not initialized");const v=new Bs(g);return v.kind=h,v.content=o,v.tags=m,v.created_at=Math.floor(Date.now()/1e3),v}function c(o){return{id:o.id,pubkey:o.pubkey,created_at:o.created_at||Math.floor(Date.now()/1e3),kind:o.kind||0,tags:o.tags,content:o.content,sig:o.sig||""}}return{subscribe:s,async fetchMessages(o,h,m,g=50){t(v=>({...v,loading:!0,error:null,currentChannelId:h}));try{const v=await me.getChannelMessagesWithAuthors(h),p=await Promise.all(v.map(T=>n(T)));t(T=>({...T,messages:p,loading:!0}));const b=(await me.getChannel(h))?.isEncrypted||!1,_=v.length>0?Math.max(...v.map(T=>T.created_at)):0;xt({kinds:[9],"#e":[h],since:_,limit:g},{closeOnEose:!1}).on("event",async T=>{const B=c(T);if(await me.isMessageDeleted(B.id))return;let E=B.content;b&&(E=a());const I={id:B.id,channelId:h,pubkey:B.pubkey,content:E,created_at:B.created_at,encrypted:b,deleted:!1,kind:B.kind,tags:B.tags,sig:B.sig};await me.messages.put(I),qt(I).catch(S=>console.error("Failed to index message for search:",S));const x=await n(I);t(S=>S.messages.some(V=>V.id===x.id)?S:{...S,messages:[...S.messages,x].sort((V,j)=>V.created_at-j.created_at)})}),t(T=>({...T,loading:!1,lastFetchTime:Date.now()}))}catch(v){const p=v instanceof Error?v.message:"Failed to fetch messages";console.error("fetchMessages error:",v),lt.error(`Connection error: ${p}`),t(d=>({...d,error:p,loading:!1}))}},async sendMessage(o,h,m,g,v=!1,p=[]){try{let d=o;if(v)throw new Error("NIP-04 encrypted messages are no longer supported. Use NIP-44 gift wrap (kind 1059) for encrypted direct messages.");const _=i(d,9,[["e",h,m,"root"]]);await El(_);const y=c(_),M={id:y.id,channelId:h,pubkey:y.pubkey,content:o,created_at:y.created_at,encrypted:v,deleted:!1,kind:y.kind,tags:y.tags,sig:y.sig};await me.messages.put(M),qt(M).catch(B=>console.error("Failed to index message for search:",B));const T=await n(M);t(B=>({...B,messages:[...B.messages,T].sort((A,E)=>A.created_at-E.created_at)}))}catch(d){const b=d instanceof Error?d.message:"Failed to send message";throw console.error("sendMessage error:",d),lt.error(`Failed to send: ${b}`),t(_=>({..._,error:b})),d}},async deleteMessage(o,h,m,g){try{const p=i("",5,[["e",o],["k","9"]]);await El(p);const d=c(p);await me.addDeletion({id:d.id,deletedEventId:o,channelId:h,deleterPubkey:d.pubkey,created_at:d.created_at,kind:5}),Tl(o).catch(b=>console.error("Failed to remove deleted message from search:",b)),t(b=>({...b,messages:b.messages.map(_=>_.id===o?{..._,deleted:!0}:_)}))}catch(v){const p=v instanceof Error?v.message:"Failed to delete message";throw console.error("deleteMessage error:",v),lt.error(`Failed to delete: ${p}`),t(d=>({...d,error:p})),v}},async subscribeToChannel(o,h,m){try{const v=(await me.getChannel(o))?.isEncrypted||!1,p={kinds:[9],"#e":[o],since:Math.floor(Date.now()/1e3)},d={kinds:[5,9005],"#e":[o],since:Math.floor(Date.now()/1e3)},b=`msg_${o}_${Date.now()}`,_=xt(p,{closeOnEose:!1,subId:b});_.on("event",async B=>{const A=c(B);let E=A.content;v&&(E=a());const I={id:A.id,channelId:o,pubkey:A.pubkey,content:E,created_at:A.created_at,encrypted:v,deleted:!1,kind:A.kind,tags:A.tags,sig:A.sig};await me.messages.put(I),qt(I).catch(S=>console.error("Failed to index message for search:",S));const x=await n(I);t(S=>!S.messages.some(V=>V.id===x.id)&&S.currentChannelId===o?{...S,messages:[...S.messages,x].sort((V,j)=>V.created_at-j.created_at)}:S)});const y=`del_${o}_${Date.now()}`,M=xt(d,{closeOnEose:!1,subId:y});M.on("event",async B=>{const A=c(B),E=A.tags.find(I=>I[0]==="e")?.[1];E&&(await me.addDeletion({id:A.id,deletedEventId:E,channelId:o,deleterPubkey:A.pubkey,created_at:A.created_at,kind:A.kind}),Tl(E).catch(I=>console.error("Failed to remove deleted message from search:",I)),t(I=>({...I,messages:I.messages.map(x=>x.id===E?{...x,deleted:!0}:x)})))});const T=l.get(o)||[];l.set(o,[...T,{subId:b,subscription:_},{subId:y,subscription:M}])}catch(g){console.error("subscribeToChannel error:",g);const v=g instanceof Error?g.message:"Failed to subscribe to channel";lt.error(`Channel subscription failed: ${v}`),t(p=>({...p,error:v}))}},unsubscribeFromChannel(o,h){const m=l.get(o);m&&(m.forEach(({subscription:g})=>{g.stop()}),l.delete(o))},async fetchOlderMessages(o,h,m,g=50){const p=st({subscribe:s}).messages.filter(d=>d.channelId===h).reduce((d,b)=>b.created_at<d.created_at?b:d,{created_at:1/0});if(p.created_at===1/0)return!1;t(d=>({...d,loading:!0,error:null}));try{const b=(await me.getChannel(h))?.isEncrypted||!1,_={kinds:[9],"#e":[h],until:p.created_at-1,limit:g};let y=0;return await new Promise((M,T)=>{const B=setTimeout(()=>M(),5e3),A=xt(_,{closeOnEose:!0});A.on("event",async E=>{const I=c(E);if(await me.isMessageDeleted(I.id))return;let S=I.content;b&&(S=a());const P={id:I.id,channelId:h,pubkey:I.pubkey,content:S,created_at:I.created_at,encrypted:b,deleted:!1,kind:I.kind,tags:I.tags,sig:I.sig};await me.messages.put(P);const V=await n(P);t(j=>j.messages.some(D=>D.id===V.id)?j:(y++,{...j,messages:[...j.messages,V].sort((D,U)=>D.created_at-U.created_at)}))}),A.on("eose",()=>{clearTimeout(B),M()}),A.on("close",()=>{clearTimeout(B),M()})}),t(M=>({...M,loading:!1,hasMore:y>=g*.5})),y>0}catch(d){const b=d instanceof Error?d.message:"Failed to fetch older messages";return console.error("fetchOlderMessages error:",d),t(_=>({..._,error:b,loading:!1,hasMore:!1})),!1}},clearError(){t(o=>({...o,error:null}))},clear(){e(xl)},disconnectAll(){l.forEach(o=>{o.forEach(({subscription:h})=>{h.stop()})}),l.clear()}}}const nl=Pn(),Dn=Ts(nl,s=>s.messages.filter(e=>!e.deleted));Ts(Dn,s=>s.length);typeof window<"u"&&window.addEventListener("beforeunload",()=>{nl.disconnectAll()});let zn=null;const ot=new Set;function jn(){let s=0;nl.subscribe(async e=>{if(!(e.loading||e.messages.length===0)){if(e.messages.length>s){const t=e.messages.slice(s);for(const l of t)await Vn(l,e.currentChannelId)}s=e.messages.length}})}async function Vn(s,e){try{if(ot.has(s.id))return;if(ot.add(s.id),ot.size>1e3){const m=Array.from(ot).slice(-1e3);ot.clear(),m.forEach(g=>ot.add(g))}if(!bn(s.pubkey,s.channelId,zn))return;const l=(await me.getChannel(s.channelId))?.name||"Unknown Channel",n=st(gn),a=Un(s.content,n),i=a?"mention":"message",c=s.author.name||s.author.pubkey.slice(0,8),o=a?`${c} mentioned you in ${l}`:`${c}: ${s.content.slice(0,50)}${s.content.length>50?"...":""}`;Ps.addNotification(i,o,{channelId:s.channelId,channelName:l,senderPubkey:s.pubkey,senderName:c,url:`/chat?channel=${s.channelId}`})}catch(t){console.error("Error processing message notification:",t)}}function Un(s,e){return e?s.includes("@"):!1}async function Hn(s){console.log("Starting search index rebuild...");const e=performance.now();try{await Ln(s);const t=await sl(),n=(performance.now()-e)/1e3;console.log("Search index rebuild complete!"),console.log(`- Indexed: ${t.totalIndexed} messages`),console.log(`- Duration: ${n.toFixed(2)}s`),console.log(`- Average: ${(t.totalIndexed/n).toFixed(0)} messages/sec`);return}catch(t){throw console.error("Search index rebuild failed:",t),t}}async function On(){const s=await sl(),e=await me.messages.where("deleted").equals(0).count();if(s.totalIndexed===0&&e>0)return!0;const t=e-s.totalIndexed,l=t/e*100;return l>10?(console.log(`Search index out of sync: ${t} messages not indexed (${l.toFixed(1)}%)`),!0):!1}async function Fn(){if(await On())console.log("Search index is empty or out of date, rebuilding..."),await Hn((e,t)=>{(e%100===0||e===t)&&console.log(`Indexing messages: ${e}/${t} (${(e/t*100).toFixed(1)}%)`)});else{const e=await sl();console.log(`Search index ready: ${e.totalIndexed} messages indexed`)}}let Kt=!1;async function Rn(){if(!Kt)try{Kt=!0,await Fn()}catch(s){console.error("Failed to initialize search index:",s),Kt=!1}}function Wn(s,{from:e,to:t},l={}){const n=getComputedStyle(s),a=n.transform==="none"?"":n.transform,[i,c]=n.transformOrigin.split(" ").map(parseFloat),o=e.left+e.width*i/t.width-(t.left+i),h=e.top+e.height*c/t.height-(t.top+c),{delay:m=0,duration:g=p=>Math.sqrt(p)*120,easing:v=ln}=l;return{delay:m,duration:nt(g)?g(Math.sqrt(o*o+h*h)):g,easing:v,css:(p,d)=>{const b=d*o,_=d*h,y=p+d*e.width/t.width,M=p+d*e.height/t.height;return`transform: ${a} translate(${b}px, ${_}px) scale(${y}, ${M});`}}}function Al(s,e,t){const l=s.slice();return l[10]=e[t],l}function Zt(s){const e=s.slice(),t=e[10].action;return e[13]=t,e}function Bl(s){let e;return{c(){e=w("div"),this.h()},l(t){e=k(t,"DIV",{class:!0,style:!0}),C(e).forEach(f),this.h()},h(){r(e,"class","absolute bottom-0 left-0 h-1 bg-current opacity-30 progress-bar svelte-1bnehg0"),$e(e,"animation-duration",s[10].duration+"ms")},m(t,l){z(t,e,l)},p(t,l){l&1&&$e(e,"animation-duration",t[10].duration+"ms")},d(t){t&&f(e)}}}function Sl(s){let e,t=s[13].label+"",l,n,a;function i(){return s[6](s[10],s[13])}return{c(){e=w("button"),l=J(t),this.h()},l(c){e=k(c,"BUTTON",{class:!0});var o=C(e);l=Y(o,t),o.forEach(f),this.h()},h(){r(e,"class","btn btn-xs btn-outline border-current text-current hover:bg-current hover:text-base-100 self-start")},m(c,o){z(c,e,o),u(e,l),n||(a=Z(e,"click",i),n=!0)},p(c,o){s=c,o&1&&t!==(t=s[13].label+"")&&he(l,t)},d(c){c&&f(e),n=!1,a()}}}function Ll(s){let e,t='<svg class="w-4 h-4 stroke-current" fill="none" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>',l,n;function a(){return s[7](s[10])}return{c(){e=w("button"),e.innerHTML=t,this.h()},l(i){e=k(i,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(e)!=="svelte-1ugddyn"&&(e.innerHTML=t),this.h()},h(){r(e,"class","btn btn-ghost btn-xs btn-circle flex-shrink-0 hover:bg-current/20"),r(e,"aria-label","Dismiss notification")},m(i,c){z(i,e,c),l||(n=Z(e,"click",a),l=!0)},p(i,c){s=i},d(i){i&&f(e),l=!1,n()}}}function Nl(s,e){let t,l,n,a,i,c,o,h,m,g,v=e[10].message+"",p,d,b,_,y,M,T,B=pe,A,E=e[10].duration&&e[10].duration>0&&Bl(e),I=e[10].action&&Sl(Zt(e)),x=e[10].dismissible&&Ll(e);return{key:s,first:null,c(){t=w("div"),E&&E.c(),l=N(),n=w("div"),a=w("div"),i=K("svg"),c=K("path"),h=N(),m=w("div"),g=w("span"),p=J(v),d=N(),I&&I.c(),b=N(),x&&x.c(),_=N(),this.h()},l(S){t=k(S,"DIV",{class:!0,role:!0,"aria-atomic":!0});var P=C(t);E&&E.l(P),l=L(P),n=k(P,"DIV",{class:!0});var V=C(n);a=k(V,"DIV",{class:!0});var j=C(a);i=q(j,"svg",{class:!0,fill:!0,viewBox:!0,"stroke-width":!0});var H=C(i);c=q(H,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),C(c).forEach(f),H.forEach(f),j.forEach(f),h=L(V),m=k(V,"DIV",{class:!0});var D=C(m);g=k(D,"SPAN",{class:!0});var U=C(g);p=Y(U,v),U.forEach(f),d=L(D),I&&I.l(D),D.forEach(f),b=L(V),x&&x.l(V),V.forEach(f),_=L(P),P.forEach(f),this.h()},h(){r(c,"stroke-linecap","round"),r(c,"stroke-linejoin","round"),r(c,"d",o=e[2][e[10].variant]),r(i,"class","w-6 h-6 stroke-current"),r(i,"fill","none"),r(i,"viewBox","0 0 24 24"),r(i,"stroke-width","2"),r(a,"class","flex-shrink-0 mt-0.5"),r(g,"class","text-sm font-medium break-words leading-relaxed"),r(m,"class","flex-1 flex flex-col gap-2 min-w-0"),r(n,"class","flex items-start gap-3 w-full"),r(t,"class",y="alert border-2 shadow-2xl min-w-[300px] max-w-md relative overflow-hidden "+e[1][e[10].variant]+" svelte-1bnehg0"),r(t,"role","alert"),r(t,"aria-atomic","true"),this.first=t},m(S,P){z(S,t,P),E&&E.m(t,null),u(t,l),u(t,n),u(n,a),u(a,i),u(i,c),u(n,h),u(n,m),u(m,g),u(g,p),u(m,d),I&&I.m(m,null),u(n,b),x&&x.m(n,null),u(t,_),A=!0},p(S,P){e=S,e[10].duration&&e[10].duration>0?E?E.p(e,P):(E=Bl(e),E.c(),E.m(t,l)):E&&(E.d(1),E=null),(!A||P&1&&o!==(o=e[2][e[10].variant]))&&r(c,"d",o),(!A||P&1)&&v!==(v=e[10].message+"")&&he(p,v),e[10].action?I?I.p(Zt(e),P):(I=Sl(Zt(e)),I.c(),I.m(m,null)):I&&(I.d(1),I=null),e[10].dismissible?x?x.p(e,P):(x=Ll(e),x.c(),x.m(n,null)):x&&(x.d(1),x=null),(!A||P&3&&y!==(y="alert border-2 shadow-2xl min-w-[300px] max-w-md relative overflow-hidden "+e[1][e[10].variant]+" svelte-1bnehg0"))&&r(t,"class",y)},r(){T=t.getBoundingClientRect()},f(){Cn(t),B(),Us(t,T)},a(){B(),B=yn(t,T,Wn,{duration:200})},i(S){A||(S&&ft(()=>{A&&(M||(M=Ve(t,Lt,{x:300,duration:300,opacity:0},!0)),M.run(1))}),A=!0)},o(S){S&&(M||(M=Ve(t,Lt,{x:300,duration:300,opacity:0},!1)),M.run(0)),A=!1},d(S){S&&f(t),E&&E.d(),I&&I.d(),x&&x.d(),S&&M&&M.end()}}}function qn(s){let e,t=[],l=new Map,n,a=Ue(s[0].slice(-3));const i=c=>c[10].id;for(let c=0;c<a.length;c+=1){let o=Al(s,a,c),h=i(o);l.set(h,t[c]=Nl(h,o))}return{c(){e=w("div");for(let c=0;c<t.length;c+=1)t[c].c();this.h()},l(c){e=k(c,"DIV",{class:!0,role:!0,"aria-live":!0,"aria-label":!0});var o=C(e);for(let h=0;h<t.length;h+=1)t[h].l(o);o.forEach(f),this.h()},h(){r(e,"class","toast toast-top toast-end z-50 max-h-[90vh] overflow-y-auto svelte-1bnehg0"),r(e,"role","region"),r(e,"aria-live","polite"),r(e,"aria-label","Notifications")},m(c,o){z(c,e,o);for(let h=0;h<t.length;h+=1)t[h]&&t[h].m(e,null);n=!0},p(c,[o]){if(o&31){a=Ue(c[0].slice(-3)),Ie();for(let h=0;h<t.length;h+=1)t[h].r();t=ll(t,o,i,1,c,a,l,e,_n,Nl,null,Al);for(let h=0;h<t.length;h+=1)t[h].a();Te()}},i(c){if(!n){for(let o=0;o<a.length;o+=1)te(t[o]);n=!0}},o(c){for(let o=0;o<t.length;o+=1)ae(t[o]);n=!1},d(c){c&&f(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function Pl(){"vibrate"in navigator&&navigator.vibrate(50)}function Kn(s,e,t){let l,n,a;ve(s,lt,p=>t(5,a=p));const i={success:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",error:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z",info:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",warning:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"};let c=!1;Qt(()=>{c=localStorage.getItem("toastSoundEnabled")==="true"});function o(p){if(c)try{const d=window.AudioContext||window.webkitAudioContext;if(!d)return;const b=new d,_=b.createOscillator(),y=b.createGain();_.connect(y),y.connect(b.destination);const M={success:523.25,error:329.63,warning:440,info:392};_.frequency.value=M[p]||440,_.type="sine",y.gain.setValueAtTime(.1,b.currentTime),y.gain.exponentialRampToValueAtTime(.01,b.currentTime+.1),_.start(b.currentTime),_.stop(b.currentTime+.1)}catch{}}function h(p){lt.remove(p)}async function m(p,d){lt.remove(p),await d()}const g=(p,d)=>{Pl(),m(p.id,d.callback)},v=p=>{Pl(),h(p.id)};return s.$$.update=()=>{if(s.$$.dirty&32&&t(0,l=a.toasts),s.$$.dirty&1&&l.length>0){const p=l[l.length-1];o(p.variant)}},t(1,n={success:"bg-success/10 border-success text-success backdrop-blur-md",error:"bg-error/10 border-error text-error backdrop-blur-md",info:"bg-info/10 border-info text-info backdrop-blur-md",warning:"bg-warning/10 border-warning text-warning backdrop-blur-md"}),[l,n,i,h,m,a,g,v]}class Zn extends He{constructor(e){super(),Oe(this,e,Kn,qn,Pe,{})}}function Gn(){const{subscribe:s,set:e,update:t}=$t({open:!1,options:null,resolve:null});return{subscribe:s,confirm(l){return new Promise(n=>{e({open:!0,options:{confirmLabel:"Confirm",cancelLabel:"Cancel",variant:"danger",...l},resolve:n})})},handleConfirm(){const l=st({subscribe:s});l.resolve&&l.resolve(!0),e({open:!1,options:null,resolve:null})},handleCancel(){const l=st({subscribe:s});l.resolve&&l.resolve(!1),e({open:!1,options:null,resolve:null})},close(){const l=st({subscribe:s});l.resolve&&l.resolve(!1),e({open:!1,options:null,resolve:null})}}}const vt=Gn(),{window:Yn}=Is;function Dl(s){let e,t,l,n,a,i,c,o=s[2].icon+"",h,m,g,v,p,d=s[1].title+"",b,_,y,M=s[1].message+"",T,B,A,E,I=s[1].cancelLabel+"",x,S,P,V=s[1].confirmLabel+"",j,H,D,U,R,le,re;return{c(){e=w("div"),t=w("div"),l=N(),n=w("div"),a=w("div"),i=w("div"),c=w("span"),h=J(o),v=N(),p=w("h3"),b=J(d),_=N(),y=w("p"),T=J(M),B=N(),A=w("div"),E=w("button"),x=J(I),S=N(),P=w("button"),j=J(V),this.h()},l(F){e=k(F,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0,"aria-describedby":!0});var ie=C(e);t=k(ie,"DIV",{class:!0,"aria-hidden":!0}),C(t).forEach(f),l=L(ie),n=k(ie,"DIV",{class:!0});var oe=C(n);a=k(oe,"DIV",{class:!0});var O=C(a);i=k(O,"DIV",{class:!0});var $=C(i);c=k($,"SPAN",{class:!0});var Q=C(c);h=Y(Q,o),Q.forEach(f),$.forEach(f),v=L(O),p=k(O,"H3",{id:!0,class:!0});var X=C(p);b=Y(X,d),X.forEach(f),_=L(O),y=k(O,"P",{id:!0,class:!0});var ge=C(y);T=Y(ge,M),ge.forEach(f),B=L(O),A=k(O,"DIV",{class:!0});var _e=C(A);E=k(_e,"BUTTON",{class:!0});var ce=C(E);x=Y(ce,I),ce.forEach(f),S=L(_e),P=k(_e,"BUTTON",{class:!0});var ee=C(P);j=Y(ee,V),ee.forEach(f),_e.forEach(f),O.forEach(f),oe.forEach(f),ie.forEach(f),this.h()},h(){r(t,"class","fixed inset-0 bg-black/60 backdrop-blur-sm"),r(t,"aria-hidden","true"),r(c,"class",m="text-2xl font-bold "+s[2].iconColor),r(i,"class",g="w-14 h-14 rounded-full "+s[2].iconBg+" flex items-center justify-center mb-4"),r(p,"id","confirm-title"),r(p,"class","text-lg font-semibold mb-2"),r(y,"id","confirm-message"),r(y,"class","text-base-content/70 text-sm mb-6"),r(E,"class","btn btn-ghost flex-1"),r(P,"class",H="btn "+(s[1].confirmButtonClass||s[2].buttonClass)+" flex-1"),r(A,"class","flex gap-3 w-full"),r(a,"class","flex flex-col items-center text-center"),r(n,"class","relative bg-base-200 rounded-2xl shadow-2xl max-w-sm w-full p-6"),r(e,"class","fixed inset-0 z-[100] flex items-center justify-center p-4"),r(e,"role","dialog"),r(e,"aria-modal","true"),r(e,"aria-labelledby","confirm-title"),r(e,"aria-describedby","confirm-message")},m(F,ie){z(F,e,ie),u(e,t),u(e,l),u(e,n),u(n,a),u(a,i),u(i,c),u(c,h),u(a,v),u(a,p),u(p,b),u(a,_),u(a,y),u(y,T),u(a,B),u(a,A),u(A,E),u(E,x),u(A,S),u(A,P),u(P,j),R=!0,le||(re=[Z(E,"click",vt.handleCancel),Z(P,"click",vt.handleConfirm),Z(e,"click",s[4]),Z(e,"keydown",s[3])],le=!0)},p(F,ie){(!R||ie&4)&&o!==(o=F[2].icon+"")&&he(h,o),(!R||ie&4&&m!==(m="text-2xl font-bold "+F[2].iconColor))&&r(c,"class",m),(!R||ie&4&&g!==(g="w-14 h-14 rounded-full "+F[2].iconBg+" flex items-center justify-center mb-4"))&&r(i,"class",g),(!R||ie&2)&&d!==(d=F[1].title+"")&&he(b,d),(!R||ie&2)&&M!==(M=F[1].message+"")&&he(T,M),(!R||ie&2)&&I!==(I=F[1].cancelLabel+"")&&he(x,I),(!R||ie&2)&&V!==(V=F[1].confirmLabel+"")&&he(j,V),(!R||ie&6&&H!==(H="btn "+(F[1].confirmButtonClass||F[2].buttonClass)+" flex-1"))&&r(P,"class",H)},i(F){R||(F&&ft(()=>{R&&(D||(D=Ve(n,Cl,{duration:200,start:.95},!0)),D.run(1))}),F&&ft(()=>{R&&(U||(U=Ve(e,dt,{duration:150},!0)),U.run(1))}),R=!0)},o(F){F&&(D||(D=Ve(n,Cl,{duration:200,start:.95},!1)),D.run(0)),F&&(U||(U=Ve(e,dt,{duration:150},!1)),U.run(0)),R=!1},d(F){F&&f(e),F&&D&&D.end(),F&&U&&U.end(),le=!1,De(re)}}}function Jn(s){let e,t,l,n=s[0].open&&s[1]&&Dl(s);return{c(){n&&n.c(),e=ke()},l(a){n&&n.l(a),e=ke()},m(a,i){n&&n.m(a,i),z(a,e,i),t||(l=Z(Yn,"keydown",s[3]),t=!0)},p(a,[i]){a[0].open&&a[1]?n?(n.p(a,i),i&3&&te(n,1)):(n=Dl(a),n.c(),te(n,1),n.m(e.parentNode,e)):n&&(Ie(),ae(n,1,1,()=>{n=null}),Te())},i(a){te(n)},o(a){ae(n)},d(a){a&&f(e),n&&n.d(a),t=!1,l()}}}function Qn(s,e,t){let l,n,a,i,c,o;ve(s,vt,g=>t(7,o=g));function h(g){g.key==="Escape"&&l.open&&(g.preventDefault(),vt.handleCancel())}function m(g){g.target===g.currentTarget&&vt.handleCancel()}return s.$$.update=()=>{s.$$.dirty&128&&t(0,l=o),s.$$.dirty&1&&t(1,n=l.options),s.$$.dirty&2&&t(5,i=n?.variant||"danger"),s.$$.dirty&96&&t(2,c=a[i]),s.$$.dirty&1&&typeof window<"u"&&(l.open?document.body.style.overflow="hidden":document.body.style.overflow="")},t(6,a={danger:{icon:"!",iconBg:"bg-error/20",iconColor:"text-error",buttonClass:"btn-error"},warning:{icon:"!",iconBg:"bg-warning/20",iconColor:"text-warning",buttonClass:"btn-warning"},info:{icon:"?",iconBg:"bg-info/20",iconColor:"text-info",buttonClass:"btn-info"}}),[l,n,c,h,m,i,a,o]}class Xn extends He{constructor(e){super(),Oe(this,e,Qn,Jn,Pe,{})}}function zl(s){let e,t,l,n=`<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-warning" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
        Session Expiring Soon`,a,i,c,o="Your session will expire due to inactivity.",h,m,g,v,p,d,b,_,y,M,T=`Click "Stay Logged In" to continue your session, or you'll be automatically logged out.`,B,A,E,I="Logout Now",x,S,P="Stay Logged In",V,j,H,D;return{c(){e=w("div"),t=w("div"),l=w("h3"),l.innerHTML=n,a=N(),i=w("div"),c=w("p"),c.textContent=o,h=N(),m=w("div"),g=K("svg"),v=K("path"),p=N(),d=w("span"),b=J(s[0]),y=N(),M=w("p"),M.textContent=T,B=N(),A=w("div"),E=w("button"),E.textContent=I,x=N(),S=w("button"),S.textContent=P,V=N(),j=w("div"),this.h()},l(U){e=k(U,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0,"aria-describedby":!0});var R=C(e);t=k(R,"DIV",{class:!0,role:!0});var le=C(t);l=k(le,"H3",{id:!0,class:!0,"data-svelte-h":!0}),W(l)!=="svelte-vdj8xk"&&(l.innerHTML=n),a=L(le),i=k(le,"DIV",{id:!0,class:!0});var re=C(i);c=k(re,"P",{class:!0,"data-svelte-h":!0}),W(c)!=="svelte-1jwrg12"&&(c.textContent=o),h=L(re),m=k(re,"DIV",{class:!0,role:!0,"aria-live":!0,"aria-atomic":!0});var F=C(m);g=q(F,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,"aria-hidden":!0});var ie=C(g);v=q(ie,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(v).forEach(f),ie.forEach(f),p=L(F),d=k(F,"SPAN",{class:!0,"aria-label":!0});var oe=C(d);b=Y(oe,s[0]),oe.forEach(f),F.forEach(f),y=L(re),M=k(re,"P",{class:!0,"data-svelte-h":!0}),W(M)!=="svelte-11aakk9"&&(M.textContent=T),re.forEach(f),B=L(le),A=k(le,"DIV",{class:!0});var O=C(A);E=k(O,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(E)!=="svelte-1o34bwc"&&(E.textContent=I),x=L(O),S=k(O,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(S)!=="svelte-pos5vh"&&(S.textContent=P),O.forEach(f),le.forEach(f),V=L(R),j=k(R,"DIV",{class:!0,"aria-hidden":!0}),C(j).forEach(f),R.forEach(f),this.h()},h(){r(l,"id","session-timeout-title"),r(l,"class","font-bold text-lg flex items-center gap-2"),r(c,"class","text-base-content/80 mb-4"),r(v,"stroke-linecap","round"),r(v,"stroke-linejoin","round"),r(v,"stroke-width","2"),r(v,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),r(g,"xmlns","http://www.w3.org/2000/svg"),r(g,"class","stroke-current shrink-0 h-6 w-6"),r(g,"fill","none"),r(g,"viewBox","0 0 24 24"),r(g,"aria-hidden","true"),r(d,"class","font-mono text-lg"),r(d,"aria-label",_="Time remaining: "+s[0]),r(m,"class","alert alert-warning mb-4"),r(m,"role","alert"),r(m,"aria-live","assertive"),r(m,"aria-atomic","true"),r(M,"class","text-sm text-base-content/60"),r(i,"id","session-timeout-desc"),r(i,"class","py-4"),r(E,"class","btn btn-ghost"),r(E,"aria-label","Log out immediately"),r(S,"class","btn btn-primary"),r(S,"aria-label","Extend session and stay logged in"),S.autofocus=!0,r(A,"class","modal-action"),r(t,"class","modal-box"),r(t,"role","document"),r(j,"class","modal-backdrop bg-black/50"),r(j,"aria-hidden","true"),r(e,"class","modal modal-open"),r(e,"role","alertdialog"),r(e,"aria-modal","true"),r(e,"aria-labelledby","session-timeout-title"),r(e,"aria-describedby","session-timeout-desc")},m(U,R){z(U,e,R),u(e,t),u(t,l),u(t,a),u(t,i),u(i,c),u(i,h),u(i,m),u(m,g),u(g,v),u(m,p),u(m,d),u(d,b),u(i,y),u(i,M),u(t,B),u(t,A),u(A,E),u(A,x),u(A,S),u(e,V),u(e,j),S.focus(),H||(D=[Z(E,"click",s[3]),Z(S,"click",s[2])],H=!0)},p(U,R){R&1&&he(b,U[0]),R&1&&_!==(_="Time remaining: "+U[0])&&r(d,"aria-label",_)},d(U){U&&f(e),H=!1,De(D)}}}function $n(s){let e,t=s[1]&&zl(s);return{c(){t&&t.c(),e=ke()},l(l){t&&t.l(l),e=ke()},m(l,n){t&&t.m(l,n),z(l,e,n)},p(l,[n]){l[1]?t?t.p(l,n):(t=zl(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:pe,o:pe,d(l){l&&f(e),t&&t.d(l)}}}function er(s,e,t){let l,n,a;ve(s,Nt,o=>t(4,a=o));function i(){Nt.extend()}function c(){ht.logout()}return s.$$.update=()=>{s.$$.dirty&16&&t(1,l=a.showWarning),s.$$.dirty&16&&t(0,n=Bn(a.remainingMs))},[n,l,i,c,a]}class tr extends He{constructor(e){super(),Oe(this,e,er,$n,Pe,{})}}function jl(s){let e,t,l="Admin";return{c(){e=w("li"),t=w("a"),t.textContent=l,this.h()},l(n){e=k(n,"LI",{});var a=C(e);t=k(a,"A",{href:!0,class:!0,"data-svelte-h":!0}),W(t)!=="svelte-o0v1tq"&&(t.textContent=l),a.forEach(f),this.h()},h(){r(t,"href",ne+"/admin"),r(t,"class","min-h-11"),se(t,"active",s[4].url.pathname===`${ne}/admin`)},m(n,a){z(n,e,a),u(e,t)},p(n,a){a&16&&se(t,"active",n[4].url.pathname===`${ne}/admin`)},d(n){n&&f(e)}}}function lr(s){let e,t;return{c(){e=K("svg"),t=K("path"),this.h()},l(l){e=q(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0,"aria-hidden":!0});var n=C(e);t=q(n,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(t).forEach(f),n.forEach(f),this.h()},h(){r(t,"stroke","currentColor"),r(t,"stroke-linecap","round"),r(t,"stroke-linejoin","round"),r(t,"stroke-width","2"),r(t,"d","M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"class","w-5 h-5"),r(e,"aria-hidden","true")},m(l,n){z(l,e,n),u(e,t)},d(l){l&&f(e)}}}function sr(s){let e,t;return{c(){e=K("svg"),t=K("path"),this.h()},l(l){e=q(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0,"aria-hidden":!0});var n=C(e);t=q(n,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(t).forEach(f),n.forEach(f),this.h()},h(){r(t,"stroke","currentColor"),r(t,"stroke-linecap","round"),r(t,"stroke-linejoin","round"),r(t,"stroke-width","2"),r(t,"d","M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"class","w-5 h-5"),r(e,"aria-hidden","true")},m(l,n){z(l,e,n),u(e,t)},d(l){l&&f(e)}}}function Vl(s){let e,t,l,n,a,i,c="Menu",o,h,m='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-6 h-6"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',g,v,p,d,b,_,y,M,T,B,A,E,I,x,S,P,V,j,H,D,U,R=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-5 h-5"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
						Profile`,le,re,F,ie=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-5 h-5"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
						Logout`,oe,O,$=s[5]&&Ul(s);return{c(){e=w("div"),t=w("div"),l=N(),n=w("div"),a=w("div"),i=w("h2"),i.textContent=c,o=N(),h=w("button"),h.innerHTML=m,g=N(),v=w("ul"),p=w("li"),d=w("a"),b=K("svg"),_=K("path"),y=J(`
						Channels`),T=N(),B=w("li"),A=w("a"),E=K("svg"),I=K("path"),x=J(`
						Messages`),P=N(),$&&$.c(),V=N(),j=w("div"),H=N(),D=w("li"),U=w("button"),U.innerHTML=R,le=N(),re=w("li"),F=w("button"),F.innerHTML=ie,this.h()},l(Q){e=k(Q,"DIV",{class:!0});var X=C(e);t=k(X,"DIV",{class:!0,role:!0,tabindex:!0,"aria-label":!0}),C(t).forEach(f),l=L(X),n=k(X,"DIV",{class:!0});var ge=C(n);a=k(ge,"DIV",{class:!0});var _e=C(a);i=k(_e,"H2",{class:!0,"data-svelte-h":!0}),W(i)!=="svelte-l4e1ui"&&(i.textContent=c),o=L(_e),h=k(_e,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(h)!=="svelte-1pmn0b8"&&(h.innerHTML=m),_e.forEach(f),g=L(ge),v=k(ge,"UL",{class:!0});var ce=C(v);p=k(ce,"LI",{});var ee=C(p);d=k(ee,"A",{href:!0,class:!0});var ue=C(d);b=q(ue,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var we=C(b);_=q(we,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(_).forEach(f),we.forEach(f),y=Y(ue,`
						Channels`),ue.forEach(f),ee.forEach(f),T=L(ce),B=k(ce,"LI",{});var Me=C(B);A=k(Me,"A",{href:!0,class:!0});var Ee=C(A);E=q(Ee,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var be=C(E);I=q(be,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(I).forEach(f),be.forEach(f),x=Y(Ee,`
						Messages`),Ee.forEach(f),Me.forEach(f),P=L(ce),$&&$.l(ce),V=L(ce),j=k(ce,"DIV",{class:!0}),C(j).forEach(f),H=L(ce),D=k(ce,"LI",{});var Fe=C(D);U=k(Fe,"BUTTON",{class:!0,"data-svelte-h":!0}),W(U)!=="svelte-h9urup"&&(U.innerHTML=R),Fe.forEach(f),le=L(ce),re=k(ce,"LI",{});var et=C(re);F=k(et,"BUTTON",{class:!0,"data-svelte-h":!0}),W(F)!=="svelte-adz2xc"&&(F.innerHTML=ie),et.forEach(f),ce.forEach(f),ge.forEach(f),X.forEach(f),this.h()},h(){r(t,"class","absolute inset-0 bg-black bg-opacity-50 animate-fade-in svelte-1833qa5"),r(t,"role","button"),r(t,"tabindex","0"),r(t,"aria-label","Close menu"),r(i,"class","text-lg font-bold"),r(h,"class","btn btn-ghost btn-square min-h-11 min-w-11"),r(h,"aria-label","Close menu"),r(a,"class","p-4 border-b border-base-300 flex items-center justify-between"),r(_,"stroke","currentColor"),r(_,"stroke-linecap","round"),r(_,"stroke-linejoin","round"),r(_,"stroke-width","2"),r(_,"d","M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"),r(b,"xmlns","http://www.w3.org/2000/svg"),r(b,"fill","none"),r(b,"viewBox","0 0 24 24"),r(b,"class","w-5 h-5"),r(d,"href",ne+"/chat"),r(d,"class",M="min-h-11 text-base "+(s[4].url.pathname.startsWith(`${ne}/chat`)?"active":"")),r(I,"stroke","currentColor"),r(I,"stroke-linecap","round"),r(I,"stroke-linejoin","round"),r(I,"stroke-width","2"),r(I,"d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"),r(E,"xmlns","http://www.w3.org/2000/svg"),r(E,"fill","none"),r(E,"viewBox","0 0 24 24"),r(E,"class","w-5 h-5"),r(A,"href",ne+"/dm"),r(A,"class",S="min-h-11 text-base "+(s[4].url.pathname.startsWith(`${ne}/dm`)?"active":"")),r(j,"class","divider my-2"),r(U,"class","min-h-11 text-base justify-start"),r(F,"class","min-h-11 text-base text-error justify-start"),r(v,"class","menu p-4 gap-2"),r(n,"class","absolute left-0 top-0 bottom-0 w-64 bg-base-200 shadow-xl animate-slide-in svelte-1833qa5"),r(e,"class","fixed inset-0 z-50 md:hidden")},m(Q,X){z(Q,e,X),u(e,t),u(e,l),u(e,n),u(n,a),u(a,i),u(a,o),u(a,h),u(n,g),u(n,v),u(v,p),u(p,d),u(d,b),u(b,_),u(d,y),u(v,T),u(v,B),u(B,A),u(A,E),u(E,I),u(A,x),u(v,P),$&&$.m(v,null),u(v,V),u(v,j),u(v,H),u(v,D),u(D,U),u(v,le),u(v,re),u(re,F),oe||(O=[Z(t,"click",s[8]),Z(t,"keydown",s[13]),Z(h,"click",s[8]),Z(d,"click",s[9]),Z(A,"click",s[9]),Z(U,"click",s[10]),Z(F,"click",s[11])],oe=!0)},p(Q,X){X&16&&M!==(M="min-h-11 text-base "+(Q[4].url.pathname.startsWith(`${ne}/chat`)?"active":""))&&r(d,"class",M),X&16&&S!==(S="min-h-11 text-base "+(Q[4].url.pathname.startsWith(`${ne}/dm`)?"active":""))&&r(A,"class",S),Q[5]?$?$.p(Q,X):($=Ul(Q),$.c(),$.m(v,V)):$&&($.d(1),$=null)},d(Q){Q&&f(e),$&&$.d(),oe=!1,De(O)}}}function Ul(s){let e,t,l,n,a,i,c,o,h;return{c(){e=w("li"),t=w("a"),l=K("svg"),n=K("path"),a=K("path"),i=J(`
							Admin`),this.h()},l(m){e=k(m,"LI",{});var g=C(e);t=k(g,"A",{href:!0,class:!0});var v=C(t);l=q(v,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var p=C(l);n=q(p,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(n).forEach(f),a=q(p,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(a).forEach(f),p.forEach(f),i=Y(v,`
							Admin`),v.forEach(f),g.forEach(f),this.h()},h(){r(n,"stroke","currentColor"),r(n,"stroke-linecap","round"),r(n,"stroke-linejoin","round"),r(n,"stroke-width","2"),r(n,"d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"),r(a,"stroke","currentColor"),r(a,"stroke-linecap","round"),r(a,"stroke-linejoin","round"),r(a,"stroke-width","2"),r(a,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),r(l,"xmlns","http://www.w3.org/2000/svg"),r(l,"fill","none"),r(l,"viewBox","0 0 24 24"),r(l,"class","w-5 h-5"),r(t,"href",ne+"/admin"),r(t,"class",c="min-h-11 text-base "+(s[4].url.pathname===`${ne}/admin`?"active":""))},m(m,g){z(m,e,g),u(e,t),u(t,l),u(l,n),u(l,a),u(t,i),o||(h=Z(t,"click",s[9]),o=!0)},p(m,g){g&16&&c!==(c="min-h-11 text-base "+(m[4].url.pathname===`${ne}/admin`?"active":""))&&r(t,"class",c)},d(m){m&&f(e),o=!1,h()}}}function nr(s){let e,t,l,n,a,i,c,o=s[6].name.split(" - ")[0]+"",h,m,g,v,p,d,b="Channels",_,y,M,T="Messages",B,A,E,I,x,S,P,V='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-5 h-5" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>',j,H,D="Logout",U,R,le,re,F=s[5]&&jl(s);function ie(Q,X){return Q[0]==="dark"?sr:lr}let oe=ie(s),O=oe(s),$=s[3]&&Vl(s);return{c(){e=w("nav"),t=w("div"),l=w("button"),n=K("svg"),a=K("path"),i=N(),c=w("a"),h=J(o),m=N(),g=w("div"),v=w("ul"),p=w("li"),d=w("a"),d.textContent=b,_=N(),y=w("li"),M=w("a"),M.textContent=T,B=N(),F&&F.c(),A=N(),E=w("div"),I=w("button"),O.c(),S=N(),P=w("button"),P.innerHTML=V,j=N(),H=w("button"),H.textContent=D,U=N(),$&&$.c(),R=ke(),this.h()},l(Q){e=k(Q,"NAV",{class:!0,role:!0,"aria-label":!0});var X=C(e);t=k(X,"DIV",{class:!0});var ge=C(t);l=k(ge,"BUTTON",{class:!0,"aria-label":!0,"aria-expanded":!0});var _e=C(l);n=q(_e,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var ce=C(n);a=q(ce,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(a).forEach(f),ce.forEach(f),_e.forEach(f),i=L(ge),c=k(ge,"A",{href:!0,class:!0});var ee=C(c);h=Y(ee,o),ee.forEach(f),ge.forEach(f),m=L(X),g=k(X,"DIV",{class:!0});var ue=C(g);v=k(ue,"UL",{class:!0});var we=C(v);p=k(we,"LI",{});var Me=C(p);d=k(Me,"A",{href:!0,class:!0,"data-svelte-h":!0}),W(d)!=="svelte-8yf13s"&&(d.textContent=b),Me.forEach(f),_=L(we),y=k(we,"LI",{});var Ee=C(y);M=k(Ee,"A",{href:!0,class:!0,"data-svelte-h":!0}),W(M)!=="svelte-8d5m9y"&&(M.textContent=T),Ee.forEach(f),B=L(we),F&&F.l(we),we.forEach(f),ue.forEach(f),A=L(X),E=k(X,"DIV",{class:!0});var be=C(E);I=k(be,"BUTTON",{class:!0,"aria-label":!0});var Fe=C(I);O.l(Fe),Fe.forEach(f),S=L(be),P=k(be,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(P)!=="svelte-1gzalt1"&&(P.innerHTML=V),j=L(be),H=k(be,"BUTTON",{class:!0,"data-svelte-h":!0}),W(H)!=="svelte-1vmo7ww"&&(H.textContent=D),be.forEach(f),X.forEach(f),U=L(Q),$&&$.l(Q),R=ke(),this.h()},h(){r(a,"stroke","currentColor"),r(a,"stroke-linecap","round"),r(a,"stroke-linejoin","round"),r(a,"stroke-width","2"),r(a,"d","M4 6h16M4 12h16M4 18h16"),r(n,"xmlns","http://www.w3.org/2000/svg"),r(n,"fill","none"),r(n,"viewBox","0 0 24 24"),r(n,"class","w-6 h-6"),r(l,"class","btn btn-ghost btn-square min-h-11 min-w-11 md:hidden"),r(l,"aria-label","Toggle menu"),r(l,"aria-expanded",s[3]),r(c,"href",ne+"/chat"),r(c,"class","btn btn-ghost text-xl"),r(t,"class","navbar-start"),r(d,"href",ne+"/chat"),r(d,"class","min-h-11"),se(d,"active",s[4].url.pathname.startsWith(`${ne}/chat`)),r(M,"href",ne+"/dm"),r(M,"class","min-h-11"),se(M,"active",s[4].url.pathname.startsWith(`${ne}/dm`)),r(v,"class","menu menu-horizontal px-1"),r(g,"class","navbar-center hidden md:flex"),r(I,"class","btn btn-ghost btn-circle min-h-11 min-w-11"),r(I,"aria-label",x=s[0]==="dark"?"Switch to light mode":"Switch to dark mode"),r(P,"class","btn btn-ghost btn-circle min-h-11 min-w-11 hidden md:flex"),r(P,"aria-label","Open profile settings"),r(H,"class","btn btn-ghost min-h-11 hidden md:inline-flex"),r(E,"class","navbar-end gap-2"),r(e,"class","navbar bg-base-200 shadow-lg"),r(e,"role","navigation"),r(e,"aria-label","Main navigation")},m(Q,X){z(Q,e,X),u(e,t),u(t,l),u(l,n),u(n,a),u(t,i),u(t,c),u(c,h),u(e,m),u(e,g),u(g,v),u(v,p),u(p,d),u(v,_),u(v,y),u(y,M),u(v,B),F&&F.m(v,null),u(e,A),u(e,E),u(E,I),O.m(I,null),u(E,S),u(E,P),u(E,j),u(E,H),z(Q,U,X),$&&$.m(Q,X),z(Q,R,X),le||(re=[Z(l,"click",s[7]),Z(I,"click",function(){nt(s[1])&&s[1].apply(this,arguments)}),Z(P,"click",function(){nt(s[2])&&s[2].apply(this,arguments)}),Z(H,"click",s[11])],le=!0)},p(Q,[X]){s=Q,X&8&&r(l,"aria-expanded",s[3]),X&16&&se(d,"active",s[4].url.pathname.startsWith(`${ne}/chat`)),X&16&&se(M,"active",s[4].url.pathname.startsWith(`${ne}/dm`)),s[5]?F?F.p(s,X):(F=jl(s),F.c(),F.m(v,null)):F&&(F.d(1),F=null),oe!==(oe=ie(s))&&(O.d(1),O=oe(s),O&&(O.c(),O.m(I,null))),X&1&&x!==(x=s[0]==="dark"?"Switch to light mode":"Switch to dark mode")&&r(I,"aria-label",x),s[3]?$?$.p(s,X):($=Vl(s),$.c(),$.m(R.parentNode,R)):$&&($.d(1),$=null)},i:pe,o:pe,d(Q){Q&&(f(e),f(U),f(R)),F&&F.d(),O.d(),$&&$.d(Q),le=!1,De(re)}}}function rr(s,e,t){let l,n,a;ve(s,tl,y=>t(12,l=y)),ve(s,Dt,y=>t(4,n=y)),ve(s,Ds,y=>t(5,a=y));const i=el();let{themePreference:c="dark"}=e,{onThemeToggle:o}=e,{onProfileClick:h}=e,m=!1;function g(){t(3,m=!m)}function v(){t(3,m=!1)}function p(){v()}function d(){h(),v()}function b(){ht.logout(),v()}const _=y=>y.key==="Escape"&&v();return s.$$set=y=>{"themePreference"in y&&t(0,c=y.themePreference),"onThemeToggle"in y&&t(1,o=y.onThemeToggle),"onProfileClick"in y&&t(2,h=y.onProfileClick)},s.$$.update=()=>{s.$$.dirty&4096},[c,o,h,m,n,a,i,g,v,p,d,b,l,_]}class ar extends He{constructor(e){super(),Oe(this,e,rr,nr,Pe,{themePreference:0,onThemeToggle:1,onProfileClick:2})}}const ir="https://image-api-617806532906.us-central1.run.app",Hl=5*1024*1024,Pt=1920,Hs=.85,At=200;async function or(s,e={}){const{maxWidth:t=Pt,maxHeight:l=Pt,quality:n=Hs,format:a="jpeg",generateThumbnail:i=!0}=e;return new Promise((c,o)=>{const h=new Image,m=document.createElement("canvas"),g=m.getContext("2d");if(!g){o(new Error("Failed to get canvas context"));return}h.onload=()=>{let{width:p,height:d}=h;p>t&&(d=d*t/p,p=t),d>l&&(p=p*l/d,d=l),p=Math.round(p),d=Math.round(d),m.width=p,m.height=d,g.drawImage(h,0,0,p,d);const b=a==="png"?"image/png":a==="webp"?"image/webp":"image/jpeg";m.toBlob(_=>{if(!_){o(new Error("Failed to compress image"));return}if(i){const y=document.createElement("canvas"),M=y.getContext("2d");if(M){const T=Math.min(h.width,h.height),B=(h.width-T)/2,A=(h.height-T)/2;y.width=At,y.height=At,M.drawImage(h,B,A,T,T,0,0,At,At),y.toBlob(E=>{c({blob:_,thumbnail:E||void 0,width:p,height:d})},b,n)}else c({blob:_,width:p,height:d})}else c({blob:_,width:p,height:d})},b,n)},h.onerror=()=>{o(new Error("Failed to load image"))};const v=new FileReader;v.onload=p=>{h.src=p.target?.result},v.onerror=()=>{o(new Error("Failed to read file"))},v.readAsDataURL(s)})}async function cr(s,e,t="message",l){if(s.size>Hl)return{success:!1,error:`File too large. Maximum size is ${Hl/1024/1024}MB`};if(!s.type.startsWith("image/"))return{success:!1,error:"File must be an image"};const n=l?.encrypt===!0;try{const{blob:a,thumbnail:i,width:c,height:o}=await or(s,{maxWidth:t==="avatar"?400:Pt,maxHeight:t==="avatar"?400:Pt,quality:t==="avatar"?.9:Hs,format:"jpeg",generateThumbnail:t!=="avatar"&&!n});let h=a,m;n&&l?.recipientPubkeys&&l?.senderPrivkey;const g=new FormData,v=n?"image.enc":"image.jpg",p=n?"application/octet-stream":"image/jpeg";g.append("image",h,v),g.append("pubkey",e),g.append("category",t),i&&!n&&g.append("thumbnail",i,"thumbnail.jpg");const d=await fetch(`${ir}/upload`,{method:"POST",body:g});if(!d.ok)return{success:!1,error:`Upload failed: ${await d.text()}`};const b=await d.json();return{success:!0,url:b.url,thumbnailUrl:n?void 0:b.thumbnailUrl,encrypted:n,encryptionData:m,metadata:{originalSize:s.size,compressedSize:h.size,width:c,height:o,format:n?"encrypted":"jpeg"}}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Upload failed"}}}async function ur(s){return new Promise(e=>{const t=new Image;t.onload=()=>{if(t.width<50||t.height<50){e({valid:!1,error:"Image too small. Minimum size is 50x50 pixels"});return}if(Math.max(t.width,t.height)/Math.min(t.width,t.height)>10){e({valid:!1,error:"Image aspect ratio too extreme"});return}e({valid:!0,width:t.width,height:t.height})},t.onerror=()=>{e({valid:!1,error:"Failed to load image"})};const l=new FileReader;l.onload=n=>{t.src=n.target?.result},l.readAsDataURL(s)})}function fr(s){return URL.createObjectURL(s)}function Gt(s){URL.revokeObjectURL(s)}function dr(s){let e,t,l,n,a,i,c,o,h,m;function g(d,b){return d[6]?mr:pr}let v=g(s),p=v(s);return{c(){e=w("div"),t=K("svg"),l=K("path"),n=N(),a=w("span"),p.c(),i=N(),c=w("span"),o=J("Max "),h=J(s[0]),m=J("MB"),this.h()},l(d){e=k(d,"DIV",{class:!0});var b=C(e);t=q(b,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var _=C(t);l=q(_,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(l).forEach(f),_.forEach(f),n=L(b),a=k(b,"SPAN",{class:!0});var y=C(a);p.l(y),y.forEach(f),i=L(b),c=k(b,"SPAN",{class:!0});var M=C(c);o=Y(M,"Max "),h=Y(M,s[0]),m=Y(M,"MB"),M.forEach(f),b.forEach(f),this.h()},h(){r(l,"stroke","currentColor"),r(l,"stroke-linecap","round"),r(l,"stroke-linejoin","round"),r(l,"stroke-width","2"),r(l,"d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"),r(t,"xmlns","http://www.w3.org/2000/svg"),r(t,"fill","none"),r(t,"viewBox","0 0 24 24"),r(t,"class","icon svelte-z8kc2t"),r(a,"class","placeholder-text svelte-z8kc2t"),r(c,"class","size-hint svelte-z8kc2t"),r(e,"class","placeholder svelte-z8kc2t")},m(d,b){z(d,e,b),u(e,t),u(t,l),u(e,n),u(e,a),p.m(a,null),u(e,i),u(e,c),u(c,o),u(c,h),u(c,m)},p(d,b){v!==(v=g(d))&&(p.d(1),p=v(d),p&&(p.c(),p.m(a,null))),b&1&&he(h,d[0])},d(d){d&&f(e),p.d()}}}function hr(s){let e,t,l,n,a=!s[4]&&Ol();return{c(){e=w("img"),l=N(),a&&a.c(),n=ke(),this.h()},l(i){e=k(i,"IMG",{src:!0,alt:!0,class:!0}),l=L(i),a&&a.l(i),n=ke(),this.h()},h(){St(e.src,t=s[7])||r(e,"src",t),r(e,"alt","Preview"),r(e,"class","preview-image svelte-z8kc2t")},m(i,c){z(i,e,c),z(i,l,c),a&&a.m(i,c),z(i,n,c)},p(i,c){c&128&&!St(e.src,t=i[7])&&r(e,"src",t),i[4]?a&&(a.d(1),a=null):a||(a=Ol(),a.c(),a.m(n.parentNode,n))},d(i){i&&(f(e),f(l),f(n)),a&&a.d(i)}}}function pr(s){let e;return{c(){e=J("Drop image here or click to upload")},l(t){e=Y(t,"Drop image here or click to upload")},m(t,l){z(t,e,l)},d(t){t&&f(e)}}}function mr(s){let e;return{c(){e=J("Upload avatar")},l(t){e=Y(t,"Upload avatar")},m(t,l){z(t,e,l)},d(t){t&&f(e)}}}function Ol(s){let e,t='<span class="overlay-text svelte-z8kc2t">Click to change</span>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(l){e=k(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1he2pdm"&&(e.innerHTML=t),this.h()},h(){r(e,"class","overlay svelte-z8kc2t")},m(l,n){z(l,e,n)},d(l){l&&f(e)}}}function Fl(s){let e,t='<span class="loading loading-spinner loading-md"></span> <span class="upload-text svelte-z8kc2t">Uploading...</span>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(l){e=k(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1e8rzwh"&&(e.innerHTML=t),this.h()},h(){r(e,"class","upload-overlay svelte-z8kc2t")},m(l,n){z(l,e,n)},d(l){l&&f(e)}}}function Rl(s){let e,t,l,n,a,i;return{c(){e=w("div"),t=K("svg"),l=K("path"),n=N(),a=w("span"),i=J(s[5]),this.h()},l(c){e=k(c,"DIV",{class:!0});var o=C(e);t=q(o,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var h=C(t);l=q(h,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(l).forEach(f),h.forEach(f),n=L(o),a=k(o,"SPAN",{});var m=C(a);i=Y(m,s[5]),m.forEach(f),o.forEach(f),this.h()},h(){r(l,"stroke","currentColor"),r(l,"stroke-linecap","round"),r(l,"stroke-linejoin","round"),r(l,"stroke-width","2"),r(l,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),r(t,"xmlns","http://www.w3.org/2000/svg"),r(t,"class","error-icon svelte-z8kc2t"),r(t,"fill","none"),r(t,"viewBox","0 0 24 24"),r(e,"class","error-message svelte-z8kc2t")},m(c,o){z(c,e,o),u(e,t),u(t,l),u(e,n),u(e,a),u(a,i)},p(c,o){o&32&&he(i,c[5])},d(c){c&&f(e)}}}function Wl(s){let e,t="Remove image",l,n;return{c(){e=w("button"),e.textContent=t,this.h()},l(a){e=k(a,"BUTTON",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-10722ny"&&(e.textContent=t),this.h()},h(){r(e,"class","btn btn-ghost btn-xs mt-2")},m(a,i){z(a,e,i),l||(n=Z(e,"click",Rs(s[13])),l=!0)},p:pe,d(a){a&&f(e),l=!1,n()}}}function vr(s){let e,t,l,n,a,i,c,o,h;function m(_,y){return _[7]?hr:dr}let g=m(s),v=g(s),p=s[4]&&Fl(),d=s[5]&&Rl(s),b=s[7]&&!s[4]&&Wl(s);return{c(){e=w("div"),t=w("input"),l=N(),n=w("div"),v.c(),a=N(),p&&p.c(),i=N(),d&&d.c(),c=N(),b&&b.c(),this.h()},l(_){e=k(_,"DIV",{class:!0});var y=C(e);t=k(y,"INPUT",{type:!0,accept:!0,class:!0}),l=L(y),n=k(y,"DIV",{class:!0,role:!0,tabindex:!0});var M=C(n);v.l(M),a=L(M),p&&p.l(M),M.forEach(f),i=L(y),d&&d.l(y),c=L(y),b&&b.l(y),y.forEach(f),this.h()},h(){r(t,"type","file"),r(t,"accept",s[1]),r(t,"class","hidden svelte-z8kc2t"),r(n,"class","drop-zone svelte-z8kc2t"),r(n,"role","button"),r(n,"tabindex","0"),se(n,"drag-over",s[3]),se(n,"has-image",!!s[7]),se(n,"uploading",s[4]),r(e,"class","image-upload svelte-z8kc2t"),se(e,"is-avatar",s[6])},m(_,y){z(_,e,y),u(e,t),s[17](t),u(e,l),u(e,n),v.m(n,null),u(n,a),p&&p.m(n,null),u(e,i),d&&d.m(e,null),u(e,c),b&&b.m(e,null),o||(h=[Z(t,"change",s[8]),Z(n,"drop",s[9]),Z(n,"dragover",s[10]),Z(n,"dragleave",s[11]),Z(n,"click",s[12]),Z(n,"keydown",s[18])],o=!0)},p(_,[y]){y&2&&r(t,"accept",_[1]),g===(g=m(_))&&v?v.p(_,y):(v.d(1),v=g(_),v&&(v.c(),v.m(n,a))),_[4]?p||(p=Fl(),p.c(),p.m(n,null)):p&&(p.d(1),p=null),y&8&&se(n,"drag-over",_[3]),y&128&&se(n,"has-image",!!_[7]),y&16&&se(n,"uploading",_[4]),_[5]?d?d.p(_,y):(d=Rl(_),d.c(),d.m(e,c)):d&&(d.d(1),d=null),_[7]&&!_[4]?b?b.p(_,y):(b=Wl(_),b.c(),b.m(e,null)):b&&(b.d(1),b=null),y&64&&se(e,"is-avatar",_[6])},i:pe,o:pe,d(_){_&&f(e),s[17](null),v.d(),p&&p.d(),d&&d.d(),b&&b.d(),o=!1,De(h)}}}function br(s,e,t){let l,n,a;ve(s,ht,S=>t(20,a=S));let{category:i="message"}=e,{currentUrl:c=null}=e,{maxSizeMB:o=5}=e,{accept:h="image/jpeg,image/png,image/webp,image/gif"}=e;const m=Fs();let g,v=!1,p=!1,d=null,b=null;async function _(S){if(t(5,b=null),S.size>o*1024*1024){t(5,b=`File too large. Maximum size is ${o}MB`),m("error",b);return}const P=await ur(S);if(!P.valid){t(5,b=P.error||"Invalid image"),m("error",b);return}d&&Gt(d),t(16,d=fr(S)),t(4,p=!0);try{const V=a.publicKey||"anonymous",j=await cr(S,V,i);j.success?m("upload",j):(t(5,b=j.error||"Upload failed"),m("error",b),d&&(Gt(d),t(16,d=null)))}catch(V){t(5,b=V instanceof Error?V.message:"Upload failed"),m("error",b)}finally{t(4,p=!1)}}function y(S){const P=S.target,V=P.files?.[0];V&&_(V),P.value=""}function M(S){S.preventDefault(),t(3,v=!1);const P=S.dataTransfer?.files[0];P&&P.type.startsWith("image/")&&_(P)}function T(S){S.preventDefault(),t(3,v=!0)}function B(){t(3,v=!1)}function A(){g?.click()}function E(){d&&(Gt(d),t(16,d=null)),m("upload",{success:!0,url:""})}function I(S){Xt[S?"unshift":"push"](()=>{g=S,t(2,g)})}const x=S=>S.key==="Enter"&&A();return s.$$set=S=>{"category"in S&&t(14,i=S.category),"currentUrl"in S&&t(15,c=S.currentUrl),"maxSizeMB"in S&&t(0,o=S.maxSizeMB),"accept"in S&&t(1,h=S.accept)},s.$$.update=()=>{s.$$.dirty&98304&&t(7,l=d||c),s.$$.dirty&16384&&t(6,n=i==="avatar")},[o,h,g,v,p,b,n,l,y,M,T,B,A,E,i,c,d,I,x]}class gr extends He{constructor(e){super(),Oe(this,e,br,vr,Pe,{category:14,currentUrl:15,maxSizeMB:0,accept:1})}}function ql(s){let e,t,l,n="X",a,i,c="Your Profile",o,h,m,g,v,p,d,b=(s[6]||"Anonymous")+"",_,y,M,T=ut(s[15])+"",B,A,E,I,x='<span class="label-text font-semibold">Nickname</span>',S,P,V,j,H,D,U="Avatar",R,le,re=s[12]?"Use URL":"Upload Image",F,ie,oe,O,$,Q,X,ge='<span class="label-text font-semibold">Birthday</span> <span class="label-text-alt text-base-content/60">Optional</span>',_e,ce,ee,ue,we='<span class="label-text-alt text-base-content/60">Visible to tribe members on the calendar</span>',Me,Ee,be,Fe,et,pt,zt,ze,Ge,rl='<span class="label-text font-semibold">Public Key (npub)</span> <div class="tooltip tooltip-left" data-tip="Your public key is safe to share with anyone. It&#39;s how others find and message you."><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-5 h-5 text-info cursor-help"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div>',jt,Ye,je,mt,Vt,Re,Ut,Je,al='<span class="label-text-alt text-success">Safe to share - this is how others find you</span>',Ht,We,Qe,il='<span class="label-text font-semibold">Private Key (nsec)</span> <div class="tooltip tooltip-left" data-tip="Your private key controls your identity. NEVER share it with anyone. Anyone with it can impersonate you permanently."><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-5 h-5 text-error cursor-help"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div>',Ot,Ft,tt,qe,Rt,ol;function cl(G,de){return G[7]?kr:_r}let bt=cl(s),xe=bt(s);const ul=[yr,wr],Xe=[];function fl(G,de){return G[12]?0:1}oe=fl(s),O=Xe[oe]=ul[oe](s);let ye=s[11]&&Kl(s);function dl(G,de){return G[10]?Mr:G[9]?Er:Cr}let gt=dl(s),Ke=gt(s);function hl(G,de){if(G[16])return Tr;if(G[17])return Ir}let rt=hl(s),Ce=rt&&rt(s);function pl(G,de){return G[4]?Sr:Br}let _t=pl(s),Ze=_t(s);function ml(G,de){return G[1]?Lr:Nr}let kt=ml(s),Ae=kt(s);return{c(){e=w("div"),t=w("div"),l=w("button"),l.textContent=n,a=N(),i=w("h3"),i.textContent=c,o=N(),h=w("div"),m=w("div"),g=w("div"),xe.c(),v=N(),p=w("div"),d=w("div"),_=J(b),y=N(),M=w("div"),B=J(T),A=N(),E=w("div"),I=w("label"),I.innerHTML=x,S=N(),P=w("input"),V=N(),j=w("div"),H=w("label"),D=w("span"),D.textContent=U,R=N(),le=w("button"),F=J(re),ie=N(),O.c(),$=N(),Q=w("div"),X=w("label"),X.innerHTML=ge,_e=N(),ce=w("input"),ee=N(),ue=w("label"),ue.innerHTML=we,Me=N(),ye&&ye.c(),Ee=N(),be=w("button"),Ke.c(),Fe=N(),Ce&&Ce.c(),et=N(),pt=w("div"),zt=N(),ze=w("div"),Ge=w("label"),Ge.innerHTML=rl,jt=N(),Ye=w("div"),je=w("input"),Vt=N(),Re=w("button"),Ze.c(),Ut=N(),Je=w("label"),Je.innerHTML=al,Ht=N(),We=w("div"),Qe=w("label"),Qe.innerHTML=il,Ot=N(),Ae.c(),Ft=N(),tt=w("div"),this.h()},l(G){e=k(G,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0});var de=C(e);t=k(de,"DIV",{class:!0});var fe=C(t);l=k(fe,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(l)!=="svelte-11hc4lv"&&(l.textContent=n),a=L(fe),i=k(fe,"H3",{id:!0,class:!0,"data-svelte-h":!0}),W(i)!=="svelte-4jq17b"&&(i.textContent=c),o=L(fe),h=k(fe,"DIV",{class:!0});var wt=C(h);m=k(wt,"DIV",{class:!0});var vl=C(m);g=k(vl,"DIV",{class:!0});var bl=C(g);xe.l(bl),bl.forEach(f),vl.forEach(f),v=L(wt),p=k(wt,"DIV",{class:!0});var yt=C(p);d=k(yt,"DIV",{class:!0});var gl=C(d);_=Y(gl,b),gl.forEach(f),y=L(yt),M=k(yt,"DIV",{class:!0});var _l=C(M);B=Y(_l,T),_l.forEach(f),yt.forEach(f),wt.forEach(f),A=L(fe),E=k(fe,"DIV",{class:!0});var Ct=C(E);I=k(Ct,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),W(I)!=="svelte-192l7n9"&&(I.innerHTML=x),S=L(Ct),P=k(Ct,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0,maxlength:!0}),Ct.forEach(f),V=L(fe),j=k(fe,"DIV",{class:!0});var Et=C(j);H=k(Et,"LABEL",{class:!0});var Mt=C(H);D=k(Mt,"SPAN",{class:!0,"data-svelte-h":!0}),W(D)!=="svelte-1byrh1j"&&(D.textContent=U),R=L(Mt),le=k(Mt,"BUTTON",{class:!0});var kl=C(le);F=Y(kl,re),kl.forEach(f),Mt.forEach(f),ie=L(Et),O.l(Et),Et.forEach(f),$=L(fe),Q=k(fe,"DIV",{class:!0});var at=C(Q);X=k(at,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),W(X)!=="svelte-1lno6f0"&&(X.innerHTML=ge),_e=L(at),ce=k(at,"INPUT",{id:!0,type:!0,class:!0}),ee=L(at),ue=k(at,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),W(ue)!=="svelte-v050nx"&&(ue.innerHTML=we),at.forEach(f),Me=L(fe),ye&&ye.l(fe),Ee=L(fe),be=k(fe,"BUTTON",{class:!0});var wl=C(be);Ke.l(wl),wl.forEach(f),Fe=L(fe),Ce&&Ce.l(fe),et=L(fe),pt=k(fe,"DIV",{class:!0}),C(pt).forEach(f),zt=L(fe),ze=k(fe,"DIV",{class:!0});var it=C(ze);Ge=k(it,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),W(Ge)!=="svelte-1u6kjmg"&&(Ge.innerHTML=rl),jt=L(it),Ye=k(it,"DIV",{class:!0});var It=C(Ye);je=k(It,"INPUT",{id:!0,type:!0,class:!0}),Vt=L(It),Re=k(It,"BUTTON",{class:!0,title:!0});var yl=C(Re);Ze.l(yl),yl.forEach(f),It.forEach(f),Ut=L(it),Je=k(it,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),W(Je)!=="svelte-5rwzav"&&(Je.innerHTML=al),it.forEach(f),Ht=L(fe),We=k(fe,"DIV",{class:!0});var Tt=C(We);Qe=k(Tt,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),W(Qe)!=="svelte-8l2gpw"&&(Qe.innerHTML=il),Ot=L(Tt),Ae.l(Tt),Tt.forEach(f),fe.forEach(f),Ft=L(de),tt=k(de,"DIV",{class:!0,"aria-hidden":!0}),C(tt).forEach(f),de.forEach(f),this.h()},h(){r(l,"class","btn btn-sm btn-circle btn-ghost absolute right-2 top-2"),r(l,"aria-label","Close profile modal"),r(i,"id","profile-modal-title"),r(i,"class","font-bold text-lg mb-4"),r(g,"class","w-16 h-16 rounded-full bg-base-300 flex items-center justify-center overflow-hidden"),r(m,"class","avatar"),r(d,"class","text-sm font-medium mb-1"),r(M,"class","text-xs text-base-content/60 font-mono"),r(p,"class","flex-1"),r(h,"class","flex items-center gap-4 mb-4"),r(I,"class","label py-1"),r(I,"for","profile-nickname-input"),r(P,"id","profile-nickname-input"),r(P,"type","text"),r(P,"placeholder","Enter a display name"),r(P,"class","input input-bordered input-sm"),r(P,"maxlength","50"),r(E,"class","form-control mb-3"),r(D,"class","label-text font-semibold"),r(le,"class","btn btn-ghost btn-xs"),r(H,"class","label py-1"),r(j,"class","form-control mb-3"),r(X,"class","label py-1"),r(X,"for","profile-birthday-input"),r(ce,"id","profile-birthday-input"),r(ce,"type","date"),r(ce,"class","input input-bordered input-sm"),r(ue,"class","label py-1"),r(ue,"for","profile-birthday-input"),r(Q,"class","form-control mb-4"),r(be,"class","btn btn-primary btn-sm w-full mb-4"),be.disabled=s[10],r(pt,"class","divider my-2"),r(Ge,"class","label"),r(Ge,"for","profile-npub-input"),r(je,"id","profile-npub-input"),r(je,"type","text"),je.readOnly=!0,je.value=mt=ut(s[15]),r(je,"class","input input-bordered flex-1 font-mono text-sm"),r(Re,"class","btn btn-square btn-outline"),r(Re,"title","Copy full npub"),r(Ye,"class","flex gap-2"),r(Je,"class","label"),r(Je,"for","profile-npub-input"),r(ze,"class","form-control mb-4"),r(Qe,"class","label"),r(Qe,"for","profile-nsec-input"),r(We,"class","form-control"),r(t,"class","modal-box max-w-md"),r(tt,"class","modal-backdrop"),r(tt,"aria-hidden","true"),r(e,"class","modal modal-open"),r(e,"role","dialog"),r(e,"aria-modal","true"),r(e,"aria-labelledby","profile-modal-title")},m(G,de){z(G,e,de),u(e,t),u(t,l),u(t,a),u(t,i),u(t,o),u(t,h),u(h,m),u(m,g),xe.m(g,null),u(h,v),u(h,p),u(p,d),u(d,_),u(p,y),u(p,M),u(M,B),u(t,A),u(t,E),u(E,I),u(E,S),u(E,P),ct(P,s[6]),u(t,V),u(t,j),u(j,H),u(H,D),u(H,R),u(H,le),u(le,F),u(j,ie),Xe[oe].m(j,null),u(t,$),u(t,Q),u(Q,X),u(Q,_e),u(Q,ce),ct(ce,s[8]),u(Q,ee),u(Q,ue),u(t,Me),ye&&ye.m(t,null),u(t,Ee),u(t,be),Ke.m(be,null),u(t,Fe),Ce&&Ce.m(t,null),u(t,et),u(t,pt),u(t,zt),u(t,ze),u(ze,Ge),u(ze,jt),u(ze,Ye),u(Ye,je),u(Ye,Vt),u(Ye,Re),Ze.m(Re,null),u(ze,Ut),u(ze,Je),u(t,Ht),u(t,We),u(We,Qe),u(We,Ot),Ae.m(We,null),u(e,Ft),u(e,tt),qe=!0,Rt||(ol=[Z(l,"click",s[24]),Z(P,"input",s[30]),Z(le,"click",s[31]),Z(ce,"input",s[33]),Z(be,"click",s[26]),Z(Re,"click",s[34]),Z(tt,"click",s[24]),Z(e,"keydown",s[25])],Rt=!0)},p(G,de){bt===(bt=cl(G))&&xe?xe.p(G,de):(xe.d(1),xe=bt(G),xe&&(xe.c(),xe.m(g,null))),(!qe||de[0]&64)&&b!==(b=(G[6]||"Anonymous")+"")&&he(_,b),(!qe||de[0]&32768)&&T!==(T=ut(G[15])+"")&&he(B,T),de[0]&64&&P.value!==G[6]&&ct(P,G[6]),(!qe||de[0]&4096)&&re!==(re=G[12]?"Use URL":"Upload Image")&&he(F,re);let fe=oe;oe=fl(G),oe===fe?Xe[oe].p(G,de):(Ie(),ae(Xe[fe],1,1,()=>{Xe[fe]=null}),Te(),O=Xe[oe],O?O.p(G,de):(O=Xe[oe]=ul[oe](G),O.c()),te(O,1),O.m(j,null)),de[0]&256&&ct(ce,G[8]),G[11]?ye?ye.p(G,de):(ye=Kl(G),ye.c(),ye.m(t,Ee)):ye&&(ye.d(1),ye=null),gt!==(gt=dl(G))&&(Ke.d(1),Ke=gt(G),Ke&&(Ke.c(),Ke.m(be,null))),(!qe||de[0]&1024)&&(be.disabled=G[10]),rt===(rt=hl(G))&&Ce?Ce.p(G,de):(Ce&&Ce.d(1),Ce=rt&&rt(G),Ce&&(Ce.c(),Ce.m(t,et))),(!qe||de[0]&32768&&mt!==(mt=ut(G[15]))&&je.value!==mt)&&(je.value=mt),_t!==(_t=pl(G))&&(Ze.d(1),Ze=_t(G),Ze&&(Ze.c(),Ze.m(Re,null))),kt===(kt=ml(G))&&Ae?Ae.p(G,de):(Ae.d(1),Ae=kt(G),Ae&&(Ae.c(),Ae.m(We,null)))},i(G){qe||(te(O),qe=!0)},o(G){ae(O),qe=!1},d(G){G&&f(e),xe.d(),Xe[oe].d(),ye&&ye.d(),Ke.d(),Ce&&Ce.d(),Ze.d(),Ae.d(),Rt=!1,De(ol)}}}function _r(s){let e,t;return{c(){e=K("svg"),t=K("path"),this.h()},l(l){e=q(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var n=C(e);t=q(n,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(t).forEach(f),n.forEach(f),this.h()},h(){r(t,"stroke","currentColor"),r(t,"stroke-linecap","round"),r(t,"stroke-linejoin","round"),r(t,"stroke-width","2"),r(t,"d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"class","w-8 h-8 text-base-content/50")},m(l,n){z(l,e,n),u(e,t)},p:pe,d(l){l&&f(e)}}}function kr(s){let e,t;return{c(){e=w("img"),this.h()},l(l){e=k(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){St(e.src,t=s[7])||r(e,"src",t),r(e,"alt","Avatar"),r(e,"class","w-full h-full object-cover")},m(l,n){z(l,e,n)},p(l,n){n[0]&128&&!St(e.src,t=l[7])&&r(e,"src",t)},d(l){l&&f(e)}}}function wr(s){let e,t,l,n='<span class="label-text-alt text-base-content/60">Direct link to an image</span>',a,i;return{c(){e=w("input"),t=N(),l=w("label"),l.innerHTML=n,this.h()},l(c){e=k(c,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),t=L(c),l=k(c,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),W(l)!=="svelte-19snjop"&&(l.innerHTML=n),this.h()},h(){r(e,"id","profile-avatar-input"),r(e,"type","url"),r(e,"placeholder","https://example.com/avatar.jpg"),r(e,"class","input input-bordered input-sm"),r(l,"class","label py-1"),r(l,"for","profile-avatar-input")},m(c,o){z(c,e,o),ct(e,s[7]),z(c,t,o),z(c,l,o),a||(i=Z(e,"input",s[32]),a=!0)},p(c,o){o[0]&128&&e.value!==c[7]&&ct(e,c[7])},i:pe,o:pe,d(c){c&&(f(e),f(t),f(l)),a=!1,i()}}}function yr(s){let e,t,l;return t=new gr({props:{category:"avatar",currentUrl:s[7]}}),t.$on("upload",s[20]),t.$on("error",s[21]),{c(){e=w("div"),Ne(t.$$.fragment),this.h()},l(n){e=k(n,"DIV",{class:!0});var a=C(e);Le(t.$$.fragment,a),a.forEach(f),this.h()},h(){r(e,"class","flex justify-center")},m(n,a){z(n,e,a),Se(t,e,null),l=!0},p(n,a){const i={};a[0]&128&&(i.currentUrl=n[7]),t.$set(i)},i(n){l||(te(t.$$.fragment,n),l=!0)},o(n){ae(t.$$.fragment,n),l=!1},d(n){n&&f(e),Be(t)}}}function Kl(s){let e,t,l,n,a,i;return{c(){e=w("div"),t=K("svg"),l=K("path"),n=N(),a=w("span"),i=J(s[11]),this.h()},l(c){e=k(c,"DIV",{class:!0});var o=C(e);t=q(o,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var h=C(t);l=q(h,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(l).forEach(f),h.forEach(f),n=L(o),a=k(o,"SPAN",{class:!0});var m=C(a);i=Y(m,s[11]),m.forEach(f),o.forEach(f),this.h()},h(){r(l,"stroke-linecap","round"),r(l,"stroke-linejoin","round"),r(l,"stroke-width","2"),r(l,"d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"),r(t,"xmlns","http://www.w3.org/2000/svg"),r(t,"class","stroke-current shrink-0 h-5 w-5"),r(t,"fill","none"),r(t,"viewBox","0 0 24 24"),r(a,"class","text-sm"),r(e,"class","alert alert-error mb-3 py-2")},m(c,o){z(c,e,o),u(e,t),u(t,l),u(e,n),u(e,a),u(a,i)},p(c,o){o[0]&2048&&he(i,c[11])},d(c){c&&f(e)}}}function Cr(s){let e;return{c(){e=J("Save & Publish Profile")},l(t){e=Y(t,"Save & Publish Profile")},m(t,l){z(t,e,l)},d(t){t&&f(e)}}}function Er(s){let e,t,l;return{c(){e=K("svg"),t=K("path"),l=J(`
					Profile Published!`),this.h()},l(n){e=q(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var a=C(e);t=q(a,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(t).forEach(f),a.forEach(f),l=Y(n,`
					Profile Published!`),this.h()},h(){r(t,"stroke","currentColor"),r(t,"stroke-linecap","round"),r(t,"stroke-linejoin","round"),r(t,"stroke-width","2"),r(t,"d","M5 13l4 4L19 7"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"class","w-4 h-4 text-success")},m(n,a){z(n,e,a),u(e,t),z(n,l,a)},d(n){n&&(f(e),f(l))}}}function Mr(s){let e,t;return{c(){e=w("span"),t=J(`
					Publishing to relay...`),this.h()},l(l){e=k(l,"SPAN",{class:!0}),C(e).forEach(f),t=Y(l,`
					Publishing to relay...`),this.h()},h(){r(e,"class","loading loading-spinner loading-sm")},m(l,n){z(l,e,n),z(l,t,n)},d(l){l&&(f(e),f(t))}}}function Ir(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-5 h-5"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span>App installed</span>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(l){e=k(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-699wmn"&&(e.innerHTML=t),this.h()},h(){r(e,"class","flex items-center gap-2 text-sm text-success mb-4 px-2")},m(l,n){z(l,e,n)},p:pe,d(l){l&&f(e)}}}function Tr(s){let e,t,l,n,a,i,c,o,h,m,g="Get offline access and faster loading",v,p,d,b;function _(T,B){return T[13]?Ar:xr}let y=_(s),M=y(s);return{c(){e=w("div"),t=K("svg"),l=K("path"),n=N(),a=w("div"),i=w("p"),c=J("Install "),o=J(s[18]),h=N(),m=w("p"),m.textContent=g,v=N(),p=w("button"),M.c(),this.h()},l(T){e=k(T,"DIV",{class:!0});var B=C(e);t=q(B,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var A=C(t);l=q(A,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(l).forEach(f),A.forEach(f),n=L(B),a=k(B,"DIV",{class:!0});var E=C(a);i=k(E,"P",{class:!0});var I=C(i);c=Y(I,"Install "),o=Y(I,s[18]),I.forEach(f),h=L(E),m=k(E,"P",{class:!0,"data-svelte-h":!0}),W(m)!=="svelte-o4avhp"&&(m.textContent=g),E.forEach(f),v=L(B),p=k(B,"BUTTON",{class:!0});var x=C(p);M.l(x),x.forEach(f),B.forEach(f),this.h()},h(){r(l,"stroke-linecap","round"),r(l,"stroke-linejoin","round"),r(l,"stroke-width","2"),r(l,"d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"),r(t,"xmlns","http://www.w3.org/2000/svg"),r(t,"fill","none"),r(t,"viewBox","0 0 24 24"),r(t,"class","stroke-current shrink-0 w-5 h-5"),r(i,"class","font-semibold text-sm"),r(m,"class","text-xs opacity-80"),r(a,"class","flex-1"),r(p,"class","btn btn-sm btn-primary"),p.disabled=s[13],r(e,"class","alert alert-info mb-4")},m(T,B){z(T,e,B),u(e,t),u(t,l),u(e,n),u(e,a),u(a,i),u(i,c),u(i,o),u(a,h),u(a,m),u(e,v),u(e,p),M.m(p,null),d||(b=Z(p,"click",s[19]),d=!0)},p(T,B){y!==(y=_(T))&&(M.d(1),M=y(T),M&&(M.c(),M.m(p,null))),B[0]&8192&&(p.disabled=T[13])},d(T){T&&f(e),M.d(),d=!1,b()}}}function xr(s){let e;return{c(){e=J("Install")},l(t){e=Y(t,"Install")},m(t,l){z(t,e,l)},d(t){t&&f(e)}}}function Ar(s){let e;return{c(){e=w("span"),this.h()},l(t){e=k(t,"SPAN",{class:!0}),C(e).forEach(f),this.h()},h(){r(e,"class","loading loading-spinner loading-xs")},m(t,l){z(t,e,l)},d(t){t&&f(e)}}}function Br(s){let e,t;return{c(){e=K("svg"),t=K("path"),this.h()},l(l){e=q(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var n=C(e);t=q(n,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(t).forEach(f),n.forEach(f),this.h()},h(){r(t,"stroke","currentColor"),r(t,"stroke-linecap","round"),r(t,"stroke-linejoin","round"),r(t,"stroke-width","2"),r(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"class","w-5 h-5")},m(l,n){z(l,e,n),u(e,t)},d(l){l&&f(e)}}}function Sr(s){let e,t;return{c(){e=K("svg"),t=K("path"),this.h()},l(l){e=q(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var n=C(e);t=q(n,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(t).forEach(f),n.forEach(f),this.h()},h(){r(t,"stroke","currentColor"),r(t,"stroke-linecap","round"),r(t,"stroke-linejoin","round"),r(t,"stroke-width","2"),r(t,"d","M5 13l4 4L19 7"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"class","w-5 h-5 text-success")},m(l,n){z(l,e,n),u(e,t)},d(l){l&&f(e)}}}function Lr(s){let e,t,l,n,a,i,c="Your private key is now visible. Never share it!",o,h,m,g,v,p,d,b,_,y,M,T,B,A,E='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-5 h-5"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path></svg>',I,x;function S(j,H){return j[5]?Dr:Pr}let P=S(s),V=P(s);return{c(){e=w("div"),t=K("svg"),l=K("path"),n=N(),a=w("div"),i=w("span"),i.textContent=c,o=N(),h=w("div"),m=J("Auto-hiding in "),g=w("span"),v=J(s[3]),p=J("s"),d=N(),b=w("div"),_=w("input"),M=N(),T=w("button"),V.c(),B=N(),A=w("button"),A.innerHTML=E,this.h()},l(j){e=k(j,"DIV",{class:!0});var H=C(e);t=q(H,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var D=C(t);l=q(D,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(l).forEach(f),D.forEach(f),n=L(H),a=k(H,"DIV",{class:!0});var U=C(a);i=k(U,"SPAN",{class:!0,"data-svelte-h":!0}),W(i)!=="svelte-6n7w1g"&&(i.textContent=c),o=L(U),h=k(U,"DIV",{class:!0});var R=C(h);m=Y(R,"Auto-hiding in "),g=k(R,"SPAN",{class:!0});var le=C(g);v=Y(le,s[3]),p=Y(le,"s"),le.forEach(f),R.forEach(f),U.forEach(f),H.forEach(f),d=L(j),b=k(j,"DIV",{class:!0});var re=C(b);_=k(re,"INPUT",{type:!0,class:!0}),M=L(re),T=k(re,"BUTTON",{class:!0,title:!0});var F=C(T);V.l(F),F.forEach(f),B=L(re),A=k(re,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),W(A)!=="svelte-h7hl0y"&&(A.innerHTML=E),re.forEach(f),this.h()},h(){r(l,"stroke-linecap","round"),r(l,"stroke-linejoin","round"),r(l,"stroke-width","2"),r(l,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),r(t,"xmlns","http://www.w3.org/2000/svg"),r(t,"class","stroke-current shrink-0 h-5 w-5"),r(t,"fill","none"),r(t,"viewBox","0 0 24 24"),r(i,"class","text-sm font-semibold"),r(g,"class","font-mono font-bold"),r(h,"class","text-xs opacity-80 mt-1"),r(a,"class","flex-1"),r(e,"class","alert alert-warning mb-2"),r(_,"type","text"),_.readOnly=!0,_.value=y=ut(s[14]),r(_,"class","input input-bordered input-error flex-1 font-mono text-sm"),r(T,"class","btn btn-square btn-outline btn-warning"),r(T,"title","Copy full nsec"),r(A,"class","btn btn-square btn-outline"),r(A,"title","Hide private key"),r(b,"class","flex gap-2 mb-2")},m(j,H){z(j,e,H),u(e,t),u(t,l),u(e,n),u(e,a),u(a,i),u(a,o),u(a,h),u(h,m),u(h,g),u(g,v),u(g,p),z(j,d,H),z(j,b,H),u(b,_),u(b,M),u(b,T),V.m(T,null),u(b,B),u(b,A),I||(x=[Z(T,"click",s[37]),Z(A,"click",s[23])],I=!0)},p(j,H){H[0]&8&&he(v,j[3]),H[0]&16384&&y!==(y=ut(j[14]))&&_.value!==y&&(_.value=y),P!==(P=S(j))&&(V.d(1),V=P(j),V&&(V.c(),V.m(T,null)))},d(j){j&&(f(e),f(d),f(b)),V.d(),I=!1,De(x)}}}function Nr(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-5 w-5" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <div class="text-sm"><p class="font-bold">NEVER share your private key!</p> <p>Anyone with it controls your identity permanently.</p></div>',l,n,a,i,c,o,h="I understand the risk and want to reveal my private key",m,g,v,p,d,b;return{c(){e=w("div"),e.innerHTML=t,l=N(),n=w("div"),a=w("label"),i=w("input"),c=N(),o=w("span"),o.textContent=h,m=N(),g=w("button"),v=J("Reveal Private Key"),this.h()},l(_){e=k(_,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1sprta3"&&(e.innerHTML=t),l=L(_),n=k(_,"DIV",{class:!0});var y=C(n);a=k(y,"LABEL",{class:!0});var M=C(a);i=k(M,"INPUT",{type:!0,class:!0}),c=L(M),o=k(M,"SPAN",{class:!0,"data-svelte-h":!0}),W(o)!=="svelte-144kc2"&&(o.textContent=h),M.forEach(f),y.forEach(f),m=L(_),g=k(_,"BUTTON",{class:!0});var T=C(g);v=Y(T,"Reveal Private Key"),T.forEach(f),this.h()},h(){r(e,"class","alert alert-error mb-3"),r(i,"type","checkbox"),r(i,"class","checkbox checkbox-error"),r(o,"class","label-text text-sm"),r(a,"class","label cursor-pointer justify-start gap-3 py-2"),r(n,"class","form-control mb-3"),r(g,"class","btn btn-outline btn-error btn-sm w-full"),g.disabled=p=!s[2]},m(_,y){z(_,e,y),z(_,l,y),z(_,n,y),u(n,a),u(a,i),i.checked=s[2],u(a,c),u(a,o),z(_,m,y),z(_,g,y),u(g,v),d||(b=[Z(i,"change",s[35]),Z(g,"click",s[36])],d=!0)},p(_,y){y[0]&4&&(i.checked=_[2]),y[0]&4&&p!==(p=!_[2])&&(g.disabled=p)},d(_){_&&(f(e),f(l),f(n),f(m),f(g)),d=!1,De(b)}}}function Pr(s){let e,t;return{c(){e=K("svg"),t=K("path"),this.h()},l(l){e=q(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var n=C(e);t=q(n,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(t).forEach(f),n.forEach(f),this.h()},h(){r(t,"stroke","currentColor"),r(t,"stroke-linecap","round"),r(t,"stroke-linejoin","round"),r(t,"stroke-width","2"),r(t,"d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"class","w-5 h-5")},m(l,n){z(l,e,n),u(e,t)},d(l){l&&f(e)}}}function Dr(s){let e,t;return{c(){e=K("svg"),t=K("path"),this.h()},l(l){e=q(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0});var n=C(e);t=q(n,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(t).forEach(f),n.forEach(f),this.h()},h(){r(t,"stroke","currentColor"),r(t,"stroke-linecap","round"),r(t,"stroke-linejoin","round"),r(t,"stroke-width","2"),r(t,"d","M5 13l4 4L19 7"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"class","w-5 h-5 text-success")},m(l,n){z(l,e,n),u(e,t)},d(l){l&&f(e)}}}function zr(s){let e,t,l=s[0]&&ql(s);return{c(){l&&l.c(),e=ke()},l(n){l&&l.l(n),e=ke()},m(n,a){l&&l.m(n,a),z(n,e,a),t=!0},p(n,a){n[0]?l?(l.p(n,a),a[0]&1&&te(l,1)):(l=ql(n),l.c(),te(l,1),l.m(e.parentNode,e)):l&&(Ie(),ae(l,1,1,()=>{l=null}),Te())},i(n){t||(te(l),t=!0)},o(n){ae(l),t=!1},d(n){n&&f(e),l&&l.d(n)}}}const Yt=30;function ut(s){return s.length<=20?s:s.slice(0,12)+"..."+s.slice(-8)}function jr(s,e,t){let l,n,a,i,c;ve(s,ht,ee=>t(29,a=ee)),ve(s,Ss,ee=>t(16,i=ee)),ve(s,xs,ee=>t(17,c=ee));const h=el().name.split(" - ")[0];let{open:m=!1}=e,g=!1,v=!1,p=null,d=Yt,b=!1,_=!1,y="",M="",T="",B=!1,A=!1,E=null,I=null,x=!1,S=!1;async function P(){t(13,S=!0);try{await Ls()}finally{t(13,S=!1)}}function V(ee){const ue=ee.detail;ue.success&&ue.url&&t(7,M=ue.url)}function j(ee){t(11,E=ee.detail)}let H=!1;function D(){t(3,d=Yt),p=setInterval(()=>{t(3,d--,d),d<=0&&R()},1e3)}function U(){p&&(clearInterval(p),p=null),t(3,d=Yt)}function R(){t(1,g=!1),t(2,v=!1),U()}function le(){t(0,m=!1),R(),t(9,B=!1),I&&(I.focus(),I=null)}function re(ee){if(ee.key==="Escape"&&m&&le(),ee.key==="Tab"&&m){const ue=document.querySelector(".modal.modal-open");if(!ue)return;const we=ue.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),Me=we[0],Ee=we[we.length-1];ee.shiftKey&&document.activeElement===Me?(ee.preventDefault(),Ee.focus()):!ee.shiftKey&&document.activeElement===Ee&&(ee.preventDefault(),Me.focus())}}async function F(){if(!a.publicKey||!a.privateKey){t(11,E="Not authenticated");return}t(10,A=!0),t(11,E=null);try{const ee=js();if(!ee)throw new Error("NDK not connected");const ue=new Bs(ee);ue.kind=0,ue.content=JSON.stringify({name:y||void 0,display_name:y||void 0,picture:M||void 0,birthday:T||void 0}),await ue.sign(),await ue.publish(),ht.setProfile(y||null,M||null),a.publicKey&&(Wt.remove(a.publicKey),Wt.updateCurrentUserProfile(a.publicKey,y||null,M||null)),t(9,B=!0),setTimeout(()=>t(9,B=!1),3e3)}catch(ee){console.error("Failed to publish profile:",ee),t(11,E=ee instanceof Error?ee.message:"Failed to save profile")}finally{t(10,A=!1)}}async function ie(ee,ue){await navigator.clipboard.writeText(ee),ue==="npub"?(t(4,b=!0),setTimeout(()=>t(4,b=!1),2e3)):(t(5,_=!0),setTimeout(()=>t(5,_=!1),2e3))}function oe(){y=this.value,t(6,y),t(0,m),t(28,H),t(29,a)}const O=()=>t(12,x=!x);function $(){M=this.value,t(7,M),t(0,m),t(28,H),t(29,a)}function Q(){T=this.value,t(8,T),t(0,m),t(28,H),t(29,a)}const X=()=>ie(l,"npub");function ge(){v=this.checked,t(2,v)}const _e=()=>{t(1,g=!0),D()},ce=()=>ie(n,"nsec");return s.$$set=ee=>{"open"in ee&&t(0,m=ee.open)},s.$$.update=()=>{s.$$.dirty[0]&536870912&&t(15,l=a.publicKey?kn(a.publicKey):""),s.$$.dirty[0]&536870912&&t(14,n=a.privateKey?wn(a.privateKey):""),s.$$.dirty[0]&1&&t(28,H=m),s.$$.dirty[0]&805306369&&m&&!H&&(t(6,y=a.nickname||""),t(7,M=a.avatar||""),t(8,T=""),I=document.activeElement,a.publicKey&&Wt.getProfile(a.publicKey).then(ee=>{t(8,T=ee.profile?.birthday||"")}))},[m,g,v,d,b,_,y,M,T,B,A,E,x,S,n,l,i,c,h,P,V,j,D,R,le,re,F,ie,H,a,oe,O,$,Q,X,ge,_e,ce]}class Vr extends He{constructor(e){super(),Oe(this,e,jr,zr,Pe,{open:0},null,[-1,-1])}}function Zl(s,e,t){const l=s.slice();l[16]=e[t],l[23]=t;const n=Gr(l[16]);l[17]=n;const a=l[7](l[16].id);l[18]=a;const i=l[6](l[16]);l[19]=i;const c=l[16].branding?.displayName||l[16].name;l[20]=c;const o=!l[19];return l[21]=o,l}function Gl(s,e,t){const l=s.slice();l[24]=e[t];const n=l[8](l[24].id);return l[25]=n,l}function Yl(s){let e,t="Zones";return{c(){e=w("span"),e.textContent=t,this.h()},l(l){e=k(l,"SPAN",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-f54ky0"&&(e.textContent=t),this.h()},h(){r(e,"class","text-xs font-semibold text-base-content/50 uppercase tracking-wider")},m(l,n){z(l,e,n)},d(l){l&&f(e)}}}function Ur(s){let e;return{c(){e=K("path"),this.h()},l(t){e=q(t,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(e).forEach(f),this.h()},h(){r(e,"stroke-linecap","round"),r(e,"stroke-linejoin","round"),r(e,"stroke-width","2"),r(e,"d","M11 19l-7-7 7-7m8 14l-7-7 7-7")},m(t,l){z(t,e,l)},d(t){t&&f(e)}}}function Hr(s){let e;return{c(){e=K("path"),this.h()},l(t){e=q(t,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(e).forEach(f),this.h()},h(){r(e,"stroke-linecap","round"),r(e,"stroke-linejoin","round"),r(e,"stroke-width","2"),r(e,"d","M13 5l7 7-7 7M5 5l7 7-7 7")},m(t,l){z(t,e,l)},d(t){t&&f(e)}}}function Or(s){let e,t=s[16].icon+"",l;return{c(){e=w("span"),l=J(t),this.h()},l(n){e=k(n,"SPAN",{class:!0,style:!0});var a=C(e);l=Y(a,t),a.forEach(f),this.h()},h(){r(e,"class","text-lg"),$e(e,"color",s[17])},m(n,a){z(n,e,a),u(e,l)},p(n,a){a&16&&t!==(t=n[16].icon+"")&&he(l,t),a&16&&$e(e,"color",n[17])},d(n){n&&f(e)}}}function Fr(s){let e,t="";return{c(){e=w("span"),e.textContent=t,this.h()},l(l){e=k(l,"SPAN",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-xtpphb"&&(e.textContent=t),this.h()},h(){r(e,"class","text-lg locked-icon svelte-1jmcf64")},m(l,n){z(l,e,n)},p:pe,d(l){l&&f(e)}}}function Jl(s){let e;function t(a,i){return a[21]?Wr:Rr}let l=t(s),n=l(s);return{c(){n.c(),e=ke()},l(a){n.l(a),e=ke()},m(a,i){n.m(a,i),z(a,e,i)},p(a,i){l===(l=t(a))&&n?n.p(a,i):(n.d(1),n=l(a),n&&(n.c(),n.m(e.parentNode,e)))},d(a){a&&f(e),n.d(a)}}}function Rr(s){let e,t=s[20]+"",l,n,a,i=s[16].access?.strictIsolation&&Ql();return{c(){e=w("span"),l=J(t),n=N(),i&&i.c(),a=ke(),this.h()},l(c){e=k(c,"SPAN",{class:!0});var o=C(e);l=Y(o,t),o.forEach(f),n=L(c),i&&i.l(c),a=ke(),this.h()},h(){r(e,"class","flex-1 truncate font-medium")},m(c,o){z(c,e,o),u(e,l),z(c,n,o),i&&i.m(c,o),z(c,a,o)},p(c,o){o&16&&t!==(t=c[20]+"")&&he(l,t),c[16].access?.strictIsolation?i||(i=Ql(),i.c(),i.m(a.parentNode,a)):i&&(i.d(1),i=null)},d(c){c&&(f(e),f(n),f(a)),i&&i.d(c)}}}function Wr(s){let e,t=s[5](s[20].length,s[23]*13)+"",l,n,a,i="";return{c(){e=w("span"),l=J(t),n=N(),a=w("span"),a.textContent=i,this.h()},l(c){e=k(c,"SPAN",{class:!0});var o=C(e);l=Y(o,t),o.forEach(f),n=L(c),a=k(c,"SPAN",{class:!0,"data-svelte-h":!0}),W(a)!=="svelte-ymsxf"&&(a.textContent=i),this.h()},h(){r(e,"class","flex-1 truncate font-mono text-sm scrambled-text svelte-1jmcf64"),r(a,"class","text-xs opacity-40 font-mono")},m(c,o){z(c,e,o),u(e,l),z(c,n,o),z(c,a,o)},p(c,o){o&16&&t!==(t=c[5](c[20].length,c[23]*13)+"")&&he(l,t)},d(c){c&&(f(e),f(n),f(a))}}}function Ql(s){let e,t="Private";return{c(){e=w("span"),e.textContent=t,this.h()},l(l){e=k(l,"SPAN",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1gwrh53"&&(e.textContent=t),this.h()},h(){r(e,"class","badge badge-xs badge-ghost")},m(l,n){z(l,e,n)},d(l){l&&f(e)}}}function Xl(s){let e,t=[],l=new Map,n=Ue(s[16].sections);const a=i=>i[24].id;for(let i=0;i<n.length;i+=1){let c=Gl(s,n,i),o=a(c);l.set(o,t[i]=es(o,c))}return{c(){e=w("ul");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=k(i,"UL",{class:!0});var c=C(e);for(let o=0;o<t.length;o+=1)t[o].l(c);c.forEach(f),this.h()},h(){r(e,"class","ml-4 border-l-2 border-base-300")},m(i,c){z(i,e,c);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(i,c){c&272&&(n=Ue(i[16].sections),t=ll(t,c,a,1,i,n,l,e,Vs,es,null,Gl))},d(i){i&&f(e);for(let c=0;c<t.length;c+=1)t[c].d()}}}function $l(s){let e,t="Approval";return{c(){e=w("span"),e.textContent=t,this.h()},l(l){e=k(l,"SPAN",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-w2xoc8"&&(e.textContent=t),this.h()},h(){r(e,"class","badge badge-xs badge-warning")},m(l,n){z(l,e,n)},d(l){l&&f(e)}}}function es(s,e){let t,l,n,a=e[24].icon+"",i,c,o,h=e[24].name+"",m,g,v,p,d,b,_=e[24].access.requiresApproval&&$l();return{key:s,first:null,c(){t=w("li"),l=w("a"),n=w("span"),i=J(a),c=N(),o=w("span"),m=J(h),g=N(),_&&_.c(),b=N(),this.h()},l(y){t=k(y,"LI",{});var M=C(t);l=k(M,"A",{href:!0,class:!0,style:!0});var T=C(l);n=k(T,"SPAN",{class:!0});var B=C(n);i=Y(B,a),B.forEach(f),c=L(T),o=k(T,"SPAN",{class:!0});var A=C(o);m=Y(A,h),A.forEach(f),g=L(T),_&&_.l(T),T.forEach(f),b=L(M),M.forEach(f),this.h()},h(){r(n,"class","text-base"),r(o,"class","truncate"),r(l,"href",v=ne+"/"+e[16].id+"/"+e[24].id),r(l,"class",p="flex items-center gap-2 py-2 "+(e[25]?"bg-primary/10 text-primary":"")),r(l,"style",d=e[25]?`color: ${e[17]};`:""),this.first=t},m(y,M){z(y,t,M),u(t,l),u(l,n),u(n,i),u(l,c),u(l,o),u(o,m),u(l,g),_&&_.m(l,null),u(t,b)},p(y,M){e=y,M&16&&a!==(a=e[24].icon+"")&&he(i,a),M&16&&h!==(h=e[24].name+"")&&he(m,h),e[24].access.requiresApproval?_||(_=$l(),_.c(),_.m(l,null)):_&&(_.d(1),_=null),M&16&&v!==(v=ne+"/"+e[16].id+"/"+e[24].id)&&r(l,"href",v),M&16&&p!==(p="flex items-center gap-2 py-2 "+(e[25]?"bg-primary/10 text-primary":""))&&r(l,"class",p),M&16&&d!==(d=e[25]?`color: ${e[17]};`:"")&&r(l,"style",d)},d(y){y&&f(t),_&&_.d()}}}function ts(s,e){let t,l,n,a,i,c,o,h;function m(b,_){return b[21]?Fr:Or}let g=m(e),v=g(e),p=!e[0]&&Jl(e),d=!e[0]&&e[19]&&Xl(e);return{key:s,first:null,c(){t=w("li"),l=w("details"),n=w("summary"),v.c(),a=N(),p&&p.c(),c=N(),d&&d.c(),h=N(),this.h()},l(b){t=k(b,"LI",{});var _=C(t);l=k(_,"DETAILS",{class:!0});var y=C(l);n=k(y,"SUMMARY",{class:!0,style:!0});var M=C(n);v.l(M),a=L(M),p&&p.l(M),M.forEach(f),c=L(y),d&&d.l(y),y.forEach(f),h=L(_),_.forEach(f),this.h()},h(){r(n,"class","flex items-center gap-2 rounded-lg transition-colors svelte-1jmcf64"),r(n,"style",i=e[18]&&e[19]?`border-left: 3px solid ${e[17]};`:""),se(n,"bg-base-200",e[18]&&e[19]),se(n,"locked-zone",e[21]),se(n,"cursor-not-allowed",e[21]),l.open=o=e[18]&&e[19],r(l,"class","svelte-1jmcf64"),se(l,"pointer-events-none",e[21]),this.first=t},m(b,_){z(b,t,_),u(t,l),u(l,n),v.m(n,null),u(n,a),p&&p.m(n,null),u(l,c),d&&d.m(l,null),u(t,h)},p(b,_){e=b,g===(g=m(e))&&v?v.p(e,_):(v.d(1),v=g(e),v&&(v.c(),v.m(n,a))),e[0]?p&&(p.d(1),p=null):p?p.p(e,_):(p=Jl(e),p.c(),p.m(n,null)),_&16&&i!==(i=e[18]&&e[19]?`border-left: 3px solid ${e[17]};`:"")&&r(n,"style",i),_&208&&se(n,"bg-base-200",e[18]&&e[19]),_&80&&se(n,"locked-zone",e[21]),_&80&&se(n,"cursor-not-allowed",e[21]),!e[0]&&e[19]?d?d.p(e,_):(d=Xl(e),d.c(),d.m(l,null)):d&&(d.d(1),d=null),_&16&&o!==(o=e[18]&&e[19])&&(l.open=o),_&80&&se(l,"pointer-events-none",e[21])},d(b){b&&f(t),v.d(),p&&p.d(),d&&d.d()}}}function ls(s){let e,t='<p class="text-sm">No zones available</p> <p class="text-xs mt-1">Contact admin for access</p>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(l){e=k(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-9zfzb5"&&(e.innerHTML=t),this.h()},h(){r(e,"class","px-4 py-8 text-center text-base-content/50")},m(l,n){z(l,e,n)},d(l){l&&f(e)}}}function qr(s){let e,t,l,n,a,i,c,o,h,m,g=[],v=new Map,p,d,b,_=!s[0]&&Yl();function y(I,x){return I[0]?Hr:Ur}let M=y(s),T=M(s),B=Ue(s[4]);const A=I=>`${I[16].id}-${I[3]}-${I[2]}`;for(let I=0;I<B.length;I+=1){let x=Zl(s,B,I),S=A(x);v.set(S,g[I]=ts(S,x))}let E=!s[0]&&s[4].length===0&&ls();return{c(){e=w("nav"),t=w("div"),_&&_.c(),l=N(),n=w("button"),a=K("svg"),T.c(),o=N(),h=N(),m=w("ul");for(let I=0;I<g.length;I+=1)g[I].c();p=N(),E&&E.c(),this.h()},l(I){e=k(I,"NAV",{class:!0});var x=C(e);t=k(x,"DIV",{class:!0});var S=C(t);_&&_.l(S),l=L(S),n=k(S,"BUTTON",{class:!0,"aria-label":!0});var P=C(n);a=q(P,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var V=C(a);T.l(V),V.forEach(f),P.forEach(f),S.forEach(f),o=L(x),h=L(x),m=k(x,"UL",{class:!0});var j=C(m);for(let H=0;H<g.length;H+=1)g[H].l(j);j.forEach(f),p=L(x),E&&E.l(x),x.forEach(f),this.h()},h(){r(a,"xmlns","http://www.w3.org/2000/svg"),r(a,"class","h-4 w-4"),r(a,"fill","none"),r(a,"viewBox","0 0 24 24"),r(a,"stroke","currentColor"),r(n,"class",i="btn btn-ghost btn-sm btn-square "+(s[0]?"mx-auto":"")),r(n,"aria-label",c=s[0]?"Expand zones":"Collapse zones"),r(t,"class","zone-nav-header flex items-center justify-between p-3 border-b border-base-300 dark:border-base-content/10"),r(m,"class","menu menu-sm gap-1"),r(e,"class","zone-nav svelte-1jmcf64"),se(e,"collapsed",s[0])},m(I,x){z(I,e,x),u(e,t),_&&_.m(t,null),u(t,l),u(t,n),u(n,a),T.m(a,null),u(e,o),u(e,h),u(e,m);for(let S=0;S<g.length;S+=1)g[S]&&g[S].m(m,null);u(e,p),E&&E.m(e,null),d||(b=Z(n,"click",function(){nt(s[1])&&s[1].apply(this,arguments)}),d=!0)},p(I,[x]){s=I,s[0]?_&&(_.d(1),_=null):_||(_=Yl(),_.c(),_.m(t,l)),M!==(M=y(s))&&(T.d(1),T=M(s),T&&(T.c(),T.m(a,null))),x&1&&i!==(i="btn btn-ghost btn-sm btn-square "+(s[0]?"mx-auto":""))&&r(n,"class",i),x&1&&c!==(c=s[0]?"Expand zones":"Collapse zones")&&r(n,"aria-label",c),x&509&&(B=Ue(s[4]),g=ll(g,x,A,1,s,B,v,m,Vs,ts,null,Zl)),!s[0]&&s[4].length===0?E||(E=ls(),E.c(),E.m(e,null)):E&&(E.d(1),E=null),x&1&&se(e,"collapsed",s[0])},i:pe,o:pe,d(I){I&&f(e),_&&_.d(),T.d();for(let x=0;x<g.length;x+=1)g[x].d();E&&E.d(),d=!1,b()}}}const Kr="",Zr="";function Gr(s){return s.branding?.primaryColor||s.ui?.color||"#6366f1"}function Yr(s,e,t){let l,n,a,i,c,o;ve(s,tl,T=>t(11,c=T)),ve(s,zs,T=>t(12,o=T));let{currentCategoryId:h=null}=e,{currentSectionId:m=null}=e,{collapsed:g=!1}=e,{onToggle:v=void 0}=e,p=0,d;function b(T,B=0){const A=Kr+Zr;let E="";for(let I=0;I<T;I++){const x=(p+B+I*7)%A.length;E+=A[x]}return E}function _(T){if(a)return!0;if(!i)return!1;const B=T.access?.visibleToCohorts||[],A=T.access?.hiddenFromCohorts||[];if(B.length===0&&A.length===0)return!0;const E=n;return A.some(I=>E.includes(I))?!1:B.length===0?!0:B.some(I=>E.includes(I)||I==="cross-access")}function y(T){return h===T}function M(T){return m===T}return Qt(()=>{d=setInterval(()=>{p=(p+1)%100},80)}),ys(()=>{d&&clearInterval(d)}),s.$$set=T=>{"currentCategoryId"in T&&t(9,h=T.currentCategoryId),"currentSectionId"in T&&t(10,m=T.currentSectionId),"collapsed"in T&&t(0,g=T.collapsed),"onToggle"in T&&t(1,v=T.onToggle)},s.$$.update=()=>{s.$$.dirty&6144&&(n=o?.cohorts??c.profile?.cohorts??[]),s.$$.dirty&6144&&t(3,a=o?.isAdmin??c.profile?.isAdmin??!1),s.$$.dirty&6144&&t(2,i=o?.isWhitelisted??c.profile?.isApproved??!1)},t(4,l=Ns()),[g,v,i,a,l,b,_,y,M,h,m,c,o]}class Jr extends He{constructor(e){super(),Oe(this,e,Yr,qr,Pe,{currentCategoryId:9,currentSectionId:10,collapsed:0,onToggle:1})}}function ss(s){let e,t,l,n,a,i,c="Admin",o;return{c(){e=w("a"),t=K("svg"),l=K("path"),n=K("path"),a=N(),i=w("span"),i.textContent=c,this.h()},l(h){e=k(h,"A",{href:!0,class:!0,"aria-label":!0,"aria-current":!0});var m=C(e);t=q(m,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var g=C(t);l=q(g,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(l).forEach(f),n=q(g,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(n).forEach(f),g.forEach(f),a=L(m),i=k(m,"SPAN",{class:!0,"data-svelte-h":!0}),W(i)!=="svelte-q7z5td"&&(i.textContent=c),m.forEach(f),this.h()},h(){r(l,"stroke-linecap","round"),r(l,"stroke-linejoin","round"),r(l,"stroke-width","2"),r(l,"d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"),r(n,"stroke-linecap","round"),r(n,"stroke-linejoin","round"),r(n,"stroke-width","2"),r(n,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),r(t,"xmlns","http://www.w3.org/2000/svg"),r(t,"class","h-5 w-5"),r(t,"fill","none"),r(t,"viewBox","0 0 24 24"),r(t,"stroke","currentColor"),r(i,"class","btm-nav-label text-xs svelte-n36fz9"),r(e,"href",ne+"/admin"),r(e,"class","text-base-content/70 hover:text-primary transition-colors svelte-n36fz9"),r(e,"aria-label","Go to admin"),r(e,"aria-current",o=s[2]?"page":void 0),se(e,"active",s[2])},m(h,m){z(h,e,m),u(e,t),u(t,l),u(t,n),u(e,a),u(e,i)},p(h,m){m&4&&o!==(o=h[2]?"page":void 0)&&r(e,"aria-current",o),m&4&&se(e,"active",h[2])},d(h){h&&f(e)}}}function Qr(s){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"></path></svg> <span class="btm-nav-label text-xs svelte-n36fz9">Zones</span>',n,a,i,c,o,h,m="Chat",g,v,p,d,b,_,y,M="Messages",T,B,A,E,I='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="btm-nav-label text-xs svelte-n36fz9">Profile</span>',x,S,P=s[5]&&ss(s);return{c(){e=w("nav"),t=w("button"),t.innerHTML=l,n=N(),a=w("a"),i=K("svg"),c=K("path"),o=N(),h=w("span"),h.textContent=m,v=N(),p=w("a"),d=K("svg"),b=K("path"),_=N(),y=w("span"),y.textContent=M,B=N(),P&&P.c(),A=N(),E=w("button"),E.innerHTML=I,this.h()},l(V){e=k(V,"NAV",{class:!0,role:!0,"aria-label":!0});var j=C(e);t=k(j,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(t)!=="svelte-hm2x7o"&&(t.innerHTML=l),n=L(j),a=k(j,"A",{href:!0,class:!0,"aria-label":!0,"aria-current":!0});var H=C(a);i=q(H,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var D=C(i);c=q(D,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(c).forEach(f),D.forEach(f),o=L(H),h=k(H,"SPAN",{class:!0,"data-svelte-h":!0}),W(h)!=="svelte-l9jizu"&&(h.textContent=m),H.forEach(f),v=L(j),p=k(j,"A",{href:!0,class:!0,"aria-label":!0,"aria-current":!0});var U=C(p);d=q(U,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var R=C(d);b=q(R,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(b).forEach(f),R.forEach(f),_=L(U),y=k(U,"SPAN",{class:!0,"data-svelte-h":!0}),W(y)!=="svelte-17o0txo"&&(y.textContent=M),U.forEach(f),B=L(j),P&&P.l(j),A=L(j),E=k(j,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(E)!=="svelte-149yiy8"&&(E.innerHTML=I),j.forEach(f),this.h()},h(){r(t,"class","text-base-content/70 hover:text-primary transition-colors svelte-n36fz9"),r(t,"aria-label","Open zones menu"),se(t,"active",!1),r(c,"stroke-linecap","round"),r(c,"stroke-linejoin","round"),r(c,"stroke-width","2"),r(c,"d","M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"),r(i,"xmlns","http://www.w3.org/2000/svg"),r(i,"class","h-5 w-5"),r(i,"fill","none"),r(i,"viewBox","0 0 24 24"),r(i,"stroke","currentColor"),r(h,"class","btm-nav-label text-xs svelte-n36fz9"),r(a,"href",ne+"/chat"),r(a,"class","text-base-content/70 hover:text-primary transition-colors svelte-n36fz9"),r(a,"aria-label","Go to channels"),r(a,"aria-current",g=s[4]?"page":void 0),se(a,"active",s[4]),r(b,"stroke-linecap","round"),r(b,"stroke-linejoin","round"),r(b,"stroke-width","2"),r(b,"d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"),r(d,"xmlns","http://www.w3.org/2000/svg"),r(d,"class","h-5 w-5"),r(d,"fill","none"),r(d,"viewBox","0 0 24 24"),r(d,"stroke","currentColor"),r(y,"class","btm-nav-label text-xs svelte-n36fz9"),r(p,"href",ne+"/dm"),r(p,"class","text-base-content/70 hover:text-primary transition-colors svelte-n36fz9"),r(p,"aria-label","Go to direct messages"),r(p,"aria-current",T=s[3]?"page":void 0),se(p,"active",s[3]),r(E,"class","text-base-content/70 hover:text-primary transition-colors svelte-n36fz9"),r(E,"aria-label","Open profile"),r(e,"class","btm-nav btm-nav-md bg-base-200 border-t border-base-300 md:hidden z-40 svelte-n36fz9"),r(e,"role","navigation"),r(e,"aria-label","Mobile navigation")},m(V,j){z(V,e,j),u(e,t),u(e,n),u(e,a),u(a,i),u(i,c),u(a,o),u(a,h),u(e,v),u(e,p),u(p,d),u(d,b),u(p,_),u(p,y),u(e,B),P&&P.m(e,null),u(e,A),u(e,E),x||(S=[Z(t,"click",function(){nt(s[0])&&s[0].apply(this,arguments)}),Z(E,"click",function(){nt(s[1])&&s[1].apply(this,arguments)})],x=!0)},p(V,[j]){s=V,j&16&&g!==(g=s[4]?"page":void 0)&&r(a,"aria-current",g),j&16&&se(a,"active",s[4]),j&8&&T!==(T=s[3]?"page":void 0)&&r(p,"aria-current",T),j&8&&se(p,"active",s[3]),s[5]?P?P.p(s,j):(P=ss(s),P.c(),P.m(e,A)):P&&(P.d(1),P=null)},i:pe,o:pe,d(V){V&&f(e),P&&P.d(),x=!1,De(S)}}}function Xr(s,e,t){let l,n,a,i,c;ve(s,Dt,m=>t(6,i=m)),ve(s,Ds,m=>t(5,c=m));let{onZonesClick:o}=e,{onProfileClick:h}=e;return s.$$set=m=>{"onZonesClick"in m&&t(0,o=m.onZonesClick),"onProfileClick"in m&&t(1,h=m.onProfileClick)},s.$$.update=()=>{s.$$.dirty&64&&t(4,l=i.url.pathname.startsWith(`${ne}/chat`)||i.url.pathname.match(new RegExp(`^${ne}/[^/]+/[^/]+$`))),s.$$.dirty&64&&t(3,n=i.url.pathname.startsWith(`${ne}/dm`)),s.$$.dirty&64&&t(2,a=i.url.pathname===`${ne}/admin`)},[o,h,a,n,l,c,i]}class $r extends He{constructor(e){super(),Oe(this,e,Xr,Qr,Pe,{onZonesClick:0,onProfileClick:1})}}function ns(s,e,t){const l=s.slice();l[17]=e[t];const n=sa(l[17]);l[18]=n;const a=l[5](l[17]);l[19]=a;const i=l[17].branding?.displayName||l[17].name;l[20]=i;const c=l[3]===l[17].id;return l[21]=c,l}function rs(s,e,t){const l=s.slice();l[24]=e[t];const n=l[2]===l[24].id&&l[3]===l[17].id;return l[25]=n,l}function as(s){let e,t,l,n,a,i='<div class="w-12 h-1.5 bg-base-content/20 rounded-full"></div>',c,o,h,m="Zones",g,v,p='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',d,b,_,y,M,T,B,A=Ue(s[4]),E=[];for(let x=0;x<A.length;x+=1)E[x]=us(ns(s,A,x));let I=s[4].length===0&&fs();return{c(){e=w("div"),l=N(),n=w("div"),a=w("div"),a.innerHTML=i,c=N(),o=w("div"),h=w("h2"),h.textContent=m,g=N(),v=w("button"),v.innerHTML=p,d=N(),b=w("div");for(let x=0;x<E.length;x+=1)E[x].c();_=N(),I&&I.c(),this.h()},l(x){e=k(x,"DIV",{class:!0,role:!0,tabindex:!0,"aria-label":!0}),C(e).forEach(f),l=L(x),n=k(x,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-label":!0});var S=C(n);a=k(S,"DIV",{class:!0,"data-svelte-h":!0}),W(a)!=="svelte-bwejfd"&&(a.innerHTML=i),c=L(S),o=k(S,"DIV",{class:!0});var P=C(o);h=k(P,"H2",{class:!0,"data-svelte-h":!0}),W(h)!=="svelte-dnbrc"&&(h.textContent=m),g=L(P),v=k(P,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(v)!=="svelte-c6sszy"&&(v.innerHTML=p),P.forEach(f),d=L(S),b=k(S,"DIV",{class:!0});var V=C(b);for(let j=0;j<E.length;j+=1)E[j].l(V);_=L(V),I&&I.l(V),V.forEach(f),S.forEach(f),this.h()},h(){r(e,"class","fixed inset-0 bg-black/50 z-50 md:hidden"),r(e,"role","button"),r(e,"tabindex","0"),r(e,"aria-label","Close zones drawer"),r(a,"class","flex justify-center py-3"),r(h,"class","text-lg font-bold"),r(v,"class","btn btn-ghost btn-sm btn-circle"),r(v,"aria-label","Close"),r(o,"class","flex items-center justify-between px-4 pb-3 border-b border-base-300"),r(b,"class","overflow-y-auto flex-1 px-2 py-3 pb-safe svelte-12n8t3o"),r(n,"class","fixed inset-x-0 bottom-0 z-50 bg-base-100 rounded-t-2xl shadow-2xl md:hidden max-h-[80vh] flex flex-col"),r(n,"role","dialog"),r(n,"aria-modal","true"),r(n,"aria-label","Zones navigation")},m(x,S){z(x,e,S),z(x,l,S),z(x,n,S),u(n,a),u(n,c),u(n,o),u(o,h),u(o,g),u(o,v),u(n,d),u(n,b);for(let P=0;P<E.length;P+=1)E[P]&&E[P].m(b,null);u(b,_),I&&I.m(b,null),M=!0,T||(B=[Z(e,"click",s[7]),Z(e,"keydown",s[13]),Z(v,"click",function(){nt(s[1])&&s[1].apply(this,arguments)})],T=!0)},p(x,S){if(s=x,S&124){A=Ue(s[4]);let P;for(P=0;P<A.length;P+=1){const V=ns(s,A,P);E[P]?E[P].p(V,S):(E[P]=us(V),E[P].c(),E[P].m(b,_))}for(;P<E.length;P+=1)E[P].d(1);E.length=A.length}s[4].length===0?I||(I=fs(),I.c(),I.m(b,null)):I&&(I.d(1),I=null)},i(x){M||(x&&ft(()=>{M&&(t||(t=Ve(e,dt,{duration:200},!0)),t.run(1))}),x&&ft(()=>{M&&(y||(y=Ve(n,Lt,{y:300,duration:300},!0)),y.run(1))}),M=!0)},o(x){x&&(t||(t=Ve(e,dt,{duration:200},!1)),t.run(0)),x&&(y||(y=Ve(n,Lt,{y:300,duration:300},!1)),y.run(0)),M=!1},d(x){x&&(f(e),f(l),f(n)),x&&t&&t.end(),Cs(E,x),I&&I.d(),x&&y&&y.end(),T=!1,De(B)}}}function ea(s){let e,t="",l,n,a=s[20]+"",i,c,o,h="Locked";return{c(){e=w("span"),e.textContent=t,l=N(),n=w("span"),i=J(a),c=N(),o=w("span"),o.textContent=h,this.h()},l(m){e=k(m,"SPAN",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-a7658i"&&(e.textContent=t),l=L(m),n=k(m,"SPAN",{class:!0});var g=C(n);i=Y(g,a),g.forEach(f),c=L(m),o=k(m,"SPAN",{class:!0,"data-svelte-h":!0}),W(o)!=="svelte-ol6ij"&&(o.textContent=h),this.h()},h(){r(e,"class","text-xl"),r(n,"class","font-semibold text-base-content/50"),r(o,"class","badge badge-xs badge-ghost ml-auto")},m(m,g){z(m,e,g),z(m,l,g),z(m,n,g),u(n,i),z(m,c,g),z(m,o,g)},p(m,g){g&16&&a!==(a=m[20]+"")&&he(i,a)},d(m){m&&(f(e),f(l),f(n),f(c),f(o))}}}function ta(s){let e,t=s[17].icon+"",l,n,a,i=s[20]+"",c;return{c(){e=w("span"),l=J(t),n=N(),a=w("span"),c=J(i),this.h()},l(o){e=k(o,"SPAN",{class:!0,style:!0});var h=C(e);l=Y(h,t),h.forEach(f),n=L(o),a=k(o,"SPAN",{class:!0});var m=C(a);c=Y(m,i),m.forEach(f),this.h()},h(){r(e,"class","text-xl"),$e(e,"color",s[18]),r(a,"class","font-semibold")},m(o,h){z(o,e,h),u(e,l),z(o,n,h),z(o,a,h),u(a,c)},p(o,h){h&16&&t!==(t=o[17].icon+"")&&he(l,t),h&16&&$e(e,"color",o[18]),h&16&&i!==(i=o[20]+"")&&he(c,i)},d(o){o&&(f(e),f(n),f(a))}}}function is(s){let e,t=Ue(s[17].sections),l=[];for(let n=0;n<t.length;n+=1)l[n]=cs(rs(s,t,n));return{c(){e=w("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=k(n,"UL",{class:!0});var a=C(e);for(let i=0;i<l.length;i+=1)l[i].l(a);a.forEach(f),this.h()},h(){r(e,"class","ml-6 mt-1 space-y-1")},m(n,a){z(n,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(n,a){if(a&92){t=Ue(n[17].sections);let i;for(i=0;i<t.length;i+=1){const c=rs(n,t,i);l[i]?l[i].p(c,a):(l[i]=cs(c),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},d(n){n&&f(e),Cs(l,n)}}}function os(s){let e,t;return{c(){e=K("svg"),t=K("path"),this.h()},l(l){e=q(l,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var n=C(e);t=q(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(t).forEach(f),n.forEach(f),this.h()},h(){r(t,"stroke-linecap","round"),r(t,"stroke-linejoin","round"),r(t,"stroke-width","2"),r(t,"d","M5 13l4 4L19 7"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"class","h-4 w-4"),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"stroke","currentColor")},m(l,n){z(l,e,n),u(e,t)},d(l){l&&f(e)}}}function cs(s){let e,t,l,n=s[24].icon+"",a,i,c,o=s[24].name+"",h,m,g,v,p,d,b=s[25]&&os();return{c(){e=w("li"),t=w("a"),l=w("span"),a=J(n),i=N(),c=w("span"),h=J(o),m=N(),b&&b.c(),this.h()},l(_){e=k(_,"LI",{});var y=C(e);t=k(y,"A",{href:!0,class:!0});var M=C(t);l=k(M,"SPAN",{class:!0});var T=C(l);a=Y(T,n),T.forEach(f),i=L(M),c=k(M,"SPAN",{class:!0});var B=C(c);h=Y(B,o),B.forEach(f),m=L(M),b&&b.l(M),M.forEach(f),y.forEach(f),this.h()},h(){r(l,"class","text-lg"),r(c,"class","flex-1"),r(t,"href",g=ne+"/"+s[17].id+"/"+s[24].id),r(t,"class",v="flex items-center gap-2 px-3 py-2.5 rounded-lg transition-colors "+(s[25]?"bg-primary/10 text-primary":""))},m(_,y){z(_,e,y),u(e,t),u(t,l),u(l,a),u(t,i),u(t,c),u(c,h),u(t,m),b&&b.m(t,null),p||(d=Z(t,"click",s[6]),p=!0)},p(_,y){y&16&&n!==(n=_[24].icon+"")&&he(a,n),y&16&&o!==(o=_[24].name+"")&&he(h,o),_[25]?b||(b=os(),b.c(),b.m(t,null)):b&&(b.d(1),b=null),y&16&&g!==(g=ne+"/"+_[17].id+"/"+_[24].id)&&r(t,"href",g),y&28&&v!==(v="flex items-center gap-2 px-3 py-2.5 rounded-lg transition-colors "+(_[25]?"bg-primary/10 text-primary":""))&&r(t,"class",v)},d(_){_&&f(e),b&&b.d(),p=!1,d()}}}function us(s){let e,t,l,n;function a(h,m){return h[19]?ta:ea}let i=a(s),c=i(s),o=s[19]&&is(s);return{c(){e=w("div"),t=w("div"),c.c(),n=N(),o&&o.c(),this.h()},l(h){e=k(h,"DIV",{class:!0});var m=C(e);t=k(m,"DIV",{class:!0,style:!0});var g=C(t);c.l(g),g.forEach(f),n=L(m),o&&o.l(m),m.forEach(f),this.h()},h(){r(t,"class","flex items-center gap-3 px-3 py-2 rounded-lg"),r(t,"style",l=s[21]&&s[19]?`border-left: 3px solid ${s[18]};`:""),se(t,"bg-base-200",s[21]&&s[19]),se(t,"opacity-50",!s[19]),r(e,"class","mb-3")},m(h,m){z(h,e,m),u(e,t),c.m(t,null),u(e,n),o&&o.m(e,null)},p(h,m){i===(i=a(h))&&c?c.p(h,m):(c.d(1),c=i(h),c&&(c.c(),c.m(t,null))),m&24&&l!==(l=h[21]&&h[19]?`border-left: 3px solid ${h[18]};`:"")&&r(t,"style",l),m&56&&se(t,"bg-base-200",h[21]&&h[19]),m&48&&se(t,"opacity-50",!h[19]),h[19]?o?o.p(h,m):(o=is(h),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(h){h&&f(e),c.d(),o&&o.d()}}}function fs(s){let e,t='<p>No zones available</p> <p class="text-sm mt-1">Contact admin for access</p>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(l){e=k(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-shlctw"&&(e.innerHTML=t),this.h()},h(){r(e,"class","text-center py-8 text-base-content/50")},m(l,n){z(l,e,n)},d(l){l&&f(e)}}}function la(s){let e,t,l,n=s[0]&&as(s);return{c(){n&&n.c(),e=ke()},l(a){n&&n.l(a),e=ke()},m(a,i){n&&n.m(a,i),z(a,e,i),t||(l=Z(window,"keydown",s[8]),t=!0)},p(a,[i]){a[0]?n?(n.p(a,i),i&1&&te(n,1)):(n=as(a),n.c(),te(n,1),n.m(e.parentNode,e)):n&&(Ie(),ae(n,1,1,()=>{n=null}),Te())},i(a){te(n)},o(a){ae(n)},d(a){a&&f(e),n&&n.d(a),t=!1,l()}}}function sa(s){return s.branding?.primaryColor||s.ui?.color||"#6366f1"}function na(s,e,t){let l,n,a,i,c,o,h,m,g,v;ve(s,Dt,B=>t(10,m=B)),ve(s,tl,B=>t(11,g=B)),ve(s,zs,B=>t(12,v=B));let{isOpen:p=!1}=e,{onClose:d}=e;function b(B){if(a)return!0;if(!i)return!1;const A=B.access?.visibleToCohorts||[],E=B.access?.hiddenFromCohorts||[];if(A.length===0&&E.length===0)return!0;const I=n;return E.some(x=>I.includes(x))?!1:A.length===0?!0:A.some(x=>I.includes(x)||x==="cross-access")}function _(){d()}function y(){d()}function M(B){B.key==="Escape"&&d()}const T=B=>B.key==="Enter"&&y();return s.$$set=B=>{"isOpen"in B&&t(0,p=B.isOpen),"onClose"in B&&t(1,d=B.onClose)},s.$$.update=()=>{s.$$.dirty&6144&&(n=v?.cohorts??g.profile?.cohorts??[]),s.$$.dirty&6144&&(a=v?.isAdmin??g.profile?.isAdmin??!1),s.$$.dirty&6144&&(i=v?.isWhitelisted??g.profile?.isApproved??!1),s.$$.dirty&1024&&t(9,c=m.url.pathname.replace(ne,"").split("/").filter(Boolean)),s.$$.dirty&512&&t(3,o=c[0]||null),s.$$.dirty&512&&t(2,h=c[1]||null)},t(4,l=Ns()),[p,d,h,o,l,b,_,y,M,c,m,g,v,T]}class ra extends He{constructor(e){super(),Oe(this,e,na,la,Pe,{isOpen:0,onClose:1})}}const{document:Jt}=Is;function ds(s){let e,t,l,n,a,i,c,o,h,m,g,v="Install",p,d,b="Dismiss",_,y;return{c(){e=w("div"),t=K("svg"),l=K("path"),n=N(),a=w("span"),i=J("Install "),c=J(s[19]),o=J(" app for offline access"),h=N(),m=w("div"),g=w("button"),g.textContent=v,p=N(),d=w("button"),d.textContent=b,this.h()},l(M){e=k(M,"DIV",{class:!0,role:!0,"aria-live":!0});var T=C(e);t=q(T,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0,"aria-hidden":!0});var B=C(t);l=q(B,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(l).forEach(f),B.forEach(f),n=L(T),a=k(T,"SPAN",{});var A=C(a);i=Y(A,"Install "),c=Y(A,s[19]),o=Y(A," app for offline access"),A.forEach(f),h=L(T),m=k(T,"DIV",{class:!0});var E=C(m);g=k(E,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(g)!=="svelte-1ae1y8b"&&(g.textContent=v),p=L(E),d=k(E,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(d)!=="svelte-1kwyjeb"&&(d.textContent=b),E.forEach(f),T.forEach(f),this.h()},h(){r(l,"stroke-linecap","round"),r(l,"stroke-linejoin","round"),r(l,"stroke-width","2"),r(l,"d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),r(t,"xmlns","http://www.w3.org/2000/svg"),r(t,"fill","none"),r(t,"viewBox","0 0 24 24"),r(t,"class","stroke-current shrink-0 w-6 h-6"),r(t,"aria-hidden","true"),r(g,"class","btn btn-sm btn-primary"),r(g,"aria-label","Install application"),r(d,"class","btn btn-sm btn-ghost"),r(d,"aria-label","Dismiss install banner"),r(m,"class","flex gap-2"),r(e,"class","alert alert-info fixed top-0 left-0 right-0 z-50 rounded-none"),r(e,"role","banner"),r(e,"aria-live","polite")},m(M,T){z(M,e,T),u(e,t),u(t,l),u(e,n),u(e,a),u(a,i),u(a,c),u(a,o),u(e,h),u(e,m),u(m,g),u(m,p),u(m,d),_||(y=[Z(g,"click",s[23]),Z(d,"click",s[22])],_=!0)},p:pe,d(M){M&&f(e),_=!1,De(y)}}}function hs(s){let e,t,l,n,a,i="A new version is available",c,o,h="Update Now",m,g;return{c(){e=w("div"),t=K("svg"),l=K("path"),n=N(),a=w("span"),a.textContent=i,c=N(),o=w("button"),o.textContent=h,this.h()},l(v){e=k(v,"DIV",{class:!0,role:!0,"aria-live":!0});var p=C(e);t=q(p,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0,"aria-hidden":!0});var d=C(t);l=q(d,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(l).forEach(f),d.forEach(f),n=L(p),a=k(p,"SPAN",{"data-svelte-h":!0}),W(a)!=="svelte-1sypjsy"&&(a.textContent=i),c=L(p),o=k(p,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(o)!=="svelte-rjtxgf"&&(o.textContent=h),p.forEach(f),this.h()},h(){r(l,"stroke-linecap","round"),r(l,"stroke-linejoin","round"),r(l,"stroke-width","2"),r(l,"d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"),r(t,"xmlns","http://www.w3.org/2000/svg"),r(t,"fill","none"),r(t,"viewBox","0 0 24 24"),r(t,"class","stroke-current shrink-0 w-6 h-6"),r(t,"aria-hidden","true"),r(o,"class","btn btn-sm btn-warning"),r(o,"aria-label","Update application now"),r(e,"class","alert alert-warning fixed top-0 left-0 right-0 z-50 rounded-none"),r(e,"role","banner"),r(e,"aria-live","polite")},m(v,p){z(v,e,p),u(e,t),u(t,l),u(e,n),u(e,a),u(e,c),u(e,o),m||(g=Z(o,"click",s[24]),m=!0)},p:pe,d(v){v&&f(e),m=!1,g()}}}function ps(s){let e,t,l,n,a,i,c=s[16]>0&&ms(s);return{c(){e=w("div"),t=K("svg"),l=K("path"),n=N(),a=w("span"),i=J(`You're offline. Messages will be queued.
			`),c&&c.c(),this.h()},l(o){e=k(o,"DIV",{class:!0,role:!0,"aria-live":!0});var h=C(e);t=q(h,"svg",{xmlns:!0,fill:!0,viewBox:!0,class:!0,"aria-hidden":!0});var m=C(t);l=q(m,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(l).forEach(f),m.forEach(f),n=L(h),a=k(h,"SPAN",{});var g=C(a);i=Y(g,`You're offline. Messages will be queued.
			`),c&&c.l(g),g.forEach(f),h.forEach(f),this.h()},h(){r(l,"stroke-linecap","round"),r(l,"stroke-linejoin","round"),r(l,"stroke-width","2"),r(l,"d","M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"),r(t,"xmlns","http://www.w3.org/2000/svg"),r(t,"fill","none"),r(t,"viewBox","0 0 24 24"),r(t,"class","stroke-current shrink-0 w-6 h-6"),r(t,"aria-hidden","true"),r(e,"class","alert alert-error fixed bottom-0 left-0 right-0 z-50 rounded-none"),r(e,"role","status"),r(e,"aria-live","assertive")},m(o,h){z(o,e,h),u(e,t),u(t,l),u(e,n),u(e,a),u(a,i),c&&c.m(a,null)},p(o,h){o[16]>0?c?c.p(o,h):(c=ms(o),c.c(),c.m(a,null)):c&&(c.d(1),c=null)},d(o){o&&f(e),c&&c.d()}}}function ms(s){let e,t,l;return{c(){e=J("("),t=J(s[16]),l=J(" queued)")},l(n){e=Y(n,"("),t=Y(n,s[16]),l=Y(n," queued)")},m(n,a){z(n,e,a),z(n,t,a),z(n,l,a)},p(n,a){a[0]&65536&&he(t,n[16])},d(n){n&&(f(e),f(t),f(l))}}}function aa(s){let e,t='<div class="loading loading-spinner loading-lg text-primary"></div> <span class="sr-only">Loading application...</span>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(l){e=k(l,"DIV",{class:!0,role:!0,"aria-live":!0,"aria-label":!0,"data-svelte-h":!0}),W(e)!=="svelte-1p40hns"&&(e.innerHTML=t),this.h()},h(){r(e,"class","flex items-center justify-center min-h-screen"),r(e,"role","status"),r(e,"aria-live","polite"),r(e,"aria-label","Loading application")},m(l,n){z(l,e,n)},p:pe,i:pe,o:pe,d(l){l&&f(e)}}}function ia(s){let e,t,l,n=s[0].url.pathname,a,i,c,o,h=s[14]&&s[1]&&vs(s),m=s[14]&&s[1]&&!s[7]&&bs(s),g=_s(s),v=s[14]&&s[1]&&s[7]&&ks(s),p=s[14]&&s[1]&&s[7]&&ws(s);return{c(){h&&h.c(),e=N(),t=w("div"),m&&m.c(),l=N(),g.c(),a=N(),v&&v.c(),i=N(),p&&p.c(),c=ke(),this.h()},l(d){h&&h.l(d),e=L(d),t=k(d,"DIV",{class:!0});var b=C(t);m&&m.l(b),l=L(b),g.l(b),b.forEach(f),a=L(d),v&&v.l(d),i=L(d),p&&p.l(d),c=ke(),this.h()},h(){r(t,"class","flex")},m(d,b){h&&h.m(d,b),z(d,e,b),z(d,t,b),m&&m.m(t,null),u(t,l),g.m(t,null),z(d,a,b),v&&v.m(d,b),z(d,i,b),p&&p.m(d,b),z(d,c,b),o=!0},p(d,b){d[14]&&d[1]?h?(h.p(d,b),b[0]&16386&&te(h,1)):(h=vs(d),h.c(),te(h,1),h.m(e.parentNode,e)):h&&(Ie(),ae(h,1,1,()=>{h=null}),Te()),d[14]&&d[1]&&!d[7]?m?(m.p(d,b),b[0]&16514&&te(m,1)):(m=bs(d),m.c(),te(m,1),m.m(t,l)):m&&(Ie(),ae(m,1,1,()=>{m=null}),Te()),b[0]&1&&Pe(n,n=d[0].url.pathname)?(Ie(),ae(g,1,1,pe),Te(),g=_s(d),g.c(),te(g,1),g.m(t,null)):g.p(d,b),d[14]&&d[1]&&d[7]?v?(v.p(d,b),b[0]&16514&&te(v,1)):(v=ks(d),v.c(),te(v,1),v.m(i.parentNode,i)):v&&(Ie(),ae(v,1,1,()=>{v=null}),Te()),d[14]&&d[1]&&d[7]?p?(p.p(d,b),b[0]&16514&&te(p,1)):(p=ws(d),p.c(),te(p,1),p.m(c.parentNode,c)):p&&(Ie(),ae(p,1,1,()=>{p=null}),Te())},i(d){o||(te(h),te(m),te(g),te(v),te(p),o=!0)},o(d){ae(h),ae(m),ae(g),ae(v),ae(p),o=!1},d(d){d&&(f(e),f(t),f(a),f(i),f(c)),h&&h.d(d),m&&m.d(),g.d(d),v&&v.d(d),p&&p.d(d)}}}function vs(s){let e,t;return e=new ar({props:{themePreference:s[3],onThemeToggle:s[20],onProfileClick:s[21]}}),{c(){Ne(e.$$.fragment)},l(l){Le(e.$$.fragment,l)},m(l,n){Se(e,l,n),t=!0},p(l,n){const a={};n[0]&8&&(a.themePreference=l[3]),e.$set(a)},i(l){t||(te(e.$$.fragment,l),t=!0)},o(l){ae(e.$$.fragment,l),t=!1},d(l){Be(e,l)}}}function bs(s){let e,t,l,n;t=new Jr({props:{currentCategoryId:s[13],currentSectionId:s[12],collapsed:s[9],onToggle:s[30]}});let a=s[17]&&gs(s);return{c(){e=w("aside"),Ne(t.$$.fragment),l=N(),a&&a.c(),this.h()},l(i){e=k(i,"ASIDE",{class:!0,style:!0,"aria-label":!0});var c=C(e);Le(t.$$.fragment,c),l=L(c),a&&a.l(c),c.forEach(f),this.h()},h(){r(e,"class","flex-shrink-0 flex flex-col border-r border-base-300 bg-base-100 overflow-y-auto"),$e(e,"max-height","calc(100vh - 64px)"),$e(e,"transition","width 0.3s ease-in-out"),r(e,"aria-label","Navigation sidebar"),se(e,"w-72",!s[9]||!s[10]),se(e,"w-16",s[9]&&s[10])},m(i,c){z(i,e,c),Se(t,e,null),u(e,l),a&&a.m(e,null),n=!0},p(i,c){const o={};c[0]&8192&&(o.currentCategoryId=i[13]),c[0]&4096&&(o.currentSectionId=i[12]),c[0]&512&&(o.collapsed=i[9]),c[0]&512&&(o.onToggle=i[30]),t.$set(o),i[17]?a?(a.p(i,c),c[0]&131072&&te(a,1)):(a=gs(i),a.c(),te(a,1),a.m(e,null)):a&&(Ie(),ae(a,1,1,()=>{a=null}),Te()),(!n||c[0]&1536)&&se(e,"w-72",!i[9]||!i[10]),(!n||c[0]&1536)&&se(e,"w-16",i[9]&&i[10])},i(i){n||(te(t.$$.fragment,i),te(a),n=!0)},o(i){ae(t.$$.fragment,i),ae(a),n=!1},d(i){i&&f(e),Be(t),a&&a.d()}}}function gs(s){let e,t,l;return t=new mn({props:{isExpanded:!s[10],isVisible:s[17],onToggle:s[31],compact:!0}}),{c(){e=w("div"),Ne(t.$$.fragment),this.h()},l(n){e=k(n,"DIV",{class:!0});var a=C(e);Le(t.$$.fragment,a),a.forEach(f),this.h()},h(){r(e,"class","border-t border-base-300")},m(n,a){z(n,e,a),Se(t,e,null),l=!0},p(n,a){const i={};a[0]&1024&&(i.isExpanded=!n[10]),a[0]&131072&&(i.isVisible=n[17]),a[0]&1024&&(i.onToggle=n[31]),t.$set(i)},i(n){l||(te(t.$$.fragment,n),l=!0)},o(n){ae(t.$$.fragment,n),l=!1},d(n){n&&f(e),Be(t)}}}function _s(s){let e,t,l,n,a;const i=s[28].default,c=qs(i,s,s[27],null);return{c(){e=w("main"),c&&c.c(),this.h()},l(o){e=k(o,"MAIN",{id:!0,role:!0,tabindex:!0,class:!0});var h=C(e);c&&c.l(h),h.forEach(f),this.h()},h(){r(e,"id","main-content"),r(e,"role","main"),r(e,"tabindex","-1"),r(e,"class",t="flex-1 min-w-0 "+(s[7]&&s[14]&&s[1]?"pb-20":""))},m(o,h){z(o,e,h),c&&c.m(e,null),a=!0},p(o,h){c&&c.p&&(!a||h[0]&134217728)&&Ks(c,i,o,o[27],a?Gs(i,o[27],h,null):Zs(o[27]),null),(!a||h[0]&16514&&t!==(t="flex-1 min-w-0 "+(o[7]&&o[14]&&o[1]?"pb-20":"")))&&r(e,"class",t)},i(o){a||(te(c,o),o&&ft(()=>{a&&(n&&n.end(1),l=en(e,dt,{duration:150,delay:75}),l.start())}),a=!0)},o(o){ae(c,o),l&&l.invalidate(),o&&(n=$s(e,dt,{duration:75})),a=!1},d(o){o&&f(e),c&&c.d(o),o&&n&&n.end()}}}function ks(s){let e,t,l;function n(i){s[32](i)}let a={};return s[8]!==void 0&&(a.isOpen=s[8]),e=new pn({props:a}),Xt.push(()=>Ms(e,"isOpen",n)),{c(){Ne(e.$$.fragment)},l(i){Le(e.$$.fragment,i)},m(i,c){Se(e,i,c),l=!0},p(i,c){const o={};!t&&c[0]&256&&(t=!0,o.isOpen=i[8],Es(()=>t=!1)),e.$set(o)},i(i){l||(te(e.$$.fragment,i),l=!0)},o(i){ae(e.$$.fragment,i),l=!1},d(i){Be(e,i)}}}function ws(s){let e,t,l,n;return e=new $r({props:{onZonesClick:s[33],onProfileClick:s[21]}}),l=new ra({props:{isOpen:s[11],onClose:s[34]}}),{c(){Ne(e.$$.fragment),t=N(),Ne(l.$$.fragment)},l(a){Le(e.$$.fragment,a),t=L(a),Le(l.$$.fragment,a)},m(a,i){Se(e,a,i),z(a,t,i),Se(l,a,i),n=!0},p(a,i){const c={};i[0]&2048&&(c.onZonesClick=a[33]),e.$set(c);const o={};i[0]&2048&&(o.isOpen=a[11]),i[0]&2048&&(o.onClose=a[34]),l.$set(o)},i(a){n||(te(e.$$.fragment,a),te(l.$$.fragment,a),n=!0)},o(a){ae(e.$$.fragment,a),ae(l.$$.fragment,a),n=!1},d(a){a&&f(t),Be(e,a),Be(l,a)}}}function oa(s){let e,t,l,n="Skip to main content",a,i,c,o,h,m,g,v,p,d,b,_,y,M,T,B,A;Jt.title=e=s[18].name;let E=s[4]&&ds(s),I=s[5]&&hs(s),x=!s[15]&&ps(s);function S(D){s[29](D)}let P={};s[6]!==void 0&&(P.open=s[6]),h=new Vr({props:P}),Xt.push(()=>Ms(h,"open",S));const V=[ia,aa],j=[];function H(D,U){return D[2]?0:1}return p=H(s),d=j[p]=V[p](s),_=new Zn({}),M=new Xn({}),B=new tr({}),{c(){t=N(),l=w("a"),l.textContent=n,a=N(),E&&E.c(),i=N(),I&&I.c(),c=N(),x&&x.c(),o=N(),Ne(h.$$.fragment),g=N(),v=w("div"),d.c(),b=N(),Ne(_.$$.fragment),y=N(),Ne(M.$$.fragment),T=N(),Ne(B.$$.fragment),this.h()},l(D){Ws("svelte-vevsda",Jt.head).forEach(f),t=L(D),l=k(D,"A",{href:!0,class:!0,"data-svelte-h":!0}),W(l)!=="svelte-1i6h3li"&&(l.textContent=n),a=L(D),E&&E.l(D),i=L(D),I&&I.l(D),c=L(D),x&&x.l(D),o=L(D),Le(h.$$.fragment,D),g=L(D),v=k(D,"DIV",{class:!0});var R=C(v);d.l(R),R.forEach(f),b=L(D),Le(_.$$.fragment,D),y=L(D),Le(M.$$.fragment,D),T=L(D),Le(B.$$.fragment,D),this.h()},h(){r(l,"href","#main-content"),r(l,"class","skip-to-main svelte-cou32b"),r(v,"class","min-h-screen w-full transition-base")},m(D,U){z(D,t,U),z(D,l,U),z(D,a,U),E&&E.m(D,U),z(D,i,U),I&&I.m(D,U),z(D,c,U),x&&x.m(D,U),z(D,o,U),Se(h,D,U),z(D,g,U),z(D,v,U),j[p].m(v,null),z(D,b,U),Se(_,D,U),z(D,y,U),Se(M,D,U),z(D,T,U),Se(B,D,U),A=!0},p(D,U){(!A||U[0]&262144)&&e!==(e=D[18].name)&&(Jt.title=e),D[4]?E?E.p(D,U):(E=ds(D),E.c(),E.m(i.parentNode,i)):E&&(E.d(1),E=null),D[5]?I?I.p(D,U):(I=hs(D),I.c(),I.m(c.parentNode,c)):I&&(I.d(1),I=null),D[15]?x&&(x.d(1),x=null):x?x.p(D,U):(x=ps(D),x.c(),x.m(o.parentNode,o));const R={};!m&&U[0]&64&&(m=!0,R.open=D[6],Es(()=>m=!1)),h.$set(R);let le=p;p=H(D),p===le?j[p].p(D,U):(Ie(),ae(j[le],1,1,()=>{j[le]=null}),Te(),d=j[p],d?d.p(D,U):(d=j[p]=V[p](D),d.c()),te(d,1),d.m(v,null))},i(D){A||(te(h.$$.fragment,D),te(d),te(_.$$.fragment,D),te(M.$$.fragment,D),te(B.$$.fragment,D),A=!0)},o(D){ae(h.$$.fragment,D),ae(d),ae(_.$$.fragment,D),ae(M.$$.fragment,D),ae(B.$$.fragment,D),A=!1},d(D){D&&(f(t),f(l),f(a),f(i),f(c),f(o),f(g),f(v),f(b),f(y),f(T)),E&&E.d(D),I&&I.d(D),x&&x.d(D),Be(h,D),j[p].d(),Be(_,D),Be(M,D),Be(B,D)}}}function ca(s,e,t){let l,n,a,i,c,o,h,m,g;ve(s,Dt,O=>t(0,c=O)),ve(s,fn,O=>t(1,o=O)),ve(s,As,O=>t(15,h=O)),ve(s,dn,O=>t(16,m=O)),ve(s,vn,O=>t(17,g=O));let{$$slots:v={},$$scope:p}=e;const d=el(),b=d.name.split(" - ")[0];let _=!1,y="dark",M=!1,T=!1,B=!1,A,E=window.innerWidth<768,I=!1,x=!1,S=!0,P=!1;Ss.subscribe(O=>{t(4,M=O)}),cn.subscribe(O=>{t(5,T=O)}),Qt(()=>{t(2,_=!0);const O=sessionStorage.getItem("redirect");if(O){sessionStorage.removeItem("redirect");const X=ne||"/community";if(O.startsWith(X)&&O!==c.url.pathname){const ge=O.slice(X.length)||"/";tn(`${ne}${ge}`,{replaceState:!0})}}const $=localStorage.getItem("theme");t(3,y=$==="light"?"light":"dark"),document.documentElement.setAttribute("data-theme",y),Sn(),jn(),"Notification"in window&&Notification.permission==="default"&&Ps.requestPermission(),Rn();const Q=()=>{t(7,E=window.innerWidth<768)};return Q(),window.addEventListener("resize",Q),hn.fetchUpcomingEvents(14),()=>{window.removeEventListener("resize",Q)}}),ys(()=>{A&&(A(),t(25,A=void 0))});function V(){t(3,y=y==="dark"?"light":"dark"),document.documentElement.setAttribute("data-theme",y),localStorage.setItem("theme",y)}function j(){t(6,B=!B)}function H(){t(4,M=!1)}async function D(){await Ls()&&t(4,M=!1)}async function U(){await un()}function R(O){B=O,t(6,B)}const le=()=>t(9,x=!x),re=()=>t(10,S=!S);function F(O){I=O,t(8,I)}const ie=()=>t(11,P=!0),oe=()=>t(11,P=!1);return s.$$set=O=>{"$$scope"in O&&t(27,p=O.$$scope)},s.$$.update=()=>{s.$$.dirty[0]&1&&t(14,l=c.url.pathname!==`${ne}/`&&c.url.pathname!==ne&&c.url.pathname!==`${ne}/signup`&&c.url.pathname!==`${ne}/login`&&c.url.pathname!==`${ne}/pending`),s.$$.dirty[0]&1&&t(26,n=c.url.pathname.replace(ne,"").split("/").filter(Boolean)),s.$$.dirty[0]&67108864&&t(13,a=n[0]||null),s.$$.dirty[0]&67108864&&t(12,i=n[1]||null),s.$$.dirty[0]&33554434&&(o&&!A?t(25,A=Nt.start(()=>{ht.logout()})):!o&&A&&(A(),t(25,A=void 0),Nt.stop()))},[c,o,_,y,M,T,B,E,I,x,S,P,i,a,l,h,m,g,d,b,V,j,H,D,U,A,n,p,v,R,le,re,F,ie,oe]}class La extends He{constructor(e){super(),Oe(this,e,ca,oa,Pe,{},null,[-1,-1])}}export{La as component,Sa as universal};
