import{s as be,n as H,d,a as F,i as S,b as h,l as f,c as g,e as y,f as P,g as V,h as b,t as B,j as D,u as x,v as $,o as K,q as we,m as Ce,k as ee,p as Ee,x as de}from"../chunks/CwRy9Tox.js";import{S as ke,i as ye,t as N,a as z,c as ae,d as te,g as le,m as se,b as re,e as ne}from"../chunks/D-vqeeah.js";import{e as he,u as Se,o as Ie}from"../chunks/BFk-VQ8S.js";import{g as Ae}from"../chunks/ByVBgyHd.js";import{b as G}from"../chunks/C7Jxsl90.js";import{p as Ve}from"../chunks/CVHsNrOB.js";import{g as De,a as me,l as Me,c as qe}from"../chunks/CPJguzua.js";import{u as He}from"../chunks/BFkiipW6.js";import"../chunks/CsmHjMo3.js";import{B as je}from"../chunks/DqHqAuN1.js";import{Z as Pe}from"../chunks/DVsy3EiG.js";function Be(o){let e,t="Member";return{c(){e=b("span"),e.textContent=t,this.h()},l(s){e=g(s,"SPAN",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-1v9d0gj"&&(e.textContent=t),this.h()},h(){f(e,"class","badge badge-success badge-sm")},m(s,a){S(s,e,a)},d(s){s&&d(e)}}}function Te(o){let e,t="Pending";return{c(){e=b("span"),e.textContent=t,this.h()},l(s){e=g(s,"SPAN",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-t21kyt"&&(e.textContent=t),this.h()},h(){f(e,"class","badge badge-warning badge-sm")},m(s,a){S(s,e,a)},d(s){s&&d(e)}}}function _e(o){let e,t,s,a,r,i,l,n;return{c(){e=b("div"),t=b("span"),s=B(o[2]),a=B(" forums"),r=D(),i=b("span"),l=B(o[3]),n=B(" members"),this.h()},l(c){e=g(c,"DIV",{class:!0});var u=y(e);t=g(u,"SPAN",{});var v=y(t);s=P(v,o[2]),a=P(v," forums"),v.forEach(d),r=V(u),i=g(u,"SPAN",{});var p=y(i);l=P(p,o[3]),n=P(p," members"),p.forEach(d),u.forEach(d),this.h()},h(){f(e,"class","flex gap-4 mt-3 text-sm text-base-content/60")},m(c,u){S(c,e,u),h(e,t),h(t,s),h(t,a),h(e,r),h(e,i),h(i,l),h(i,n)},p(c,u){u&4&&F(s,c[2]),u&8&&F(l,c[3])},d(c){c&&d(e)}}}function pe(o){let e,t,s,a,r;return{c(){e=b("a"),t=$("svg"),s=$("path"),a=B(`
          Calendar`),this.h()},l(i){e=g(i,"A",{href:!0,class:!0});var l=y(e);t=x(l,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var n=y(t);s=x(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(s).forEach(d),n.forEach(d),a=P(l,`
          Calendar`),l.forEach(d),this.h()},h(){f(s,"stroke-linecap","round"),f(s,"stroke-linejoin","round"),f(s,"stroke-width","2"),f(s,"d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"class","h-4 w-4"),f(t,"fill","none"),f(t,"viewBox","0 0 24 24"),f(t,"stroke","currentColor"),f(e,"href",r=G+"/"+o[1]+"/"+o[0].id+"/calendar"),f(e,"class","btn btn-sm btn-outline btn-secondary")},m(i,l){S(i,e,l),h(e,t),h(t,s),h(e,a)},p(i,l){l&3&&r!==(r=G+"/"+i[1]+"/"+i[0].id+"/calendar")&&f(e,"href",r)},d(i){i&&d(e)}}}function Le(o){let e,t,s,a,r;return{c(){e=b("a"),t=$("svg"),s=$("path"),a=B(`
          Enter Section`),this.h()},l(i){e=g(i,"A",{href:!0,class:!0});var l=y(e);t=x(l,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var n=y(t);s=x(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(s).forEach(d),n.forEach(d),a=P(l,`
          Enter Section`),l.forEach(d),this.h()},h(){f(s,"stroke-linecap","round"),f(s,"stroke-linejoin","round"),f(s,"stroke-width","2"),f(s,"d","M13 7l5 5m0 0l-5 5m5-5H6"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"class","h-4 w-4"),f(t,"fill","none"),f(t,"viewBox","0 0 24 24"),f(t,"stroke","currentColor"),f(e,"href",r=G+"/"+o[1]+"/"+o[0].id),f(e,"class","btn btn-sm btn-primary")},m(i,l){S(i,e,l),h(e,t),h(t,s),h(e,a)},p(i,l){l&3&&r!==(r=G+"/"+i[1]+"/"+i[0].id)&&f(e,"href",r)},d(i){i&&d(e)}}}function Ne(o){let e,t=`<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
          Request Access`,s,a;return{c(){e=b("button"),e.innerHTML=t,this.h()},l(r){e=g(r,"BUTTON",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-7cuwrw"&&(e.innerHTML=t),this.h()},h(){f(e,"class","btn btn-sm btn-primary")},m(r,i){S(r,e,i),s||(a=we(e,"click",o[8]),s=!0)},p:H,d(r){r&&d(e),s=!1,a()}}}function ze(o){let e,t,s,a,r=o[0].icon+"",i,l,n,c,u,v=o[0].name+"",p,w,m,_,M=o[0].description+"",T,L,O,j,U;function oe(k,A){if(k[5])return Te;if(k[4])return Be}let R=oe(o),I=R&&R(o),C=o[0].showStats&&_e(o),E=o[6]&&pe(o);function ie(k,A){return k[7]?Ne:Le}let J=ie(o),q=J(o);return{c(){e=b("div"),t=b("div"),s=b("div"),a=b("div"),i=B(r),l=D(),n=b("div"),c=b("div"),u=b("h3"),p=B(v),w=D(),I&&I.c(),m=D(),_=b("p"),T=B(M),L=D(),C&&C.c(),O=D(),j=b("div"),E&&E.c(),U=D(),q.c(),this.h()},l(k){e=g(k,"DIV",{class:!0});var A=y(e);t=g(A,"DIV",{class:!0});var Z=y(t);s=g(Z,"DIV",{class:!0});var Q=y(s);a=g(Q,"DIV",{class:!0});var ce=y(a);i=P(ce,r),ce.forEach(d),l=V(Q),n=g(Q,"DIV",{class:!0});var W=y(n);c=g(W,"DIV",{class:!0});var X=y(c);u=g(X,"H3",{class:!0});var ue=y(u);p=P(ue,v),ue.forEach(d),w=V(X),I&&I.l(X),X.forEach(d),m=V(W),_=g(W,"P",{class:!0});var fe=y(_);T=P(fe,M),fe.forEach(d),W.forEach(d),Q.forEach(d),L=V(Z),C&&C.l(Z),O=V(Z),j=g(Z,"DIV",{class:!0});var Y=y(j);E&&E.l(Y),U=V(Y),q.l(Y),Y.forEach(d),Z.forEach(d),A.forEach(d),this.h()},h(){f(a,"class","text-3xl"),f(u,"class","font-bold text-lg"),f(c,"class","flex items-center gap-2"),f(_,"class","text-sm text-base-content/70 mt-1"),f(n,"class","flex-1"),f(s,"class","flex items-start gap-3"),f(j,"class","card-actions justify-end mt-3 gap-2"),f(t,"class","card-body p-4"),f(e,"class","card bg-base-100 shadow-md hover:shadow-lg transition-shadow")},m(k,A){S(k,e,A),h(e,t),h(t,s),h(s,a),h(a,i),h(s,l),h(s,n),h(n,c),h(c,u),h(u,p),h(c,w),I&&I.m(c,null),h(n,m),h(n,_),h(_,T),h(t,L),C&&C.m(t,null),h(t,O),h(t,j),E&&E.m(j,null),h(j,U),q.m(j,null)},p(k,[A]){A&1&&r!==(r=k[0].icon+"")&&F(i,r),A&1&&v!==(v=k[0].name+"")&&F(p,v),R!==(R=oe(k))&&(I&&I.d(1),I=R&&R(k),I&&(I.c(),I.m(c,null))),A&1&&M!==(M=k[0].description+"")&&F(T,M),k[0].showStats?C?C.p(k,A):(C=_e(k),C.c(),C.m(t,O)):C&&(C.d(1),C=null),k[6]?E?E.p(k,A):(E=pe(k),E.c(),E.m(j,U)):E&&(E.d(1),E=null),J===(J=ie(k))&&q?q.p(k,A):(q.d(1),q=J(k),q&&(q.c(),q.m(j,null)))},i:H,o:H,d(k){k&&d(e),I&&I.d(),C&&C.d(),E&&E.d(),q.d()}}}function Re(o,e,t){let s,a,r,i,{section:l}=e,{categoryId:n}=e,{channelCount:c=0}=e,{memberCount:u=0}=e,{accessStatus:v="none"}=e;function p(w){w.preventDefault(),w.stopPropagation();const m=new CustomEvent("request-access",{detail:{sectionId:l.id,categoryId:n},bubbles:!0});window.dispatchEvent(m)}return o.$$set=w=>{"section"in w&&t(0,l=w.section),"categoryId"in w&&t(1,n=w.categoryId),"channelCount"in w&&t(2,c=w.channelCount),"memberCount"in w&&t(3,u=w.memberCount),"accessStatus"in w&&t(9,v=w.accessStatus)},o.$$.update=()=>{o.$$.dirty&512&&t(4,s=v==="approved"),o.$$.dirty&512&&t(5,a=v==="pending"),o.$$.dirty&49&&t(7,r=l.access?.requiresApproval&&!s&&!a),o.$$.dirty&17&&t(6,i=!l.access?.requiresApproval||s&&l.calendar?.access!=="none")},[l,n,c,u,s,a,i,r,p,v]}class Ze extends ke{constructor(e){super(),ye(this,e,Re,ze,be,{section:0,categoryId:1,channelCount:2,memberCount:3,accessStatus:9})}}function ve(o,e,t){const s=o.slice();return s[12]=e[t],s}function Fe(o){let e,t,s,a,r,i,l,n,c,u;e=new je({props:{items:o[5]}}),a=new Pe({props:{category:o[1]}});const v=[Ue,Oe],p=[];function w(m,_){return m[4].length===0?0:1}return n=w(o),c=p[n]=v[n](o),{c(){ne(e.$$.fragment),t=D(),s=b("div"),ne(a.$$.fragment),r=D(),i=b("div"),l=D(),c.c(),this.h()},l(m){re(e.$$.fragment,m),t=V(m),s=g(m,"DIV",{class:!0});var _=y(s);re(a.$$.fragment,_),r=V(_),i=g(_,"DIV",{class:!0}),y(i).forEach(d),l=V(_),c.l(_),_.forEach(d),this.h()},h(){f(i,"class","divider"),f(s,"class","mt-6")},m(m,_){se(e,m,_),S(m,t,_),S(m,s,_),se(a,s,null),h(s,r),h(s,i),h(s,l),p[n].m(s,null),u=!0},p(m,_){const M={};_&32&&(M.items=m[5]),e.$set(M);const T={};_&2&&(T.category=m[1]),a.$set(T);let L=n;n=w(m),n===L?p[n].p(m,_):(le(),N(p[L],1,1,()=>{p[L]=null}),ae(),c=p[n],c?c.p(m,_):(c=p[n]=v[n](m),c.c()),z(c,1),c.m(s,null))},i(m){u||(z(e.$$.fragment,m),z(a.$$.fragment,m),z(c),u=!0)},o(m){N(e.$$.fragment,m),N(a.$$.fragment,m),N(c),u=!1},d(m){m&&(d(t),d(s)),te(e,m),te(a),p[n].d()}}}function Ge(o){let e,t,s,a,r,i="Go to Channels";return{c(){e=b("div"),t=b("span"),s=B(o[3]),a=D(),r=b("a"),r.textContent=i,this.h()},l(l){e=g(l,"DIV",{class:!0});var n=y(e);t=g(n,"SPAN",{});var c=y(t);s=P(c,o[3]),c.forEach(d),a=V(n),r=g(n,"A",{href:!0,class:!0,"data-svelte-h":!0}),K(r)!=="svelte-1l2l2pt"&&(r.textContent=i),n.forEach(d),this.h()},h(){f(r,"href",G+"/chat"),f(r,"class","btn btn-sm btn-ghost"),f(e,"class","alert alert-error")},m(l,n){S(l,e,n),h(e,t),h(t,s),h(e,a),h(e,r)},p(l,n){n&8&&F(s,l[3])},i:H,o:H,d(l){l&&d(e)}}}function Ke(o){let e,t='<span class="loading loading-spinner loading-lg text-primary"></span>';return{c(){e=b("div"),e.innerHTML=t,this.h()},l(s){e=g(s,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-f5e84o"&&(e.innerHTML=t),this.h()},h(){f(e,"class","flex justify-center items-center min-h-[400px]")},m(s,a){S(s,e,a)},p:H,i:H,o:H,d(s){s&&d(e)}}}function Oe(o){let e,t=[],s=new Map,a,r=he(o[4]);const i=l=>l[12].id;for(let l=0;l<r.length;l+=1){let n=ve(o,r,l),c=i(n);s.set(c,t[l]=ge(c,n))}return{c(){e=b("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=g(l,"DIV",{class:!0});var n=y(e);for(let c=0;c<t.length;c+=1)t[c].l(n);n.forEach(d),this.h()},h(){f(e,"class","grid grid-cols-1 md:grid-cols-2 gap-4")},m(l,n){S(l,e,n);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);a=!0},p(l,n){n&145&&(r=he(l[4]),le(),t=Se(t,n,i,1,l,r,s,e,Ie,ge,null,ve),ae())},i(l){if(!a){for(let n=0;n<r.length;n+=1)z(t[n]);a=!0}},o(l){for(let n=0;n<t.length;n+=1)N(t[n]);a=!1},d(l){l&&d(e);for(let n=0;n<t.length;n+=1)t[n].d()}}}function Ue(o){let e,t='<div class="card-body text-center"><p class="text-base-content/70">No sections in this category yet.</p></div>';return{c(){e=b("div"),e.innerHTML=t,this.h()},l(s){e=g(s,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-1rd54sq"&&(e.innerHTML=t),this.h()},h(){f(e,"class","card bg-base-200")},m(s,a){S(s,e,a)},p:H,i:H,o:H,d(s){s&&d(e)}}}function ge(o,e){let t,s,a;return s=new Ze({props:{section:e[12],categoryId:e[0],accessStatus:e[7](e[12])}}),{key:o,first:null,c(){t=de(),ne(s.$$.fragment),this.h()},l(r){t=de(),re(s.$$.fragment,r),this.h()},h(){this.first=t},m(r,i){S(r,t,i),se(s,r,i),a=!0},p(r,i){e=r;const l={};i&16&&(l.section=e[12]),i&1&&(l.categoryId=e[0]),i&16&&(l.accessStatus=e[7](e[12])),s.$set(l)},i(r){a||(z(s.$$.fragment,r),a=!0)},o(r){N(s.$$.fragment,r),a=!1},d(r){r&&d(t),te(s,r)}}}function Je(o){let e,t,s,a,r,i;document.title=e=(o[1]?.name??"Category")+" - "+o[6].name;const l=[Ke,Ge,Fe],n=[];function c(u,v){return u[2]?0:u[3]?1:u[1]?2:-1}return~(a=c(o))&&(r=n[a]=l[a](o)),{c(){t=D(),s=b("div"),r&&r.c(),this.h()},l(u){Ce("svelte-1a7jvag",document.head).forEach(d),t=V(u),s=g(u,"DIV",{class:!0});var p=y(s);r&&r.l(p),p.forEach(d),this.h()},h(){f(s,"class","container mx-auto p-4 max-w-6xl")},m(u,v){S(u,t,v),S(u,s,v),~a&&n[a].m(s,null),i=!0},p(u,[v]){(!i||v&66)&&e!==(e=(u[1]?.name??"Category")+" - "+u[6].name)&&(document.title=e);let p=a;a=c(u),a===p?~a&&n[a].p(u,v):(r&&(le(),N(n[p],1,1,()=>{n[p]=null}),ae()),~a?(r=n[a],r?r.p(u,v):(r=n[a]=l[a](u),r.c()),z(r,1),r.m(s,null)):r=null)},i(u){i||(z(r),i=!0)},o(u){N(r),i=!1},d(u){u&&(d(t),d(s)),~a&&n[a].d()}}}function Qe(o,e,t){let s,a,r,i,l,n,c,u;ee(o,me,_=>t(11,n=_)),ee(o,He,_=>t(8,c=_)),ee(o,Ve,_=>t(9,u=_));const v=De();let p=!0,w=null;function m(_){if(!_.access?.requiresApproval)return"approved";const M=_.access.requiredCohorts||[];if(M.length===0)return"approved";const T=l;return M.some(L=>T.includes(L))?"approved":"none"}return Ee(async()=>{if(await me.waitForReady(),!n.isAuthenticated||!n.publicKey){Ae(`${G}/`);return}a||t(3,w=`Category "${s}" not found`),t(2,p=!1)}),o.$$.update=()=>{o.$$.dirty&512&&t(0,s=u.params.category),o.$$.dirty&1&&t(1,a=Me(s)),o.$$.dirty&3&&t(5,r=a?qe(s):[]),o.$$.dirty&2&&t(4,i=a?.sections??[]),o.$$.dirty&256&&(l=c.profile?.cohorts||[])},[s,a,p,w,i,r,v,m,c,u]}class lt extends ke{constructor(e){super(),ye(this,e,Qe,Je,be,{})}}export{lt as component};
